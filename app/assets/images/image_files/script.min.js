if(!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){(function(c){var d,e=void 0!==c?c:"undefined"!=typeof window?window:{},f=a(1);"undefined"!=typeof document?d=document:(d=e["__GLOBAL_DOCUMENT_CACHE@4"])||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],3:[function(a,b,c){(function(a){var c;c="undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){!function(a){function c(){}function d(a,b){return function(){a.apply(b,arguments)}}function e(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],k(a,this)}function f(a,b){for(;3===a._state;)a=a._value;0!==a._state?(a._handled=!0,e._immediateFn(function(){var a=1===d._state?b.onFulfilled:b.onRejected;if(null!==a){var c;try{c=a(d._value)}catch(d){return void h(b.promise,d)}g(b.promise,c)}else(1===d._state?g:h)(b.promise,d._value)})):a._deferreds.push(b)}function g(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var c=b.then;if(b instanceof e)return a._state=3,a._value=b,void i(a);if("function"==typeof c)return void k(d(c,b),a)}a._state=1,a._value=b,i(a)}catch(b){h(a,b)}}function h(a,b){a._state=2,a._value=b,i(a)}function i(a){2===a._state&&0===a._deferreds.length&&e._immediateFn(function(){a._handled||e._unhandledRejectionFn(a._value)});for(var b=0,c=a._deferreds.length;c>b;b++)f(a,a._deferreds[b]);a._deferreds=null}function j(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function k(a,b){var c=!1;try{a(function(a){c||(c=!0,g(b,a))},function(a){c||(c=!0,h(b,a))})}catch(a){if(c)return;c=!0,h(b,a)}}var l=setTimeout;e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){var d=new this.constructor(c);return f(this,new j(a,b,d)),d},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(a,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var g=f.then;if("function"==typeof g)return void g.call(f,function(b){d(a,b)},c)}b[a]=f,0==--e&&h(b)}catch(h){c(h)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},e.resolve=function(a){return a&&"object"==typeof a&&a.constructor===e?a:new e(function(b){b(a)})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},e._immediateFn="function"==typeof setImmediate&&function(a){setImmediate(a)}||function(a){l(a,0)},e._unhandledRejectionFn=function(a){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)},e._setImmediateFn=function(a){e._immediateFn=a},e._setUnhandledRejectionFn=function(a){e._unhandledRejectionFn=a},void 0!==b&&b.exports?b.exports=e:a.Promise||(a.Promise=e)}(this)},{}],5:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=function(a){return a&&a.__esModule?a:{"default":a}}(a(7)),f=a(15),g=a(27),h={lang:"en",en:f.EN};h.language=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];if(null!==b&&void 0!==b&&b.length){if("string"!=typeof b[0])throw new TypeError("Language code must be a string value");if(!/^[a-z]{2,3}((\-|_)[a-z]{2})?$/i.test(b[0]))throw new TypeError("Language code must have format 2-3 letters and. optionally, hyphen, underscore followed by 2 more letters");h.lang=b[0],void 0===h[b[0]]?(b[1]=null!==b[1]&&void 0!==b[1]&&"object"===d(b[1])?b[1]:{},h[b[0]]=(0,g.isObjectEmpty)(b[1])?f.EN:b[1]):null!==b[1]&&void 0!==b[1]&&"object"===d(b[1])&&(h[b[0]]=b[1])}return h.lang},h.t=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof a&&a.length){var c=void 0,e=void 0,f=h.language(),i=function(a,b,c){return"object"!==(void 0===a?"undefined":d(a))||"number"!=typeof b||"number"!=typeof c?a:[function(){return arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 0===(arguments.length<=0?void 0:arguments[0])||1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:0!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])||11===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])||12===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])>2&&(arguments.length<=0?void 0:arguments[0])<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||(arguments.length<=0?void 0:arguments[0])%100>0&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])>=2&&(arguments.length<=0?void 0:arguments[0])<=4?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%100==1?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])%100==2?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])%100==3||(arguments.length<=0?void 0:arguments[0])%100==4?arguments.length<=4?void 0:arguments[4]:arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])>2&&(arguments.length<=0?void 0:arguments[0])<7?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])>6&&(arguments.length<=0?void 0:arguments[0])<11?arguments.length<=4?void 0:arguments[4]:arguments.length<=5?void 0:arguments[5]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])%100>=3&&(arguments.length<=0?void 0:arguments[0])%100<=10?arguments.length<=4?void 0:arguments[4]:(arguments.length<=0?void 0:arguments[0])%100>=11?arguments.length<=5?void 0:arguments[5]:arguments.length<=6?void 0:arguments[6]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||(arguments.length<=0?void 0:arguments[0])%100>1&&(arguments.length<=0?void 0:arguments[0])%100<11?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])%100>10&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10==2?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 11!==(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])%10==1?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:8!==(arguments.length<=0?void 0:arguments[0])&&11!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:3===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]}][c].apply(null,[b].concat(a))};return void 0!==h[f]&&(c=h[f][a],null!==b&&"number"==typeof b&&(e=h[f]["mejs.plural-form"],c=i.apply(null,[c,b,e]))),!c&&h.en&&(c=h.en[a],null!==b&&"number"==typeof b&&(e=h.en["mejs.plural-form"],c=i.apply(null,[c,b,e]))),c=c||a,null!==b&&"number"==typeof b&&(c=c.replace("%1",b)),(0,g.escapeHTML)(c)}return a},e["default"].i18n=h,"undefined"!=typeof mejsL10n&&e["default"].i18n.language(mejsL10n.language,mejsL10n.strings),c["default"]=h},{15:15,27:27,7:7}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=d(a(3)),h=d(a(2)),i=d(a(7)),j=a(27),k=a(28),l=a(8),m=a(25),n=function o(a,b,c){var d=this;e(this,o);var n=this;c=Array.isArray(c)?c:null,n.defaults={renderers:[],fakeNodeName:"mediaelementwrapper",pluginPath:"build/",shimScriptAccess:"sameDomain"},b=Object.assign(n.defaults,b),n.mediaElement=h["default"].createElement(b.fakeNodeName);var p=a,q=!1;if("string"==typeof a?n.mediaElement.originalNode=h["default"].getElementById(a):(n.mediaElement.originalNode=a,p=a.id),void 0===n.mediaElement.originalNode||null===n.mediaElement.originalNode)return null;n.mediaElement.options=b,p=p||"mejs_"+Math.random().toString().slice(2),n.mediaElement.originalNode.setAttribute("id",p+"_from_mejs");var r=n.mediaElement.originalNode.tagName.toLowerCase();["video","audio"].indexOf(r)>-1&&!n.mediaElement.originalNode.getAttribute("preload")&&n.mediaElement.originalNode.setAttribute("preload","none"),n.mediaElement.originalNode.parentNode.insertBefore(n.mediaElement,n.mediaElement.originalNode),n.mediaElement.appendChild(n.mediaElement.originalNode);var s=function(a,b){if("https:"===g["default"].location.protocol&&0===a.indexOf("http:")&&m.IS_IOS&&i["default"].html5media.mediaTypes.indexOf(b)>-1){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var b=(g["default"].URL||g["default"].webkitURL).createObjectURL(this.response);return n.mediaElement.originalNode.setAttribute("src",b),b}return a},c.open("GET",a),c.responseType="blob",c.send()}return a},t=void 0;if(null!==c)t=c;else if(null!==n.mediaElement.originalNode)switch(t=[],n.mediaElement.originalNode.nodeName.toLowerCase()){case"iframe":t.push({type:"",src:n.mediaElement.originalNode.getAttribute("src")});break;case"audio":case"video":var u=n.mediaElement.originalNode.children.length,v=n.mediaElement.originalNode.getAttribute("src");if(v){var w=n.mediaElement.originalNode,x=(0,k.formatType)(v,w.getAttribute("type"));t.push({type:x,src:s(v,x)})}for(var y=0;u>y;y++){var z=n.mediaElement.originalNode.children[y];if("source"===z.tagName.toLowerCase()){var A=z.getAttribute("src"),B=(0,k.formatType)(A,z.getAttribute("type"));t.push({type:B,src:s(A,B)})}}}n.mediaElement.id=p,n.mediaElement.renderers={},n.mediaElement.events={},n.mediaElement.promises=[],n.mediaElement.renderer=null,n.mediaElement.rendererName=null,n.mediaElement.changeRenderer=function(a,b){var c=d,e=Object.keys(b[0]).length>2?b[0]:b[0].src;if(void 0!==c.mediaElement.renderer&&null!==c.mediaElement.renderer&&c.mediaElement.renderer.name===a)return c.mediaElement.renderer.pause(),c.mediaElement.renderer.stop&&c.mediaElement.renderer.stop(),c.mediaElement.renderer.show(),c.mediaElement.renderer.setSrc(e),!0;void 0!==c.mediaElement.renderer&&null!==c.mediaElement.renderer&&(c.mediaElement.renderer.pause(),c.mediaElement.renderer.stop&&c.mediaElement.renderer.stop(),c.mediaElement.renderer.hide());var f=c.mediaElement.renderers[a],g=null;if(void 0!==f&&null!==f)return f.show(),f.setSrc(e),c.mediaElement.renderer=f,c.mediaElement.rendererName=a,!0;for(var h=c.mediaElement.options.renderers.length?c.mediaElement.options.renderers:l.renderer.order,i=0,j=h.length;j>i;i++){var k=h[i];if(k===a){g=l.renderer.renderers[k];var m=Object.assign(g.options,c.mediaElement.options);return f=g.create(c.mediaElement,m,b),f.name=a,c.mediaElement.renderers[g.name]=f,c.mediaElement.renderer=f,c.mediaElement.rendererName=a,f.show(),!0}}return!1},n.mediaElement.setSize=function(a,b){void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&n.mediaElement.renderer.setSize(a,b)},n.mediaElement.generateError=function(a,b){a=a||"",b=Array.isArray(b)?b:[];var c=(0,j.createEvent)("error",n.mediaElement);c.message=a,c.urls=b,n.mediaElement.dispatchEvent(c),q=!0};var C=i["default"].html5media.properties,D=i["default"].html5media.methods,E=function(a,b,c,d){var e=a[b];Object.defineProperty(a,b,{get:function(){return c.apply(a,[e])},set:function(b){return e=d.apply(a,[b])}})},F=function(){return void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer?n.mediaElement.renderer.getSrc():null},G=function(a){var b=[];if("string"==typeof a)b.push({src:a,type:a?(0,k.getTypeFromFile)(a):""});else if("object"===(void 0===a?"undefined":f(a))&&void 0!==a.src){var c=(0,k.absolutizeUrl)(a.src),d=a.type,e=Object.assign(a,{src:c,type:""!==d&&null!==d&&void 0!==d||!c?d:(0,k.getTypeFromFile)(c)});b.push(e)}else if(Array.isArray(a))for(var g=0,h=a.length;h>g;g++){var i=(0,k.absolutizeUrl)(a[g].src),m=a[g].type,o=Object.assign(a[g],{src:i,type:""!==m&&null!==m&&void 0!==m||!i?m:(0,k.getTypeFromFile)(i)});b.push(o)}var p=l.renderer.select(b,n.mediaElement.options.renderers.length?n.mediaElement.options.renderers:[]),q=void 0;return n.mediaElement.paused||(n.mediaElement.pause(),q=(0,j.createEvent)("pause",n.mediaElement),n.mediaElement.dispatchEvent(q)),n.mediaElement.originalNode.src=b[0].src||"",null===p&&b[0].src?void n.mediaElement.generateError("No renderer found",b):b[0].src?n.mediaElement.changeRenderer(p.rendererName,b):null},H=function(a,b){try{if("play"===a&&"native_dash"===n.mediaElement.rendererName){var c=n.mediaElement.renderer[a](b);c&&"function"==typeof c.then&&c["catch"](function(){n.mediaElement.paused&&setTimeout(function(){var a=n.mediaElement.renderer.play();void 0!==a&&a["catch"](function(){n.mediaElement.renderer.paused||n.mediaElement.renderer.pause()})},150)})}else n.mediaElement.renderer[a](b)}catch(a){n.mediaElement.generateError(a,t)}};E(n.mediaElement,"src",F,G),n.mediaElement.getSrc=F,n.mediaElement.setSrc=G;for(var I=0,J=C.length;J>I;I++)!function(a){if("src"!==a){var b=""+a.substring(0,1).toUpperCase()+a.substring(1),c=function(){return void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&"function"==typeof n.mediaElement.renderer["get"+b]?n.mediaElement.renderer["get"+b]():null},d=function(a){void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&"function"==typeof n.mediaElement.renderer["set"+b]&&n.mediaElement.renderer["set"+b](a)};E(n.mediaElement,a,c,d),n.mediaElement["get"+b]=c,n.mediaElement["set"+b]=d}}(C[I]);for(var K=0,L=D.length;L>K;K++)!function(a){n.mediaElement[a]=function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&"function"==typeof n.mediaElement.renderer[a]&&(n.mediaElement.promises.length?Promise.all(n.mediaElement.promises).then(function(){H(a,c)})["catch"](function(a){n.mediaElement.generateError(a,t)}):H(a,c)),null}}(D[K]);return n.mediaElement.addEventListener=function(a,b){n.mediaElement.events[a]=n.mediaElement.events[a]||[],n.mediaElement.events[a].push(b)},n.mediaElement.removeEventListener=function(a,b){if(!a)return n.mediaElement.events={},!0;var c=n.mediaElement.events[a];if(!c)return!0;if(!b)return n.mediaElement.events[a]=[],!0;for(var d=0;d<c.length;d++)if(c[d]===b)return n.mediaElement.events[a].splice(d,1),!0;return!1},n.mediaElement.dispatchEvent=function(a){var b=n.mediaElement.events[a.type];if(b)for(var c=0;c<b.length;c++)b[c].apply(null,[a])},t.length&&(n.mediaElement.src=t),n.mediaElement.promises.length?Promise.all(n.mediaElement.promises).then(function(){n.mediaElement.options.success&&n.mediaElement.options.success(n.mediaElement,n.mediaElement.originalNode)})["catch"](function(){q&&n.mediaElement.options.error&&n.mediaElement.options.error(n.mediaElement,n.mediaElement.originalNode)}):(n.mediaElement.options.success&&n.mediaElement.options.success(n.mediaElement,n.mediaElement.originalNode),q&&n.mediaElement.options.error&&n.mediaElement.options.error(n.mediaElement,n.mediaElement.originalNode)),n.mediaElement};g["default"].MediaElement=n,i["default"].MediaElement=n,c["default"]=n},{2:2,25:25,27:27,28:28,3:3,7:7,8:8}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a){return a&&a.__esModule?a:{"default":a}}(a(3)),e={};e.version="4.2.6",e.html5media={properties:["volume","src","currentTime","muted","duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable","currentSrc","preload","bufferedBytes","bufferedTime","initialTime","startOffsetTime","defaultPlaybackRate","playbackRate","played","autoplay","loop","controls"],readOnlyProperties:["duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable"],methods:["load","play","pause","canPlayType"],events:["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","suspend","abort","error","emptied","stalled","play","playing","pause","waiting","seeking","seeked","timeupdate","ended","ratechange","volumechange"],mediaTypes:["audio/mp3","audio/ogg","audio/oga","audio/wav","audio/x-wav","audio/wave","audio/x-pn-wav","audio/mpeg","audio/mp4","video/mp4","video/webm","video/ogg","video/ogv"]},d["default"].mejs=e,c["default"]=e},{3:3}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.renderer=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a){return a&&a.__esModule?a:{"default":a}}(a(7)),h=function(){function a(){d(this,a),this.renderers={},this.order=[]}return f(a,[{key:"add",value:function(a){if(void 0===a.name)throw new TypeError("renderer must contain at least `name` property");this.renderers[a.name]=a,this.order.push(a.name)}},{key:"select",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=b.length;if(b=b.length?b:this.order,!c){var d=[/^(html5|native)/i,/^flash/i,/iframe$/i],e=function(a){for(var b=0,c=d.length;c>b;b++)if(d[b].test(a))return b;return d.length};b.sort(function(a,b){return e(a)-e(b)})}for(var f=0,g=b.length;g>f;f++){var h=b[f],i=this.renderers[h];if(null!==i&&void 0!==i)for(var j=0,k=a.length;k>j;j++)if("function"==typeof i.canPlayType&&"string"==typeof a[j].type&&i.canPlayType(a[j].type))return{rendererName:i.name,src:a[j].src}}return null}},{key:"order",set:function(a){if(!Array.isArray(a))throw new TypeError("order must be an array of strings.");this._order=a},get:function(){return this._order}},{key:"renderers",set:function(a){if(null!==a&&"object"!==(void 0===a?"undefined":e(a)))throw new TypeError("renderers must be an array of objects.");this._renderers=a},get:function(){return this._renderers}}]),a}(),i=c.renderer=new h;g["default"].Renderers=i},{7:7}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(3)),f=d(a(2)),g=d(a(5)),h=a(16),i=d(h),j=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(a(25)),k=a(27),l=a(26),m=a(28);Object.assign(h.config,{usePluginFullScreen:!0,fullscreenText:null,useFakeFullscreen:!1}),Object.assign(i["default"].prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,isPluginClickThroughCreated:!1,fullscreenMode:"",containerSizeTimeout:null,buildfullscreen:function(a){if(a.isVideo){a.isInIframe=e["default"].location!==e["default"].parent.location,a.detectFullscreenMode();var b=this,c=(0,k.isString)(b.options.fullscreenText)?b.options.fullscreenText:g["default"].t("mejs.fullscreen"),d=f["default"].createElement("div");d.className=b.options.classPrefix+"button "+b.options.classPrefix+"fullscreen-button",d.innerHTML='<button type="button" aria-controls="'+b.id+'" title="'+c+'" aria-label="'+c+'" tabindex="0"></button>',b.addControlElement(d,"fullscreen"),d.addEventListener("click",function(){j.HAS_TRUE_NATIVE_FULLSCREEN&&j.IS_FULLSCREEN||a.isFullScreen?a.exitFullScreen():a.enterFullScreen()}),a.fullscreenBtn=d,b.options.keyActions.push({keys:[70],action:function(a,b,c,d){d.ctrlKey||void 0!==a.enterFullScreen&&(a.isFullScreen?a.exitFullScreen():a.enterFullScreen())}}),b.exitFullscreenCallback=function(c){27===(c.which||c.keyCode||0)&&(j.HAS_TRUE_NATIVE_FULLSCREEN&&j.IS_FULLSCREEN||b.isFullScreen)&&a.exitFullScreen()},b.globalBind("keydown",b.exitFullscreenCallback),b.normalHeight=0,b.normalWidth=0,j.HAS_TRUE_NATIVE_FULLSCREEN&&a.globalBind(j.FULLSCREEN_EVENT_NAME,function(){a.isFullScreen&&(j.isFullScreen()?(a.isNativeFullScreen=!0,a.setControlsSize()):(a.isNativeFullScreen=!1,a.exitFullScreen()))})}},cleanfullscreen:function(a){a.exitFullScreen(),a.globalUnbind("keydown",a.exitFullscreenCallback)},detectFullscreenMode:function(){var a=this,b=null!==a.media.rendererName&&/(native|html5)/i.test(a.media.rendererName),c="";return j.HAS_TRUE_NATIVE_FULLSCREEN&&b?c="native-native":j.HAS_TRUE_NATIVE_FULLSCREEN&&!b?c="plugin-native":a.usePluginFullScreen&&j.SUPPORT_POINTER_EVENTS&&(c="plugin-click"),a.fullscreenMode=c,c},enterFullScreen:function(){var a=this,b=null!==a.media.rendererName&&/(html5|native)/i.test(a.media.rendererName),c=getComputedStyle(a.getElement(a.container));if(!1===a.options.useFakeFullscreen&&j.IS_IOS&&j.HAS_IOS_FULLSCREEN&&"function"==typeof a.media.originalNode.webkitEnterFullscreen&&a.media.originalNode.canPlayType((0,m.getTypeFromFile)(a.media.getSrc())))a.media.originalNode.webkitEnterFullscreen();else{if((0,l.addClass)(f["default"].documentElement,a.options.classPrefix+"fullscreen"),(0,l.addClass)(a.getElement(a.container),a.options.classPrefix+"container-fullscreen"),a.normalHeight=parseFloat(c.height),a.normalWidth=parseFloat(c.width),"native-native"!==a.fullscreenMode&&"plugin-native"!==a.fullscreenMode||(j.requestFullScreen(a.getElement(a.container)),a.isInIframe&&setTimeout(function s(){if(a.isNativeFullScreen){var b=e["default"].innerWidth||f["default"].documentElement.clientWidth||f["default"].body.clientWidth,c=screen.width;Math.abs(c-b)>.002*c?a.exitFullScreen():setTimeout(s,500)}},1e3)),a.getElement(a.container).style.width="100%",a.getElement(a.container).style.height="100%",a.containerSizeTimeout=setTimeout(function(){a.getElement(a.container).style.width="100%",a.getElement(a.container).style.height="100%",a.setControlsSize()},500),b)a.node.style.width="100%",a.node.style.height="100%";else for(var d=a.getElement(a.container).querySelectorAll("embed, object, video"),g=d.length,h=0;g>h;h++)d[h].style.width="100%",d[h].style.height="100%";a.options.setDimensions&&"function"==typeof a.media.setSize&&a.media.setSize(screen.width,screen.height);for(var i=a.getElement(a.layers).children,n=i.length,o=0;n>o;o++)i[o].style.width="100%",i[o].style.height="100%";a.fullscreenBtn&&((0,l.removeClass)(a.fullscreenBtn,a.options.classPrefix+"fullscreen"),(0,l.addClass)(a.fullscreenBtn,a.options.classPrefix+"unfullscreen")),a.setControlsSize(),a.isFullScreen=!0;var p=Math.min(screen.width/a.width,screen.height/a.height),q=a.getElement(a.container).querySelector("."+a.options.classPrefix+"captions-text");q&&(q.style.fontSize=100*p+"%",q.style.lineHeight="normal",a.getElement(a.container).querySelector("."+a.options.classPrefix+"captions-position").style.bottom="45px");var r=(0,k.createEvent)("enteredfullscreen",a.getElement(a.container));a.getElement(a.container).dispatchEvent(r)}},exitFullScreen:function(){var a=this,b=null!==a.media.rendererName&&/(native|html5)/i.test(a.media.rendererName);if(clearTimeout(a.containerSizeTimeout),j.HAS_TRUE_NATIVE_FULLSCREEN&&(j.IS_FULLSCREEN||a.isFullScreen)&&j.cancelFullScreen(),(0,l.removeClass)(f["default"].documentElement,a.options.classPrefix+"fullscreen"),(0,l.removeClass)(a.getElement(a.container),a.options.classPrefix+"container-fullscreen"),a.options.setDimensions){if(a.getElement(a.container).style.width=a.normalWidth+"px",a.getElement(a.container).style.height=a.normalHeight+"px",b)a.node.style.width=a.normalWidth+"px",a.node.style.height=a.normalHeight+"px";else for(var c=a.getElement(a.container).querySelectorAll("embed, object, video"),d=c.length,e=0;d>e;e++)c[e].style.width=a.normalWidth+"px",c[e].style.height=a.normalHeight+"px";"function"==typeof a.media.setSize&&a.media.setSize(a.normalWidth,a.normalHeight);for(var g=a.getElement(a.layers).children,h=g.length,i=0;h>i;i++)g[i].style.width=a.normalWidth+"px",g[i].style.height=a.normalHeight+"px"}a.fullscreenBtn&&((0,l.removeClass)(a.fullscreenBtn,a.options.classPrefix+"unfullscreen"),(0,l.addClass)(a.fullscreenBtn,a.options.classPrefix+"fullscreen")),a.setControlsSize(),a.isFullScreen=!1;var m=a.getElement(a.container).querySelector("."+a.options.classPrefix+"captions-text");m&&(m.style.fontSize="",m.style.lineHeight="",a.getElement(a.container).querySelector("."+a.options.classPrefix+"captions-position").style.bottom="");var n=(0,k.createEvent)("exitedfullscreen",a.getElement(a.container));a.getElement(a.container).dispatchEvent(n)}})},{16:16,2:2,25:25,26:26,27:27,28:28,3:3,5:5}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(2)),f=a(16),g=d(f),h=d(a(5)),i=a(27),j=a(26);Object.assign(f.config,{playText:null,pauseText:null}),Object.assign(g["default"].prototype,{buildplaypause:function(a,b,c,d){function f(a){"play"===a?((0,j.removeClass)(n,g.options.classPrefix+"play"),(0,j.removeClass)(n,g.options.classPrefix+"replay"),(0,j.addClass)(n,g.options.classPrefix+"pause"),o.setAttribute("title",m),o.setAttribute("aria-label",m)):((0,j.removeClass)(n,g.options.classPrefix+"pause"),(0,j.removeClass)(n,g.options.classPrefix+"replay"),(0,j.addClass)(n,g.options.classPrefix+"play"),o.setAttribute("title",l),o.setAttribute("aria-label",l))}var g=this,k=g.options,l=(0,i.isString)(k.playText)?k.playText:h["default"].t("mejs.play"),m=(0,i.isString)(k.pauseText)?k.pauseText:h["default"].t("mejs.pause"),n=e["default"].createElement("div");n.className=g.options.classPrefix+"button "+g.options.classPrefix+"playpause-button "+g.options.classPrefix+"play",n.innerHTML='<button type="button" aria-controls="'+g.id+'" title="'+l+'" aria-label="'+m+'" tabindex="0"></button>',n.addEventListener("click",function(){g.paused?g.play():g.pause()});var o=n.querySelector("button");g.addControlElement(n,"playpause"),f("pse"),d.addEventListener("loadedmetadata",function(){-1===d.rendererName.indexOf("flash")&&f("pse")}),d.addEventListener("play",function(){f("play")}),d.addEventListener("playing",function(){f("play")}),d.addEventListener("pause",function(){f("pse")}),d.addEventListener("ended",function(){a.options.loop||((0,j.removeClass)(n,g.options.classPrefix+"pause"),(0,j.removeClass)(n,g.options.classPrefix+"play"),(0,j.addClass)(n,g.options.classPrefix+"replay"),o.setAttribute("title",l),o.setAttribute("aria-label",l))})}})},{16:16,2:2,26:26,27:27,5:5}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(2)),f=a(16),g=d(f),h=d(a(5)),i=a(25),j=a(30),k=a(26);Object.assign(f.config,{enableProgressTooltip:!0,useSmoothHover:!0,forceLive:!1}),Object.assign(g["default"].prototype,{buildprogress:function(a,b,c,d){var g=0,l=!1,m=!1,n=this,o=a.options.autoRewind,p=a.options.enableProgressTooltip?'<span class="'+n.options.classPrefix+'time-float"><span class="'+n.options.classPrefix+'time-float-current">00:00</span><span class="'+n.options.classPrefix+'time-float-corner"></span></span>':"",q=e["default"].createElement("div");
q.className=n.options.classPrefix+"time-rail",q.innerHTML='<span class="'+n.options.classPrefix+"time-total "+n.options.classPrefix+'time-slider"><span class="'+n.options.classPrefix+'time-buffering"></span><span class="'+n.options.classPrefix+'time-loaded"></span><span class="'+n.options.classPrefix+'time-current"></span><span class="'+n.options.classPrefix+'time-hovered no-hover"></span><span class="'+n.options.classPrefix+'time-handle"><span class="'+n.options.classPrefix+'time-handle-content"></span></span>'+p+"</span>",n.addControlElement(q,"progress"),n.options.keyActions.push({keys:[37,227],action:function(a){if(!isNaN(a.duration)&&a.duration>0){a.isVideo&&(a.showControls(),a.startControlsTimer()),a.getElement(a.container).querySelector("."+f.config.classPrefix+"time-total").focus();var b=Math.max(a.currentTime-a.options.defaultSeekBackwardInterval(a),0);a.setCurrentTime(b)}}},{keys:[39,228],action:function(a){if(!isNaN(a.duration)&&a.duration>0){a.isVideo&&(a.showControls(),a.startControlsTimer()),a.getElement(a.container).querySelector("."+f.config.classPrefix+"time-total").focus();var b=Math.min(a.currentTime+a.options.defaultSeekForwardInterval(a),a.duration);a.setCurrentTime(b)}}}),n.rail=b.querySelector("."+n.options.classPrefix+"time-rail"),n.total=b.querySelector("."+n.options.classPrefix+"time-total"),n.loaded=b.querySelector("."+n.options.classPrefix+"time-loaded"),n.current=b.querySelector("."+n.options.classPrefix+"time-current"),n.handle=b.querySelector("."+n.options.classPrefix+"time-handle"),n.timefloat=b.querySelector("."+n.options.classPrefix+"time-float"),n.timefloatcurrent=b.querySelector("."+n.options.classPrefix+"time-float-current"),n.slider=b.querySelector("."+n.options.classPrefix+"time-slider"),n.hovered=b.querySelector("."+n.options.classPrefix+"time-hovered"),n.buffer=b.querySelector("."+n.options.classPrefix+"time-buffering"),n.newTime=0,n.forcedHandlePause=!1,n.setTransformStyle=function(a,b){a.style.transform=b,a.style.webkitTransform=b,a.style.MozTransform=b,a.style.msTransform=b,a.style.OTransform=b},n.buffer.style.display="none";var r=function(b){var c=getComputedStyle(n.total),d=(0,k.offset)(n.total),e=n.total.offsetWidth,f=void 0!==c.webkitTransform?"webkitTransform":void 0!==c.mozTransform?"mozTransform ":void 0!==c.oTransform?"oTransform":void 0!==c.msTransform?"msTransform":"transform",g="WebKitCSSMatrix"in window?"WebKitCSSMatrix":"MSCSSMatrix"in window?"MSCSSMatrix":"CSSMatrix"in window?"CSSMatrix":void 0,h=0,m=0,o=0,p=void 0;if(p=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches[0].pageX:b.changedTouches?b.changedTouches[0].pageX:b.pageX,n.getDuration()){if(p<d.left?p=d.left:p>e+d.left&&(p=e+d.left),o=p-d.left,h=o/e,n.newTime=.02>=h?0:h*n.getDuration(),l&&null!==n.getCurrentTime()&&n.newTime.toFixed(4)!==n.getCurrentTime().toFixed(4)&&(n.setCurrentRailHandle(n.newTime),n.updateCurrent(n.newTime)),!i.IS_IOS&&!i.IS_ANDROID){if(0>o&&(o=0),n.options.useSmoothHover&&null!==g&&void 0!==window[g]){var q=new window[g](getComputedStyle(n.handle)[f]).m41,r=o/parseFloat(getComputedStyle(n.total).width)-q/parseFloat(getComputedStyle(n.total).width);n.hovered.style.left=q+"px",n.setTransformStyle(n.hovered,"scaleX("+r+")"),n.hovered.setAttribute("pos",o),r>=0?(0,k.removeClass)(n.hovered,"negative"):(0,k.addClass)(n.hovered,"negative")}if(n.timefloat){var s=n.timefloat.offsetWidth/2,t=mejs.Utils.offset(n.getElement(n.container)),u=getComputedStyle(n.timefloat);m=p-t.left<n.timefloat.offsetWidth?s:p-t.left>=n.getElement(n.container).offsetWidth-s?n.total.offsetWidth-s:o,(0,k.hasClass)(n.getElement(n.container),n.options.classPrefix+"long-video")&&(m+=parseFloat(u.marginLeft)/2+n.timefloat.offsetWidth/2),n.timefloat.style.left=m+"px",n.timefloatcurrent.innerHTML=(0,j.secondsToTimeCode)(n.newTime,a.options.alwaysShowHours,a.options.showTimecodeFrameCount,a.options.framesPerSecond,a.options.secondsDecimalLength,a.options.timeFormat),n.timefloat.style.display="block"}}}else i.IS_IOS||i.IS_ANDROID||!n.timefloat||(m=n.timefloat.offsetWidth+e>=n.getElement(n.container).offsetWidth?n.timefloat.offsetWidth/2:0,n.timefloat.style.left=m+"px",n.timefloat.style.left=m+"px",n.timefloat.style.display="block")},s=function(){var b=n.getCurrentTime(),c=h["default"].t("mejs.time-slider"),e=(0,j.secondsToTimeCode)(b,a.options.alwaysShowHours,a.options.showTimecodeFrameCount,a.options.framesPerSecond,a.options.secondsDecimalLength,a.options.timeFormat),f=n.getDuration();n.slider.setAttribute("role","slider"),n.slider.tabIndex=0,d.paused?(n.slider.setAttribute("aria-label",c),n.slider.setAttribute("aria-valuemin",0),n.slider.setAttribute("aria-valuemax",f),n.slider.setAttribute("aria-valuenow",b),n.slider.setAttribute("aria-valuetext",e)):(n.slider.removeAttribute("aria-label"),n.slider.removeAttribute("aria-valuemin"),n.slider.removeAttribute("aria-valuemax"),n.slider.removeAttribute("aria-valuenow"),n.slider.removeAttribute("aria-valuetext"))},t=function(){new Date-g>=1e3&&n.play()},u=function(){l&&null!==n.getCurrentTime()&&n.newTime.toFixed(4)!==n.getCurrentTime().toFixed(4)&&(n.setCurrentTime(n.newTime),n.setCurrentRail(),n.updateCurrent(n.newTime)),n.forcedHandlePause&&(n.slider.focus(),n.play()),n.forcedHandlePause=!1};n.slider.addEventListener("focus",function(){a.options.autoRewind=!1}),n.slider.addEventListener("blur",function(){a.options.autoRewind=o}),n.slider.addEventListener("keydown",function(b){if(new Date-g>=1e3&&(m=n.paused),n.options.keyActions.length){var c=b.which||b.keyCode||0,e=n.getDuration(),f=a.options.defaultSeekForwardInterval(d),h=a.options.defaultSeekBackwardInterval(d),j=n.getCurrentTime(),k=n.getElement(n.container).querySelector("."+n.options.classPrefix+"volume-slider");if(38===c||40===c){k&&(k.style.display="block"),n.isVideo&&(n.showControls(),n.startControlsTimer());var l=38===c?Math.min(n.volume+.1,1):Math.max(n.volume-.1,0),o=0>=l;return n.setVolume(l),void n.setMuted(o)}switch(k&&(k.style.display="none"),c){case 37:n.getDuration()!==1/0&&(j-=h);break;case 39:n.getDuration()!==1/0&&(j+=f);break;case 36:j=0;break;case 35:j=e;break;case 13:case 32:return void(i.IS_FIREFOX&&(n.paused?n.play():n.pause()));default:return}j=0>j?0:j>=e?e:Math.floor(j),g=new Date,m||a.pause(),j<n.getDuration()&&!m&&setTimeout(t,1100),n.setCurrentTime(j),a.showControls(),b.preventDefault(),b.stopPropagation()}});var v=["mousedown","touchstart"];n.slider.addEventListener("dragstart",function(){return!1});for(var w=0,x=v.length;x>w;w++)n.slider.addEventListener(v[w],function(a){if(n.forcedHandlePause=!1,n.getDuration()!==1/0&&(1===a.which||0===a.which)){n.paused||(n.pause(),n.forcedHandlePause=!0),l=!0,r(a);for(var b=["mouseup","touchend"],c=0,d=b.length;d>c;c++)n.getElement(n.container).addEventListener(b[c],function(a){var b=a.target;(b===n.slider||b.closest("."+n.options.classPrefix+"time-slider"))&&r(a)});n.globalBind("mouseup.dur touchend.dur",function(){u(),l=!1,n.timefloat&&(n.timefloat.style.display="none")})}},!(!i.SUPPORT_PASSIVE_EVENT||"touchstart"!==v[w])&&{passive:!0});n.slider.addEventListener("mouseenter",function(a){a.target===n.slider&&n.getDuration()!==1/0&&(n.getElement(n.container).addEventListener("mousemove",function(a){var b=a.target;(b===n.slider||b.closest("."+n.options.classPrefix+"time-slider"))&&r(a)}),!n.timefloat||i.IS_IOS||i.IS_ANDROID||(n.timefloat.style.display="block"),n.hovered&&!i.IS_IOS&&!i.IS_ANDROID&&n.options.useSmoothHover&&(0,k.removeClass)(n.hovered,"no-hover"))}),n.slider.addEventListener("mouseleave",function(){n.getDuration()!==1/0&&(l||(n.timefloat&&(n.timefloat.style.display="none"),n.hovered&&n.options.useSmoothHover&&(0,k.addClass)(n.hovered,"no-hover")))}),n.broadcastCallback=function(c){var d=b.querySelector("."+n.options.classPrefix+"broadcast");if(n.options.forceLive||n.getDuration()===1/0){if(!d||n.options.forceLive){var f=e["default"].createElement("span");f.className=n.options.classPrefix+"broadcast",f.innerText=h["default"].t("mejs.live-broadcast"),n.slider.style.display="none",n.rail.appendChild(f)}}else d&&(n.slider.style.display="",d.remove()),a.setProgressRail(c),n.forcedHandlePause||a.setCurrentRail(c),s()},d.addEventListener("progress",n.broadcastCallback),d.addEventListener("timeupdate",n.broadcastCallback),d.addEventListener("play",function(){n.buffer.style.display="none"}),d.addEventListener("playing",function(){n.buffer.style.display="none"}),d.addEventListener("seeking",function(){n.buffer.style.display=""}),d.addEventListener("seeked",function(){n.buffer.style.display="none"}),d.addEventListener("pause",function(){n.buffer.style.display="none"}),d.addEventListener("waiting",function(){n.buffer.style.display=""}),d.addEventListener("loadeddata",function(){n.buffer.style.display=""}),d.addEventListener("canplay",function(){n.buffer.style.display="none"}),d.addEventListener("error",function(){n.buffer.style.display="none"}),n.getElement(n.container).addEventListener("controlsresize",function(b){n.getDuration()!==1/0&&(a.setProgressRail(b),n.forcedHandlePause||a.setCurrentRail(b))})},cleanprogress:function(a,b,c,d){d.removeEventListener("progress",a.broadcastCallback),d.removeEventListener("timeupdate",a.broadcastCallback),a.rail&&a.rail.remove()},setProgressRail:function(a){var b=this,c=void 0!==a?a.detail.target||a.target:b.media,d=null;c&&c.buffered&&c.buffered.length>0&&c.buffered.end&&b.getDuration()?d=c.buffered.end(c.buffered.length-1)/b.getDuration():c&&void 0!==c.bytesTotal&&c.bytesTotal>0&&void 0!==c.bufferedBytes?d=c.bufferedBytes/c.bytesTotal:a&&a.lengthComputable&&0!==a.total&&(d=a.loaded/a.total),null!==d&&(d=Math.min(1,Math.max(0,d)),b.loaded&&b.setTransformStyle(b.loaded,"scaleX("+d+")"))},setCurrentRailHandle:function(a){var b=this;b.setCurrentRailMain(b,a)},setCurrentRail:function(){var a=this;a.setCurrentRailMain(a)},setCurrentRailMain:function(a,b){if(void 0!==a.getCurrentTime()&&a.getDuration()){var c=void 0===b?a.getCurrentTime():b;if(a.total&&a.handle){var d=parseFloat(getComputedStyle(a.total).width),e=Math.round(d*c/a.getDuration()),f=e-Math.round(a.handle.offsetWidth/2);if(f=0>f?0:f,a.setTransformStyle(a.current,"scaleX("+e/d+")"),a.setTransformStyle(a.handle,"translateX("+f+"px)"),a.options.useSmoothHover&&!(0,k.hasClass)(a.hovered,"no-hover")){var g=parseInt(a.hovered.getAttribute("pos"),10),h=(g=isNaN(g)?0:g)/d-f/d;a.hovered.style.left=f+"px",a.setTransformStyle(a.hovered,"scaleX("+h+")"),h>=0?(0,k.removeClass)(a.hovered,"negative"):(0,k.addClass)(a.hovered,"negative")}}}}})},{16:16,2:2,25:25,26:26,30:30,5:5}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(2)),f=a(16),g=d(f),h=a(30),i=a(26);Object.assign(f.config,{duration:0,timeAndDurationSeparator:"<span> | </span>"}),Object.assign(g["default"].prototype,{buildcurrent:function(a,b,c,d){var f=this,g=e["default"].createElement("div");g.className=f.options.classPrefix+"time",g.setAttribute("role","timer"),g.setAttribute("aria-live","off"),g.innerHTML='<span class="'+f.options.classPrefix+'currenttime">'+(0,h.secondsToTimeCode)(0,a.options.alwaysShowHours,a.options.showTimecodeFrameCount,a.options.framesPerSecond,a.options.secondsDecimalLength,a.options.timeFormat)+"</span>",f.addControlElement(g,"current"),a.updateCurrent(),f.updateTimeCallback=function(){f.controlsAreVisible&&a.updateCurrent()},d.addEventListener("timeupdate",f.updateTimeCallback)},cleancurrent:function(a,b,c,d){d.removeEventListener("timeupdate",a.updateTimeCallback)},buildduration:function(a,b,c,d){var f=this;if(b.lastChild.querySelector("."+f.options.classPrefix+"currenttime"))b.querySelector("."+f.options.classPrefix+"time").innerHTML+=f.options.timeAndDurationSeparator+'<span class="'+f.options.classPrefix+'duration">'+(0,h.secondsToTimeCode)(f.options.duration,f.options.alwaysShowHours,f.options.showTimecodeFrameCount,f.options.framesPerSecond,f.options.secondsDecimalLength,f.options.timeFormat)+"</span>";else{b.querySelector("."+f.options.classPrefix+"currenttime")&&(0,i.addClass)(b.querySelector("."+f.options.classPrefix+"currenttime").parentNode,f.options.classPrefix+"currenttime-container");var g=e["default"].createElement("div");g.className=f.options.classPrefix+"time "+f.options.classPrefix+"duration-container",g.innerHTML='<span class="'+f.options.classPrefix+'duration">'+(0,h.secondsToTimeCode)(f.options.duration,f.options.alwaysShowHours,f.options.showTimecodeFrameCount,f.options.framesPerSecond,f.options.secondsDecimalLength,f.options.timeFormat)+"</span>",f.addControlElement(g,"duration")}f.updateDurationCallback=function(){f.controlsAreVisible&&a.updateDuration()},d.addEventListener("timeupdate",f.updateDurationCallback)},cleanduration:function(a,b,c,d){d.removeEventListener("timeupdate",a.updateDurationCallback)},updateCurrent:function(){var a=this,b=a.getCurrentTime();isNaN(b)&&(b=0);var c=(0,h.secondsToTimeCode)(b,a.options.alwaysShowHours,a.options.showTimecodeFrameCount,a.options.framesPerSecond,a.options.secondsDecimalLength,a.options.timeFormat);c.length>5?(0,i.addClass)(a.getElement(a.container),a.options.classPrefix+"long-video"):(0,i.removeClass)(a.getElement(a.container),a.options.classPrefix+"long-video"),a.getElement(a.controls).querySelector("."+a.options.classPrefix+"currenttime")&&(a.getElement(a.controls).querySelector("."+a.options.classPrefix+"currenttime").innerText=c)},updateDuration:function(){var a=this,b=a.getDuration();(isNaN(b)||b===1/0||0>b)&&(a.media.duration=a.options.duration=b=0),a.options.duration>0&&(b=a.options.duration);var c=(0,h.secondsToTimeCode)(b,a.options.alwaysShowHours,a.options.showTimecodeFrameCount,a.options.framesPerSecond,a.options.secondsDecimalLength,a.options.timeFormat);c.length>5?(0,i.addClass)(a.getElement(a.container),a.options.classPrefix+"long-video"):(0,i.removeClass)(a.getElement(a.container),a.options.classPrefix+"long-video"),a.getElement(a.controls).querySelector("."+a.options.classPrefix+"duration")&&b>0&&(a.getElement(a.controls).querySelector("."+a.options.classPrefix+"duration").innerHTML=c)}})},{16:16,2:2,26:26,30:30}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(2)),f=d(a(7)),g=d(a(5)),h=a(16),i=d(h),j=a(30),k=a(27),l=a(26);Object.assign(h.config,{startLanguage:"",tracksText:null,chaptersText:null,tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),Object.assign(i["default"].prototype,{hasChapters:!1,buildtracks:function(a,b,c,d){if(this.findTracks(),a.tracks.length||a.trackFiles&&0!==!a.trackFiles.length){var f=this,h=f.options.tracksAriaLive?' role="log" aria-live="assertive" aria-atomic="false"':"",i=(0,k.isString)(f.options.tracksText)?f.options.tracksText:g["default"].t("mejs.captions-subtitles"),j=(0,k.isString)(f.options.chaptersText)?f.options.chaptersText:g["default"].t("mejs.captions-chapters"),m=null===a.trackFiles?a.tracks.length:a.trackFiles.length;if(f.domNode.textTracks)for(var n=f.domNode.textTracks.length-1;n>=0;n--)f.domNode.textTracks[n].mode="hidden";f.cleartracks(a),a.captions=e["default"].createElement("div"),a.captions.className=f.options.classPrefix+"captions-layer "+f.options.classPrefix+"layer",a.captions.innerHTML='<div class="'+f.options.classPrefix+"captions-position "+f.options.classPrefix+'captions-position-hover"'+h+'><span class="'+f.options.classPrefix+'captions-text"></span></div>',a.captions.style.display="none",c.insertBefore(a.captions,c.firstChild),a.captionsText=a.captions.querySelector("."+f.options.classPrefix+"captions-text"),a.captionsButton=e["default"].createElement("div"),a.captionsButton.className=f.options.classPrefix+"button "+f.options.classPrefix+"captions-button",a.captionsButton.innerHTML='<button type="button" aria-controls="'+f.id+'" title="'+i+'" aria-label="'+i+'" tabindex="0"></button><div class="'+f.options.classPrefix+"captions-selector "+f.options.classPrefix+'offscreen"><ul class="'+f.options.classPrefix+'captions-selector-list"><li class="'+f.options.classPrefix+'captions-selector-list-item"><input type="radio" class="'+f.options.classPrefix+'captions-selector-input" name="'+a.id+'_captions" id="'+a.id+'_captions_none" value="none" checked disabled><label class="'+f.options.classPrefix+"captions-selector-label "+f.options.classPrefix+'captions-selected" for="'+a.id+'_captions_none">'+g["default"].t("mejs.none")+"</label></li></ul></div>",f.addControlElement(a.captionsButton,"tracks"),a.captionsButton.querySelector("."+f.options.classPrefix+"captions-selector-input").disabled=!1,a.chaptersButton=e["default"].createElement("div"),a.chaptersButton.className=f.options.classPrefix+"button "+f.options.classPrefix+"chapters-button",a.chaptersButton.innerHTML='<button type="button" aria-controls="'+f.id+'" title="'+j+'" aria-label="'+j+'" tabindex="0"></button><div class="'+f.options.classPrefix+"chapters-selector "+f.options.classPrefix+'offscreen"><ul class="'+f.options.classPrefix+'chapters-selector-list"></ul></div>';for(var o=0,p=0;m>p;p++){var q=a.tracks[p].kind;a.tracks[p].src.trim()&&("subtitles"===q||"captions"===q?o++:"chapters"!==q||b.querySelector("."+f.options.classPrefix+"chapter-selector")||a.captionsButton.parentNode.insertBefore(a.chaptersButton,a.captionsButton))}a.trackToLoad=-1,a.selectedTrack=null,a.isLoadingTrack=!1;for(var r=0;m>r;r++){var s=a.tracks[r].kind;!a.tracks[r].src.trim()||"subtitles"!==s&&"captions"!==s||a.addTrackButton(a.tracks[r].trackId,a.tracks[r].srclang,a.tracks[r].label)}a.loadNextTrack();var t=["mouseenter","focusin"],u=["mouseleave","focusout"];if(f.options.toggleCaptionsButtonWhenOnlyOne&&1===o)a.captionsButton.addEventListener("click",function(b){var c="none";null===a.selectedTrack&&(c=a.tracks[0].trackId);var d=b.keyCode||b.which;a.setTrack(c,void 0!==d)});else{for(var v=a.captionsButton.querySelectorAll("."+f.options.classPrefix+"captions-selector-label"),w=a.captionsButton.querySelectorAll("input[type=radio]"),x=0,y=t.length;y>x;x++)a.captionsButton.addEventListener(t[x],function(){(0,l.removeClass)(this.querySelector("."+f.options.classPrefix+"captions-selector"),f.options.classPrefix+"offscreen")});for(var z=0,A=u.length;A>z;z++)a.captionsButton.addEventListener(u[z],function(){(0,l.addClass)(this.querySelector("."+f.options.classPrefix+"captions-selector"),f.options.classPrefix+"offscreen")});for(var B=0,C=w.length;C>B;B++)w[B].addEventListener("click",function(b){var c=b.keyCode||b.which;a.setTrack(this.value,void 0!==c)});for(var D=0,E=v.length;E>D;D++)v[D].addEventListener("click",function(a){var b=(0,l.siblings)(this,function(a){return"INPUT"===a.tagName})[0],c=(0,k.createEvent)("click",b);b.dispatchEvent(c),a.preventDefault()});a.captionsButton.addEventListener("keydown",function(a){a.stopPropagation()})}for(var F=0,G=t.length;G>F;F++)a.chaptersButton.addEventListener(t[F],function(){this.querySelector("."+f.options.classPrefix+"chapters-selector-list").children.length&&(0,l.removeClass)(this.querySelector("."+f.options.classPrefix+"chapters-selector"),f.options.classPrefix+"offscreen")});for(var H=0,I=u.length;I>H;H++)a.chaptersButton.addEventListener(u[H],function(){(0,l.addClass)(this.querySelector("."+f.options.classPrefix+"chapters-selector"),f.options.classPrefix+"offscreen")});a.chaptersButton.addEventListener("keydown",function(a){a.stopPropagation()}),a.options.alwaysShowControls?(0,l.addClass)(a.getElement(a.container).querySelector("."+f.options.classPrefix+"captions-position"),f.options.classPrefix+"captions-position-hover"):(a.getElement(a.container).addEventListener("controlsshown",function(){(0,l.addClass)(a.getElement(a.container).querySelector("."+f.options.classPrefix+"captions-position"),f.options.classPrefix+"captions-position-hover")}),a.getElement(a.container).addEventListener("controlshidden",function(){d.paused||(0,l.removeClass)(a.getElement(a.container).querySelector("."+f.options.classPrefix+"captions-position"),f.options.classPrefix+"captions-position-hover")})),d.addEventListener("timeupdate",function(){a.displayCaptions()}),""!==a.options.slidesSelector&&(a.slidesContainer=e["default"].querySelectorAll(a.options.slidesSelector),d.addEventListener("timeupdate",function(){a.displaySlides()}))}},cleartracks:function(a){a&&(a.captions&&a.captions.remove(),a.chapters&&a.chapters.remove(),a.captionsText&&a.captionsText.remove(),a.captionsButton&&a.captionsButton.remove(),a.chaptersButton&&a.chaptersButton.remove())},rebuildtracks:function(){var a=this;a.findTracks(),a.buildtracks(a,a.getElement(a.controls),a.getElement(a.layers),a.media)},findTracks:function(){var a=this,b=null===a.trackFiles?a.node.querySelectorAll("track"):a.trackFiles,c=b.length;a.tracks=[];for(var d=0;c>d;d++){var e=b[d],f=e.getAttribute("srclang").toLowerCase()||"",g=a.id+"_track_"+d+"_"+e.getAttribute("kind")+"_"+f;a.tracks.push({trackId:g,srclang:f,src:e.getAttribute("src"),kind:e.getAttribute("kind"),label:e.getAttribute("label")||"",entries:[],isLoaded:!1})}},setTrack:function(a,b){for(var c=this,d=c.captionsButton.querySelectorAll('input[type="radio"]'),e=c.captionsButton.querySelectorAll("."+c.options.classPrefix+"captions-selected"),f=c.captionsButton.querySelector('input[value="'+a+'"]'),g=0,h=d.length;h>g;g++)d[g].checked=!1;for(var i=0,j=e.length;j>i;i++)(0,l.removeClass)(e[i],c.options.classPrefix+"captions-selected");f.checked=!0;for(var m=(0,l.siblings)(f,function(a){return(0,l.hasClass)(a,c.options.classPrefix+"captions-selector-label")}),n=0,o=m.length;o>n;n++)(0,l.addClass)(m[n],c.options.classPrefix+"captions-selected");if("none"===a)c.selectedTrack=null,(0,l.removeClass)(c.captionsButton,c.options.classPrefix+"captions-enabled");else for(var p=0,q=c.tracks.length;q>p;p++){var r=c.tracks[p];if(r.trackId===a){null===c.selectedTrack&&(0,l.addClass)(c.captionsButton,c.options.classPrefix+"captions-enabled"),c.selectedTrack=r,c.captions.setAttribute("lang",c.selectedTrack.srclang),c.displayCaptions();break}}var s=(0,k.createEvent)("captionschange",c.media);s.detail.caption=c.selectedTrack,c.media.dispatchEvent(s),b||setTimeout(function(){c.getElement(c.container).focus()},500)},loadNextTrack:function(){var a=this;a.trackToLoad++,a.trackToLoad<a.tracks.length?(a.isLoadingTrack=!0,a.loadTrack(a.trackToLoad)):(a.isLoadingTrack=!1,a.checkForTracks())},loadTrack:function(a){var b=this,c=b.tracks[a];void 0===c||void 0===c.src&&""===c.src||(0,l.ajax)(c.src,"text",function(a){c.entries="string"==typeof a&&/<tt\s+xml/gi.exec(a)?f["default"].TrackFormatParser.dfxp.parse(a):f["default"].TrackFormatParser.webvtt.parse(a),c.isLoaded=!0,b.enableTrackButton(c),b.loadNextTrack(),"slides"===c.kind?b.setupSlides(c):"chapters"!==c.kind||b.hasChapters||(b.drawChapters(c),b.hasChapters=!0)},function(){b.removeTrackButton(c.trackId),b.loadNextTrack()})},enableTrackButton:function(a){var b=this,c=a.srclang,d=e["default"].getElementById(""+a.trackId);if(d){var h=a.label;""===h&&(h=g["default"].t(f["default"].language.codes[c])||c),d.disabled=!1;for(var i=(0,l.siblings)(d,function(a){return(0,l.hasClass)(a,b.options.classPrefix+"captions-selector-label")}),j=0,m=i.length;m>j;j++)i[j].innerHTML=h;if(b.options.startLanguage===c){d.checked=!0;var n=(0,k.createEvent)("click",d);d.dispatchEvent(n)}}},removeTrackButton:function(a){var b=e["default"].getElementById(""+a);if(b){var c=b.closest("li");c&&c.remove()}},addTrackButton:function(a,b,c){var d=this;""===c&&(c=g["default"].t(f["default"].language.codes[b])||b),d.captionsButton.querySelector("ul").innerHTML+='<li class="'+d.options.classPrefix+'captions-selector-list-item"><input type="radio" class="'+d.options.classPrefix+'captions-selector-input" name="'+d.id+'_captions" id="'+a+'" value="'+a+'" disabled><label class="'+d.options.classPrefix+'captions-selector-label"for="'+a+'">'+c+" (loading)</label></li>"},checkForTracks:function(){var a=this,b=!1;if(a.options.hideCaptionsButtonWhenEmpty){for(var c=0,d=a.tracks.length;d>c;c++){var e=a.tracks[c].kind;if(("subtitles"===e||"captions"===e)&&a.tracks[c].isLoaded){b=!0;break}}a.captionsButton.style.display=b?"":"none",a.setControlsSize()}},displayCaptions:function(){if(void 0!==this.tracks){var a=this,b=a.selectedTrack;if(null!==b&&b.isLoaded){var c=a.searchTrackPosition(b.entries,a.media.currentTime);if(c>-1)return a.captionsText.innerHTML=function(a){var b=e["default"].createElement("div");b.innerHTML=a;for(var c=b.getElementsByTagName("script"),d=c.length;d--;)c[d].remove();for(var f=b.getElementsByTagName("*"),g=0,h=f.length;h>g;g++)for(var i=f[g].attributes,j=Array.prototype.slice.call(i),k=0,l=j.length;l>k;k++)j[k].name.startsWith("on")||j[k].value.startsWith("javascript")?f[g].remove():"style"===j[k].name&&f[g].removeAttribute(j[k].name);return b.innerHTML}(b.entries[c].text),a.captionsText.className=a.options.classPrefix+"captions-text "+(b.entries[c].identifier||""),a.captions.style.display="",void(a.captions.style.height="0px");a.captions.style.display="none"}else a.captions.style.display="none"}},setupSlides:function(a){var b=this;b.slides=a,b.slides.entries.imgs=[b.slides.entries.length],b.showSlide(0)},showSlide:function(a){var b=this,c=this;if(void 0!==c.tracks&&void 0!==c.slidesContainer){var d=c.slides.entries[a].text,f=c.slides.entries[a].imgs;if(void 0===f||void 0===f.fadeIn){var g=e["default"].createElement("img");g.src=d,g.addEventListener("load",function(){var a=b,d=(0,l.siblings)(a,function(a){return d(a)});a.style.display="none",c.slidesContainer.innerHTML+=a.innerHTML,(0,l.fadeIn)(c.slidesContainer.querySelector(g));for(var e=0,f=d.length;f>e;e++)(0,l.fadeOut)(d[e],400)}),c.slides.entries[a].imgs=f=g}else if(!(0,l.visible)(f)){var h=(0,l.siblings)(self,function(a){return h(a)});(0,l.fadeIn)(c.slidesContainer.querySelector(f));for(var i=0,j=h.length;j>i;i++)(0,l.fadeOut)(h[i])}}},displaySlides:function(){var a=this;if(void 0!==this.slides){var b=a.slides,c=a.searchTrackPosition(b.entries,a.media.currentTime);c>-1&&a.showSlide(c)}},drawChapters:function(a){var b=this,c=a.entries.length;if(c){b.chaptersButton.querySelector("ul").innerHTML="";for(var d=0;c>d;d++)b.chaptersButton.querySelector("ul").innerHTML+='<li class="'+b.options.classPrefix+'chapters-selector-list-item" role="menuitemcheckbox" aria-live="polite" aria-disabled="false" aria-checked="false"><input type="radio" class="'+b.options.classPrefix+'captions-selector-input" name="'+b.id+'_chapters" id="'+b.id+"_chapters_"+d+'" value="'+a.entries[d].start+'" disabled><label class="'+b.options.classPrefix+'chapters-selector-label"for="'+b.id+"_chapters_"+d+'">'+a.entries[d].text+"</label></li>";for(var e=b.chaptersButton.querySelectorAll('input[type="radio"]'),f=b.chaptersButton.querySelectorAll("."+b.options.classPrefix+"chapters-selector-label"),g=0,h=e.length;h>g;g++)e[g].disabled=!1,e[g].checked=!1,e[g].addEventListener("click",function(a){var c=this,d=b.chaptersButton.querySelectorAll("li"),e=(0,l.siblings)(c,function(a){return(0,l.hasClass)(a,b.options.classPrefix+"chapters-selector-label")})[0];c.checked=!0,c.parentNode.setAttribute("aria-checked",!0),(0,l.addClass)(e,b.options.classPrefix+"chapters-selected"),(0,l.removeClass)(b.chaptersButton.querySelector("."+b.options.classPrefix+"chapters-selected"),b.options.classPrefix+"chapters-selected");for(var f=0,g=d.length;g>f;f++)d[f].setAttribute("aria-checked",!1);void 0===(a.keyCode||a.which)&&setTimeout(function(){b.getElement(b.container).focus()},500),b.media.setCurrentTime(parseFloat(c.value)),b.media.paused&&b.media.play()});for(var i=0,j=f.length;j>i;i++)f[i].addEventListener("click",function(a){var b=(0,l.siblings)(this,function(a){return"INPUT"===a.tagName})[0],c=(0,k.createEvent)("click",b);b.dispatchEvent(c),a.preventDefault()})}},searchTrackPosition:function(a,b){for(var c=0,d=a.length-1,e=void 0,f=void 0,g=void 0;d>=c;){if(e=c+d>>1,f=a[e].start,g=a[e].stop,b>=f&&g>b)return e;b>f?c=e+1:f>b&&(d=e-1)}return-1}}),f["default"].language={codes:{af:"mejs.afrikaans",sq:"mejs.albanian",ar:"mejs.arabic",be:"mejs.belarusian",bg:"mejs.bulgarian",ca:"mejs.catalan",zh:"mejs.chinese","zh-cn":"mejs.chinese-simplified","zh-tw":"mejs.chines-traditional",hr:"mejs.croatian",cs:"mejs.czech",da:"mejs.danish",nl:"mejs.dutch",en:"mejs.english",et:"mejs.estonian",fl:"mejs.filipino",fi:"mejs.finnish",fr:"mejs.french",gl:"mejs.galician",de:"mejs.german",el:"mejs.greek",ht:"mejs.haitian-creole",iw:"mejs.hebrew",hi:"mejs.hindi",hu:"mejs.hungarian",is:"mejs.icelandic",id:"mejs.indonesian",ga:"mejs.irish",it:"mejs.italian",ja:"mejs.japanese",ko:"mejs.korean",lv:"mejs.latvian",lt:"mejs.lithuanian",mk:"mejs.macedonian",ms:"mejs.malay",mt:"mejs.maltese",no:"mejs.norwegian",fa:"mejs.persian",pl:"mejs.polish",pt:"mejs.portuguese",ro:"mejs.romanian",ru:"mejs.russian",sr:"mejs.serbian",sk:"mejs.slovak",sl:"mejs.slovenian",es:"mejs.spanish",sw:"mejs.swahili",sv:"mejs.swedish",tl:"mejs.tagalog",th:"mejs.thai",tr:"mejs.turkish",uk:"mejs.ukrainian",vi:"mejs.vietnamese",cy:"mejs.welsh",yi:"mejs.yiddish"}},f["default"].TrackFormatParser={webvtt:{pattern:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(a){for(var b=a.split(/\r?\n/),c=[],d=void 0,e=void 0,f=void 0,g=0,h=b.length;h>g;g++){if((d=this.pattern.exec(b[g]))&&g<b.length){for(g-1>=0&&""!==b[g-1]&&(f=b[g-1]),e=b[++g],g++;""!==b[g]&&g<b.length;)e=e+"\n"+b[g],g++;e=e.trim().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),c.push({identifier:f,start:0===(0,j.convertSMPTEtoSeconds)(d[1])?.2:(0,j.convertSMPTEtoSeconds)(d[1]),stop:(0,j.convertSMPTEtoSeconds)(d[3]),text:e,settings:d[5]})}f=""}return c}},dfxp:{parse:function(a){var b=(a=$(a).filter("tt")).firstChild,c=b.querySelectorAll("p"),d=a.getElementById(""+b.attr("style")),e=[],f=void 0;if(d.length){d.removeAttribute("id");var g=d.attributes;if(g.length){f={};for(var h=0,i=g.length;i>h;h++)f[g[h].name.split(":")[1]]=g[h].value}}for(var k=0,l=c.length;l>k;k++){var m=void 0,n={start:null,stop:null,style:null,text:null};if(c.eq(k).attr("begin")&&(n.start=(0,j.convertSMPTEtoSeconds)(c.eq(k).attr("begin"))),!n.start&&c.eq(k-1).attr("end")&&(n.start=(0,j.convertSMPTEtoSeconds)(c.eq(k-1).attr("end"))),c.eq(k).attr("end")&&(n.stop=(0,j.convertSMPTEtoSeconds)(c.eq(k).attr("end"))),!n.stop&&c.eq(k+1).attr("begin")&&(n.stop=(0,j.convertSMPTEtoSeconds)(c.eq(k+1).attr("begin"))),f){m="";for(var o in f)m+=o+":"+f[o]+";"}m&&(n.style=m),0===n.start&&(n.start=.2),n.text=c.eq(k).innerHTML.trim().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),e.push(n)}return e}}}},{16:16,2:2,26:26,27:27,30:30,5:5,7:7}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(2)),f=a(16),g=d(f),h=d(a(5)),i=a(25),j=a(27),k=a(26);Object.assign(f.config,{muteText:null,unmuteText:null,allyVolumeControlText:null,hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical",startVolume:.8}),Object.assign(g["default"].prototype,{buildvolume:function(a,b,c,d){if(!i.IS_ANDROID&&!i.IS_IOS||!this.options.hideVolumeOnTouchDevices){var g=this,l=g.isVideo?g.options.videoVolume:g.options.audioVolume,m=(0,j.isString)(g.options.muteText)?g.options.muteText:h["default"].t("mejs.mute"),n=(0,j.isString)(g.options.unmuteText)?g.options.unmuteText:h["default"].t("mejs.unmute"),o=(0,j.isString)(g.options.allyVolumeControlText)?g.options.allyVolumeControlText:h["default"].t("mejs.volume-help-text"),p=e["default"].createElement("div");if(p.className=g.options.classPrefix+"button "+g.options.classPrefix+"volume-button "+g.options.classPrefix+"mute",p.innerHTML="horizontal"===l?'<button type="button" aria-controls="'+g.id+'" title="'+m+'" aria-label="'+m+'" tabindex="0"></button>':'<button type="button" aria-controls="'+g.id+'" title="'+m+'" aria-label="'+m+'" tabindex="0"></button><a href="javascript:void(0);" class="'+g.options.classPrefix+'volume-slider" aria-label="'+h["default"].t("mejs.volume-slider")+'" aria-valuemin="0" aria-valuemax="100" role="slider" aria-orientation="vertical"><span class="'+g.options.classPrefix+'offscreen">'+o+'</span><div class="'+g.options.classPrefix+'volume-total"><div class="'+g.options.classPrefix+'volume-current"></div><div class="'+g.options.classPrefix+'volume-handle"></div></div></a>',
g.addControlElement(p,"volume"),g.options.keyActions.push({keys:[38],action:function(a){var b=a.getElement(a.container).querySelector("."+f.config.classPrefix+"volume-slider");(b||a.getElement(a.container).querySelector("."+f.config.classPrefix+"volume-slider").matches(":focus"))&&(b.style.display="block"),a.isVideo&&(a.showControls(),a.startControlsTimer());var c=Math.min(a.volume+.1,1);a.setVolume(c),c>0&&a.setMuted(!1)}},{keys:[40],action:function(a){var b=a.getElement(a.container).querySelector("."+f.config.classPrefix+"volume-slider");b&&(b.style.display="block"),a.isVideo&&(a.showControls(),a.startControlsTimer());var c=Math.max(a.volume-.1,0);a.setVolume(c),.1>=c&&a.setMuted(!0)}},{keys:[77],action:function(a){a.getElement(a.container).querySelector("."+f.config.classPrefix+"volume-slider").style.display="block",a.isVideo&&(a.showControls(),a.startControlsTimer()),a.media.muted?a.setMuted(!1):a.setMuted(!0)}}),"horizontal"===l){var q=e["default"].createElement("a");q.className=g.options.classPrefix+"horizontal-volume-slider",q.href="javascript:void(0);",q.setAttribute("aria-label",h["default"].t("mejs.volume-slider")),q.setAttribute("aria-valuemin",0),q.setAttribute("aria-valuemax",100),q.setAttribute("role","slider"),q.innerHTML+='<span class="'+g.options.classPrefix+'offscreen">'+o+'</span><div class="'+g.options.classPrefix+'horizontal-volume-total"><div class="'+g.options.classPrefix+'horizontal-volume-current"></div><div class="'+g.options.classPrefix+'horizontal-volume-handle"></div></div>',p.parentNode.insertBefore(q,p.nextSibling)}var r=!1,s=!1,t=!1,u=function(){var a=Math.floor(100*d.volume);v.setAttribute("aria-valuenow",a),v.setAttribute("aria-valuetext",a+"%")},v="vertical"===l?g.getElement(g.container).querySelector("."+g.options.classPrefix+"volume-slider"):g.getElement(g.container).querySelector("."+g.options.classPrefix+"horizontal-volume-slider"),w="vertical"===l?g.getElement(g.container).querySelector("."+g.options.classPrefix+"volume-total"):g.getElement(g.container).querySelector("."+g.options.classPrefix+"horizontal-volume-total"),x="vertical"===l?g.getElement(g.container).querySelector("."+g.options.classPrefix+"volume-current"):g.getElement(g.container).querySelector("."+g.options.classPrefix+"horizontal-volume-current"),y="vertical"===l?g.getElement(g.container).querySelector("."+g.options.classPrefix+"volume-handle"):g.getElement(g.container).querySelector("."+g.options.classPrefix+"horizontal-volume-handle"),z=function(a){if(null!==a&&!isNaN(a)&&void 0!==a){if(a=Math.max(0,a),0===(a=Math.min(a,1))){(0,k.removeClass)(p,g.options.classPrefix+"mute"),(0,k.addClass)(p,g.options.classPrefix+"unmute");var b=p.firstElementChild;b.setAttribute("title",n),b.setAttribute("aria-label",n)}else{(0,k.removeClass)(p,g.options.classPrefix+"unmute"),(0,k.addClass)(p,g.options.classPrefix+"mute");var c=p.firstElementChild;c.setAttribute("title",m),c.setAttribute("aria-label",m)}var d=100*a+"%",e=getComputedStyle(y);"vertical"===l?(x.style.bottom=0,x.style.height=d,y.style.bottom=d,y.style.marginBottom=-parseFloat(e.height)/2+"px"):(x.style.left=0,x.style.width=d,y.style.left=d,y.style.marginLeft=-parseFloat(e.width)/2+"px")}},A=function(a){var b=(0,k.offset)(w),c=getComputedStyle(w);t=!0;var d=null;if("vertical"===l){var e=parseFloat(c.height);if(d=(e-(a.pageY-b.top))/e,0===b.top||0===b.left)return}else{var f=parseFloat(c.width);d=(a.pageX-b.left)/f}d=Math.max(0,d),d=Math.min(d,1),z(d),g.setMuted(0===d),g.setVolume(d),a.preventDefault(),a.stopPropagation()},B=function(){g.muted?(z(0),(0,k.removeClass)(p,g.options.classPrefix+"mute"),(0,k.addClass)(p,g.options.classPrefix+"unmute")):(z(d.volume),(0,k.removeClass)(p,g.options.classPrefix+"unmute"),(0,k.addClass)(p,g.options.classPrefix+"mute"))};a.getElement(a.container).addEventListener("keydown",function(a){!!a.target.closest("."+g.options.classPrefix+"container")||"vertical"!==l||(v.style.display="none")}),p.addEventListener("mouseenter",function(a){a.target===p&&(v.style.display="block",s=!0,a.preventDefault(),a.stopPropagation())}),p.addEventListener("focusin",function(){v.style.display="block",s=!0}),p.addEventListener("focusout",function(a){a.relatedTarget&&(!a.relatedTarget||a.relatedTarget.matches("."+g.options.classPrefix+"volume-slider"))||"vertical"!==l||(v.style.display="none")}),p.addEventListener("mouseleave",function(){s=!1,r||"vertical"!==l||(v.style.display="none")}),p.addEventListener("focusout",function(){s=!1}),p.addEventListener("keydown",function(a){if(g.options.keyActions.length){var b=a.which||a.keyCode||0,c=d.volume;switch(b){case 38:c=Math.min(c+.1,1);break;case 40:c=Math.max(0,c-.1);break;default:return!0}r=!1,z(c),d.setVolume(c),a.preventDefault(),a.stopPropagation()}}),p.querySelector("button").addEventListener("click",function(){d.setMuted(!d.muted);var a=(0,j.createEvent)("volumechange",d);d.dispatchEvent(a)}),v.addEventListener("dragstart",function(){return!1}),v.addEventListener("mouseover",function(){s=!0}),v.addEventListener("focusin",function(){v.style.display="block",s=!0}),v.addEventListener("focusout",function(){s=!1,r||"vertical"!==l||(v.style.display="none")}),v.addEventListener("mousedown",function(a){A(a),g.globalBind("mousemove.vol",function(a){var b=a.target;r&&(b===v||b.closest("vertical"===l?"."+g.options.classPrefix+"volume-slider":"."+g.options.classPrefix+"horizontal-volume-slider"))&&A(a)}),g.globalBind("mouseup.vol",function(){r=!1,s||"vertical"!==l||(v.style.display="none")}),r=!0,a.preventDefault(),a.stopPropagation()}),d.addEventListener("volumechange",function(a){r||B(),u()});var C=!1;d.addEventListener("rendererready",function(){t||setTimeout(function(){C=!0,(0===a.options.startVolume||d.originalNode.muted)&&(d.setMuted(!0),a.options.startVolume=0),d.setVolume(a.options.startVolume),g.setControlsSize()},250)}),d.addEventListener("loadedmetadata",function(){setTimeout(function(){t||C||((0===a.options.startVolume||d.originalNode.muted)&&(d.setMuted(!0),a.options.startVolume=0),d.setVolume(a.options.startVolume),g.setControlsSize()),C=!1},250)}),(0===a.options.startVolume||d.originalNode.muted)&&(d.setMuted(!0),a.options.startVolume=0,B()),g.getElement(g.container).addEventListener("controlsresize",function(){B()})}}})},{16:16,2:2,25:25,26:26,27:27,5:5}],15:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.EN={"mejs.plural-form":1,"mejs.download-file":"Download File","mejs.install-flash":"You are using a browser that does not have Flash player enabled or installed. Please turn on your Flash player plugin or download the latest version from https://get.adobe.com/flashplayer/","mejs.fullscreen":"Fullscreen","mejs.play":"Play","mejs.pause":"Pause","mejs.time-slider":"Time Slider","mejs.time-help-text":"Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.","mejs.live-broadcast":"Live Broadcast","mejs.volume-help-text":"Use Up/Down Arrow keys to increase or decrease volume.","mejs.unmute":"Unmute","mejs.mute":"Mute","mejs.volume-slider":"Volume Slider","mejs.video-player":"Video Player","mejs.audio-player":"Audio Player","mejs.captions-subtitles":"Captions/Subtitles","mejs.captions-chapters":"Chapters","mejs.none":"None","mejs.afrikaans":"Afrikaans","mejs.albanian":"Albanian","mejs.arabic":"Arabic","mejs.belarusian":"Belarusian","mejs.bulgarian":"Bulgarian","mejs.catalan":"Catalan","mejs.chinese":"Chinese","mejs.chinese-simplified":"Chinese (Simplified)","mejs.chinese-traditional":"Chinese (Traditional)","mejs.croatian":"Croatian","mejs.czech":"Czech","mejs.danish":"Danish","mejs.dutch":"Dutch","mejs.english":"English","mejs.estonian":"Estonian","mejs.filipino":"Filipino","mejs.finnish":"Finnish","mejs.french":"French","mejs.galician":"Galician","mejs.german":"German","mejs.greek":"Greek","mejs.haitian-creole":"Haitian Creole","mejs.hebrew":"Hebrew","mejs.hindi":"Hindi","mejs.hungarian":"Hungarian","mejs.icelandic":"Icelandic","mejs.indonesian":"Indonesian","mejs.irish":"Irish","mejs.italian":"Italian","mejs.japanese":"Japanese","mejs.korean":"Korean","mejs.latvian":"Latvian","mejs.lithuanian":"Lithuanian","mejs.macedonian":"Macedonian","mejs.malay":"Malay","mejs.maltese":"Maltese","mejs.norwegian":"Norwegian","mejs.persian":"Persian","mejs.polish":"Polish","mejs.portuguese":"Portuguese","mejs.romanian":"Romanian","mejs.russian":"Russian","mejs.serbian":"Serbian","mejs.slovak":"Slovak","mejs.slovenian":"Slovenian","mejs.spanish":"Spanish","mejs.swahili":"Swahili","mejs.swedish":"Swedish","mejs.tagalog":"Tagalog","mejs.thai":"Thai","mejs.turkish":"Turkish","mejs.ukrainian":"Ukrainian","mejs.vietnamese":"Vietnamese","mejs.welsh":"Welsh","mejs.yiddish":"Yiddish"}},{}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.config=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=d(a(3)),i=d(a(2)),j=d(a(7)),k=d(a(6)),l=d(a(17)),m=d(a(5)),n=a(25),o=a(27),p=a(30),q=a(28),r=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(a(26));j["default"].mepIndex=0,j["default"].players={};var s=c.config={poster:"",showPosterWhenEnded:!1,showPosterWhenPaused:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:40,defaultSeekBackwardInterval:function(a){return.05*a.getDuration()},defaultSeekForwardInterval:function(a){return.05*a.getDuration()},setDimensions:!0,audioWidth:-1,audioHeight:-1,loop:!1,autoRewind:!0,enableAutosize:!0,timeFormat:"",alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,hideVideoControlsOnPause:!1,clickToPlayPause:!0,controlsTimeoutDefault:1500,controlsTimeoutMouseEnter:2500,controlsTimeoutMouseLeave:1e3,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],useDefaultControls:!1,isVideo:!0,stretching:"auto",classPrefix:"mejs__",enableKeyboard:!0,pauseOtherPlayers:!0,secondsDecimalLength:0,customError:null,keyActions:[{keys:[32,179],action:function(a){n.IS_FIREFOX||(a.paused||a.ended?a.play():a.pause())}}]};j["default"].MepDefaults=s;var t=function(){function a(b,c){e(this,a);var d=this,f="string"==typeof b?i["default"].getElementById(b):b;if(!(d instanceof a))return new a(f,c);if(d.node=d.media=f,d.node){if(d.media.player)return d.media.player;if(d.hasFocus=!1,d.controlsAreVisible=!0,d.controlsEnabled=!0,d.controlsTimer=null,d.currentMediaTime=0,d.proxy=null,void 0===c){var g=d.node.getAttribute("data-mejsoptions");c=g?JSON.parse(g):{}}return d.options=Object.assign({},s,c),d.options.loop&&!d.media.getAttribute("loop")?(d.media.loop=!0,d.node.loop=!0):d.media.loop&&(d.options.loop=!0),d.options.timeFormat||(d.options.timeFormat="mm:ss",d.options.alwaysShowHours&&(d.options.timeFormat="hh:mm:ss"),d.options.showTimecodeFrameCount&&(d.options.timeFormat+=":ff")),(0,p.calculateTimeFormat)(0,d.options,d.options.framesPerSecond||25),d.id="mep_"+j["default"].mepIndex++,j["default"].players[d.id]=d,d.init(),d}}return g(a,[{key:"getElement",value:function(a){return a}},{key:"init",value:function(){var a=this,b=Object.assign({},a.options,{success:function(b,c){a._meReady(b,c)},error:function(b){a._handleError(b)}}),c=a.node.tagName.toLowerCase();if(a.isDynamic="audio"!==c&&"video"!==c&&"iframe"!==c,a.isVideo=a.isDynamic?a.options.isVideo:"audio"!==c&&a.options.isVideo,a.mediaFiles=null,a.trackFiles=null,n.IS_IPAD&&a.options.iPadUseNativeControls||n.IS_IPHONE&&a.options.iPhoneUseNativeControls)a.node.setAttribute("controls",!0),n.IS_IPAD&&a.node.getAttribute("autoplay")&&a.play();else if(!a.isVideo&&(a.isVideo||!a.options.features.length&&!a.options.useDefaultControls)||n.IS_ANDROID&&a.options.AndroidUseNativeControls)a.isVideo||a.options.features.length||a.options.useDefaultControls||(a.node.style.display="none");else{a.node.removeAttribute("controls");var d=a.isVideo?m["default"].t("mejs.video-player"):m["default"].t("mejs.audio-player"),e=i["default"].createElement("span");if(e.className=a.options.classPrefix+"offscreen",e.innerText=d,a.media.parentNode.insertBefore(e,a.media),a.container=i["default"].createElement("div"),a.getElement(a.container).id=a.id,a.getElement(a.container).className=a.options.classPrefix+"container "+a.options.classPrefix+"container-keyboard-inactive "+a.media.className,a.getElement(a.container).tabIndex=0,a.getElement(a.container).setAttribute("role","application"),a.getElement(a.container).setAttribute("aria-label",d),a.getElement(a.container).innerHTML='<div class="'+a.options.classPrefix+'inner"><div class="'+a.options.classPrefix+'mediaelement"></div><div class="'+a.options.classPrefix+'layers"></div><div class="'+a.options.classPrefix+'controls"></div></div>',a.getElement(a.container).addEventListener("focus",function(b){if(!a.controlsAreVisible&&!a.hasFocus&&a.controlsEnabled){a.showControls(!0);var c=(0,o.isNodeAfter)(b.relatedTarget,a.getElement(a.container))?"."+a.options.classPrefix+"controls ."+a.options.classPrefix+"button:last-child > button":"."+a.options.classPrefix+"playpause-button > button";a.getElement(a.container).querySelector(c).focus()}}),a.node.parentNode.insertBefore(a.getElement(a.container),a.node),a.options.features.length||a.options.useDefaultControls||(a.getElement(a.container).style.background="transparent",a.getElement(a.container).querySelector("."+a.options.classPrefix+"controls").style.display="none"),a.isVideo&&"fill"===a.options.stretching&&!r.hasClass(a.getElement(a.container).parentNode,a.options.classPrefix+"fill-container")){a.outerContainer=a.media.parentNode;var f=i["default"].createElement("div");f.className=a.options.classPrefix+"fill-container",a.getElement(a.container).parentNode.insertBefore(f,a.getElement(a.container)),f.appendChild(a.getElement(a.container))}if(n.IS_ANDROID&&r.addClass(a.getElement(a.container),a.options.classPrefix+"android"),n.IS_IOS&&r.addClass(a.getElement(a.container),a.options.classPrefix+"ios"),n.IS_IPAD&&r.addClass(a.getElement(a.container),a.options.classPrefix+"ipad"),n.IS_IPHONE&&r.addClass(a.getElement(a.container),a.options.classPrefix+"iphone"),r.addClass(a.getElement(a.container),a.isVideo?a.options.classPrefix+"video":a.options.classPrefix+"audio"),n.IS_SAFARI&&!n.IS_IOS){r.addClass(a.getElement(a.container),a.options.classPrefix+"hide-cues");for(var g=a.node.cloneNode(),h=a.node.children,l=[],p=[],s=0,t=h.length;t>s;s++){var u=h[s];!function(){switch(u.tagName.toLowerCase()){case"source":var a={};Array.prototype.slice.call(u.attributes).forEach(function(b){a[b.name]=b.value}),a.type=(0,q.formatType)(a.src,a.type),l.push(a);break;case"track":u.mode="hidden",p.push(u);break;default:g.appendChild(u)}}()}a.node.remove(),a.node=a.media=g,l.length&&(a.mediaFiles=l),p.length&&(a.trackFiles=p)}a.getElement(a.container).querySelector("."+a.options.classPrefix+"mediaelement").appendChild(a.node),a.media.player=a,a.controls=a.getElement(a.container).querySelector("."+a.options.classPrefix+"controls"),a.layers=a.getElement(a.container).querySelector("."+a.options.classPrefix+"layers");var v=a.isVideo?"video":"audio",w=v.substring(0,1).toUpperCase()+v.substring(1);a.options[v+"Width"]>0||a.options[v+"Width"].toString().indexOf("%")>-1?a.width=a.options[v+"Width"]:""!==a.node.style.width&&null!==a.node.style.width?a.width=a.node.style.width:a.node.getAttribute("width")?a.width=a.node.getAttribute("width"):a.width=a.options["default"+w+"Width"],a.options[v+"Height"]>0||a.options[v+"Height"].toString().indexOf("%")>-1?a.height=a.options[v+"Height"]:""!==a.node.style.height&&null!==a.node.style.height?a.height=a.node.style.height:a.node.getAttribute("height")?a.height=a.node.getAttribute("height"):a.height=a.options["default"+w+"Height"],a.initialAspectRatio=a.height>=a.width?a.width/a.height:a.height/a.width,a.setPlayerSize(a.width,a.height),b.pluginWidth=a.width,b.pluginHeight=a.height}if(j["default"].MepDefaults=b,new k["default"](a.media,b,a.mediaFiles),void 0!==a.getElement(a.container)&&a.options.features.length&&a.controlsAreVisible&&!a.options.hideVideoControlsOnLoad){var x=(0,o.createEvent)("controlsshown",a.getElement(a.container));a.getElement(a.container).dispatchEvent(x)}}},{key:"showControls",value:function(a){var b=this;if(a=void 0===a||a,!b.controlsAreVisible&&b.isVideo){if(a)!function(){r.fadeIn(b.getElement(b.controls),200,function(){r.removeClass(b.getElement(b.controls),b.options.classPrefix+"offscreen");var a=(0,o.createEvent)("controlsshown",b.getElement(b.container));b.getElement(b.container).dispatchEvent(a)});for(var a=b.getElement(b.container).querySelectorAll("."+b.options.classPrefix+"control"),c=0,d=a.length;d>c;c++)!function(c,d){r.fadeIn(a[c],200,function(){r.removeClass(a[c],b.options.classPrefix+"offscreen")})}(c)}();else{r.removeClass(b.getElement(b.controls),b.options.classPrefix+"offscreen"),b.getElement(b.controls).style.display="",b.getElement(b.controls).style.opacity=1;for(var c=b.getElement(b.container).querySelectorAll("."+b.options.classPrefix+"control"),d=0,e=c.length;e>d;d++)r.removeClass(c[d],b.options.classPrefix+"offscreen"),c[d].style.display="";var f=(0,o.createEvent)("controlsshown",b.getElement(b.container));b.getElement(b.container).dispatchEvent(f)}b.controlsAreVisible=!0,b.setControlsSize()}}},{key:"hideControls",value:function(a,b){var c=this;if(a=void 0===a||a,!0===b||!(!c.controlsAreVisible||c.options.alwaysShowControls||c.paused&&4===c.readyState&&(!c.options.hideVideoControlsOnLoad&&c.currentTime<=0||!c.options.hideVideoControlsOnPause&&c.currentTime>0)||c.isVideo&&!c.options.hideVideoControlsOnLoad&&!c.readyState||c.ended)){if(a)!function(){r.fadeOut(c.getElement(c.controls),200,function(){r.addClass(c.getElement(c.controls),c.options.classPrefix+"offscreen"),c.getElement(c.controls).style.display="";var a=(0,o.createEvent)("controlshidden",c.getElement(c.container));c.getElement(c.container).dispatchEvent(a)});for(var a=c.getElement(c.container).querySelectorAll("."+c.options.classPrefix+"control"),b=0,d=a.length;d>b;b++)!function(b,d){r.fadeOut(a[b],200,function(){r.addClass(a[b],c.options.classPrefix+"offscreen"),a[b].style.display=""})}(b)}();else{r.addClass(c.getElement(c.controls),c.options.classPrefix+"offscreen"),c.getElement(c.controls).style.display="",c.getElement(c.controls).style.opacity=0;for(var d=c.getElement(c.container).querySelectorAll("."+c.options.classPrefix+"control"),e=0,f=d.length;f>e;e++)r.addClass(d[e],c.options.classPrefix+"offscreen"),d[e].style.display="";var g=(0,o.createEvent)("controlshidden",c.getElement(c.container));c.getElement(c.container).dispatchEvent(g)}c.controlsAreVisible=!1}}},{key:"startControlsTimer",value:function(a){var b=this;a=void 0!==a?a:b.options.controlsTimeoutDefault,b.killControlsTimer("start"),b.controlsTimer=setTimeout(function(){b.hideControls(),b.killControlsTimer("hide")},a)}},{key:"killControlsTimer",value:function(){var a=this;null!==a.controlsTimer&&(clearTimeout(a.controlsTimer),delete a.controlsTimer,a.controlsTimer=null)}},{key:"disableControls",value:function(){var a=this;a.killControlsTimer(),a.controlsEnabled=!1,a.hideControls(!1,!0)}},{key:"enableControls",value:function(){var a=this;a.controlsEnabled=!0,a.showControls(!1)}},{key:"_setDefaultPlayer",value:function(){var a=this;a.proxy&&a.proxy.pause(),a.proxy=new l["default"](a),a.media.addEventListener("loadedmetadata",function(){a.getCurrentTime()>0&&a.currentMediaTime>0&&(a.setCurrentTime(a.currentMediaTime),n.IS_IOS||n.IS_ANDROID||a.play())})}},{key:"_meReady",value:function(a,b){var c=this,d=b.getAttribute("autoplay"),e=!(void 0===d||null===d||"false"===d),f=null!==a.rendererName&&/(native|html5)/i.test(c.media.rendererName);if(c.getElement(c.controls)&&c.enableControls(),c.getElement(c.container)&&c.getElement(c.container).querySelector("."+c.options.classPrefix+"overlay-play")&&(c.getElement(c.container).querySelector("."+c.options.classPrefix+"overlay-play").style.display=""),!c.created){if(c.created=!0,c.media=a,c.domNode=b,!(n.IS_ANDROID&&c.options.AndroidUseNativeControls||n.IS_IPAD&&c.options.iPadUseNativeControls||n.IS_IPHONE&&c.options.iPhoneUseNativeControls)){if(!c.isVideo&&!c.options.features.length&&!c.options.useDefaultControls)return e&&f&&c.play(),void(c.options.success&&("string"==typeof c.options.success?h["default"][c.options.success](c.media,c.domNode,c):c.options.success(c.media,c.domNode,c)));if(c.featurePosition={},c._setDefaultPlayer(),c.buildposter(c,c.getElement(c.controls),c.getElement(c.layers),c.media),c.buildkeyboard(c,c.getElement(c.controls),c.getElement(c.layers),c.media),c.buildoverlays(c,c.getElement(c.controls),c.getElement(c.layers),c.media),c.options.useDefaultControls){var g=["playpause","current","progress","duration","tracks","volume","fullscreen"];c.options.features=g.concat(c.options.features.filter(function(a){return-1===g.indexOf(a)}))}c.buildfeatures(c,c.getElement(c.controls),c.getElement(c.layers),c.media);var k=(0,o.createEvent)("controlsready",c.getElement(c.container));c.getElement(c.container).dispatchEvent(k),c.setPlayerSize(c.width,c.height),c.setControlsSize(),c.isVideo&&(c.clickToPlayPauseCallback=function(){if(c.options.clickToPlayPause){var a=c.getElement(c.container).querySelector("."+c.options.classPrefix+"overlay-button"),b=a.getAttribute("aria-pressed");c.paused&&b?c.pause():c.paused?c.play():c.pause(),a.setAttribute("aria-pressed",!b),c.getElement(c.container).focus()}},c.createIframeLayer(),c.media.addEventListener("click",c.clickToPlayPauseCallback),!n.IS_ANDROID&&!n.IS_IOS||c.options.alwaysShowControls?(c.getElement(c.container).addEventListener("mouseenter",function(){c.controlsEnabled&&(c.options.alwaysShowControls||(c.killControlsTimer("enter"),c.showControls(),c.startControlsTimer(c.options.controlsTimeoutMouseEnter)))}),c.getElement(c.container).addEventListener("mousemove",function(){c.controlsEnabled&&(c.controlsAreVisible||c.showControls(),c.options.alwaysShowControls||c.startControlsTimer(c.options.controlsTimeoutMouseEnter))}),c.getElement(c.container).addEventListener("mouseleave",function(){c.controlsEnabled&&(c.paused||c.options.alwaysShowControls||c.startControlsTimer(c.options.controlsTimeoutMouseLeave))})):c.node.addEventListener("touchstart",function(){c.controlsAreVisible?c.hideControls(!1):c.controlsEnabled&&c.showControls(!1)},!!n.SUPPORT_PASSIVE_EVENT&&{passive:!0}),c.options.hideVideoControlsOnLoad&&c.hideControls(!1),c.options.enableAutosize&&c.media.addEventListener("loadedmetadata",function(a){var b=void 0!==a?a.detail.target||a.target:c.media;c.options.videoHeight<=0&&!c.domNode.getAttribute("height")&&!c.domNode.style.height&&null!==b&&!isNaN(b.videoHeight)&&(c.setPlayerSize(b.videoWidth,b.videoHeight),c.setControlsSize(),c.media.setSize(b.videoWidth,b.videoHeight))})),c.media.addEventListener("play",function(){c.hasFocus=!0;for(var a in j["default"].players)if(j["default"].players.hasOwnProperty(a)){var b=j["default"].players[a];b.id===c.id||!c.options.pauseOtherPlayers||b.paused||b.ended||(b.pause(),b.hasFocus=!1)}n.IS_ANDROID||n.IS_IOS||c.options.alwaysShowControls||!c.isVideo||c.hideControls()}),c.media.addEventListener("ended",function(){if(c.options.autoRewind)try{c.setCurrentTime(0),setTimeout(function(){var a=c.getElement(c.container).querySelector("."+c.options.classPrefix+"overlay-loading");a&&a.parentNode&&(a.parentNode.style.display="none")},20)}catch(a){}"function"==typeof c.media.renderer.stop?c.media.renderer.stop():c.pause(),c.setProgressRail&&c.setProgressRail(),c.setCurrentRail&&c.setCurrentRail(),c.options.loop?c.play():!c.options.alwaysShowControls&&c.controlsEnabled&&c.showControls()}),c.media.addEventListener("loadedmetadata",function(){(0,p.calculateTimeFormat)(c.getDuration(),c.options,c.options.framesPerSecond||25),c.updateDuration&&c.updateDuration(),c.updateCurrent&&c.updateCurrent(),c.isFullScreen||(c.setPlayerSize(c.width,c.height),c.setControlsSize())});var l=null;c.media.addEventListener("timeupdate",function(){isNaN(c.getDuration())||l===c.getDuration()||(l=c.getDuration(),(0,p.calculateTimeFormat)(l,c.options,c.options.framesPerSecond||25),c.updateDuration&&c.updateDuration(),c.updateCurrent&&c.updateCurrent(),c.setControlsSize())}),c.getElement(c.container).addEventListener("click",function(a){r.addClass(a.currentTarget,c.options.classPrefix+"container-keyboard-inactive")}),c.getElement(c.container).addEventListener("focusin",function(a){r.removeClass(a.currentTarget,c.options.classPrefix+"container-keyboard-inactive"),!c.isVideo||n.IS_ANDROID||n.IS_IOS||!c.controlsEnabled||c.options.alwaysShowControls||(c.killControlsTimer("enter"),c.showControls(),c.startControlsTimer(c.options.controlsTimeoutMouseEnter))}),c.getElement(c.container).addEventListener("focusout",function(a){setTimeout(function(){a.relatedTarget&&c.keyboardAction&&!a.relatedTarget.closest("."+c.options.classPrefix+"container")&&(c.keyboardAction=!1,!c.isVideo||c.options.alwaysShowControls||c.paused||c.startControlsTimer(c.options.controlsTimeoutMouseLeave))},0)}),setTimeout(function(){c.setPlayerSize(c.width,c.height),c.setControlsSize()},0),c.globalResizeCallback=function(){c.isFullScreen||n.HAS_TRUE_NATIVE_FULLSCREEN&&i["default"].webkitIsFullScreen||c.setPlayerSize(c.width,c.height),c.setControlsSize()},c.globalBind("resize",c.globalResizeCallback)}e&&f&&c.play(),c.options.success&&("string"==typeof c.options.success?h["default"][c.options.success](c.media,c.domNode,c):c.options.success(c.media,c.domNode,c))}}},{key:"_handleError",value:function(a,b,c){var d=this,e=d.getElement(d.layers).querySelector("."+d.options.classPrefix+"overlay-play");e&&(e.style.display="none"),d.options.error&&d.options.error(a,b,c),d.getElement(d.container).querySelector("."+d.options.classPrefix+"cannotplay")&&d.getElement(d.container).querySelector("."+d.options.classPrefix+"cannotplay").remove();var f=i["default"].createElement("div");f.className=d.options.classPrefix+"cannotplay",f.style.width="100%",f.style.height="100%";var g="function"==typeof d.options.customError?d.options.customError(d.media,d.media.originalNode):d.options.customError,h="";if(!g){var k=d.media.originalNode.getAttribute("poster");if(k&&(h='<img src="'+k+'" alt="'+j["default"].i18n.t("mejs.download-file")+'">'),a.message&&(g="<p>"+a.message+"</p>"),a.urls)for(var l=0,m=a.urls.length;m>l;l++){var n=a.urls[l];g+='<a href="'+n.src+'" data-type="'+n.type+'"><span>'+j["default"].i18n.t("mejs.download-file")+": "+n.src+"</span></a>"}}g&&d.getElement(d.layers).querySelector("."+d.options.classPrefix+"overlay-error")&&(f.innerHTML=g,d.getElement(d.layers).querySelector("."+d.options.classPrefix+"overlay-error").innerHTML=""+h+f.outerHTML,d.getElement(d.layers).querySelector("."+d.options.classPrefix+"overlay-error").parentNode.style.display="block"),d.controlsEnabled&&d.disableControls()}},{key:"setPlayerSize",value:function(a,b){var c=this;if(!c.options.setDimensions)return!1;switch(void 0!==a&&(c.width=a),void 0!==b&&(c.height=b),c.options.stretching){case"fill":c.isVideo?c.setFillMode():c.setDimensions(c.width,c.height);break;case"responsive":c.setResponsiveMode();break;case"none":c.setDimensions(c.width,c.height);break;default:!0===c.hasFluidMode()?c.setResponsiveMode():c.setDimensions(c.width,c.height)}}},{key:"hasFluidMode",value:function(){var a=this;return-1!==a.height.toString().indexOf("%")||a.node&&a.node.style.maxWidth&&"none"!==a.node.style.maxWidth&&a.node.style.maxWidth!==a.width||a.node&&a.node.currentStyle&&"100%"===a.node.currentStyle.maxWidth}},{key:"setResponsiveMode",value:function(){var a=this,b=function(){for(var a=void 0,b=c.getElement(c.container);b;){try{if(n.IS_FIREFOX&&"html"===b.tagName.toLowerCase()&&h["default"].self!==h["default"].top&&null!==h["default"].frameElement)return h["default"].frameElement;a=b.parentElement}catch(c){a=b.parentElement}if(a&&r.visible(a))return a;b=a}return null}(),c=b?getComputedStyle(b,null):getComputedStyle(i["default"].body,null),d=a.isVideo?a.media.videoWidth&&a.media.videoWidth>0?a.media.videoWidth:a.node.getAttribute("width")?a.node.getAttribute("width"):a.options.defaultVideoWidth:a.options.defaultAudioWidth,e=a.isVideo?a.media.videoHeight&&a.media.videoHeight>0?a.media.videoHeight:a.node.getAttribute("height")?a.node.getAttribute("height"):a.options.defaultVideoHeight:a.options.defaultAudioHeight,f=function(){var b=1;return a.isVideo?(b=a.media.videoWidth&&a.media.videoWidth>0&&a.media.videoHeight&&a.media.videoHeight>0?a.height>=a.width?a.media.videoWidth/a.media.videoHeight:a.media.videoHeight/a.media.videoWidth:a.initialAspectRatio,(isNaN(b)||.01>b||b>100)&&(b=1),b):b}(),g=parseFloat(c.height),j=void 0,k=parseFloat(c.width);if(j=a.isVideo?"100%"===a.height?parseFloat(k*e/d,10):a.height>=a.width?parseFloat(k/f,10):parseFloat(k*f,10):e,isNaN(j)&&(j=g),a.getElement(a.container).parentNode.length>0&&"body"===a.getElement(a.container).parentNode.tagName.toLowerCase()&&(k=h["default"].innerWidth||i["default"].documentElement.clientWidth||i["default"].body.clientWidth,j=h["default"].innerHeight||i["default"].documentElement.clientHeight||i["default"].body.clientHeight),j&&k){a.getElement(a.container).style.width=k+"px",a.getElement(a.container).style.height=j+"px",a.node.style.width="100%",a.node.style.height="100%",a.isVideo&&a.media.setSize&&a.media.setSize(k,j);for(var l=a.getElement(a.layers).children,m=0,o=l.length;o>m;m++)l[m].style.width="100%",l[m].style.height="100%"}}},{key:"setFillMode",value:function(){var a=this,b=h["default"].self!==h["default"].top&&null!==h["default"].frameElement,c=function(){for(var a=void 0,b=c.getElement(c.container);b;){try{if(n.IS_FIREFOX&&"html"===b.tagName.toLowerCase()&&h["default"].self!==h["default"].top&&null!==h["default"].frameElement)return h["default"].frameElement;a=b.parentElement}catch(c){a=b.parentElement}if(a&&r.visible(a))return a;b=a}return null}(),d=c?getComputedStyle(c,null):getComputedStyle(i["default"].body,null);"none"!==a.node.style.height&&a.node.style.height!==a.height&&(a.node.style.height="auto"),"none"!==a.node.style.maxWidth&&a.node.style.maxWidth!==a.width&&(a.node.style.maxWidth="none"),"none"!==a.node.style.maxHeight&&a.node.style.maxHeight!==a.height&&(a.node.style.maxHeight="none"),a.node.currentStyle&&("100%"===a.node.currentStyle.height&&(a.node.currentStyle.height="auto"),"100%"===a.node.currentStyle.maxWidth&&(a.node.currentStyle.maxWidth="none"),"100%"===a.node.currentStyle.maxHeight&&(a.node.currentStyle.maxHeight="none")),b||parseFloat(d.width)||(c.style.width=a.media.offsetWidth+"px"),b||parseFloat(d.height)||(c.style.height=a.media.offsetHeight+"px"),d=getComputedStyle(c);var e=parseFloat(d.width),f=parseFloat(d.height);a.setDimensions("100%","100%");var g=a.getElement(a.container).querySelector("."+a.options.classPrefix+"poster>img");g&&(g.style.display="");for(var j=a.getElement(a.container).querySelectorAll("object, embed, iframe, video"),k=a.height,l=a.width,m=e,o=k*e/l,p=l*f/k,q=f,s=p>e==0,t=s?Math.floor(m):Math.floor(p),u=s?Math.floor(o):Math.floor(q),v=s?e+"px":t+"px",w=s?u+"px":f+"px",x=0,y=j.length;y>x;x++)j[x].style.height=w,j[x].style.width=v,a.media.setSize&&a.media.setSize(v,w),j[x].style.marginLeft=Math.floor((e-t)/2)+"px",j[x].style.marginTop=0}},{key:"setDimensions",value:function(a,b){var c=this;a=(0,o.isString)(a)&&a.indexOf("%")>-1?a:parseFloat(a)+"px",
b=(0,o.isString)(b)&&b.indexOf("%")>-1?b:parseFloat(b)+"px",c.getElement(c.container).style.width=a,c.getElement(c.container).style.height=b;for(var d=c.getElement(c.layers).children,e=0,f=d.length;f>e;e++)d[e].style.width=a,d[e].style.height=b}},{key:"setControlsSize",value:function(){var a=this;if(r.visible(a.getElement(a.container)))if(a.rail&&r.visible(a.rail)){for(var b=a.total?getComputedStyle(a.total,null):null,c=b?parseFloat(b.marginLeft)+parseFloat(b.marginRight):0,d=getComputedStyle(a.rail),e=parseFloat(d.marginLeft)+parseFloat(d.marginRight),f=0,g=r.siblings(a.rail,function(b){return b!==a.rail}),h=g.length,i=0;h>i;i++)f+=g[i].offsetWidth;f+=c+(0===c?2*e:e)+1,a.getElement(a.container).style.minWidth=f+"px";var j=(0,o.createEvent)("controlsresize",a.getElement(a.container));a.getElement(a.container).dispatchEvent(j)}else{for(var k=a.getElement(a.controls).children,l=0,m=0,n=k.length;n>m;m++)l+=k[m].offsetWidth;a.getElement(a.container).style.minWidth=l+"px"}}},{key:"addControlElement",value:function(a,b){var c=this;if(void 0!==c.featurePosition[b]){var d=c.getElement(c.controls).children[c.featurePosition[b]-1];d.parentNode.insertBefore(a,d.nextSibling)}else{c.getElement(c.controls).appendChild(a);for(var e=c.getElement(c.controls).children,f=0,g=e.length;g>f;f++)if(a===e[f]){c.featurePosition[b]=f;break}}}},{key:"createIframeLayer",value:function(){var a=this;if(a.isVideo&&null!==a.media.rendererName&&a.media.rendererName.indexOf("iframe")>-1&&!i["default"].getElementById(a.media.id+"-iframe-overlay")){var b=i["default"].createElement("div"),c=i["default"].getElementById(a.media.id+"_"+a.media.rendererName);b.id=a.media.id+"-iframe-overlay",b.className=a.options.classPrefix+"iframe-overlay",b.addEventListener("click",function(b){a.options.clickToPlayPause&&(a.paused?a.play():a.pause(),b.preventDefault(),b.stopPropagation())}),c.parentNode.insertBefore(b,c)}}},{key:"resetSize",value:function(){var a=this;setTimeout(function(){a.setPlayerSize(a.width,a.height),a.setControlsSize()},50)}},{key:"setPoster",value:function(a){var b=this;if(b.getElement(b.container)){var c=b.getElement(b.container).querySelector("."+b.options.classPrefix+"poster");c||((c=i["default"].createElement("div")).className=b.options.classPrefix+"poster "+b.options.classPrefix+"layer",b.getElement(b.layers).appendChild(c));var d=c.querySelector("img");!d&&a&&((d=i["default"].createElement("img")).className=b.options.classPrefix+"poster-img",d.width="100%",d.height="100%",c.style.display="",c.appendChild(d)),a?(d.setAttribute("src",a),c.style.backgroundImage='url("'+a+'")',c.style.display=""):d?(c.style.backgroundImage="none",c.style.display="none",d.remove()):c.style.display="none"}else(n.IS_IPAD&&b.options.iPadUseNativeControls||n.IS_IPHONE&&b.options.iPhoneUseNativeControls||n.IS_ANDROID&&b.options.AndroidUseNativeControls)&&(b.media.originalNode.poster=a)}},{key:"changeSkin",value:function(a){var b=this;b.getElement(b.container).className=b.options.classPrefix+"container "+a,b.setPlayerSize(b.width,b.height),b.setControlsSize()}},{key:"globalBind",value:function(a,b){var c=this,d=c.node?c.node.ownerDocument:i["default"];if((a=(0,o.splitEvents)(a,c.id)).d)for(var e=a.d.split(" "),f=0,g=e.length;g>f;f++)e[f].split(".").reduce(function(a,c){return d.addEventListener(c,b,!1),c},"");if(a.w)for(var j=a.w.split(" "),k=0,l=j.length;l>k;k++)j[k].split(".").reduce(function(a,c){return h["default"].addEventListener(c,b,!1),c},"")}},{key:"globalUnbind",value:function(a,b){var c=this,d=c.node?c.node.ownerDocument:i["default"];if((a=(0,o.splitEvents)(a,c.id)).d)for(var e=a.d.split(" "),f=0,g=e.length;g>f;f++)e[f].split(".").reduce(function(a,c){return d.removeEventListener(c,b,!1),c},"");if(a.w)for(var j=a.w.split(" "),k=0,l=j.length;l>k;k++)j[k].split(".").reduce(function(a,c){return h["default"].removeEventListener(c,b,!1),c},"")}},{key:"buildfeatures",value:function(a,b,c,d){for(var e=this,f=0,g=e.options.features.length;g>f;f++){var h=e.options.features[f];if(e["build"+h])try{e["build"+h](a,b,c,d)}catch(a){console.error("error building "+h,a)}}}},{key:"buildposter",value:function(a,b,c,d){var e=this,f=i["default"].createElement("div");f.className=e.options.classPrefix+"poster "+e.options.classPrefix+"layer",c.appendChild(f);var g=d.originalNode.getAttribute("poster");""!==a.options.poster&&(g&&n.IS_IOS&&d.originalNode.removeAttribute("poster"),g=a.options.poster),g?e.setPoster(g):null!==e.media.renderer&&"function"==typeof e.media.renderer.getPosterUrl?e.setPoster(e.media.renderer.getPosterUrl()):f.style.display="none",d.addEventListener("play",function(){f.style.display="none"}),d.addEventListener("playing",function(){f.style.display="none"}),a.options.showPosterWhenEnded&&a.options.autoRewind&&d.addEventListener("ended",function(){f.style.display=""}),d.addEventListener("error",function(){f.style.display="none"}),a.options.showPosterWhenPaused&&d.addEventListener("pause",function(){a.ended||(f.style.display="")})}},{key:"buildoverlays",value:function(a,b,c,d){if(a.isVideo){var e=this,f=i["default"].createElement("div"),g=i["default"].createElement("div"),h=i["default"].createElement("div");f.style.display="none",f.className=e.options.classPrefix+"overlay "+e.options.classPrefix+"layer",f.innerHTML='<div class="'+e.options.classPrefix+'overlay-loading"><span class="'+e.options.classPrefix+'overlay-loading-bg-img"></span></div>',c.appendChild(f),g.style.display="none",g.className=e.options.classPrefix+"overlay "+e.options.classPrefix+"layer",g.innerHTML='<div class="'+e.options.classPrefix+'overlay-error"></div>',c.appendChild(g),h.className=e.options.classPrefix+"overlay "+e.options.classPrefix+"layer "+e.options.classPrefix+"overlay-play",h.innerHTML='<div class="'+e.options.classPrefix+'overlay-button" role="button" tabindex="0" aria-label="'+m["default"].t("mejs.play")+'" aria-pressed="false"></div>',h.addEventListener("click",function(){if(e.options.clickToPlayPause){var a=e.getElement(e.container).querySelector("."+e.options.classPrefix+"overlay-button"),b=a.getAttribute("aria-pressed");e.paused?e.play():e.pause(),a.setAttribute("aria-pressed",!!b),e.getElement(e.container).focus()}}),h.addEventListener("keydown",function(a){var b=a.keyCode||a.which||0;if(13===b||n.IS_FIREFOX&&32===b){var c=(0,o.createEvent)("click",h);return h.dispatchEvent(c),!1}}),c.appendChild(h),null!==e.media.rendererName&&(/(youtube|facebook)/i.test(e.media.rendererName)&&!(e.media.originalNode.getAttribute("poster")||a.options.poster||"function"==typeof e.media.renderer.getPosterUrl&&e.media.renderer.getPosterUrl())||n.IS_STOCK_ANDROID||e.media.originalNode.getAttribute("autoplay"))&&(h.style.display="none");var j=!1;d.addEventListener("play",function(){h.style.display="none",f.style.display="none",g.style.display="none",j=!1}),d.addEventListener("playing",function(){h.style.display="none",f.style.display="none",g.style.display="none",j=!1}),d.addEventListener("seeking",function(){h.style.display="none",f.style.display="",j=!1}),d.addEventListener("seeked",function(){h.style.display=e.paused&&!n.IS_STOCK_ANDROID?"":"none",f.style.display="none",j=!1}),d.addEventListener("pause",function(){f.style.display="none",n.IS_STOCK_ANDROID||j||(h.style.display=""),j=!1}),d.addEventListener("waiting",function(){f.style.display="",j=!1}),d.addEventListener("loadeddata",function(){f.style.display="",n.IS_ANDROID&&(d.canplayTimeout=setTimeout(function(){if(i["default"].createEvent){var a=i["default"].createEvent("HTMLEvents");return a.initEvent("canplay",!0,!0),d.dispatchEvent(a)}},300)),j=!1}),d.addEventListener("canplay",function(){f.style.display="none",clearTimeout(d.canplayTimeout),j=!1}),d.addEventListener("error",function(a){e._handleError(a,e.media,e.node),f.style.display="none",h.style.display="none",j=!0}),d.addEventListener("loadedmetadata",function(){e.controlsEnabled||e.enableControls()}),d.addEventListener("keydown",function(b){e.onkeydown(a,d,b),j=!1})}}},{key:"buildkeyboard",value:function(a,b,c,d){var e=this;e.getElement(e.container).addEventListener("keydown",function(){e.keyboardAction=!0}),e.globalKeydownCallback=function(b){var c=i["default"].activeElement.closest("."+e.options.classPrefix+"container"),f=e.media.closest("."+e.options.classPrefix+"container");return e.hasFocus=!(!c||!f||c.id!==f.id),e.onkeydown(a,d,b)},e.globalClickCallback=function(a){e.hasFocus=!!a.target.closest("."+e.options.classPrefix+"container")},e.globalBind("keydown",e.globalKeydownCallback),e.globalBind("click",e.globalClickCallback)}},{key:"onkeydown",value:function(a,b,c){if(a.hasFocus&&a.options.enableKeyboard)for(var d=0,e=a.options.keyActions.length;e>d;d++)for(var f=a.options.keyActions[d],g=0,h=f.keys.length;h>g;g++)if(c.keyCode===f.keys[g])return f.action(a,b,c.keyCode,c),c.preventDefault(),void c.stopPropagation();return!0}},{key:"play",value:function(){this.proxy.play()}},{key:"pause",value:function(){this.proxy.pause()}},{key:"load",value:function(){this.proxy.load()}},{key:"setCurrentTime",value:function(a){this.proxy.setCurrentTime(a)}},{key:"getCurrentTime",value:function(){return this.proxy.currentTime}},{key:"getDuration",value:function(){return this.proxy.duration}},{key:"setVolume",value:function(a){this.proxy.volume=a}},{key:"getVolume",value:function(){return this.proxy.getVolume()}},{key:"setMuted",value:function(a){this.proxy.setMuted(a)}},{key:"setSrc",value:function(a){this.controlsEnabled||this.enableControls(),this.proxy.setSrc(a)}},{key:"getSrc",value:function(){return this.proxy.getSrc()}},{key:"canPlayType",value:function(a){return this.proxy.canPlayType(a)}},{key:"remove",value:function(){var a=this,b=a.media.rendererName,c=a.media.originalNode.src;for(var d in a.options.features){var e=a.options.features[d];if(a["clean"+e])try{a["clean"+e](a,a.getElement(a.layers),a.getElement(a.controls),a.media)}catch(a){console.error("error cleaning "+e,a)}}var g=a.node.getAttribute("width"),h=a.node.getAttribute("height");g?-1===g.indexOf("%")&&(g+="px"):g="auto",h?-1===h.indexOf("%")&&(h+="px"):h="auto",a.node.style.width=g,a.node.style.height=h,a.setPlayerSize(0,0),a.isDynamic?a.getElement(a.container).parentNode.insertBefore(a.node,a.getElement(a.container)):function(){a.node.setAttribute("controls",!0),a.node.setAttribute("id",a.node.getAttribute("id").replace("_"+b,"").replace("_from_mejs",""));var d=a.getElement(a.container).querySelector("."+a.options.classPrefix+"poster>img");d&&a.node.setAttribute("poster",d.src),delete a.node.autoplay,""!==a.media.canPlayType((0,q.getTypeFromFile)(c))&&a.node.setAttribute("src",c),~b.indexOf("iframe")&&i["default"].getElementById(a.media.id+"-iframe-overlay").remove();var e=a.node.cloneNode();if(e.style.display="",a.getElement(a.container).parentNode.insertBefore(e,a.getElement(a.container)),a.node.remove(),a.mediaFiles)for(var f=0,g=a.mediaFiles.length;g>f;f++){var h=i["default"].createElement("source");h.setAttribute("src",a.mediaFiles[f].src),h.setAttribute("type",a.mediaFiles[f].type),e.appendChild(h)}if(a.trackFiles)for(var j=0,k=a.trackFiles.length;k>j;j++)!function(b,c){var d=a.trackFiles[b],f=i["default"].createElement("track");f.kind=d.kind,f.label=d.label,f.srclang=d.srclang,f.src=d.src,e.appendChild(f),f.addEventListener("load",function(){this.mode="showing",e.textTracks[b].mode="showing"})}(j);delete a.node,delete a.mediaFiles,delete a.trackFiles}(),"function"==typeof a.media.renderer.destroy&&a.media.renderer.destroy(),delete j["default"].players[a.id],"object"===f(a.getElement(a.container))&&(a.getElement(a.container).parentNode.querySelector("."+a.options.classPrefix+"offscreen").remove(),a.getElement(a.container).remove()),a.globalUnbind("resize",a.globalResizeCallback),a.globalUnbind("keydown",a.globalKeydownCallback),a.globalUnbind("click",a.globalClickCallback),delete a.media.player}},{key:"paused",get:function(){return this.proxy.paused}},{key:"muted",get:function(){return this.proxy.muted},set:function(a){this.setMuted(a)}},{key:"ended",get:function(){return this.proxy.ended}},{key:"readyState",get:function(){return this.proxy.readyState}},{key:"currentTime",set:function(a){this.setCurrentTime(a)},get:function(){return this.getCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"volume",set:function(a){this.setVolume(a)},get:function(){return this.getVolume()}},{key:"src",set:function(a){this.setSrc(a)},get:function(){return this.getSrc()}}]),a}();h["default"].MediaElementPlayer=t,j["default"].MediaElementPlayer=t,c["default"]=t},{17:17,2:2,25:25,26:26,27:27,28:28,3:3,30:30,5:5,6:6,7:7}],17:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(a){return a&&a.__esModule?a:{"default":a}}(a(3)),g=function(){function a(b){return d(this,a),this.media=b.media,this.isVideo=b.isVideo,this.classPrefix=b.options.classPrefix,this.createIframeLayer=function(){return b.createIframeLayer()},this.setPoster=function(a){return b.setPoster(a)},this}return e(a,[{key:"play",value:function(){this.media.play()}},{key:"pause",value:function(){this.media.pause()}},{key:"load",value:function(){var a=this;a.isLoaded||a.media.load(),a.isLoaded=!0}},{key:"setCurrentTime",value:function(a){this.media.setCurrentTime(a)}},{key:"getCurrentTime",value:function(){return this.media.currentTime}},{key:"getDuration",value:function(){return this.media.getDuration()}},{key:"setVolume",value:function(a){this.media.setVolume(a)}},{key:"getVolume",value:function(){return this.media.getVolume()}},{key:"setMuted",value:function(a){this.media.setMuted(a)}},{key:"setSrc",value:function(a){var b=this,c=document.getElementById(b.media.id+"-iframe-overlay");c&&c.remove(),b.media.setSrc(a),b.createIframeLayer(),null!==b.media.renderer&&"function"==typeof b.media.renderer.getPosterUrl&&b.setPoster(b.media.renderer.getPosterUrl())}},{key:"getSrc",value:function(){return this.media.getSrc()}},{key:"canPlayType",value:function(a){return this.media.canPlayType(a)}},{key:"paused",get:function(){return this.media.paused}},{key:"muted",set:function(a){this.setMuted(a)},get:function(){return this.media.muted}},{key:"ended",get:function(){return this.media.ended}},{key:"readyState",get:function(){return this.media.readyState}},{key:"currentTime",set:function(a){this.setCurrentTime(a)},get:function(){return this.getCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"volume",set:function(a){this.setVolume(a)},get:function(){return this.getVolume()}},{key:"src",set:function(a){this.setSrc(a)},get:function(){return this.getSrc()}}]),a}();c["default"]=g,f["default"].DefaultPlayer=g},{3:3}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(3)),f=d(a(7)),g=d(a(16));"undefined"!=typeof jQuery?f["default"].$=e["default"].jQuery=e["default"].$=jQuery:"undefined"!=typeof Zepto?f["default"].$=e["default"].Zepto=e["default"].$=Zepto:"undefined"!=typeof ender&&(f["default"].$=e["default"].ender=e["default"].$=ender),function(a){void 0!==a&&(a.fn.mediaelementplayer=function(b){return!1===b?this.each(function(){var b=a(this).data("mediaelementplayer");b&&b.remove(),a(this).removeData("mediaelementplayer")}):this.each(function(){a(this).data("mediaelementplayer",new g["default"](this,b))}),this},a(document).ready(function(){a("."+f["default"].MepDefaults.classPrefix+"player").mediaelementplayer()}))}(f["default"].$)},{16:16,3:3,7:7}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=d(a(3)),g=d(a(7)),h=a(8),i=a(27),j=a(28),k=a(25),l=a(26),m={promise:null,load:function(a){return"undefined"!=typeof dashjs?m.promise=new Promise(function(a){a()}).then(function(){m._createPlayer(a)}):(a.options.path="string"==typeof a.options.path?a.options.path:"https://cdn.dashjs.org/latest/dash.all.min.js",m.promise=m.promise||(0,l.loadScript)(a.options.path),m.promise.then(function(){m._createPlayer(a)})),m.promise},_createPlayer:function(a){var b=dashjs.MediaPlayer().create();return f["default"]["__ready__"+a.id](b),b}},n={name:"native_dash",options:{prefix:"native_dash",dash:{path:"https://cdn.dashjs.org/latest/dash.all.min.js",debug:!1,drm:{},robustnessLevel:""}},canPlayType:function(a){return k.HAS_MSE&&["application/dash+xml"].indexOf(a.toLowerCase())>-1},create:function(a,b,c){var d=a.originalNode,j=a.id+"_"+b.prefix,k=d.autoplay,l=d.children,n=null,o=null;d.removeAttribute("type");for(var p=0,q=l.length;q>p;p++)l[p].removeAttribute("type");n=d.cloneNode(!0),b=Object.assign(b,a.options);for(var r=g["default"].html5media.properties,s=g["default"].html5media.events.concat(["click","mouseover","mouseout"]),t=function(b){if("error"!==b.type){var c=(0,i.createEvent)(b.type,a);a.dispatchEvent(c)}},u=0,v=r.length;v>u;u++)!function(a){var c=""+a.substring(0,1).toUpperCase()+a.substring(1);n["get"+c]=function(){return null!==o?n[a]:null},n["set"+c]=function(c){if(-1===g["default"].html5media.readOnlyProperties.indexOf(a))if("src"===a){var d="object"===(void 0===c?"undefined":e(c))&&c.src?c.src:c;if(n[a]=d,null!==o){o.reset();for(var f=0,h=s.length;h>f;f++)n.removeEventListener(s[f],t);o=m._createPlayer({options:b.dash,id:j}),c&&"object"===(void 0===c?"undefined":e(c))&&"object"===e(c.drm)&&(o.setProtectionData(c.drm),(0,i.isString)(b.dash.robustnessLevel)&&b.dash.robustnessLevel&&o.getProtectionController().setRobustnessLevel(b.dash.robustnessLevel)),o.attachSource(d),k&&o.play()}}else n[a]=c}}(r[u]);if(f["default"]["__ready__"+j]=function(c){a.dashPlayer=o=c;for(var d=dashjs.MediaPlayer.events,f=0,h=s.length;h>f;f++)!function(a){"loadedmetadata"===a&&(o.getDebug().setLogToBrowserConsole(b.dash.debug),o.initialize(),o.setScheduleWhilePaused(!1),o.setFastSwitchEnabled(!0),o.attachView(n),o.setAutoPlay(!1),"object"!==e(b.dash.drm)||g["default"].Utils.isObjectEmpty(b.dash.drm)||(o.setProtectionData(b.dash.drm),(0,i.isString)(b.dash.robustnessLevel)&&b.dash.robustnessLevel&&o.getProtectionController().setRobustnessLevel(b.dash.robustnessLevel)),o.attachSource(n.getSrc())),n.addEventListener(a,t)}(s[f]);var j=function(b,c){if("error"===b.toLowerCase())a.generateError(c.message,n.src),console.error(c);else{var d=(0,i.createEvent)(b,a);d.data=c,a.dispatchEvent(d)}};for(var k in d)d.hasOwnProperty(k)&&o.on(d[k],function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];return j(a.type,c)})},c&&c.length>0)for(var w=0,x=c.length;x>w;w++)if(h.renderer.renderers[b.prefix].canPlayType(c[w].type)){n.setAttribute("src",c[w].src),void 0!==c[w].drm&&(b.dash.drm=c[w].drm);break}n.setAttribute("id",j),d.parentNode.insertBefore(n,d),d.autoplay=!1,d.style.display="none",n.setSize=function(a,b){return n.style.width=a+"px",n.style.height=b+"px",n},n.hide=function(){return n.pause(),n.style.display="none",n},n.show=function(){return n.style.display="",n},n.destroy=function(){null!==o&&o.reset()};var y=(0,i.createEvent)("rendererready",n);return a.dispatchEvent(y),a.promises.push(m.load({options:b.dash,id:j})),n}};j.typeChecks.push(function(a){return~a.toLowerCase().indexOf(".mpd")?"application/dash+xml":null}),h.renderer.add(n)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.PluginDetector=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=d(a(3)),g=d(a(2)),h=d(a(7)),i=d(a(5)),j=a(8),k=a(27),l=a(25),m=a(28),n=c.PluginDetector={plugins:[],hasPluginVersion:function(a,b){var c=n.plugins[a];return b[1]=b[1]||0,b[2]=b[2]||0,c[0]>b[0]||c[0]===b[0]&&c[1]>b[1]||c[0]===b[0]&&c[1]===b[1]&&c[2]>=b[2]},addPlugin:function(a,b,c,d,e){n.plugins[a]=n.detectPlugin(b,c,d,e)},detectPlugin:function(a,b,c,d){var g=[0,0,0],h=void 0,i=void 0;if(null!==l.NAV.plugins&&void 0!==l.NAV.plugins&&"object"===e(l.NAV.plugins[a])){if((h=l.NAV.plugins[a].description)&&(void 0===l.NAV.mimeTypes||!l.NAV.mimeTypes[b]||l.NAV.mimeTypes[b].enabledPlugin))for(var j=0,k=(g=h.replace(a,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".")).length;k>j;j++)g[j]=parseInt(g[j].match(/\d+/),10)}else if(void 0!==f["default"].ActiveXObject)try{(i=new ActiveXObject(c))&&(g=d(i))}catch(a){}return g}};n.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(a){var b=[],c=a.GetVariable("$version");return c&&(c=c.split(" ")[1].split(","),b=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]),b});var o={create:function(a,b,c){var d={},e=!1;d.options=b,d.id=a.id+"_"+d.options.prefix,d.mediaElement=a,d.flashState={},d.flashApi=null,d.flashApiStack=[];for(var n=h["default"].html5media.properties,o=0,p=n.length;p>o;o++)!function(a){d.flashState[a]=null;var b=""+a.substring(0,1).toUpperCase()+a.substring(1);d["get"+b]=function(){if(null!==d.flashApi){if("function"==typeof d.flashApi["get_"+a]){var b=d.flashApi["get_"+a]();return"buffered"===a?{start:function(){return 0},end:function(){return b},length:1}:b}return null}return null},d["set"+b]=function(a){if("src"===b&&(a=(0,m.absolutizeUrl)(a)),null!==d.flashApi&&void 0!==d.flashApi["set_"+b])try{d.flashApi["set_"+b](a)}catch(b){}else d.flashApiStack.push({type:"set",propName:b,value:a})}}(n[o]);var q=h["default"].html5media.methods;q.push("stop");for(var r=0,s=q.length;s>r;r++)!function(a){d[a]=function(){if(e)if(null!==d.flashApi){if(d.flashApi["fire_"+a])try{d.flashApi["fire_"+a]()}catch(a){}}else d.flashApiStack.push({type:"call",methodName:a})}}(q[r]);for(var t=["rendererready"],u=0,v=t.length;v>u;u++){var w=(0,k.createEvent)(t[u],d);a.dispatchEvent(w)}f["default"]["__ready__"+d.id]=function(){if(d.flashReady=!0,d.flashApi=g["default"].getElementById("__"+d.id),d.flashApiStack.length)for(var a=0,b=d.flashApiStack.length;b>a;a++){var c=d.flashApiStack[a];if("set"===c.type){var e=c.propName,f=""+e.substring(0,1).toUpperCase()+e.substring(1);d["set"+f](c.value)}else"call"===c.type&&d[c.methodName]()}},f["default"]["__event__"+d.id]=function(a,b){var c=(0,k.createEvent)(a,d);if(b)try{c.data=JSON.parse(b),c.details.data=JSON.parse(b)}catch(a){c.message=b}d.mediaElement.dispatchEvent(c)},d.flashWrapper=g["default"].createElement("div"),-1===["always","sameDomain"].indexOf(d.options.shimScriptAccess)&&(d.options.shimScriptAccess="sameDomain");var x=a.originalNode.autoplay,y=["uid="+d.id,"autoplay="+x,"allowScriptAccess="+d.options.shimScriptAccess,"preload="+(a.originalNode.getAttribute("preload")||"")],z=null!==a.originalNode&&"video"===a.originalNode.tagName.toLowerCase(),A=z?a.originalNode.height:1,B=z?a.originalNode.width:1;a.originalNode.getAttribute("src")&&y.push("src="+a.originalNode.getAttribute("src")),!0===d.options.enablePseudoStreaming&&(y.push("pseudostreamstart="+d.options.pseudoStreamingStartQueryParam),y.push("pseudostreamtype="+d.options.pseudoStreamingType)),d.options.streamDelimiter&&y.push("streamdelimiter="+encodeURIComponent(d.options.streamDelimiter)),d.options.proxyType&&y.push("proxytype="+d.options.proxyType),a.appendChild(d.flashWrapper),a.originalNode.style.display="none";var C=[];if(l.IS_IE||l.IS_EDGE){var D=g["default"].createElement("div");d.flashWrapper.appendChild(D),C=l.IS_EDGE?['type="application/x-shockwave-flash"','data="'+d.options.pluginPath+d.options.filename+'"','id="__'+d.id+'"','width="'+B+'"','height="'+A+"'\""]:['classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"','codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"','id="__'+d.id+'"','width="'+B+'"','height="'+A+'"'],z||C.push('style="clip: rect(0 0 0 0); position: absolute;"'),D.outerHTML="<object "+C.join(" ")+'><param name="movie" value="'+d.options.pluginPath+d.options.filename+"?x="+new Date+'" /><param name="flashvars" value="'+y.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+d.options.shimScriptAccess+'" /><param name="allowFullScreen" value="true" /><div>'+i["default"].t("mejs.install-flash")+"</div></object>"}else C=['id="__'+d.id+'"','name="__'+d.id+'"','play="true"','loop="false"','quality="high"','bgcolor="#000000"','wmode="transparent"','allowScriptAccess="'+d.options.shimScriptAccess+'"','allowFullScreen="true"','type="application/x-shockwave-flash"','pluginspage="//www.macromedia.com/go/getflashplayer"','src="'+d.options.pluginPath+d.options.filename+'"','flashvars="'+y.join("&")+'"'],z?(C.push('width="'+B+'"'),C.push('height="'+A+'"')):C.push('style="position: fixed; left: -9999em; top: -9999em;"'),d.flashWrapper.innerHTML="<embed "+C.join(" ")+">";if(d.flashNode=d.flashWrapper.lastChild,d.hide=function(){e=!1,z&&(d.flashNode.style.display="none")},d.show=function(){e=!0,z&&(d.flashNode.style.display="")},d.setSize=function(a,b){d.flashNode.style.width=a+"px",d.flashNode.style.height=b+"px",null!==d.flashApi&&"function"==typeof d.flashApi.fire_setSize&&d.flashApi.fire_setSize(a,b)},d.destroy=function(){d.flashNode.remove()},c&&c.length>0)for(var E=0,F=c.length;F>E;E++)if(j.renderer.renderers[b.prefix].canPlayType(c[E].type)){d.setSrc(c[E].src);break}return d}};if(n.hasPluginVersion("flash",[10,0,0])){m.typeChecks.push(function(a){return(a=a.toLowerCase()).startsWith("rtmp")?~a.indexOf(".mp3")?"audio/rtmp":"video/rtmp":/\.og(a|g)/i.test(a)?"audio/ogg":~a.indexOf(".m3u8")?"application/x-mpegURL":~a.indexOf(".mpd")?"application/dash+xml":~a.indexOf(".flv")?"video/flv":null});var p={name:"flash_video",options:{prefix:"flash_video",filename:"mediaelement-flash-video.swf",enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",pseudoStreamingType:"byte",proxyType:"",streamDelimiter:""},canPlayType:function(a){return~["video/mp4","video/rtmp","audio/rtmp","rtmp/mp4","audio/mp4","video/flv","video/x-flv"].indexOf(a.toLowerCase())},create:o.create};j.renderer.add(p);var q={name:"flash_hls",options:{prefix:"flash_hls",filename:"mediaelement-flash-video-hls.swf"},canPlayType:function(a){return~["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(a.toLowerCase())},create:o.create};j.renderer.add(q);var r={name:"flash_dash",options:{prefix:"flash_dash",filename:"mediaelement-flash-video-mdash.swf"},canPlayType:function(a){return~["application/dash+xml"].indexOf(a.toLowerCase())},create:o.create};j.renderer.add(r);var s={name:"flash_audio",options:{prefix:"flash_audio",filename:"mediaelement-flash-audio.swf"},canPlayType:function(a){return~["audio/mp3"].indexOf(a.toLowerCase())},create:o.create};j.renderer.add(s);var t={name:"flash_audio_ogg",options:{prefix:"flash_audio_ogg",filename:"mediaelement-flash-audio-ogg.swf"},canPlayType:function(a){return~["audio/ogg","audio/oga","audio/ogv"].indexOf(a.toLowerCase())},create:o.create};j.renderer.add(t)}},{2:2,25:25,27:27,28:28,3:3,5:5,7:7,8:8}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=d(a(3)),g=d(a(7)),h=a(8),i=a(27),j=a(25),k=a(28),l=a(26),m={promise:null,load:function(a){return"undefined"!=typeof flvjs?m.promise=new Promise(function(a){a()}).then(function(){m._createPlayer(a)}):(a.options.path="string"==typeof a.options.path?a.options.path:"https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.3/flv.min.js",m.promise=m.promise||(0,l.loadScript)(a.options.path),m.promise.then(function(){m._createPlayer(a)})),m.promise},_createPlayer:function(a){flvjs.LoggingControl.enableDebug=a.options.debug,flvjs.LoggingControl.enableVerbose=a.options.debug;var b=flvjs.createPlayer(a.options,a.configs);return f["default"]["__ready__"+a.id](b),b}},n={name:"native_flv",options:{prefix:"native_flv",flv:{path:"https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.3/flv.min.js",cors:!0,debug:!1}},canPlayType:function(a){return j.HAS_MSE&&["video/x-flv","video/flv"].indexOf(a.toLowerCase())>-1},create:function(a,b,c){var d=a.originalNode,j=a.id+"_"+b.prefix,k=null,l=null;k=d.cloneNode(!0),b=Object.assign(b,a.options);for(var n=g["default"].html5media.properties,o=g["default"].html5media.events.concat(["click","mouseover","mouseout"]),p=function(b){if("error"!==b.type){var c=(0,i.createEvent)(b.type,a);a.dispatchEvent(c)}},q=0,r=n.length;r>q;q++)!function(a){var c=""+a.substring(0,1).toUpperCase()+a.substring(1);k["get"+c]=function(){return null!==l?k[a]:null},k["set"+c]=function(c){if(-1===g["default"].html5media.readOnlyProperties.indexOf(a))if("src"===a){if(k[a]="object"===(void 0===c?"undefined":e(c))&&c.src?c.src:c,null!==l){var d={};d.type="flv",d.url=c,d.cors=b.flv.cors,d.debug=b.flv.debug,d.path=b.flv.path;var f=b.flv.configs;l.destroy();for(var h=0,i=o.length;i>h;h++)k.removeEventListener(o[h],p);(l=m._createPlayer({options:d,configs:f,id:j})).attachMediaElement(k),l.load()}}else k[a]=c}}(n[q]);if(f["default"]["__ready__"+j]=function(b){a.flvPlayer=l=b;for(var c=flvjs.Events,d=0,e=o.length;e>d;d++)!function(a){"loadedmetadata"===a&&(l.unload(),l.detachMediaElement(),l.attachMediaElement(k),l.load()),k.addEventListener(a,p)}(o[d]);var f=function(b,c){if("error"===b){var d=c[0]+": "+c[1]+" "+c[2].msg;a.generateError(d,k.src)}else{var e=(0,i.createEvent)(b,a);e.data=c,a.dispatchEvent(e)}};for(var g in c)!function(a){c.hasOwnProperty(a)&&l.on(c[a],function(){for(var b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return f(c[a],d)})}(g)},c&&c.length>0)for(var s=0,t=c.length;t>s;s++)if(h.renderer.renderers[b.prefix].canPlayType(c[s].type)){k.setAttribute("src",c[s].src);break}k.setAttribute("id",j),d.parentNode.insertBefore(k,d),d.autoplay=!1,d.style.display="none";var u={};u.type="flv",u.url=k.src,u.cors=b.flv.cors,u.debug=b.flv.debug,u.path=b.flv.path;var v=b.flv.configs;k.setSize=function(a,b){return k.style.width=a+"px",k.style.height=b+"px",k},k.hide=function(){return null!==l&&l.pause(),k.style.display="none",k},k.show=function(){return k.style.display="",k},k.destroy=function(){null!==l&&l.destroy()};var w=(0,i.createEvent)("rendererready",k);return a.dispatchEvent(w),a.promises.push(m.load({options:u,configs:v,id:j})),k}};k.typeChecks.push(function(a){return~a.toLowerCase().indexOf(".flv")?"video/flv":null}),h.renderer.add(n)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=d(a(3)),g=d(a(7)),h=a(8),i=a(27),j=a(25),k=a(28),l=a(26),m={promise:null,load:function(a){return"undefined"!=typeof Hls?m.promise=new Promise(function(a){a()}).then(function(){m._createPlayer(a)}):(a.options.path="string"==typeof a.options.path?a.options.path:"https://cdnjs.cloudflare.com/ajax/libs/hls.js/0.8.4/hls.min.js",m.promise=m.promise||(0,l.loadScript)(a.options.path),m.promise.then(function(){m._createPlayer(a)})),m.promise},_createPlayer:function(a){var b=new Hls(a.options);return f["default"]["__ready__"+a.id](b),b}},n={name:"native_hls",options:{prefix:"native_hls",hls:{path:"https://cdnjs.cloudflare.com/ajax/libs/hls.js/0.8.4/hls.min.js",autoStartLoad:!1,
debug:!1}},canPlayType:function(a){return j.HAS_MSE&&["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(a.toLowerCase())>-1},create:function(a,b,c){var d=a.originalNode,j=a.id+"_"+b.prefix,k=d.getAttribute("preload"),l=d.autoplay,n=null,o=null,p=0,q=c.length;o=d.cloneNode(!0),(b=Object.assign(b,a.options)).hls.autoStartLoad=k&&"none"!==k||l;for(var r=g["default"].html5media.properties,s=g["default"].html5media.events.concat(["click","mouseover","mouseout"]),t=function(b){if("error"!==b.type){var c=(0,i.createEvent)(b.type,a);a.dispatchEvent(c)}},u=0,v=r.length;v>u;u++)!function(a){var c=""+a.substring(0,1).toUpperCase()+a.substring(1);o["get"+c]=function(){return null!==n?o[a]:null},o["set"+c]=function(c){if(-1===g["default"].html5media.readOnlyProperties.indexOf(a))if("src"===a){if(o[a]="object"===(void 0===c?"undefined":e(c))&&c.src?c.src:c,null!==n){n.destroy();for(var d=0,f=s.length;f>d;d++)o.removeEventListener(s[d],t);(n=m._createPlayer({options:b.hls,id:j})).loadSource(c),n.attachMedia(o)}}else o[a]=c}}(r[u]);if(f["default"]["__ready__"+j]=function(b){a.hlsPlayer=n=b;for(var d=Hls.Events,e=0,f=s.length;f>e;e++)!function(b){if("loadedmetadata"===b){var c=a.originalNode.src;n.detachMedia(),n.loadSource(c),n.attachMedia(o)}o.addEventListener(b,t)}(s[e]);var g=void 0,h=void 0,j=function(b,d){if("hlsError"===b){if(console.warn(d),(d=d[1]).fatal)switch(d.type){case"mediaError":var e=(new Date).getTime();if(!g||e-g>3e3)g=(new Date).getTime(),n.recoverMediaError();else if(!h||e-h>3e3)h=(new Date).getTime(),console.warn("Attempting to swap Audio Codec and recover from media error"),n.swapAudioCodec(),n.recoverMediaError();else{var f="Cannot recover, last media error recovery failed";a.generateError(f,o.src),console.error(f)}break;case"networkError":"manifestLoadError"===d.details&&q>p&&void 0!==c[p+1]?(o.setSrc(c[p++].src),o.load(),o.play()):(a.generateError("Network error",c),console.error("Network error"));break;default:n.destroy()}}else{var j=(0,i.createEvent)(b,a);j.data=d,a.dispatchEvent(j)}};for(var k in d)!function(a){d.hasOwnProperty(a)&&n.on(d[a],function(){for(var b=arguments.length,c=Array(b),e=0;b>e;e++)c[e]=arguments[e];return j(d[a],c)})}(k)},q>0)for(;q>p;p++)if(h.renderer.renderers[b.prefix].canPlayType(c[p].type)){o.setAttribute("src",c[p].src);break}"auto"===k||l||(o.addEventListener("play",function(){null!==n&&n.startLoad()}),o.addEventListener("pause",function(){null!==n&&n.stopLoad()})),o.setAttribute("id",j),d.parentNode.insertBefore(o,d),d.autoplay=!1,d.style.display="none",o.setSize=function(a,b){return o.style.width=a+"px",o.style.height=b+"px",o},o.hide=function(){return o.pause(),o.style.display="none",o},o.show=function(){return o.style.display="",o},o.destroy=function(){null!==n&&(n.stopLoad(),n.destroy())};var w=(0,i.createEvent)("rendererready",o);return a.dispatchEvent(w),a.promises.push(m.load({options:b.hls,id:j})),o}};k.typeChecks.push(function(a){return~a.toLowerCase().indexOf(".m3u8")?"application/x-mpegURL":null}),h.renderer.add(n)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(3)),f=d(a(2)),g=d(a(7)),h=a(8),i=a(27),j=a(25),k={name:"html5",options:{prefix:"html5"},canPlayType:function(a){var b=f["default"].createElement("video");return j.IS_ANDROID&&/\/mp(3|4)$/i.test(a)||~["application/x-mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(a.toLowerCase())&&j.SUPPORTS_NATIVE_HLS?"yes":b.canPlayType?b.canPlayType(a.toLowerCase()).replace(/no/,""):""},create:function(a,b,c){var d=a.id+"_"+b.prefix,e=!1,j=null;void 0===a.originalNode||null===a.originalNode?(j=f["default"].createElement("audio"),a.appendChild(j)):j=a.originalNode,j.setAttribute("id",d);for(var k=g["default"].html5media.properties,l=0,m=k.length;m>l;l++)!function(a){var b=""+a.substring(0,1).toUpperCase()+a.substring(1);j["get"+b]=function(){return j[a]},j["set"+b]=function(b){-1===g["default"].html5media.readOnlyProperties.indexOf(a)&&(j[a]=b)}}(k[l]);for(var n=g["default"].html5media.events.concat(["click","mouseover","mouseout"]),o=0,p=n.length;p>o;o++)!function(b){j.addEventListener(b,function(b){if(e){var c=(0,i.createEvent)(b.type,b.target);a.dispatchEvent(c)}})}(n[o]);j.setSize=function(a,b){return j.style.width=a+"px",j.style.height=b+"px",j},j.hide=function(){return e=!1,j.style.display="none",j},j.show=function(){return e=!0,j.style.display="",j};var q=0,r=c.length;if(r>0)for(;r>q;q++)if(h.renderer.renderers[b.prefix].canPlayType(c[q].type)){j.setAttribute("src",c[q].src);break}j.addEventListener("error",function(b){4===b.target.error.code&&e&&(r>q&&void 0!==c[q+1]?(j.src=c[q++].src,j.load(),j.play()):a.generateError("Media error: Format(s) not supported or source(s) not found",c))});var s=(0,i.createEvent)("rendererready",j);return a.dispatchEvent(s),j}};e["default"].HtmlMediaElement=g["default"].HtmlMediaElement=k,h.renderer.add(k)},{2:2,25:25,27:27,3:3,7:7,8:8}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(3)),f=d(a(2)),g=d(a(7)),h=a(8),i=a(27),j=a(28),k=a(26),l={isIframeStarted:!1,isIframeLoaded:!1,iframeQueue:[],enqueueIframe:function(a){l.isLoaded="undefined"!=typeof YT&&YT.loaded,l.isLoaded?l.createIframe(a):(l.loadIframeApi(),l.iframeQueue.push(a))},loadIframeApi:function(){l.isIframeStarted||((0,k.loadScript)("https://www.youtube.com/player_api"),l.isIframeStarted=!0)},iFrameReady:function(){for(l.isLoaded=!0,l.isIframeLoaded=!0;l.iframeQueue.length>0;){var a=l.iframeQueue.pop();l.createIframe(a)}},createIframe:function(a){return new YT.Player(a.containerId,a)},getYouTubeId:function(a){var b="";return a.indexOf("?")>0?""===(b=l.getYouTubeIdFromParam(a))&&(b=l.getYouTubeIdFromUrl(a)):b=l.getYouTubeIdFromUrl(a),(b=b.substring(b.lastIndexOf("/")+1).split("?"))[0]},getYouTubeIdFromParam:function(a){if(void 0===a||null===a||!a.trim().length)return null;for(var b=a.split("?")[1].split("&"),c="",d=0,e=b.length;e>d;d++){var f=b[d].split("=");if("v"===f[0]){c=f[1];break}}return c},getYouTubeIdFromUrl:function(a){return void 0!==a&&null!==a&&a.trim().length?(a=a.split("?")[0]).substring(a.lastIndexOf("/")+1):null},getYouTubeNoCookieUrl:function(a){if(void 0===a||null===a||!a.trim().length||-1===a.indexOf("//www.youtube"))return a;var b=a.split("/");return b[2]=b[2].replace(".com","-nocookie.com"),b.join("/")}},m={name:"youtube_iframe",options:{prefix:"youtube_iframe",youtube:{autoplay:0,controls:0,disablekb:1,end:0,loop:0,modestbranding:0,playsinline:0,rel:0,showinfo:0,start:0,iv_load_policy:3,nocookie:!1,imageQuality:null}},canPlayType:function(a){return~["video/youtube","video/x-youtube"].indexOf(a.toLowerCase())},create:function(a,b,c){var d={},h=[],j=null,k=!0,m=!1,n=null,o=1;d.options=b,d.id=a.id+"_"+b.prefix,d.mediaElement=a;for(var p=g["default"].html5media.properties,q=0,r=p.length;r>q;q++)!function(b){var c=""+b.substring(0,1).toUpperCase()+b.substring(1);d["get"+c]=function(){if(null!==j){switch(b){case"currentTime":return j.getCurrentTime();case"duration":return j.getDuration();case"volume":return o=j.getVolume()/100;case"paused":return k;case"ended":return m;case"muted":return j.isMuted();case"buffered":var a=j.getVideoLoadedFraction(),c=j.getDuration();return{start:function(){return 0},end:function(){return a*c},length:1};case"src":return j.getVideoUrl();case"readyState":return 4}return null}return null},d["set"+c]=function(c){if(null!==j)switch(b){case"src":var e="string"==typeof c?c:c[0].src,f=l.getYouTubeId(e);a.originalNode.autoplay?j.loadVideoById(f):j.cueVideoById(f);break;case"currentTime":j.seekTo(c);break;case"muted":c?j.mute():j.unMute(),setTimeout(function(){var b=(0,i.createEvent)("volumechange",d);a.dispatchEvent(b)},50);break;case"volume":o=c,j.setVolume(100*c),setTimeout(function(){var b=(0,i.createEvent)("volumechange",d);a.dispatchEvent(b)},50);break;case"readyState":var g=(0,i.createEvent)("canplay",d);a.dispatchEvent(g)}else h.push({type:"set",propName:b,value:c})}}(p[q]);for(var s=g["default"].html5media.methods,t=0,u=s.length;u>t;t++)!function(a){d[a]=function(){if(null!==j)switch(a){case"play":return k=!1,j.playVideo();case"pause":return k=!0,j.pauseVideo();case"load":return null}else h.push({type:"call",methodName:a})}}(s[t]);var v=f["default"].createElement("div");v.id=d.id,d.options.youtube.nocookie&&(a.originalNode.src=l.getYouTubeNoCookieUrl(c[0].src)),a.originalNode.parentNode.insertBefore(v,a.originalNode),a.originalNode.style.display="none";var w="audio"===a.originalNode.tagName.toLowerCase(),x=w?"1":a.originalNode.height,y=w?"1":a.originalNode.width,z=l.getYouTubeId(c[0].src),A={id:d.id,containerId:v.id,videoId:z,height:x,width:y,playerVars:Object.assign({controls:0,rel:0,disablekb:1,showinfo:0,modestbranding:0,html5:1,iv_load_policy:3},d.options.youtube),origin:e["default"].location.host,events:{onReady:function(b){if(a.youTubeApi=j=b.target,a.youTubeState={paused:!0,ended:!1},h.length)for(var c=0,e=h.length;e>c;c++){var f=h[c];if("set"===f.type){var g=f.propName,k=""+g.substring(0,1).toUpperCase()+g.substring(1);d["set"+k](f.value)}else"call"===f.type&&d[f.methodName]()}n=j.getIframe(),a.originalNode.muted&&j.mute();for(var l=["mouseover","mouseout"],m=0,o=l.length;o>m;m++)n.addEventListener(l[m],function(b){var c=(0,i.createEvent)(b.type,d);a.dispatchEvent(c)},!1);for(var p=["rendererready","loadedmetadata","loadeddata","canplay"],q=0,r=p.length;r>q;q++){var s=(0,i.createEvent)(p[q],d);a.dispatchEvent(s)}},onStateChange:function(b){var c=[];switch(b.data){case-1:c=["loadedmetadata"],k=!0,m=!1;break;case 0:c=["ended"],k=!1,m=!d.options.youtube.loop,d.options.youtube.loop||d.stopInterval();break;case 1:c=["play","playing"],k=!1,m=!1,d.startInterval();break;case 2:c=["pause"],k=!0,m=!1,d.stopInterval();break;case 3:c=["progress"],m=!1;break;case 5:c=["loadeddata","loadedmetadata","canplay"],k=!0,m=!1}for(var e=0,f=c.length;f>e;e++){var g=(0,i.createEvent)(c[e],d);a.dispatchEvent(g)}},onError:function(b){var c=(0,i.createEvent)("error",d);c.data=b.data,a.dispatchEvent(c)}}};return(w||a.originalNode.hasAttribute("playsinline"))&&(A.playerVars.playsinline=1),a.originalNode.controls&&(A.playerVars.controls=1),a.originalNode.autoplay&&(A.playerVars.autoplay=1),a.originalNode.loop&&(A.playerVars.loop=1),l.enqueueIframe(A),d.onEvent=function(b,c,d){null!==d&&void 0!==d&&(a.youTubeState=d)},d.setSize=function(a,b){null!==j&&j.setSize(a,b)},d.hide=function(){d.stopInterval(),d.pause(),n&&(n.style.display="none")},d.show=function(){n&&(n.style.display="")},d.destroy=function(){j.destroy()},d.interval=null,d.startInterval=function(){d.interval=setInterval(function(){var b=(0,i.createEvent)("timeupdate",d);a.dispatchEvent(b)},250)},d.stopInterval=function(){d.interval&&clearInterval(d.interval)},d.getPosterUrl=function(){var c=b.youtube.imageQuality,d=["default","hqdefault","mqdefault","sddefault","maxresdefault"],e=l.getYouTubeId(a.originalNode.src);return c&&d.indexOf(c)>-1&&e?"https://img.youtube.com/vi/"+e+"/"+c+".jpg":""},d}};e["default"].onYouTubePlayerAPIReady=function(){l.iFrameReady()},j.typeChecks.push(function(a){return/\/\/(www\.youtube|youtu\.?be)/i.test(a)?"video/x-youtube":null}),h.renderer.add(m)},{2:2,26:26,27:27,28:28,3:3,7:7,8:8}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.cancelFullScreen=c.requestFullScreen=c.isFullScreen=c.FULLSCREEN_EVENT_NAME=c.HAS_NATIVE_FULLSCREEN_ENABLED=c.HAS_TRUE_NATIVE_FULLSCREEN=c.HAS_IOS_FULLSCREEN=c.HAS_MS_NATIVE_FULLSCREEN=c.HAS_MOZ_NATIVE_FULLSCREEN=c.HAS_WEBKIT_NATIVE_FULLSCREEN=c.HAS_NATIVE_FULLSCREEN=c.SUPPORTS_NATIVE_HLS=c.SUPPORT_PASSIVE_EVENT=c.SUPPORT_POINTER_EVENTS=c.HAS_MSE=c.IS_STOCK_ANDROID=c.IS_SAFARI=c.IS_FIREFOX=c.IS_CHROME=c.IS_EDGE=c.IS_IE=c.IS_ANDROID=c.IS_IOS=c.IS_IPOD=c.IS_IPHONE=c.IS_IPAD=c.UA=c.NAV=void 0;for(var e=d(a(3)),f=d(a(2)),g=d(a(7)),h=c.NAV=e["default"].navigator,i=c.UA=h.userAgent.toLowerCase(),j=c.IS_IPAD=/ipad/i.test(i)&&!e["default"].MSStream,k=c.IS_IPHONE=/iphone/i.test(i)&&!e["default"].MSStream,l=c.IS_IPOD=/ipod/i.test(i)&&!e["default"].MSStream,m=(c.IS_IOS=/ipad|iphone|ipod/i.test(i)&&!e["default"].MSStream,c.IS_ANDROID=/android/i.test(i)),n=c.IS_IE=/(trident|microsoft)/i.test(h.appName),o=(c.IS_EDGE="msLaunchUri"in h&&!("documentMode"in f["default"])),p=c.IS_CHROME=/chrome/i.test(i),q=c.IS_FIREFOX=/firefox/i.test(i),r=c.IS_SAFARI=/safari/i.test(i)&&!p,s=c.IS_STOCK_ANDROID=/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(i),t=(c.HAS_MSE="MediaSource"in e["default"]),u=(c.SUPPORT_POINTER_EVENTS=function(){var a=f["default"].createElement("x"),b=f["default"].documentElement,c=e["default"].getComputedStyle;if(!("pointerEvents"in a.style))return!1;a.style.pointerEvents="auto",a.style.pointerEvents="x",b.appendChild(a);var d=c&&"auto"===c(a,"").pointerEvents;return a.remove(),!!d}()),v=c.SUPPORT_PASSIVE_EVENT=function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});e["default"].addEventListener("test",null,b)}catch(a){}return a}(),w=["source","track","audio","video"],x=void 0,y=0,z=w.length;z>y;y++)x=f["default"].createElement(w[y]);var A=c.SUPPORTS_NATIVE_HLS=r||m&&(p||s)||n&&/edge/i.test(i),B=void 0!==x.webkitEnterFullscreen,C=void 0!==x.requestFullscreen;B&&/mac os x 10_5/i.test(i)&&(C=!1,B=!1);var D=void 0!==x.webkitRequestFullScreen,E=void 0!==x.mozRequestFullScreen,F=void 0!==x.msRequestFullscreen,G=D||E||F,H=G,I="",J=void 0,K=void 0,L=void 0;E?H=f["default"].mozFullScreenEnabled:F&&(H=f["default"].msFullscreenEnabled),p&&(B=!1),G&&(D?I="webkitfullscreenchange":E?I="mozfullscreenchange":F&&(I="MSFullscreenChange"),c.isFullScreen=J=function(){return E?f["default"].mozFullScreen:D?f["default"].webkitIsFullScreen:F?null!==f["default"].msFullscreenElement:void 0},c.requestFullScreen=K=function(a){D?a.webkitRequestFullScreen():E?a.mozRequestFullScreen():F&&a.msRequestFullscreen()},c.cancelFullScreen=L=function(){D?f["default"].webkitCancelFullScreen():E?f["default"].mozCancelFullScreen():F&&f["default"].msExitFullscreen()});var M=c.HAS_NATIVE_FULLSCREEN=C,N=c.HAS_WEBKIT_NATIVE_FULLSCREEN=D,O=c.HAS_MOZ_NATIVE_FULLSCREEN=E,P=c.HAS_MS_NATIVE_FULLSCREEN=F,Q=c.HAS_IOS_FULLSCREEN=B,R=c.HAS_TRUE_NATIVE_FULLSCREEN=G,S=c.HAS_NATIVE_FULLSCREEN_ENABLED=H,T=c.FULLSCREEN_EVENT_NAME=I;c.isFullScreen=J,c.requestFullScreen=K,c.cancelFullScreen=L,g["default"].Features=g["default"].Features||{},g["default"].Features.isiPad=j,g["default"].Features.isiPod=l,g["default"].Features.isiPhone=k,g["default"].Features.isiOS=g["default"].Features.isiPhone||g["default"].Features.isiPad,g["default"].Features.isAndroid=m,g["default"].Features.isIE=n,g["default"].Features.isEdge=o,g["default"].Features.isChrome=p,g["default"].Features.isFirefox=q,g["default"].Features.isSafari=r,g["default"].Features.isStockAndroid=s,g["default"].Features.hasMSE=t,g["default"].Features.supportsNativeHLS=A,g["default"].Features.supportsPointerEvents=u,g["default"].Features.supportsPassiveEvent=v,g["default"].Features.hasiOSFullScreen=Q,g["default"].Features.hasNativeFullscreen=M,g["default"].Features.hasWebkitNativeFullScreen=N,g["default"].Features.hasMozNativeFullScreen=O,g["default"].Features.hasMsNativeFullScreen=P,g["default"].Features.hasTrueNativeFullScreen=R,g["default"].Features.nativeFullScreenEnabled=S,g["default"].Features.fullScreenEventName=T,g["default"].Features.isFullScreen=J,g["default"].Features.requestFullScreen=K,g["default"].Features.cancelFullScreen=L},{2:2,3:3,7:7}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return new Promise(function(b,c){var d=n["default"].createElement("script");d.src=a,d.async=!0,d.onload=function(){d.remove(),b()},d.onerror=function(){d.remove(),c()},n["default"].head.appendChild(d)})}function f(a){var b=a.getBoundingClientRect(),c=m["default"].pageXOffset||n["default"].documentElement.scrollLeft,d=m["default"].pageYOffset||n["default"].documentElement.scrollTop;return{top:b.top+d,left:b.left+c}}function g(a,b){s(a,b)?u(a,b):t(a,b)}function h(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,c=arguments[2];a.style.opacity||(a.style.opacity=1);var d=null;m["default"].requestAnimationFrame(function e(f){var g=f-(d=d||f),h=parseFloat(1-g/b,2);a.style.opacity=0>h?0:h,g>b?c&&"function"==typeof c&&c():m["default"].requestAnimationFrame(e)})}function i(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,c=arguments[2];a.style.opacity||(a.style.opacity=0);var d=null;m["default"].requestAnimationFrame(function e(f){var g=f-(d=d||f),h=parseFloat(g/b,2);a.style.opacity=h>1?1:h,g>b?c&&"function"==typeof c&&c():m["default"].requestAnimationFrame(e)})}function j(a,b){var c=[];a=a.parentNode.firstChild;do b&&!b(a)||c.push(a);while(a=a.nextSibling);return c}function k(a){return void 0!==a.getClientRects&&"function"===a.getClientRects?!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length):!(!a.offsetWidth&&!a.offsetHeight)}function l(a,b,c,d){var e=m["default"].XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),f="application/x-www-form-urlencoded; charset=UTF-8",g=!1,h="*/".concat("*");switch(b){case"text":f="text/plain";break;case"json":f="application/json, text/javascript";break;case"html":f="text/html";break;case"xml":f="application/xml, text/xml"}"application/x-www-form-urlencoded"!==f&&(h=f+", */*; q=0.01"),e&&(e.open("GET",a,!0),e.setRequestHeader("Accept",h),e.onreadystatechange=function(){if(!g&&4===e.readyState)if(200===e.status){g=!0;var a=void 0;switch(b){case"json":a=JSON.parse(e.responseText);break;case"xml":a=e.responseXML;break;default:a=e.responseText}c(a)}else"function"==typeof d&&d(e.status)},e.send())}Object.defineProperty(c,"__esModule",{value:!0}),c.removeClass=c.addClass=c.hasClass=void 0,c.loadScript=e,c.offset=f,c.toggleClass=g,c.fadeOut=h,c.fadeIn=i,c.siblings=j,c.visible=k,c.ajax=l;var m=d(a(3)),n=d(a(2)),o=d(a(7)),p=void 0,q=void 0,r=void 0;"classList"in n["default"].documentElement?(p=function(a,b){return void 0!==a.classList&&a.classList.contains(b)},q=function(a,b){return a.classList.add(b)},r=function(a,b){return a.classList.remove(b)}):(p=function(a,b){return new RegExp("\\b"+b+"\\b").test(a.className)},q=function(a,b){s(a,b)||(a.className+=" "+b)},r=function(a,b){a.className=a.className.replace(new RegExp("\\b"+b+"\\b","g"),"")});var s=c.hasClass=p,t=c.addClass=q,u=c.removeClass=r;o["default"].Utils=o["default"].Utils||{},o["default"].Utils.offset=f,o["default"].Utils.hasClass=s,o["default"].Utils.addClass=t,o["default"].Utils.removeClass=u,o["default"].Utils.toggleClass=g,o["default"].Utils.fadeIn=i,o["default"].Utils.fadeOut=h,o["default"].Utils.siblings=j,o["default"].Utils.visible=k,o["default"].Utils.ajax=l,o["default"].Utils.loadScript=e},{2:2,3:3,7:7}],27:[function(a,b,c){"use strict";function d(a){if("string"!=typeof a)throw new Error("Argument passed must be a string");var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return a.replace(/[&<>"]/g,function(a){return b[a]})}function e(a,b){var c=this,d=arguments,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof a)throw new Error("First argument must be a function");if("number"!=typeof b)throw new Error("Second argument must be a numeric value");var f=void 0;return function(){var g=c,h=d,i=e&&!f;clearTimeout(f),f=setTimeout(function(){f=null,e||a.apply(g,h)},b),i&&a.apply(g,h)}}function f(a){return Object.getOwnPropertyNames(a).length<=0}function g(a,b){var c=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/,d={d:[],w:[]};return(a||"").split(" ").forEach(function(a){var e=a+(b?"."+b:"");e.startsWith(".")?(d.d.push(e),d.w.push(e)):d[c.test(a)?"w":"d"].push(e)}),d.d=d.d.join(" "),d.w=d.w.join(" "),d}function h(a,b){if("string"!=typeof a)throw new Error("Event name must be a string");var c=a.match(/([a-z]+\.([a-z]+))/i),d={target:b};return null!==c&&(a=c[1],d.namespace=c[2]),new window.CustomEvent(a,{detail:d})}function i(a,b){return!!(a&&b&&2&a.compareDocumentPosition(b))}function j(a){return"string"==typeof a}Object.defineProperty(c,"__esModule",{value:!0}),c.escapeHTML=d,c.debounce=e,c.isObjectEmpty=f,c.splitEvents=g,c.createEvent=h,c.isNodeAfter=i,c.isString=j;var k=function(a){return a&&a.__esModule?a:{"default":a}}(a(7));k["default"].Utils=k["default"].Utils||{},k["default"].Utils.escapeHTML=d,k["default"].Utils.debounce=e,k["default"].Utils.isObjectEmpty=f,k["default"].Utils.splitEvents=g,k["default"].Utils.createEvent=h,k["default"].Utils.isNodeAfter=i,k["default"].Utils.isString=j},{7:7}],28:[function(a,b,c){"use strict";function d(a){if("string"!=typeof a)throw new Error("`url` argument must be a string");var b=document.createElement("div");return b.innerHTML='<a href="'+(0,k.escapeHTML)(a)+'">x</a>',b.firstChild.href}function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a&&!b?g(a):b}function f(a){if("string"!=typeof a)throw new Error("`type` argument must be a string");return a&&a.indexOf(";")>-1?a.substr(0,a.indexOf(";")):a}function g(a){if("string"!=typeof a)throw new Error("`url` argument must be a string");for(var b=0,c=l.length;c>b;b++){var d=l[b](a);if(d)return d}var e=i(h(a)),f="video/mp4";return e&&(~["mp4","m4v","ogg","ogv","webm","flv","mpeg","mov"].indexOf(e)?f="video/"+e:~["mp3","oga","wav","mid","midi"].indexOf(e)&&(f="audio/"+e)),f}function h(a){if("string"!=typeof a)throw new Error("`url` argument must be a string");var b=a.split("?")[0].split("\\").pop().split("/").pop();return~b.indexOf(".")?b.substring(b.lastIndexOf(".")+1):""}function i(a){if("string"!=typeof a)throw new Error("`extension` argument must be a string");switch(a){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return a}}Object.defineProperty(c,"__esModule",{value:!0}),c.typeChecks=void 0,c.absolutizeUrl=d,c.formatType=e,c.getMimeFromType=f,c.getTypeFromFile=g,c.getExtension=h,c.normalizeExtension=i;var j=function(a){return a&&a.__esModule?a:{"default":a}}(a(7)),k=a(27),l=c.typeChecks=[];j["default"].Utils=j["default"].Utils||{},j["default"].Utils.typeChecks=l,j["default"].Utils.absolutizeUrl=d,j["default"].Utils.formatType=e,j["default"].Utils.getMimeFromType=f,j["default"].Utils.getTypeFromFile=g,j["default"].Utils.getExtension=h,j["default"].Utils.normalizeExtension=i},{27:27,7:7}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=d(a(2)),f=d(a(4));if([Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=e["default"].createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"==typeof window.CustomEvent?!1:(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}(),"function"!=typeof Object.assign&&(Object.assign=function(a){if(null===a||void 0===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(null!==e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(b[f]=e[f])}return b}),String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){for(var b=(this.document||this.ownerDocument).querySelectorAll(a),c=b.length-1;--c>=0&&b.item(c)!==this;);return c>-1}),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(a){var b=(this.document||this.ownerDocument).querySelectorAll(a),c=void 0,d=this;do for(c=b.length;--c>=0&&b.item(c)!==d;);while(0>c&&(d=d.parentElement));return d}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),/firefox/i.test(navigator.userAgent)){var g=window.getComputedStyle;window.getComputedStyle=function(a,b){var c=g(a,b);return null===c?{getPropertyValue:function(){}}:c}}window.Promise||(window.Promise=f["default"]),function(a){a&&a.prototype&&null===a.prototype.children&&Object.defineProperty(a.prototype,"children",{get:function(){for(var a=0,b=void 0,c=this.childNodes,d=[];b=c[a++];)1===b.nodeType&&d.push(b);return d}})}(window.Node||window.Element)},{2:2,4:4}],30:[function(a,b,c){"use strict";function d(){return!((arguments.length>0&&void 0!==arguments[0]?arguments[0]:25)%1==0)}function e(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mm:ss";a=!a||"number"!=typeof a||0>a?0:a;var h=Math.round(.066666*e),i=Math.round(e),j=24*Math.round(3600*e),k=Math.round(600*e),l=d(e)?";":":",m=void 0,n=void 0,o=void 0,p=void 0,q=Math.round(a*e);if(d(e)){0>q&&(q=j+q);var r=(q%=j)%k;q+=9*h*Math.floor(q/k),r>h&&(q+=h*Math.floor((r-h)/Math.round(60*i-h)));var s=Math.floor(q/i);m=Math.floor(Math.floor(s/60)/60),n=Math.floor(s/60)%60,o=c?s%60:(q/i%60).toFixed(f)}else m=Math.floor(a/3600)%24,n=Math.floor(a/60)%60,o=c?Math.floor(a%60):(a%60).toFixed(f);m=0>=m?0:m,n=0>=n?0:n,o=0>=o?0:o;for(var t=g.split(":"),u={},v=0,w=t.length;w>v;++v){for(var x="",y=0,z=t[v].length;z>y;y++)x.indexOf(t[v][y])<0&&(x+=t[v][y]);~["f","s","m","h"].indexOf(x)&&(u[x]=t[v].length)}var A=b||m>0?(10>m&&u.h>1?"0"+m:m)+":":"";return A+=(10>n&&u.m>1?"0"+n:n)+":",A+=""+(10>o&&u.s>1?"0"+o:o),c&&(A+=(p=(p=(q%i).toFixed(0))<=0?0:p)<10&&u.f?l+"0"+p:""+l+p),A}function f(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;if("string"!=typeof a)throw new TypeError("Time must be a string");if(a.indexOf(";")>0&&(a=a.replace(";",":")),!/\d{2}(\:\d{2}){0,3}/i.test(a))throw new TypeError("Time code must have the format `00:00:00`");var c=a.split(":"),e=void 0,f=0,g=0,h=0,i=0,j=0,k=Math.round(.066666*b),l=Math.round(b),m=3600*l,n=60*l;switch(c.length){default:case 1:h=parseInt(c[0],10);break;case 2:g=parseInt(c[0],10),h=parseInt(c[1],10);break;case 3:f=parseInt(c[0],10),g=parseInt(c[1],10),h=parseInt(c[2],10);break;case 4:f=parseInt(c[0],10),g=parseInt(c[1],10),h=parseInt(c[2],10),i=parseInt(c[3],10)}return e=d(b)?m*f+n*g+l*h+i-k*((j=60*f+g)-Math.floor(j/10)):(m*f+n*g+b*h+i)/b,parseFloat(e.toFixed(3))}function g(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;a=!a||"number"!=typeof a||0>a?0:a;for(var d=Math.floor(a/3600)%24,e=Math.floor(a/60)%60,f=Math.floor(a%60),g=[[Math.floor((a%1*c).toFixed(3)),"f"],[f,"s"],[e,"m"],[d,"h"]],h=b.timeFormat,i=h[1]===h[0],j=i?2:1,k=h.length<j?h[j]:":",l=h[0],m=!1,n=0,o=g.length;o>n;n++)if(~h.indexOf(g[n][1]))m=!0;else if(m){for(var p=!1,q=n;o>q;q++)if(g[q][0]>0){p=!0;break}if(!p)break;i||(h=l+h),h=g[n][1]+k+h,i&&(h=g[n][1]+h),l=g[n][1]}b.timeFormat=h}function h(a){if("string"!=typeof a)throw new TypeError("Argument must be a string value");for(var b=~(a=a.replace(",",".")).indexOf(".")?a.split(".")[1].length:0,c=0,d=1,e=0,f=(a=a.split(":").reverse()).length;f>e;e++)d=1,e>0&&(d=Math.pow(60,e)),c+=Number(a[e])*d;return Number(c.toFixed(b))}Object.defineProperty(c,"__esModule",{value:!0}),c.isDropFrame=d,c.secondsToTimeCode=e,c.timeCodeToSeconds=f,c.calculateTimeFormat=g,c.convertSMPTEtoSeconds=h;var i=function(a){return a&&a.__esModule?a:{"default":a}}(a(7));i["default"].Utils=i["default"].Utils||{},i["default"].Utils.secondsToTimeCode=e,i["default"].Utils.timeCodeToSeconds=f,i["default"].Utils.calculateTimeFormat=g,i["default"].Utils.convertSMPTEtoSeconds=h},{7:7}]},{},[29,6,5,15,23,20,19,21,22,24,16,18,17,9,10,11,12,13,14]),function(a,b){function c(){function a(){"undefined"!=typeof _wpmejsSettings&&(c=b.extend(!0,{},_wpmejsSettings)),c.classPrefix="mejs-",c.success=c.success||function(a){var b,c;a.rendererName&&-1!==a.rendererName.indexOf("flash")&&(b=a.attributes.autoplay&&"false"!==a.attributes.autoplay,c=a.attributes.loop&&"false"!==a.attributes.loop,b&&a.addEventListener("canplay",function(){a.play()},!1),c&&a.addEventListener("ended",function(){a.play()},!1))},c.customError=function(a,b){return-1!==a.rendererName.indexOf("flash")||-1!==a.rendererName.indexOf("flv")?'<a href="'+b.src+'">'+mejsL10n.strings["mejs.download-video"]+"</a>":void 0},b(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").filter(function(){return!b(this).parent().hasClass("mejs-mediaelement")}).mediaelementplayer(c)}var c={};return{initialize:a}}a.wp=a.wp||{},a.wp.mediaelement=new c,b(a.wp.mediaelement.initialize)}(window,jQuery),function(){function a(){this.returnValue=!1}function b(){this.cancelBubble=!0}var c,d,e=0,f=[],g={},h={},i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},j=/[<>&\"\']/g,k=window.setTimeout,l={};!function(a){var b,c,d,e=a.split(/,/);for(b=0;b<e.length;b+=2)for(d=e[b+1].split(/ /),c=0;c<d.length;c++)h[d[c]]=e[b]}("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var m={VERSION:"1.5.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:h,ua:function(){var a,b,c,d=navigator,e=d.userAgent,f=d.vendor;return a=/WebKit/.test(e),c=a&&-1!==f.indexOf("Apple"),b=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(e),ie:!a&&!b&&/MSIE/gi.test(e)&&/Explorer/gi.test(d.appName),webkit:a,gecko:!a&&/Gecko/.test(e),safari:c,opera:!!b}}(),typeOf:function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(a){return m.each(arguments,function(b,c){
c>0&&m.each(b,function(b,c){a[c]=b})}),a},cleanName:function(a){var b,c;for(c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);return a=a.replace(/\s+/g,"_"),a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){return b.name=a,f[a]=b,f.push(b),b},guid:function(){var a,b=(new Date).getTime().toString(32);for(a=0;5>a;a++)b+=Math.floor(65535*Math.random()).toString(32);return(m.guidPrefix||"p")+b+(e++).toString(32)},buildUrl:function(a,b){var c="";return m.each(b,function(a,b){c+=(c?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)}),c&&(a+=(a.indexOf("?")>0?"&":"?")+c),a},each:function(a,b){var d,e,f;if(a)if(d=a.length,d===c){for(e in a)if(a.hasOwnProperty(e)&&b(a[e],e)===!1)return}else for(f=0;d>f;f++)if(b(a[f],f)===!1)return},formatSize:function(a){return a===c||/\D/.test(a)?m.translate("N/A"):a>1073741824?Math.round(a/1073741824,1)+" GB":a>1048576?Math.round(a/1048576,1)+" MB":a>1024?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function c(a){var b,c,d=0,e=0;return a&&(c=a.getBoundingClientRect(),b="CSS1Compat"===i.compatMode?i.documentElement:i.body,d=c.left+b.scrollLeft,e=c.top+b.scrollTop),{x:d,y:e}}var d,e,f,g=0,h=0,i=document;if(a=a,b=b||i.body,a&&a.getBoundingClientRect&&m.ua.ie&&(!i.documentMode||i.documentMode<8))return e=c(a),f=c(b),{x:e.x-f.x,y:e.y-f.y};for(d=a;d&&d!=b&&d.nodeType;)g+=d.offsetLeft||0,h+=d.offsetTop||0,d=d.offsetParent;for(d=a.parentNode;d&&d!=b&&d.nodeType;)g-=d.scrollLeft||0,h-=d.scrollTop||0,d=d.parentNode;return{x:g,y:h}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;return"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],"g"==b&&(a*=1073741824),"m"==b&&(a*=1048576),"k"==b&&(a*=1024)),a},xmlEncode:function(a){return a?(""+a).replace(j,function(a){return i[a]?"&"+i[a]+";":a}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},inArray:function(a,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c}return-1},addI18n:function(a){return m.extend(g,a)},translate:function(a){return g[a]||a},isEmptyObj:function(a){if(a===c)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){var c;return""==a.className?!1:(c=new RegExp("(^|\\s+)"+b+"(\\s+|$)"),c.test(a.className))},addClass:function(a,b){m.hasClass(a,b)||(a.className=""==a.className?b:a.className.replace(/\s+$/,"")+" "+b)},removeClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a.className=a.className.replace(c,function(a,b,c){return" "===b&&" "===c?" ":""})},getStyle:function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null)[b]:void 0},addEvent:function(e,f,g){var h,i,j;j=arguments[3],f=f.toLowerCase(),d===c&&(d="Plupload_"+m.guid()),e.addEventListener?(h=g,e.addEventListener(f,h,!1)):e.attachEvent&&(h=function(){var c=window.event;c.target||(c.target=c.srcElement),c.preventDefault=a,c.stopPropagation=b,g(c)},e.attachEvent("on"+f,h)),e[d]===c&&(e[d]=m.guid()),l.hasOwnProperty(e[d])||(l[e[d]]={}),i=l[e[d]],i.hasOwnProperty(f)||(i[f]=[]),i[f].push({func:h,orig:g,key:j})},removeEvent:function(a,b){var e,f,g;if("function"==typeof arguments[2]?f=arguments[2]:g=arguments[2],b=b.toLowerCase(),a[d]&&l[a[d]]&&l[a[d]][b]){e=l[a[d]][b];for(var h=e.length-1;h>=0&&(e[h].key!==g&&e[h].orig!==f||(a.removeEventListener?a.removeEventListener(b,e[h].func,!1):a.detachEvent&&a.detachEvent("on"+b,e[h].func),e[h].orig=null,e[h].func=null,e.splice(h,1),f===c));h--);if(e.length||delete l[a[d]][b],m.isEmptyObj(l[a[d]])){delete l[a[d]];try{delete a[d]}catch(i){a[d]=c}}}},removeAllEvents:function(a){var b=arguments[1];a[d]!==c&&a[d]&&m.each(l[a[d]],function(c,d){m.removeEvent(a,d,b)})}};m.Uploader=function(a){function b(){var a,b,c=0;if(this.state==m.STARTED){for(b=0;b<i.length;b++)a||i[b].status!=m.QUEUED?c++:(a=i[b],a.status=m.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a));c==i.length&&(this.stop(),this.trigger("UploadComplete",i))}}function d(){var a,b;for(e.reset(),a=0;a<i.length;a++)b=i[a],b.size!==c?(e.size+=b.size,e.loaded+=b.loaded):e.size=c,b.status==m.DONE?e.uploaded++:b.status==m.FAILED?e.failed++:e.queued++;e.size===c?e.percent=i.length>0?Math.ceil(e.uploaded/i.length*100):0:(e.bytesPerSec=Math.ceil(e.loaded/((+new Date-g||1)/1e3)),e.percent=e.size>0?Math.ceil(e.loaded/e.size*100):0)}var e,g,h={},i=[],j=!1;e=new m.QueueProgress,a=m.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a),m.extend(this,{state:m.STOPPED,runtime:"",features:{},files:i,settings:a,total:e,id:m.guid(),init:function(){function e(){var a,b,c,d=j[o++];if(d){if(a=d.getFeatures(),b=n.settings.required_features)for(b=b.split(","),c=0;c<b.length;c++)if(!a[b[c]])return void e();d.init(n,function(b){b&&b.success?(n.features=a,n.runtime=d.name,n.trigger("Init",{runtime:d.name}),n.trigger("PostInit"),n.refresh()):e()})}else n.trigger("Error",{code:m.INIT_ERROR,message:m.translate("Init error.")})}var h,j,l,n=this,o=0;if("function"==typeof a.preinit?a.preinit(n):m.each(a.preinit,function(a,b){n.bind(b,a)}),a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url),a.chunk_size=m.parseSize(a.chunk_size),a.max_file_size=m.parseSize(a.max_file_size),n.bind("FilesAdded",function(b,d){var e,f,g,h=0,j=a.filters;for(j&&j.length&&(g=[],m.each(j,function(a){m.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?g.push("\\.*"):g.push("\\."+a.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),g=new RegExp(g.join("|")+"$","i")),e=0;e<d.length;e++)f=d[e],f.loaded=0,f.percent=0,f.status=m.QUEUED,!g||g.test(f.name)?f.size!==c&&f.size>a.max_file_size?b.trigger("Error",{code:m.FILE_SIZE_ERROR,message:m.translate("File size error."),file:f}):(i.push(f),h++):b.trigger("Error",{code:m.FILE_EXTENSION_ERROR,message:m.translate("File extension error."),file:f});return h?void k(function(){n.trigger("QueueChanged"),n.refresh()},1):!1}),a.unique_names&&n.bind("UploadFile",function(a,b){var c=b.name.match(/\.([^.]+)$/),d="tmp";c&&(d=c[1]),b.target_name=b.id+"."+d}),n.bind("UploadProgress",function(a,b){b.percent=b.size>0?Math.ceil(b.loaded/b.size*100):100,d()}),n.bind("StateChanged",function(a){if(a.state==m.STARTED)g=+new Date;else if(a.state==m.STOPPED)for(h=a.files.length-1;h>=0;h--)a.files[h].status==m.UPLOADING&&(a.files[h].status=m.QUEUED,d())}),n.bind("QueueChanged",d),n.bind("Error",function(a,c){c.file&&(c.file.status=m.FAILED,d(),a.state==m.STARTED&&k(function(){b.call(n)},1))}),n.bind("FileUploaded",function(a,c){c.status=m.DONE,c.loaded=c.size,a.trigger("UploadProgress",c),k(function(){b.call(n)},1)}),a.runtimes)for(j=[],l=a.runtimes.split(/\s?,\s?/),h=0;h<l.length;h++)f[l[h]]&&j.push(f[l[h]]);else j=f;e(),"function"==typeof a.init?a.init(n):m.each(a.init,function(a,b){n.bind(b,a)})},refresh:function(){this.trigger("Refresh")},start:function(){i.length&&this.state!=m.STARTED&&(this.state=m.STARTED,this.trigger("StateChanged"),b.call(this))},stop:function(){this.state!=m.STOPPED&&(this.state=m.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){j=arguments[0]!==c?arguments[0]:!0,this.trigger("DisableBrowse",j)},getFile:function(a){var b;for(b=i.length-1;b>=0;b--)if(i[b].id===a)return i[b]},removeFile:function(a){var b;for(b=i.length-1;b>=0;b--)if(i[b].id===a.id)return this.splice(b,1)[0]},splice:function(a,b){var d;return d=i.splice(a===c?0:a,b===c?i.length:b),this.trigger("FilesRemoved",d),this.trigger("QueueChanged"),d},trigger:function(a){var b,c,d=h[a.toLowerCase()];if(d)for(c=Array.prototype.slice.call(arguments),c[0]=this,b=0;b<d.length;b++)if(d[b].func.apply(d[b].scope,c)===!1)return!1;return!0},hasEventListener:function(a){return!!h[a.toLowerCase()]},bind:function(a,b,c){var d;a=a.toLowerCase(),d=h[a]||[],d.push({func:b,scope:c||this}),h[a]=d},unbind:function(a){a=a.toLowerCase();var b,d=h[a],e=arguments[1];if(d){if(e!==c){for(b=d.length-1;b>=0;b--)if(d[b].func===e){d.splice(b,1);break}}else d=[];d.length||delete h[a]}},unbindAll:function(){var a=this;m.each(h,function(b,c){a.unbind(c)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},m.File=function(a,b,c){var d=this;d.id=a,d.name=b,d.size=c,d.loaded=0,d.percent=0,d.status=0},m.Runtime=function(){this.getFeatures=function(){},this.init=function(a,b){}},m.QueueProgress=function(){var a=this;a.size=0,a.loaded=0,a.uploaded=0,a.failed=0,a.queued=0,a.percent=0,a.bytesPerSec=0,a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},m.runtimes={},window.plupload=m}(),function(a,b,c,d){function e(a){var c=a.naturalWidth,d=a.naturalHeight;if(c*d>1048576){var e=b.createElement("canvas");e.width=e.height=1;var f=e.getContext("2d");return f.drawImage(a,-c+1,0),0===f.getImageData(0,0,1,1).data[3]}return!1}function f(a,c,d){var e=b.createElement("canvas");e.width=1,e.height=d;var f=e.getContext("2d");f.drawImage(a,0,0);for(var g=f.getImageData(0,0,1,d).data,h=0,i=d,j=d;j>h;){var k=g[4*(j-1)+3];0===k?i=j:h=j,j=i+h>>1}var l=j/d;return 0===l?1:l}function g(a,c,d){var g=a.naturalWidth,h=a.naturalHeight,i=d.width,j=d.height,k=c.getContext("2d");k.save();var l=e(a);l&&(g/=2,h/=2);var m=1024,n=b.createElement("canvas");n.width=n.height=m;for(var o=n.getContext("2d"),p=f(a,g,h),q=0;h>q;){for(var r=q+m>h?h-q:m,s=0;g>s;){var t=s+m>g?g-s:m;o.clearRect(0,0,m,m),o.drawImage(a,-s,-q);var u=s*i/g<<0,v=Math.ceil(t*i/g),w=q*j/h/p<<0,x=Math.ceil(r*j/h/p);k.drawImage(n,0,0,t,r,u,w,v,x),s+=m}q+=m}k.restore(),n=o=null}function h(b,c){var d;return"FileReader"in a?(d=new FileReader,d.readAsDataURL(b),d.onload=function(){c(d.result)},void 0):c(b.getAsDataURL())}function j(b,c){var d;return"FileReader"in a?(d=new FileReader,d.readAsBinaryString(b),d.onload=function(){c(d.result)},void 0):c(b.getAsBinary())}function k(a,c,d,e){var f,i,j,k=this;h(p[a.id],function(h){f=b.createElement("canvas"),f.style.display="none",b.body.appendChild(f),i=new Image,i.onerror=i.onabort=function(){e({success:!1})},i.onload=function(){var b,l,o,p;if(c.width||(c.width=i.width),c.height||(c.height=i.height),j=Math.min(c.width/i.width,c.height/i.height),1>j)b=Math.round(i.width*j),l=Math.round(i.height*j);else{if(!c.quality||"image/jpeg"!==d)return void e({success:!1});b=i.width,l=i.height}if(f.width=b,f.height=l,g(i,f,{width:b,height:l}),"image/jpeg"===d&&(o=new m(atob(h.substring(h.indexOf("base64,")+7))),o.headers&&o.headers.length&&(p=new n,p.init(o.get("exif")[0])&&(p.setExif("PixelXDimension",b),p.setExif("PixelYDimension",l),o.set("exif",p.getBinary()),k.hasEventListener("ExifData")&&k.trigger("ExifData",a,p.EXIF()),k.hasEventListener("GpsData")&&k.trigger("GpsData",a,p.GPS())))),c.quality&&"image/jpeg"===d)try{h=f.toDataURL(d,c.quality/100)}catch(q){h=f.toDataURL(d)}else h=f.toDataURL(d);h=h.substring(h.indexOf("base64,")+7),h=atob(h),o&&o.headers&&o.headers.length&&(h=o.restore(h),o.purge()),f.parentNode.removeChild(f),e({success:!0,data:h})},i.src=h})}function l(){function a(a,b){var c,d=f?0:-8*(b-1),g=0;for(c=0;b>c;c++)g|=e.charCodeAt(a+c)<<Math.abs(d+8*c);return g}function b(a,b,c){var c=3===arguments.length?c:e.length-b-1;e=e.substr(0,b)+a+e.substr(c+b)}function c(a,c,d){var e,g="",h=f?0:-8*(d-1);for(e=0;d>e;e++)g+=String.fromCharCode(c>>Math.abs(h+8*e)&255);b(g,a,d)}var e,f=!1;return{II:function(a){return a===d?f:void(f=a)},init:function(a){f=!1,e=a},SEGMENT:function(a,c,d){switch(arguments.length){case 1:return e.substr(a,e.length-a-1);case 2:return e.substr(a,c);case 3:b(d,a,c);break;default:return e}},BYTE:function(b){return a(b,1)},SHORT:function(b){return a(b,2)},LONG:function(b,e){return e===d?a(b,4):void c(b,e,4)},SLONG:function(b){var c=a(b,4);return c>2147483647?c-4294967296:c},STRING:function(b,c){var d="";for(c+=b;c>b;b++)d+=String.fromCharCode(a(b,1));return d}}}function m(a){var b,c,e,f={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},g=[],h=d,i=0;if(b=new l,b.init(a),65496===b.SHORT(0)){for(c=2,e=Math.min(1048576,a.length);e>=c;)if(h=b.SHORT(c),h>=65488&&65495>=h)c+=2;else{if(65498===h||65497===h)break;i=b.SHORT(c+2)+2,f[h]&&b.STRING(c+4,f[h].signature.length)===f[h].signature&&g.push({hex:h,app:f[h].app.toUpperCase(),name:f[h].name.toUpperCase(),start:c,length:i,segment:b.SEGMENT(c,i)}),c+=i}return b.init(null),{headers:g,restore:function(a){b.init(a);var d=new m(a);if(!d.headers)return!1;for(var e=d.headers.length;e>0;e--){var f=d.headers[e-1];b.SEGMENT(f.start,f.length,"")}d.purge(),c=65504==b.SHORT(2)?4+b.SHORT(4):2;for(var e=0,h=g.length;h>e;e++)b.SEGMENT(c,0,g[e].segment),c+=g[e].length;return b.SEGMENT()},get:function(a){for(var b=[],c=0,d=g.length;d>c;c++)g[c].app===a.toUpperCase()&&b.push(g[c].segment);return b},set:function(a,b){var c=[];"string"==typeof b?c.push(b):c=b;for(var d=ii=0,e=g.length;e>d&&(g[d].app===a.toUpperCase()&&(g[d].segment=c[ii],g[d].length=c[ii].length,ii++),!(ii>=c.length));d++);},purge:function(){g=[],b.init(null)}}}}function n(){function a(a,b){var c,e,g,i,k,l,m,n,o=f.SHORT(a),p=[],q={};for(c=0;o>c;c++)if(m=l=a+12*c+2,g=b[f.SHORT(m)],g!==d){switch(i=f.SHORT(m+=2),k=f.LONG(m+=2),m+=4,p=[],i){case 1:case 7:for(k>4&&(m=f.LONG(m)+j.tiffHeader),e=0;k>e;e++)p[e]=f.BYTE(m+e);break;case 2:k>4&&(m=f.LONG(m)+j.tiffHeader),q[g]=f.STRING(m,k-1);continue;case 3:for(k>2&&(m=f.LONG(m)+j.tiffHeader),e=0;k>e;e++)p[e]=f.SHORT(m+2*e);break;case 4:for(k>1&&(m=f.LONG(m)+j.tiffHeader),e=0;k>e;e++)p[e]=f.LONG(m+4*e);break;case 5:for(m=f.LONG(m)+j.tiffHeader,e=0;k>e;e++)p[e]=f.LONG(m+4*e)/f.LONG(m+4*e+4);break;case 9:for(m=f.LONG(m)+j.tiffHeader,e=0;k>e;e++)p[e]=f.SLONG(m+4*e);break;case 10:for(m=f.LONG(m)+j.tiffHeader,e=0;k>e;e++)p[e]=f.SLONG(m+4*e)/f.SLONG(m+4*e+4);break;default:continue}n=1==k?p[0]:p,h.hasOwnProperty(g)&&"object"!=typeof n?q[g]=h[g][n]:q[g]=n}return q}function b(){var b=d,c=j.tiffHeader;return f.II(18761==f.SHORT(c)),42!==f.SHORT(c+=2)?!1:(j.IFD0=j.tiffHeader+f.LONG(c+=2),b=a(j.IFD0,g.tiff),j.exifIFD="ExifIFDPointer"in b?j.tiffHeader+b.ExifIFDPointer:d,j.gpsIFD="GPSInfoIFDPointer"in b?j.tiffHeader+b.GPSInfoIFDPointer:d,!0)}function e(a,b,c){var d,e,h,k=0;if("string"==typeof b){var l=g[a.toLowerCase()];for(hex in l)if(l[hex]===b){b=hex;break}}for(d=j[a.toLowerCase()+"IFD"],e=f.SHORT(d),i=0;i<e;i++)if(h=d+12*i+2,f.SHORT(h)==b){k=h+8;break}return k?(f.LONG(k,c),!0):!1}var f,g,h,j={};return f=new l,g={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},h={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(a){return j={tiffHeader:10},a!==d&&a.length?(f.init(a),65505===f.SHORT(0)&&"EXIF\x00"===f.STRING(4,5).toUpperCase()?b():!1):!1},EXIF:function(){var b;if(b=a(j.exifIFD,g.exif),b.ExifVersion&&"array"===c.typeOf(b.ExifVersion)){for(var d=0,e="";d<b.ExifVersion.length;d++)e+=String.fromCharCode(b.ExifVersion[d]);b.ExifVersion=e}return b},GPS:function(){var b;return b=a(j.gpsIFD,g.gps),b.GPSVersionID&&(b.GPSVersionID=b.GPSVersionID.join(".")),b},setExif:function(a,b){return"PixelXDimension"!==a&&"PixelYDimension"!==a?!1:e("exif",a,b)},getBinary:function(){return f.SEGMENT()}}}var o,p={};c.runtimes.Html5=c.addRuntime("html5",{getFeatures:function(){var d,e,f,g,h,i;return e=f=h=i=!1,a.XMLHttpRequest&&(d=new XMLHttpRequest,f=!!d.upload,e=!(!d.sendAsBinary&&!d.upload)),e&&(g=!!(d.sendAsBinary||a.Uint8Array&&a.ArrayBuffer),h=!(!File||!File.prototype.getAsDataURL&&!a.FileReader||!g),i=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),o=c.ua.safari&&c.ua.windows,{html5:e,dragdrop:function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}(),jpgresize:h,pngresize:h,multipart:h||!!a.FileReader||!!a.FormData,canSendBinary:g,cantSendBlobInFormData:!(!(c.ua.gecko&&a.FormData&&a.FileReader)||FileReader.prototype.readAsArrayBuffer)||c.ua.android,progress:f,chunks:i,multi_selection:!(c.ua.safari&&c.ua.windows),triggerDialog:c.ua.gecko&&a.FormData||c.ua.webkit}},init:function(d,e){var f,g,h=function(a){var b,e,f,g=[],h={};for(e=0;e<a.length;e++)b=a[e],h[b.name]&&c.ua.safari&&c.ua.windows||(h[b.name]=!0,f=c.guid(),p[f]=b,g.push(new c.File(f,b.fileName||b.name,b.fileSize||b.size)));g.length&&d.trigger("FilesAdded",g)};return d.addFiles=h,f=this.getFeatures(),f.html5?(d.bind("Init",function(a){var e,f,g,i,j,k,l,m=[],n=a.settings.filters,o=b.body;e=b.createElement("div"),e.id=a.id+"_html5_container",c.extend(e.style,{position:"absolute",background:d.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:d.settings.shim_bgcolor?"":0}),e.className="plupload html5",d.settings.container&&(o=b.getElementById(d.settings.container),"static"===c.getStyle(o,"position")&&(o.style.position="relative")),o.appendChild(e);a:for(g=0;g<n.length;g++)for(j=n[g].extensions.split(/,/),i=0;i<j.length;i++){if("*"===j[i]){m=[];break a}k=c.mimeTypes[j[i]],k&&-1===c.inArray(k,m)&&m.push(k)}if(e.innerHTML='<input id="'+d.id+'_html5"  style="font-size:999px" type="file" accept="'+m.join(",")+'" '+(d.settings.multi_selection&&d.features.multi_selection?'multiple="multiple"':"")+" />",e.scrollTop=100,l=b.getElementById(d.id+"_html5"),a.features.triggerDialog?c.extend(l.style,{position:"absolute",width:"100%",height:"100%"}):c.extend(l.style,{cssFloat:"right",styleFloat:"right"}),l.onchange=function(){h(this.files),this.value=""},f=b.getElementById(a.settings.browse_button)){var p=a.settings.browse_button_hover,q=a.settings.browse_button_active,r=a.features.triggerDialog?f:e;p&&(c.addEvent(r,"mouseover",function(){c.addClass(f,p)},a.id),c.addEvent(r,"mouseout",function(){c.removeClass(f,p)},a.id)),q&&(c.addEvent(r,"mousedown",function(){c.addClass(f,q)},a.id),c.addEvent(b.body,"mouseup",function(){c.removeClass(f,q)},a.id)),a.features.triggerDialog&&c.addEvent(f,"click",function(c){var d=b.getElementById(a.id+"_html5");d&&!d.disabled&&d.click(),c.preventDefault()},a.id)}}),d.bind("PostInit",function(){var a=b.getElementById(d.settings.drop_element);if(a){if(o)return void c.addEvent(a,"dragenter",function(e){var f,g,i;f=b.getElementById(d.id+"_drop"),f||(f=b.createElement("input"),f.setAttribute("type","file"),f.setAttribute("id",d.id+"_drop"),f.setAttribute("multiple","multiple"),c.addEvent(f,"change",function(){h(this.files),c.removeEvent(f,"change",d.id),f.parentNode.removeChild(f)},d.id),c.addEvent(f,"dragover",function(a){a.stopPropagation()},d.id),a.appendChild(f)),g=c.getPos(a,b.getElementById(d.settings.container)),i=c.getSize(a),"static"===c.getStyle(a,"position")&&c.extend(a.style,{position:"relative"}),c.extend(f.style,{position:"absolute",display:"block",top:0,left:0,width:i.w+"px",height:i.h+"px",opacity:0})},d.id);c.addEvent(a,"dragover",function(a){a.preventDefault()},d.id),c.addEvent(a,"drop",function(a){var b=a.dataTransfer;b&&b.files&&h(b.files),a.preventDefault()},d.id)}}),d.bind("Refresh",function(a){var e,f,g,h,i;e=b.getElementById(d.settings.browse_button),e&&(f=c.getPos(e,b.getElementById(a.settings.container)),g=c.getSize(e),h=b.getElementById(d.id+"_html5_container"),c.extend(h.style,{top:f.y+"px",left:f.x+"px",width:g.w+"px",height:g.h+"px"}),d.features.triggerDialog&&("static"===c.getStyle(e,"position")&&c.extend(e.style,{position:"relative"}),i=parseInt(c.getStyle(e,"zIndex"),10),isNaN(i)&&(i=0),c.extend(e.style,{zIndex:i}),c.extend(h.style,{zIndex:i-1})))}),d.bind("DisableBrowse",function(a,c){var d=b.getElementById(a.id+"_html5");d&&(d.disabled=c)}),d.bind("CancelUpload",function(){g&&g.abort&&g.abort()}),d.bind("UploadFile",function(b,d){function e(a,b,c){var d;if(!File.prototype.slice)return(d=File.prototype.webkitSlice||File.prototype.mozSlice)?d.call(a,b,c):null;try{return a.slice(),a.slice(b,c)}catch(e){return a.slice(b,c-b)}}function h(h){function i(){function m(a){if(g.sendAsBinary)g.sendAsBinary(a);else if(b.features.canSendBinary){for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=255&a.charCodeAt(d);g.send(c.buffer)}}function n(e){var h,l=0,n="----pluploadboundary"+c.guid(),v="--",w="\r\n",x="";if(g=new XMLHttpRequest,g.upload&&(g.upload.onprogress=function(a){d.loaded=Math.min(d.size,k+a.loaded-l),b.trigger("UploadProgress",d)}),g.onreadystatechange=function(){var a,f;if(4==g.readyState&&b.state!==c.STOPPED){try{a=g.status}catch(l){a=0}if(a>=400)b.trigger("Error",{code:c.HTTP_ERROR,message:c.translate("HTTP Error."),file:d,status:a});else{if(p){if(f={chunk:j,chunks:p,response:g.responseText,status:a},b.trigger("ChunkUploaded",d,f),k+=s,f.cancelled)return void(d.status=c.FAILED);d.loaded=Math.min(d.size,(j+1)*r)}else d.loaded=d.size;b.trigger("UploadProgress",d),e=o=h=x=null,!p||++j>=p?(d.status=c.DONE,b.trigger("FileUploaded",d,{response:g.responseText,status:a})):i()}}},b.settings.multipart&&f.multipart){if(q.name=d.target_name||d.name,g.open("post",u,!0),c.each(b.settings.headers,function(a,b){g.setRequestHeader(b,a)}),"string"!=typeof e&&a.FormData)return h=new FormData,c.each(c.extend(q,b.settings.multipart_params),function(a,b){h.append(b,a)}),h.append(b.settings.file_data_name,e),void g.send(h);if("string"==typeof e)return g.setRequestHeader("Content-Type","multipart/form-data; boundary="+n),c.each(c.extend(q,b.settings.multipart_params),function(a,b){x+=v+n+w+'Content-Disposition: form-data; name="'+b+'"'+w+w,x+=unescape(encodeURIComponent(a))+w}),t=c.mimeTypes[d.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",x+=v+n+w+'Content-Disposition: form-data; name="'+b.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(d.name))+'"'+w+"Content-Type: "+t+w+w+e+w+v+n+v+w,l=x.length-e.length,e=x,void m(e)}u=c.buildUrl(b.settings.url,c.extend(q,b.settings.multipart_params)),g.open("post",u,!0),g.setRequestHeader("Content-Type","application/octet-stream"),c.each(b.settings.headers,function(a,b){g.setRequestHeader(b,a)}),"string"==typeof e?m(e):g.send(e)}var o,p,q,r,s,t,u=b.settings.url;d.status!=c.DONE&&d.status!=c.FAILED&&b.state!=c.STOPPED&&(q={name:d.target_name||d.name},l.chunk_size&&d.size>l.chunk_size&&(f.chunks||"string"==typeof h)?(r=l.chunk_size,p=Math.ceil(d.size/r),s=Math.min(r,d.size-j*r),o="string"==typeof h?h.substring(j*r,j*r+s):e(h,j*r,j*r+s),q.chunk=j,q.chunks=p):(s=d.size,o=h),b.settings.multipart&&f.multipart&&"string"!=typeof o&&a.FileReader&&f.cantSendBlobInFormData&&f.chunks&&b.settings.chunk_size?!function(){var a=new FileReader;a.onload=function(){n(a.result),a=null},a.readAsBinaryString(o)}():n(o))}var j=0,k=0;i()}var i,l=b.settings;i=p[d.id],f.jpgresize&&b.settings.resize&&/\.(png|jpg|jpeg)$/i.test(d.name)?k.call(b,d,b.settings.resize,/\.png$/i.test(d.name)?"image/png":"image/jpeg",function(a){a.success?(d.size=a.data.length,h(a.data)):f.chunks?h(i):j(i,h)}):!f.chunks&&f.jpgresize?j(i,h):h(i)}),d.bind("Destroy",function(a){var d,e,f=b.body,g={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(d in g)e=b.getElementById(g[d]),e&&c.removeAllEvents(e,a.id);c.removeAllEvents(b.body,a.id),a.settings.container&&(f=b.getElementById(a.settings.container)),f.removeChild(b.getElementById(g.inputContainer))}),void e({success:!0})):void e({success:!1})}})}(window,document,plupload),function(a,b,c,d){function e(a){return b.getElementById(a)}c.runtimes.Html4=c.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:c.ua.gecko&&a.FormData||c.ua.webkit}},init:function(d,f){d.bind("Init",function(f){function g(){var a,h,i,j;k=c.guid(),r.push(k),a=b.createElement("form"),a.setAttribute("id","form_"+k),a.setAttribute("method","post"),a.setAttribute("enctype","multipart/form-data"),a.setAttribute("encoding","multipart/form-data"),a.setAttribute("target",f.id+"_iframe"),a.style.position="absolute",h=b.createElement("input"),h.setAttribute("id","input_"+k),h.setAttribute("type","file"),h.setAttribute("accept",t),h.setAttribute("size",1),j=e(f.settings.browse_button),f.features.triggerDialog&&j&&c.addEvent(e(f.settings.browse_button),"click",function(a){h.disabled||h.click(),a.preventDefault()},f.id),c.extend(h.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),c.extend(a.style,{overflow:"hidden"}),i=f.settings.shim_bgcolor,i&&(a.style.background=i),s&&c.extend(h.style,{filter:"alpha(opacity=0)"}),c.addEvent(h,"change",function(b){var i,l=b.target,m=[];l.value&&(e("form_"+k).style.top="-1048575px",i=l.value.replace(/\\/g,"/"),i=i.substring(i.length,i.lastIndexOf("/")+1),m.push(new c.File(k,i)),f.features.triggerDialog?c.removeEvent(j,"click",f.id):c.removeAllEvents(a,f.id),c.removeEvent(h,"change",f.id),g(),m.length&&d.trigger("FilesAdded",m))},f.id),a.appendChild(h),p.appendChild(a),f.refresh()}function h(){var d=b.createElement("div");d.innerHTML='<iframe id="'+f.id+'_iframe" name="'+f.id+'_iframe" src="'+q+':&quot;&quot;" style="display:none"></iframe>',i=d.firstChild,p.appendChild(i),c.addEvent(i,"load",function(b){var d,e,g=b.target;if(j){try{d=g.contentWindow.document||g.contentDocument||a.frames[g.id].document}catch(h){return void f.trigger("Error",{code:c.SECURITY_ERROR,message:c.translate("Security error."),file:j})}e=d.documentElement.innerText||d.documentElement.textContent,e&&(j.status=c.DONE,j.loaded=1025,j.percent=100,f.trigger("UploadProgress",j),f.trigger("FileUploaded",j,{response:e}))}},f.id)}var i,j,k,l,m,n,o,p=b.body,q="javascript",r=[],s=/MSIE/.test(navigator.userAgent),t=[],u=f.settings.filters;a:for(l=0;l<u.length;l++)for(m=u[l].extensions.split(/,/),o=0;o<m.length;o++){if("*"===m[o]){t=[];break a}n=c.mimeTypes[m[o]],n&&-1===c.inArray(n,t)&&t.push(n)}t=t.join(","),f.settings.container&&(p=e(f.settings.container),"static"===c.getStyle(p,"position")&&(p.style.position="relative")),f.bind("UploadFile",function(a,d){var f,g;d.status!=c.DONE&&d.status!=c.FAILED&&a.state!=c.STOPPED&&(f=e("form_"+d.id),g=e("input_"+d.id),g.setAttribute("name",a.settings.file_data_name),f.setAttribute("action",a.settings.url),c.each(c.extend({name:d.target_name||d.name},a.settings.multipart_params),function(a,d){var e=b.createElement("input");c.extend(e,{type:"hidden",name:d,value:a}),f.insertBefore(e,f.firstChild)}),j=d,e("form_"+k).style.top="-1048575px",f.submit())}),f.bind("FileUploaded",function(a){a.refresh()}),f.bind("StateChanged",function(b){b.state==c.STARTED?h():b.state==c.STOPPED&&a.setTimeout(function(){c.removeEvent(i,"load",b.id),i.parentNode&&i.parentNode.removeChild(i)},0),c.each(b.files,function(a,b){if(a.status===c.DONE||a.status===c.FAILED){var d=e("form_"+a.id);d&&d.parentNode.removeChild(d)}})}),f.bind("Refresh",function(a){var d,f,g,h,i,j,l,m,n;d=e(a.settings.browse_button),d&&(i=c.getPos(d,e(a.settings.container)),j=c.getSize(d),l=e("form_"+k),m=e("input_"+k),c.extend(l.style,{top:i.y+"px",left:i.x+"px",width:j.w+"px",height:j.h+"px"}),a.features.triggerDialog&&("static"===c.getStyle(d,"position")&&c.extend(d.style,{position:"relative"}),n=parseInt(d.style.zIndex,10),isNaN(n)&&(n=0),c.extend(d.style,{zIndex:n}),c.extend(l.style,{zIndex:n-1})),g=a.settings.browse_button_hover,h=a.settings.browse_button_active,f=a.features.triggerDialog?d:l,g&&(c.addEvent(f,"mouseover",function(){c.addClass(d,g)},a.id),c.addEvent(f,"mouseout",function(){c.removeClass(d,g)},a.id)),h&&(c.addEvent(f,"mousedown",function(){c.addClass(d,h)},a.id),c.addEvent(b.body,"mouseup",function(){c.removeClass(d,h)},a.id)))}),d.bind("FilesRemoved",function(a,b){var c,d;for(c=0;c<b.length;c++)d=e("form_"+b[c].id),d&&d.parentNode.removeChild(d)}),d.bind("DisableBrowse",function(a,c){var d=b.getElementById("input_"+k);d&&(d.disabled=c)}),d.bind("Destroy",function(a){var d,f,g,h={inputContainer:"form_"+k,inputFile:"input_"+k,browseButton:a.settings.browse_button};for(d in h)f=e(h[d]),f&&c.removeAllEvents(f,a.id);c.removeAllEvents(b.body,a.id),c.each(r,function(a,b){g=e("form_"+a),g&&g.parentNode.removeChild(g)})}),g()}),f({success:!0})}})}(window,document,plupload),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){
return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(a){function b(a,b,e){var f=a[0],g=/er/.test(e)?_indeterminate:/bl/.test(e)?n:l,h=e==_update?{checked:f[l],disabled:f[n],indeterminate:"true"==a.attr(_indeterminate)||"false"==a.attr(_determinate)}:f[g];if(/^(ch|di|in)/.test(e)&&!h)c(a,g);else if(/^(un|en|de)/.test(e)&&h)d(a,g);else if(e==_update)for(var i in h)h[i]?c(a,i,!0):d(a,i,!0);else b&&"toggle"!=e||(b||a[_callback]("ifClicked"),h?f[_type]!==k&&d(a,g):c(a,g))}function c(b,c,e){var o=b[0],p=b.parent(),q=c==l,r=c==_indeterminate,s=c==n,t=r?_determinate:q?m:"enabled",u=f(b,t+g(o[_type])),v=f(b,c+g(o[_type]));if(!0!==o[c]){if(!e&&c==l&&o[_type]==k&&o.name){var w=b.closest("form"),x='input[name="'+o.name+'"]',x=w.length?w.find(x):a(x);x.each(function(){this!==o&&a(this).data(i)&&d(a(this),c)})}r?(o[c]=!0,o[l]&&d(b,l,"force")):(e||(o[c]=!0),q&&o[_indeterminate]&&d(b,_indeterminate,!1)),h(b,q,c,e)}o[n]&&f(b,_cursor,!0)&&p.find("."+j).css(_cursor,"default"),p[_add](v||f(b,c)||""),p.attr("role")&&!r&&p.attr("aria-"+(s?n:l),"true"),p[_remove](u||f(b,t)||"")}function d(a,b,c){var d=a[0],e=a.parent(),i=b==l,k=b==_indeterminate,o=b==n,p=k?_determinate:i?m:"enabled",q=f(a,p+g(d[_type])),r=f(a,b+g(d[_type]));!1!==d[b]&&((k||!c||"force"==c)&&(d[b]=!1),h(a,i,p,c)),!d[n]&&f(a,_cursor,!0)&&e.find("."+j).css(_cursor,"pointer"),e[_remove](r||f(a,b)||""),e.attr("role")&&!k&&e.attr("aria-"+(o?n:l),"false"),e[_add](q||f(a,p)||"")}function e(b,c){b.data(i)&&(b.parent().html(b.attr("style",b.data(i).s||"")),c&&b[_callback](c),b.off(".i").unwrap(),a(_label+'[for="'+b[0].id+'"]').add(b.closest(_label)).off(".i"))}function f(a,b,c){return a.data(i)?a.data(i).o[b+(c?"":"Class")]:void 0}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,b,c,d){d||(b&&a[_callback]("ifToggled"),a[_callback]("ifChanged")[_callback]("if"+g(c)))}var i="iCheck",j=i+"-helper",k="radio",l="checked",m="un"+l,n="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),a.fn[i]=function(f,g){var h='input[type="checkbox"], input[type="'+k+'"]',m=a(),o=function(b){b.each(function(){var b=a(this);m=b.is(h)?m.add(b):m.add(b.find(h))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(f))return f=f.toLowerCase(),o(this),m.each(function(){var c=a(this);"destroy"==f?e(c,"ifDestroyed"):b(c,!0,f),a.isFunction(g)&&g()});if("object"!=typeof f&&f)return this;var p=a.extend({checkedClass:l,disabledClass:n,indeterminateClass:_indeterminate,labelHover:!0},f),q=p.handle,r=p.hoverClass||"hover",s=p.focusClass||"focus",t=p.activeClass||"active",u=!!p.labelHover,v=p.labelHoverClass||"hover",w=0|(""+p.increaseArea).replace("%","");return("checkbox"==q||q==k)&&(h='input[type="'+q+'"]'),-50>w&&(w=-50),o(this),m.each(function(){var f=a(this);e(f);var g=this,h=g.id,m=-w+"%",o=100+2*w+"%",o={position:"absolute",top:m,left:m,display:"block",width:o,height:o,margin:0,padding:0,background:"#fff",border:0,opacity:0},m=_mobile?{position:"absolute",visibility:"hidden"}:w?o:{position:"absolute",opacity:0},q="checkbox"==g[_type]?p.checkboxClass||"icheckbox":p.radioClass||"i"+k,x=a(_label+'[for="'+h+'"]').add(f.closest(_label)),y=!!p.aria,z=i+"-"+Math.random().toString(36).substr(2,6),A='<div class="'+q+'" '+(y?'role="'+g[_type]+'" ':"");y&&x.each(function(){A+='aria-labelledby="',this.id?A+=this.id:(this.id=z,A+=z),A+='"'}),A=f.wrap(A+"/>")[_callback]("ifCreated").parent().append(p.insert),o=a('<ins class="'+j+'"/>').css(o).appendTo(A),f.data(i,{o:p,s:f.attr("style")}).css(m),p.inheritClass&&A[_add](g.className||""),p.inheritID&&h&&A.attr("id",i+"-"+h),"static"==A.css("position")&&A.css("position","relative"),b(f,!0,_update),x.length&&x.on(_click+".i mouseover.i mouseout.i "+_touch,function(c){var d=c[_type],e=a(this);if(!g[n]){if(d==_click){if(a(c.target).is("a"))return;b(f,!1,!0)}else u&&(/ut|nd/.test(d)?(A[_remove](r),e[_remove](v)):(A[_add](r),e[_add](v)));if(!_mobile)return!1;c.stopPropagation()}}),f.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(a){var b=a[_type];return a=a.keyCode,b==_click?!1:"keydown"==b&&32==a?(g[_type]==k&&g[l]||(g[l]?d(f,l):c(f,l)),!1):void("keyup"==b&&g[_type]==k?!g[l]&&c(f,l):/us|ur/.test(b)&&A["blur"==b?_remove:_add](s))}),o.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(a){var c=a[_type],d=/wn|up/.test(c)?t:r;if(!g[n]){if(c==_click?b(f,!1,!0):(/wn|er|in/.test(c)?A[_add](d):A[_remove](d+" "+t),x.length&&u&&d==r&&x[/ut|nd/.test(c)?_remove:_add](v)),!_mobile)return!1;a.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){if(!a.support.cors&&a.ajaxTransport&&window.XDomainRequest){var b=/^https?:\/\//i,c=/^get|post$/i,d=new RegExp("^"+location.protocol,"i");a.ajaxTransport("* text html xml json",function(e,f,g){if(e.crossDomain&&e.async&&c.test(e.type)&&b.test(e.url)&&d.test(e.url)){var h=null;return{send:function(b,c){var d="",g=(f.dataType||"").toLowerCase();h=new XDomainRequest,/^\d+$/.test(f.timeout)&&(h.timeout=f.timeout),h.ontimeout=function(){c(500,"timeout")},h.onload=function(){var b="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,d={code:200,message:"success"},e={text:h.responseText};try{if("html"===g||/text\/html/i.test(h.contentType))e.html=h.responseText;else if("json"===g||"text"!==g&&/\/json/i.test(h.contentType))try{e.json=a.parseJSON(h.responseText)}catch(f){d.code=500,d.message="parseerror"}else if("xml"===g||"text"!==g&&/\/xml/i.test(h.contentType)){var i=new ActiveXObject("Microsoft.XMLDOM");i.async=!1;try{i.loadXML(h.responseText)}catch(f){i=void 0}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)throw d.code=500,d.message="parseerror","Invalid XML: "+h.responseText;e.xml=i}}catch(j){throw j}finally{c(d.code,d.message,e,b)}},h.onprogress=function(){},h.onerror=function(){c(500,"error",{text:h.responseText})},f.data&&(d="string"===a.type(f.data)?f.data:a.param(f.data)),h.open(e.type,e.url),h.send(d)},abort:function(){h&&h.abort()}}}})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),!function(a){var b;b=function(){function a(){}return a.prototype.setup=function(a,b,c,d){var e,f;return null==c&&(c=1),f=b.w/a.w,e=b.h/a.h,this.minZoom=(null!=d?d.fitWidth:void 0)&&!(null!=d?d.fitHeight:void 0)?f:(null!=d?d.fitHeight:void 0)&&!(null!=d?d.fitWidth:void 0)?e:(null!=d?d.fitWidth:void 0)&&(null!=d?d.fitHeight:void 0)?e>f?f:e:e>f?e:f,this.maxZoom=this.minZoom<1/c?1/c:this.minZoom},a.prototype.getZoom=function(a){return this.minZoom&&this.maxZoom?a*(this.maxZoom-this.minZoom)+this.minZoom:null},a.prototype.getSliderPos=function(a){return this.minZoom&&this.maxZoom?this.minZoom===this.maxZoom?0:(a-this.minZoom)/(this.maxZoom-this.minZoom):null},a.prototype.isZoomable=function(){return this.minZoom&&this.maxZoom?this.minZoom!==this.maxZoom:null},a.prototype.fixZoom=function(a){return a<this.minZoom?this.minZoom:a>this.maxZoom?this.maxZoom:a},a}();var c;c=function(){function c(b,d){var e;this.element=b,this.$el=a(this.element),e={$fileInput:this.$("input.cropit-image-input"),$preview:this.$(".cropit-image-preview"),$zoomSlider:this.$("input.cropit-image-zoom-input"),$previewContainer:this.$(".cropit-image-preview-container")},this.options=a.extend({},c._DEFAULTS,e,d),this.init()}return c._DEFAULTS={exportZoom:1,imageBackground:!1,imageBackgroundBorderWidth:0,imageState:null,allowCrossOrigin:!1,allowDragNDrop:!0,fitWidth:!1,fitHeight:!1,freeMove:!1},c.PREVIEW_EVENTS=function(){return["mousedown","mouseup","mouseleave","touchstart","touchend","touchcancel","touchleave"].map(function(a){return""+a+".cropit"}).join(" ")}(),c.PREVIEW_MOVE_EVENTS="mousemove.cropit touchmove.cropit",c.ZOOM_INPUT_EVENTS=function(){return["mousemove","touchmove","change"].map(function(a){return""+a+".cropit"}).join(" ")}(),c.prototype.init=function(){var c,d,e,f;return this.image=new Image,this.options.allowCrossOrigin&&(this.image.crossOrigin="Anonymous"),this.$fileInput=this.options.$fileInput.attr({accept:"image/*"}),this.$preview=this.options.$preview.css({backgroundRepeat:"no-repeat"}),this.$zoomSlider=this.options.$zoomSlider.attr({min:0,max:1,step:.01}),this.previewSize={w:this.options.width||this.$preview.width(),h:this.options.height||this.$preview.height()},this.options.width&&this.$preview.width(this.previewSize.w),this.options.height&&this.$preview.height(this.previewSize.h),this.options.imageBackground&&(a.isArray(this.options.imageBackgroundBorderWidth)?this.imageBgBorderWidthArray=this.options.imageBackgroundBorderWidth:(this.imageBgBorderWidthArray=[],[0,1,2,3].forEach(function(a){return function(b){return a.imageBgBorderWidthArray[b]=a.options.imageBackgroundBorderWidth}}(this))),c=this.options.$previewContainer,this.$imageBg=a("<img />").addClass("cropit-image-background").attr("alt","").css("position","absolute"),this.$imageBgContainer=a("<div />").addClass("cropit-image-background-container").css({position:"absolute",zIndex:0,left:-this.imageBgBorderWidthArray[3]+window.parseInt(this.$preview.css("border-left-width")),top:-this.imageBgBorderWidthArray[0]+window.parseInt(this.$preview.css("border-top-width")),width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]}).append(this.$imageBg),this.imageBgBorderWidthArray[0]>0&&this.$imageBgContainer.css({overflow:"hidden"}),c.css("position","relative").prepend(this.$imageBgContainer),this.$preview.css("position","relative"),this.$preview.hover(function(a){return function(){return a.$imageBg.addClass("cropit-preview-hovered")}}(this),function(a){return function(){return a.$imageBg.removeClass("cropit-preview-hovered")}}(this))),this.initialOffset={x:0,y:0},this.initialZoom=0,this.initialZoomSliderPos=0,this.imageLoaded=!1,this.moveContinue=!1,this.zoomer=new b,this.options.allowDragNDrop&&jQuery.event.props.push("dataTransfer"),this.bindListeners(),this.$zoomSlider.val(this.initialZoomSliderPos),this.setOffset((null!=(d=this.options.imageState)?d.offset:void 0)||this.initialOffset),this.zoom=(null!=(e=this.options.imageState)?e.zoom:void 0)||this.initialZoom,this.loadImage((null!=(f=this.options.imageState)?f.src:void 0)||null)},c.prototype.bindListeners=function(){return this.$fileInput.on("change.cropit",this.onFileChange.bind(this)),this.$preview.on(c.PREVIEW_EVENTS,this.onPreviewEvent.bind(this)),this.$zoomSlider.on(c.ZOOM_INPUT_EVENTS,this.onZoomSliderChange.bind(this)),this.options.allowDragNDrop?(this.$preview.on("dragover.cropit dragleave.cropit",this.onDragOver.bind(this)),this.$preview.on("drop.cropit",this.onDrop.bind(this))):void 0},c.prototype.unbindListeners=function(){return this.$fileInput.off("change.cropit"),this.$preview.off(c.PREVIEW_EVENTS),this.$preview.off("dragover.cropit dragleave.cropit drop.cropit"),this.$zoomSlider.off(c.ZOOM_INPUT_EVENTS)},c.prototype.reset=function(){return this.zoom=this.initialZoom,this.offset=this.initialOffset},c.prototype.onFileChange=function(){var a;return"function"==typeof(a=this.options).onFileChange&&a.onFileChange(),this.loadFileReader(this.$fileInput.get(0).files[0])},c.prototype.loadFileReader=function(a){var b;return b=new FileReader,(null!=a?a.type.match("image"):void 0)?(this.setImageLoadingClass(),b.readAsDataURL(a),b.onload=this.onFileReaderLoaded.bind(this),b.onerror=this.onFileReaderError.bind(this)):void 0},c.prototype.onFileReaderLoaded=function(a){return this.reset(),this.loadImage(a.target.result)},c.prototype.onFileReaderError=function(){var a;return"function"==typeof(a=this.options).onFileReaderError?a.onFileReaderError():void 0},c.prototype.onDragOver=function(a){return a.preventDefault(),a.dataTransfer.dropEffect="copy",this.$preview.toggleClass("cropit-drag-hovered","dragover"===a.type)},c.prototype.onDrop=function(a){var b;return a.preventDefault(),a.stopPropagation(),b=Array.prototype.slice.call(a.dataTransfer.files,0),b.some(function(a){return function(b){return b.type.match("image")?(a.loadFileReader(b),!0):void 0}}(this)),this.$preview.removeClass("cropit-drag-hovered")},c.prototype.loadImage=function(a){var b;return this.imageSrc=a,this.imageSrc?("function"==typeof(b=this.options).onImageLoading&&b.onImageLoading(),this.setImageLoadingClass(),this.image.onload=this.onImageLoaded.bind(this),this.image.onerror=this.onImageError.bind(this),this.image.src=this.imageSrc):void 0},c.prototype.onImageLoaded=function(){var a;return this.setImageLoadedClass(),this.setOffset(this.offset),this.$preview.css("background-image","url("+this.imageSrc+")"),this.options.imageBackground&&this.$imageBg.attr("src",this.imageSrc),this.imageSize={w:this.image.width,h:this.image.height},this.setupZoomer(),this.imageLoaded=!0,"function"==typeof(a=this.options).onImageLoaded?a.onImageLoaded():void 0},c.prototype.onImageError=function(){var a;return"function"==typeof(a=this.options).onImageError?a.onImageError():void 0},c.prototype.setImageLoadingClass=function(){return this.$preview.removeClass("cropit-image-loaded").addClass("cropit-image-loading")},c.prototype.setImageLoadedClass=function(){return this.$preview.removeClass("cropit-image-loading").addClass("cropit-image-loaded")},c.prototype.getEventPosition=function(a){var b,c,d,e;return(null!=(b=a.originalEvent)&&null!=(c=b.touches)?c[0]:void 0)&&(a=null!=(d=a.originalEvent)&&null!=(e=d.touches)?e[0]:void 0),a.clientX&&a.clientY?{x:a.clientX,y:a.clientY}:void 0},c.prototype.onPreviewEvent=function(b){return this.imageLoaded?(this.moveContinue=!1,this.$preview.off(c.PREVIEW_MOVE_EVENTS),"mousedown"===b.type||"touchstart"===b.type?(this.origin=this.getEventPosition(b),this.moveContinue=!0,this.$preview.on(c.PREVIEW_MOVE_EVENTS,this.onMove.bind(this))):a(document.body).focus(),b.stopPropagation(),!1):void 0},c.prototype.onMove=function(a){var b;return b=this.getEventPosition(a),this.moveContinue&&b&&this.setOffset({x:this.offset.x+b.x-this.origin.x,y:this.offset.y+b.y-this.origin.y}),this.origin=b,a.stopPropagation(),!1},c.prototype.setOffset=function(a){return this.offset=this.fixOffset(a),this.$preview.css("background-position",""+this.offset.x+"px "+this.offset.y+"px"),this.options.imageBackground?this.$imageBg.css({left:this.offset.x+this.imageBgBorderWidthArray[3],top:this.offset.y+this.imageBgBorderWidthArray[0]}):void 0},c.prototype.fixOffset=function(a){var b;return this.imageLoaded?(b={x:a.x,y:a.y},this.options.freeMove||(this.imageSize.w*this.zoom<=this.previewSize.w?b.x=0:b.x>0?b.x=0:b.x+this.imageSize.w*this.zoom<this.previewSize.w&&(b.x=this.previewSize.w-this.imageSize.w*this.zoom),this.imageSize.h*this.zoom<=this.previewSize.h?b.y=0:b.y>0?b.y=0:b.y+this.imageSize.h*this.zoom<this.previewSize.h&&(b.y=this.previewSize.h-this.imageSize.h*this.zoom)),b.x=this.round(b.x),b.y=this.round(b.y),b):a},c.prototype.onZoomSliderChange=function(){var a;return this.imageLoaded?(this.zoomSliderPos=Number(this.$zoomSlider.val()),a=this.zoomer.getZoom(this.zoomSliderPos),this.setZoom(a)):void 0},c.prototype.enableZoomSlider=function(){var a;return this.$zoomSlider.removeAttr("disabled"),"function"==typeof(a=this.options).onZoomEnabled?a.onZoomEnabled():void 0},c.prototype.disableZoomSlider=function(){var a;return this.$zoomSlider.attr("disabled",!0),"function"==typeof(a=this.options).onZoomDisabled?a.onZoomDisabled():void 0},c.prototype.setupZoomer=function(){return this.zoomer.setup(this.imageSize,this.previewSize,this.options.exportZoom,this.options),this.zoom=this.fixZoom(this.zoom),this.setZoom(this.zoom),this.isZoomable()?this.enableZoomSlider():this.disableZoomSlider()},c.prototype.setZoom=function(a){var b,c,d,e,f;return a=this.fixZoom(a),f=this.round(this.imageSize.w*a),e=this.round(this.imageSize.h*a),d=this.zoom,b=this.previewSize.w/2-(this.previewSize.w/2-this.offset.x)*a/d,c=this.previewSize.h/2-(this.previewSize.h/2-this.offset.y)*a/d,this.zoom=a,this.setOffset({x:b,y:c}),this.zoomSliderPos=this.zoomer.getSliderPos(this.zoom),this.$zoomSlider.val(this.zoomSliderPos),this.$preview.css("background-size",""+f+"px "+e+"px"),this.options.imageBackground?this.$imageBg.css({width:f,height:e}):void 0},c.prototype.fixZoom=function(a){return this.zoomer.fixZoom(a)},c.prototype.isZoomable=function(){return this.zoomer.isZoomable()},c.prototype.getCroppedImageData=function(b){var c,d,e,f,g;return this.imageSrc?(f={type:"image/png",quality:.75,originalSize:!1,fillBg:"#fff"},b=a.extend({},f,b),e={w:this.previewSize.w,h:this.previewSize.h},this.options.fitHeight&&!this.options.fitWidth&&this.imageSize.w*this.zoom<this.previewSize.w?e.w=this.imageSize.w*this.zoom:this.options.fitWidth&&!this.options.fitHeight&&this.imageSize.h*this.zoom<this.previewSize.h&&(e.h=this.imageSize.h*this.zoom),g=b.originalSize?1/this.zoom:this.options.exportZoom,c=a("<canvas />").attr({width:e.w*g,height:e.h*g}).get(0),d=c.getContext("2d"),"image/jpeg"===b.type&&(d.fillStyle=b.fillBg,d.fillRect(0,0,c.width,c.height)),d.drawImage(this.image,this.offset.x*g,this.offset.y*g,this.zoom*g*this.imageSize.w,this.zoom*g*this.imageSize.h),c.toDataURL(b.type,b.quality)):null},c.prototype.getImageState=function(){return{src:this.imageSrc,offset:this.offset,zoom:this.zoom}},c.prototype.getImageSrc=function(){return this.imageSrc},c.prototype.getOffset=function(){return this.offset},c.prototype.getZoom=function(){return this.zoom},c.prototype.getImageSize=function(){return this.imageSize?{width:this.imageSize.w,height:this.imageSize.h}:null},c.prototype.getPreviewSize=function(){return{width:this.previewSize.w,height:this.previewSize.h}},c.prototype.setPreviewSize=function(a){return(null!=a?a.width:void 0)>0&&(null!=a?a.height:void 0)>0?(this.previewSize={w:a.width,h:a.height},this.$preview.css({width:this.previewSize.w,height:this.previewSize.h}),this.options.imageBackground&&this.$imageBgContainer.css({width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]}),this.imageLoaded?this.setupZoomer():void 0):void 0},c.prototype.disable=function(){return this.unbindListeners(),this.disableZoomSlider(),this.$el.addClass("cropit-disabled")},c.prototype.reenable=function(){return this.bindListeners(),this.enableZoomSlider(),this.$el.removeClass("cropit-disabled")},c.prototype.round=function(a){return Math.round(1e5*a)/1e5},c.prototype.$=function(a){return this.$el?this.$el.find(a):null},c}();var d,e;d="cropit",e={init:function(b){return this.each(function(){var e;return a.data(this,d)?void 0:(e=new c(this,b),a.data(this,d,e))})},destroy:function(){return this.each(function(){return a.removeData(this,d)})},isZoomable:function(){var a;return a=this.first().data(d),null!=a?a.isZoomable():void 0},"export":function(a){var b;return b=this.first().data(d),null!=b?b.getCroppedImageData(a):void 0},imageState:function(){var a;return a=this.first().data(d),null!=a?a.getImageState():void 0},imageSrc:function(b){var c;return null!=b?this.each(function(){var c;return c=a.data(this,d),null!=c&&c.reset(),null!=c?c.loadImage(b):void 0}):(c=this.first().data(d),null!=c?c.getImageSrc():void 0)},offset:function(b){var c;return null!=b&&null!=b.x&&null!=b.y?this.each(function(){var c;return c=a.data(this,d),null!=c?c.setOffset(b):void 0}):(c=this.first().data(d),null!=c?c.getOffset():void 0)},zoom:function(b){var c;return null!=b?this.each(function(){var c;return c=a.data(this,d),null!=c?c.setZoom(b):void 0}):(c=this.first().data(d),null!=c?c.getZoom():void 0)},imageSize:function(){var a;return a=this.first().data(d),null!=a?a.getImageSize():void 0},previewSize:function(b){var c;return null!=b?this.each(function(){var c;return c=a.data(this,d),null!=c?c.setPreviewSize(b):void 0}):(c=this.first().data(d),null!=c?c.getPreviewSize():void 0)},disable:function(){return this.each(function(){var b;return b=a.data(this,d),b.disable()})},reenable:function(){return this.each(function(){var b;return b=a.data(this,d),b.reenable()})}},a.fn.cropit=function(a){return e[a]?e[a].apply(this,[].slice.call(arguments,1)):e.init.apply(this,arguments)}}(window.jQuery),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px");
})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix||c:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),
d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a){a.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),function(a){a.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var b=this;this.element.is("input")?(this.tagList=a("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last(),this.tagInput=a('<input type="text" />').addClass("ui-widget-content"),this.options.readOnly&&this.tagInput.attr("disabled","disabled"),this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex),this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText),this.options.autocomplete.source||(this.options.autocomplete.source=function(b,c){var d=b.term.toLowerCase(),e=a.grep(this.options.availableTags,function(a){return 0===a.toLowerCase().indexOf(d)});this.options.allowDuplicates||(e=this._subtractArray(e,this.assignedTags())),c(e)}),this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(a,c){b._showAutocomplete()}),"undefined"==typeof this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0)),a.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=a.proxy(this.options.autocomplete.source,this)),a.isFunction(this.options.tagSource)&&(this.options.tagSource=a.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(a('<li class="tagit-new"></li>').append(this.tagInput)).click(function(c){var d=a(c.target);d.hasClass("tagit-label")?(d=d.closest(".tagit-choice"),d.hasClass("removed")||b._trigger("onTagClicked",c,{tag:d,tagLabel:b.tagLabel(d)})):b.tagInput.focus()});var c=!1;if(this.options.singleField)if(this.options.singleFieldNode){var d=a(this.options.singleFieldNode),e=d.val().split(this.options.singleFieldDelimiter);d.val(""),a.each(e,function(a,d){b.createTag(d,null,!0),c=!0})}else this.options.singleFieldNode=a('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode);c||this.tagList.children("li").each(function(){a(this).hasClass("tagit-new")||(b.createTag(a(this).text(),a(this).attr("class"),!0),a(this).remove())}),this.tagInput.keydown(function(c){if(c.which==a.ui.keyCode.BACKSPACE&&""===b.tagInput.val()){var d=b._lastTag();!b.options.removeConfirmation||d.hasClass("remove")?b.removeTag(d):b.options.removeConfirmation&&d.addClass("remove ui-state-highlight")}else b.options.removeConfirmation&&b._lastTag().removeClass("remove ui-state-highlight");(c.which===a.ui.keyCode.COMMA&&!1===c.shiftKey||c.which===a.ui.keyCode.ENTER||c.which==a.ui.keyCode.TAB&&""!==b.tagInput.val()||c.which==a.ui.keyCode.SPACE&&!0!==b.options.allowSpaces&&('"'!=a.trim(b.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==a.trim(b.tagInput.val()).charAt(0)&&'"'==a.trim(b.tagInput.val()).charAt(a.trim(b.tagInput.val()).length-1)&&0!==a.trim(b.tagInput.val()).length-1))&&(c.which===a.ui.keyCode.ENTER&&""===b.tagInput.val()||c.preventDefault(),b.options.autocomplete.autoFocus&&b.tagInput.data("autocomplete-open")||(b.tagInput.autocomplete("close"),b.createTag(b._cleanedInput())))}).blur(function(a){b.tagInput.data("autocomplete-open")||b.createTag(b._cleanedInput())}),(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)&&(d={select:function(a,c){return b.createTag(c.item.value),!1}},a.extend(d,this.options.autocomplete),d.source=this.options.tagSource||d.source,this.tagInput.autocomplete(d).bind("autocompleteopen.tagit",function(a,c){b.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tagit",function(a,c){b.tagInput.data("autocomplete-open",!1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete"))},destroy:function(){return a.Widget.prototype.destroy.call(this),this.element.unbind(".tagit"),this.tagList.unbind(".tagit"),this.tagInput.removeData("autocomplete-open"),this.tagList.removeClass("tagit ui-widget ui-widget-content ui-corner-all tagit-hidden-field"),this.element.is("input")?(this.element.removeClass("tagit-hidden-field"),this.tagList.remove()):(this.element.children("li").each(function(){a(this).hasClass("tagit-new")?a(this).remove():(a(this).removeClass("tagit-choice ui-widget-content ui-state-default ui-state-highlight ui-corner-all remove tagit-choice-editable tagit-choice-read-only"),a(this).text(a(this).children(".tagit-label").text()))}),this.singleFieldNode&&this.singleFieldNode.remove()),this},_cleanedInput:function(){return a.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var b=this,c=[];return this.options.singleField?(c=a(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===c[0]&&(c=[])):this._tags().each(function(){c.push(b.tagLabel(this))}),c},_updateSingleTagsField:function(b){a(this.options.singleFieldNode).val(b.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(b,c){for(var d=[],e=0;e<b.length;e++)-1==a.inArray(b[e],c)&&d.push(b[e]);return d},tagLabel:function(b){return this.options.singleField?a(b).find(".tagit-label:first").text():a(b).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(b){var c=this,d=null;return this._tags().each(function(e){return c._formatStr(b)==c._formatStr(c.tagLabel(this))?(d=a(this),!1):void 0}),d},_isNew:function(a){return!this._findTagByLabel(a)},_formatStr:function(b){return this.options.caseSensitive?b:a.trim(b.toLowerCase())},_effectExists:function(b){return Boolean(a.effects&&(a.effects[b]||a.effects.effect&&a.effects.effect[b]))},createTag:function(b,c,d){var e=this;if(b=a.trim(b),this.options.preprocessTag&&(b=this.options.preprocessTag(b)),""===b)return!1;if(!this.options.allowDuplicates&&!this._isNew(b))return b=this._findTagByLabel(b),!1!==this._trigger("onTagExists",null,{existingTag:b,duringInitialization:d})&&this._effectExists("highlight")&&b.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{
duringInitialization:d}),!1;var f=a(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(b),g=a("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(c).append(f);this.options.readOnly?g.addClass("tagit-choice-read-only"):(g.addClass("tagit-choice-editable"),c=a("<span></span>").addClass("ui-icon ui-icon-close"),c=a('<a><span class="text-icon"></span></a>').addClass("tagit-close").append(c).click(function(a){e.removeTag(g)}),g.append(c)),this.options.singleField||(f=f.html(),g.append('<input type="hidden" value="'+f+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />')),!1!==this._trigger("beforeTagAdded",null,{tag:g,tagLabel:this.tagLabel(g),duringInitialization:d})&&(this.options.singleField&&(f=this.assignedTags(),f.push(b),this._updateSingleTagsField(f)),this._trigger("onTagAdded",null,g),this.tagInput.val(""),this.tagInput.parent().before(g),this._trigger("afterTagAdded",null,{tag:g,tagLabel:this.tagLabel(g),duringInitialization:d}),this.options.showAutocompleteOnFocus&&!d&&setTimeout(function(){e._showAutocomplete()},0))},removeTag:function(b,c){if(c="undefined"==typeof c?this.options.animate:c,b=a(b),this._trigger("onTagRemoved",null,b),!1!==this._trigger("beforeTagRemoved",null,{tag:b,tagLabel:this.tagLabel(b)})){if(this.options.singleField){var d=this.assignedTags(),e=this.tagLabel(b),d=a.grep(d,function(a){return a!=e});this._updateSingleTagsField(d)}if(c){b.addClass("removed");var d=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],f=this;d.push(function(){b.remove(),f._trigger("afterTagRemoved",null,{tag:b,tagLabel:f.tagLabel(b)})}),b.fadeOut("fast").hide.apply(b,d).dequeue()}else b.remove(),this._trigger("afterTagRemoved",null,{tag:b,tagLabel:this.tagLabel(b)})}},removeTagByLabel:function(a,b){var c=this._findTagByLabel(a);if(!c)throw"No such tag exists with the name '"+a+"'";this.removeTag(c,b)},removeAll:function(){var a=this;this._tags().each(function(b,c){a.removeTag(c,!1)})}})}(jQuery),function(a){function b(){var b,c,d={height:j.innerHeight,width:j.innerWidth};return d.height||(b=i.compatMode,(b||!a.support.boxModel)&&(c="CSS1Compat"===b?k:i.body,d={height:c.clientHeight,width:c.clientWidth})),d}function c(){return{top:j.pageYOffset||k.scrollTop||i.body.scrollTop,left:j.pageXOffset||k.scrollLeft||i.body.scrollLeft}}function d(){var d,g=a(),i=0;if(a.each(h,function(a,b){var c=b.data.selector,d=b.$element;g=g.add(c?d.find(c):d)}),d=g.length)for(e=e||b(),f=f||c();d>i;i++)if(a.contains(k,g[i])){var j,l,m,n=a(g[i]),o={height:n.height(),width:n.width()},p=n.offset(),q=n.data("inview");if(!f||!e)return;p.top+o.height>f.top&&p.top<f.top+e.height&&p.left+o.width>f.left&&p.left<f.left+e.width?(j=f.left>p.left?"right":f.left+e.width<p.left+o.width?"left":"both",l=f.top>p.top?"bottom":f.top+e.height<p.top+o.height?"top":"both",m=j+"-"+l,q&&q===m||n.data("inview",m).trigger("inview",[!0,j,l])):q&&n.data("inview",!1).trigger("inview",[!1])}}var e,f,g,h={},i=document,j=window,k=i.documentElement,l=a.expando;j.inviewLoaded=!0,a.event.special.inview={add:function(b){h[b.guid+"-"+this[l]]={data:b,$element:a(this)},g||a.isEmptyObject(h)||(g=setInterval(d,250))},remove:function(b){try{delete h[b.guid+"-"+this[l]]}catch(c){}a.isEmptyObject(h)&&(clearInterval(g),g=null)}},a(j).bind("scroll resize scrollstop",function(){e=f=null}),!k.addEventListener&&k.attachEvent&&k.attachEvent("onfocusin",function(){f=null})}(jQuery),function(a){"use strict";function b(){return this.each(c)}function c(){var b,c,e,f,g,h,i=0;b=a(this).css({overflow:"hidden",resize:"none"}),b.data("autogrow-origin")||(c=b.clone().val("").appendTo(b.parent()),e=c.get(0),h=c.height(),e.scrollHeight,f=e.scrollHeight!==h,f&&(g=c.innerHeight(),i=g-h),c.hide(),b.data("autogrow-origin",c).on("keyup change input paste autogrow",function(){d(b,c,e,h,i)}),d(b,c,e,h,i))}function d(a,b,c,e,f){var g,h,i,j;g=a.val(),h=d.prev,g!==h&&(d.prev=g,b.val(g).show(),c.scrollHeight,i=c.scrollHeight,j=i-f,b.hide(),a.height(j>e?j:e))}a.fn.autoGrowTextarea=b,a.fn.autoGrowTextArea=b,"autoGrow"in a.fn||(a.fn.autoGrow=b)}(jQuery),function(a){var b=function(b,c){b.data("flipped",!0);var e="rotate"+b.data("axis");b.find(b.data("front")).css({transform:e+(b.data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}),b.find(b.data("back")).css({transform:e+"(0deg)","z-index":"1"}),b.one(d(),function(){a(this).trigger("flip:done"),void 0!==c&&c.call(this)})},c=function(b,c){b.data("flipped",!1);var e="rotate"+b.data("axis");b.find(b.data("front")).css({transform:e+"(0deg)","z-index":"1"}),b.find(b.data("back")).css({transform:e+(b.data("reverse")?"(180deg)":"(-180deg)"),"z-index":"0"}),b.one(d(),function(){a(this).trigger("flip:done"),void 0!==c&&c.call(this)})},d=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]};a.fn.flip=function(d,f){return"function"==typeof d&&(f=d),this.each(function(){var g=a(this);if(void 0===d||"boolean"!=typeof d&&"string"!=typeof d)if(g.data("initiated"))!d||void 0===d.axis&&void 0===d.reverse||e.call(this,d,function(){g.trigger("flip:change"),void 0!==f&&f.call(this)});else{g.data("initiated",!0);var h=a.extend({axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:"auto",back:"auto"},d);"auto"==h.front?h.front=g.find(".front").length>0?".front":"div:first-child":"autostrict"==h.front&&(h.front="div:first-child"),"auto"==h.back?h.back=g.find(".back").length>0?".back":"div:first-child + div":"autostrict"==h.back&&(h.back="div:first-child + div"),g.data("reverse",h.reverse),g.data("axis",h.axis),g.data("front",h.front),g.data("back",h.back);var i="rotate"+("x"==h.axis.toLowerCase()?"x":"y"),j=2*g["outer"+("rotatex"==i?"Height":"Width")]();g.find(g.data("back")).css({transform:i+"("+(h.reverse?"180deg":"-180deg")+")"}),g.css({perspective:j});var k=h.speed/1e3||.5,l=g.find(h.front).add(h.back,g);if(h.forceHeight?l.outerHeight(g.height()):h.autoSize&&l.css({height:"100%"}),h.forceWidth?l.outerWidth(g.width()):h.autoSize&&l.css({width:"100%"}),l.css({"backface-visibility":"hidden","z-index":"1"}),l.find("*").css({"backface-visibility":"hidden"}),g.find(g.data("back")).css({transform:i+"("+(h.reverse?"180deg":"-180deg")+")","z-index":"0"}),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&g.css({"-webkit-transform-style":"preserve-3d"}),setTimeout(function(){l.css({transition:"all "+k+"s ease-out"}),void 0!==f&&f.call(this)},20),"click"==h.trigger.toLowerCase())g.on(a.fn.tap?"tap.flip":"click.flip",function(d){d||(d=window.event),g.find(a(d.target).closest('button, a, input[type="submit"]')).length||(g.find(".clickStrip").hide(),g.data("flipped")?c(g):b(g))});else if("hover"==h.trigger.toLowerCase()){var m=function(){g.off("mouseleave.flip"),b(g),setTimeout(function(){g.on("mouseleave.flip",n),g.is(":hover")||c(g)},h.speed+150)},n=function(){c(g)};g.on("mouseenter.flip",m),g.on("mouseleave.flip",n)}}else"toggle"==d&&(d=!g.data("flipped")),d?b(g,f):c(g,f)}),this};var e=function(b,c){var d=!1;if(void 0!==b.axis&&a(this).data("axis")!=b.axis.toLowerCase()&&(a(this).data("axis",b.axis.toLowerCase()),d=!0),void 0!==b.reverse&&a(this).data("reverse")!=b.reverse&&(a(this).data("reverse",b.reverse),d=!0),d){var e=a(this).find(a(this).data("front")).add(a(this).data("back"),a(this)),f=e.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);e.css({transition:"none"});var g="rotate"+a(this).data("axis");a(this).data("flipped")?a(this).find(a(this).data("front")).css({transform:g+(a(this).data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}):a(this).find(a(this).data("back")).css({transform:g+"("+(a(this).data("reverse")?"180deg":"-180deg")+")","z-index":"0"}),setTimeout(function(){e.css(f),c.call(this)}.bind(this),0)}else setTimeout(c.bind(this),0)}}(jQuery),!function(){function a(){var a=["//cdn.rawgit.com//RobinHerbots/jquery.inputmask/2.x/dist/jquery.inputmask.bundle.min.js"];for(var c in a)if(a.hasOwnProperty(c)){var d=document.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src",a[c]),c==a.length-1&&(d.onload=b,d.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||b()}),document.getElementsByTagName("head")[0].appendChild(d)}}function b(){jQuery(".ml-subscribe-form form").each(function(){var a=jQuery(this),b=jQuery(this).closest(".ml-subscribe-form"),d=a.data("code"),e=window.webform_data&&window.webform_data[d]?window.webform_data[d]:{},f=jQuery(this).find("button.primary"),g=jQuery(this).find("button.loading"),h=g.length>0,i=e.confirmation_checkbox||!1;if(i){f.prop("disabled",!0);var j=jQuery(this).find('.confirmation_checkbox input[type="checkbox"]');j.change(function(){jQuery(this).is(":checked")?f.prop("disabled",!1):f.prop("disabled",!0)})}a.find(".ml-validate-date input").inputmask(void 0,{oncomplete:function(){jQuery(this).closest(".ml-validate-date").addClass("ml-validate-date-valid")},onincomplete:function(){jQuery(this).closest(".ml-validate-date").removeClass("ml-validate-date-valid")},oncleared:function(){jQuery(this).closest(".ml-validate-date").removeClass("ml-validate-date-valid")},onKeyValidation:function(a,b){jQuery(this).closest(".ml-validate-date").removeClass("ml-validate-date-valid")}}),a.find(".ml-validate-phone input").inputmask(void 0,{oncomplete:function(){jQuery(this).closest(".ml-validate-phone").addClass("ml-validate-phone-valid")},onincomplete:function(){jQuery(this).closest(".ml-validate-phone").removeClass("ml-validate-phone-valid")},oncleared:function(){jQuery(this).closest(".ml-validate-phone").removeClass("ml-validate-phone-valid")},onKeyValidation:function(a,b){jQuery(this).closest(".ml-validate-phone").removeClass("ml-validate-phone-valid")}}),void 0!==a.data("ml-submit-bound")&&a.data("ml-submit-bound")||(a.data("ml-submit-bound",1),b.find(".ml-block-success").bind("click",function(){b.find(".ml-block-success").hide(),b.find(".ml-block-form").find('input[type="text"]').val("");var a=b.find(".ml-block-form").find('input[type="checkbox"]');void 0!==a.prop?a.prop("checked",!1):a.attr("checked",!1),b.find(".ml-block-form").show()}),a.bind("submit",function(d){if(d.preventDefault(),a.find(".ml-error").removeClass("ml-error"),c(a)){h&&(f.hide(),g.show());var e=a.serialize();e+="&ajax=1";var i=a.attr("action");jQuery.ajax({type:"GET",url:i,data:e,dataType:"jsonp",success:function(c){if(h&&(f.show(),g.hide()),c.success){var d="ml_webform_success_"+b.attr("id").substr(5);"function"==typeof window[d]?window[d]():(b.find(".ml-block-success").show(),b.find(".ml-block-form").hide())}else void 0!==c.errors&&(void 0!==c.errors.groups&&c.errors.groups&&a.find(".ml-block-groups").addClass("ml-error"),void 0!==c.errors.fields&&c.errors.fields&&jQuery.each(c.errors.fields,function(b,c){a.find(".ml-field-"+b).addClass("ml-error")}))},error:function(a,b,c){h&&(f.show(),g.hide())}})}})),window!=window.parent&&(jQuery(document).on("click",".overlay, .ml-subscribe-close",function(){window.parent.postMessage("mlCloseIframe-"+a.data("code"),"*")}),jQuery(".ml-subscribe-form").bind("click",function(a){var b=a.target||a.srcElement;jQuery(b).is("div.ml-subscribe-close")||a.stopPropagation()}))})}function c(a){var b=!0;return a.find(".ml-validate-required").each(function(a,c){var d=!1;jQuery(c).find('input[type="text"], input[type="email"]').each(function(a,b){void 0!==jQuery(b).val()&&""!==jQuery(b).val()&&(d=!0)}),jQuery(c).find('input[type="checkbox"]').each(function(a,b){void 0!==jQuery(b).prop?jQuery(b).prop("checked")&&(d=!0):jQuery(b).attr("checked")&&(d=!0)}),d||(jQuery(c).addClass("ml-error"),b=!1)}),a.find(".ml-validate-email").each(function(a,c){var e=!0;jQuery(c).find('input[type="text"], input[type="email"]').each(function(a,b){void 0===jQuery(b).val()||""===jQuery(b).val()||d(jQuery(b).val())||(e=!1)}),e||(jQuery(c).addClass("ml-error"),b=!1)}),a.find(".ml-validate-date").each(function(a,c){var d=!0;jQuery(c).find('input[type="text"]').each(function(a,b){void 0===jQuery(b).val()||""===jQuery(b).val()||jQuery(c).hasClass("ml-validate-date-valid")||(d=!1)}),d||(jQuery(c).addClass("ml-error"),b=!1)}),a.find(".ml-validate-phone").each(function(a,c){var d=!0;jQuery(c).find('input[type="text"]').each(function(a,b){void 0===jQuery(b).val()||""===jQuery(b).val()||jQuery(c).hasClass("ml-validate-phone-valid")||(d=!1)}),d||(jQuery(c).addClass("ml-error"),b=!1)}),b}function d(a){var b=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]){2,40}$/;return b.test(a.trim())}if("undefined"==typeof jQuery){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","//cdn.mailerlite.com/ajax/libs/jquery/1.7.1/jquery.min.js"),e.onload=a,e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||a()},document.getElementsByTagName("head")[0].appendChild(e)}else a()}(),!function(a){function b(){function b(a){"remove"===a&&this.each(function(a,b){var c=e(b);c&&c.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinymce.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function d(a){var c,d=this;if(null!=a)b.call(d),d.each(function(b,c){var d;(d=tinymce.get(c.id))&&d.setContent(a)});else if(d.length>0&&(c=tinymce.get(d[0].id)))return c.getContent()}function e(a){var b=null;return a&&a.id&&g.tinymce&&(b=tinymce.get(a.id)),b}function f(a){return!!(a&&a.length&&g.tinymce&&a.is(":tinymce"))}var h={};a.each(["text","html","val"],function(b,g){var i=h[g]=a.fn[g],j="text"===g;a.fn[g]=function(b){var g=this;if(!f(g))return i.apply(g,arguments);if(b!==c)return d.call(g.filter(":tinymce"),b),i.apply(g.not(":tinymce"),arguments),g;var h="",k=arguments;return(j?g:g.eq(0)).each(function(b,c){var d=e(c);h+=d?j?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent({save:!0}):i.apply(a(c),k)}),h}}),a.each(["append","prepend"],function(b,d){var g=h[d]=a.fn[d],i="prepend"===d;a.fn[d]=function(a){var b=this;return f(b)?a!==c?("string"==typeof a&&b.filter(":tinymce").each(function(b,c){var d=e(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)}),g.apply(b.not(":tinymce"),arguments),b):void 0:g.apply(b,arguments)}}),a.each(["remove","replaceWith","replaceAll","empty"],function(c,d){var e=h[d]=a.fn[d];a.fn[d]=function(){return b.call(this,d),e.apply(this,arguments)}}),h.attr=a.fn.attr,a.fn.attr=function(b,g){var i=this,j=arguments;if(!b||"value"!==b||!f(i))return g!==c?h.attr.apply(i,j):h.attr.apply(i,j);if(g!==c)return d.call(i.filter(":tinymce"),g),h.attr.apply(i.not(":tinymce"),j),i;var k=i[0],l=e(k);return l?l.getContent({save:!0}):h.attr.apply(a(k),j)}}var c,d,e,f=[],g=window;a.fn.tinymce=function(c){function h(){var d=[],f=0;e||(b(),e=!0),l.each(function(a,b){var e,g=b.id,h=c.oninit;g||(b.id=g=tinymce.DOM.uniqueId()),tinymce.get(g)||(e=new tinymce.Editor(g,c,tinymce.EditorManager),d.push(e),e.on("init",function(){var a,b=h;l.css("visibility",""),h&&++f==d.length&&("string"==typeof b&&(a=-1===b.indexOf(".")?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=tinymce.resolve(b)),b.apply(a||tinymce,d))}))}),a.each(d,function(a,b){b.render()})}var i,j,k,l=this,m="";if(!l.length)return l;if(!c)return window.tinymce?tinymce.get(l[0].id):null;if(l.css("visibility","hidden"),g.tinymce||d||!(i=c.script_url))1===d?f.push(h):h();else{d=1,j=i.substring(0,i.lastIndexOf("/")),-1!=i.indexOf(".min")&&(m=".min"),g.tinymce=g.tinyMCEPreInit||{base:j,suffix:m},-1!=i.indexOf("gzip")&&(k=c.language||"en",i=i+(/\?/.test(i)?"&":"?")+"js=true&core=true&suffix="+escape(m)+"&themes="+escape(c.theme||"modern")+"&plugins="+escape(c.plugins||"")+"&languages="+(k||""),g.tinyMCE_GZ||(g.tinyMCE_GZ={start:function(){function b(a){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(a))}b("langs/"+k+".js"),b("themes/"+c.theme+"/theme"+m+".js"),b("themes/"+c.theme+"/langs/"+k+".js"),a.each(c.plugins.split(","),function(a,c){c&&(b("plugins/"+c+"/plugin"+m+".js"),b("plugins/"+c+"/langs/"+k+".js"))})},end:function(){}}));var n=document.createElement("script");n.type="text/javascript",n.onload=n.onreadystatechange=function(b){b=b||window.event,2===d||"load"!=b.type&&!/complete|loaded/.test(n.readyState)||(tinymce.dom.Event.domLoaded=1,d=2,c.script_loaded&&c.script_loaded(),h(),a.each(f,function(a,b){b()}))},n.src=i,document.body.appendChild(n)}return l},a.extend(a.expr[":"],{tinymce:function(a){var b;return!!(a.id&&"tinymce"in window&&(b=tinymce.get(a.id),b&&b.editorManager===tinymce))}})}(jQuery),function(a,b){var c={after:["attr","value"],defaults:{},extensions:{},init:function(e,f,g,h,i){if(!b.isWriteableObservable(f()))throw"valueAccessor must be writeable and observable";var j=g.has("wysiwygConfig")?g.get("wysiwygConfig"):null,k=g.has("wysiwygExtensions")?g.get("wysiwygExtensions"):[],l=d(c.defaults,k,j,arguments);return a(e).text(f()()),setTimeout(function(){a(e).tinymce(l)},0),b.utils.domNodeDisposal.addDisposeCallback(e,function(){a(e).tinymce().remove()}),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=a(b).tinymce(),h=c()();g&&g.getContent()!==h&&(g.setContent(h),g.execCommand("keyup"))}},d=function(d,e,f,g){var h=a.extend(!0,{},d);f&&(b.utils.objectForEach(f,function(a){"[object Array]"===Object.prototype.toString.call(f[a])&&(h[a]||(h[a]=[]),f[a]=b.utils.arrayGetDistinctValues(h[a].concat(f[a])))}),a.extend(!0,h,f)),h.plugins?-1===a.inArray("paste",h.plugins)&&h.plugins.push("paste"):h.plugins=["paste"];var i=function(a){a.on("change keyup nodechange",function(b){g[1]()(a.getContent());for(var d in e)e.hasOwnProperty(d)&&c.extensions[e[d]](a,b,g[2],g[4])})};if("function"==typeof h.setup){var j=h.setup;h.setup=function(a){j(a),i(a)}}else h.setup=i;return h};b.bindingHandlers.wysiwyg=c}(jQuery,ko),function(){"use strict";ko.bindingHandlers.fadeVisible={init:function(a,b){var c=b();$(a).toggle(ko.unwrap(c))},update:function(a,b){var c=b();ko.unwrap(c)?$(a).fadeIn():$(a).fadeOut()}},ko.bindingHandlers.slideVisible={init:function(a,b){var c=b();$(a).toggle(ko.unwrap(c))},update:function(a,b){var c=b();ko.unwrap(c)?$(a).slideDown():$(a).slideUp()}},ko.bindingHandlers.koSortable={init:function(a,b){var c=-1,d=b(),e={start:function(a,b){c=b.item.index(),b.placeholder.height(b.item.height())},stop:function(a,b){var e=b.item.index();if(c>-1){var f=d()[c];d.remove(f),d.splice(e,0,f),b.item.remove()}}};$(a).sortable(e)}},ko.bindingHandlers.iCheck={init:function(a,b){var c=$(a),d=b();c.on("ifClicked",function(a){var b=$(a.target).val();d(b)})},update:function(a,b){var c=$(a),d=ko.unwrap(b());d===c.val()?c.iCheck("check"):(""===d||null===d)&&c.iCheck("uncheck")}},ko.bindingHandlers.initializeValue={init:function(a,b){b()(a.getAttribute("value"))},update:function(a,b){var c=b();a.setAttribute("value",ko.utils.unwrapObservable(c))}},ko.bindingHandlers.initializeValueTextarea={init:function(a,b){b()(a.value)},update:function(a,b){var c=b();a.value=ko.utils.unwrapObservable(c)}},ko.bindingHandlers.wysiwyg.defaults={plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste code"],toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",menubar:!1,statusbar:!1,setup:function(a){a.on("init",function(a){this.getBody().style.fontFamily="Source Sans Pro",this.getBody().style.fontSize="18px",this.getBody().style.fontWeight="400",this.getBody().style.lineHeight="26px",this.iframeElement.style.resize="vertical"})}}}(),function(a,b,c){b.infinitescroll=function(a,c,d){this.element=b(d),this._create(a,c)||(this.failed=!0)},b.infinitescroll.defaults={loading:{finished:c,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"data:image/gif;base64,R0lGODlh3AATAPQeAPDy+MnQ6LW/4N3h8MzT6rjC4sTM5r/I5NHX7N7j8c7U6tvg8OLl8uXo9Ojr9b3G5MfP6Ovu9tPZ7PT1+vX2+tbb7vf4+8/W69jd7rC73vn5/O/x+K243ai02////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA3AATAAAF/6AnjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEj0BAScpHLJbDqf0Kh0Sq1ar9isdioItAKGw+MAKYMFhbF63CW438f0mg1R2O8EuXj/aOPtaHx7fn96goR4hmuId4qDdX95c4+RBIGCB4yAjpmQhZN0YGYGXitdZBIVGAsLoq4BBKQDswm1CQRkcG6ytrYKubq8vbfAcMK9v7q7EMO1ycrHvsW6zcTKsczNz8HZw9vG3cjTsMIYqQkCLBwHCgsMDQ4RDAYIqfYSFxDxEfz88/X38Onr16+Bp4ADCco7eC8hQYMAEe57yNCew4IVBU7EGNDiRn8Z831cGLHhSIgdFf9chIeBg7oA7gjaWUWTVQAGE3LqBDCTlc9WOHfm7PkTqNCh54rePDqB6M+lR536hCpUqs2gVZM+xbrTqtGoWqdy1emValeXKzggYBBB5y1acFNZmEvXAoN2cGfJrTv3bl69Ffj2xZt3L1+/fw3XRVw4sGDGcR0fJhxZsF3KtBTThZxZ8mLMgC3fRatCbYMNFCzwLEqLgE4NsDWs/tvqdezZf13Hvk2A9Szdu2X3pg18N+68xXn7rh1c+PLksI/Dhe6cuO3ow3NfV92bdArTqC2Ebd3A8vjf5QWfH6Bg7Nz17c2fj69+fnq+8N2Lty+fuP78/eV2X13neIcCeBRwxorbZrA1ANoCDGrgoG8RTshahQ9iSKEEzUmYIYfNWViUhheCGJyIP5E4oom7WWjgCeBFAJNv1DVV01MAdJhhjdkplWNzO/5oXI846njjVEIqR2OS2B1pE5PVscajkxhMycqLJghQSwT40PgfAl4GqNSXYdZXJn5gSkmmmmJu1aZYb14V51do+pTOCmA40AqVCIhG5IJ9PvYnhIFOxmdqhpaI6GeHCtpooisuutmg+Eg62KOMKuqoTaXgicQWoIYq6qiklmoqFV0UoeqqrLbq6quwxirrrLTWauutJ4QAACH5BAUKABwALAcABADOAAsAAAX/IPd0D2dyRCoUp/k8gpHOKtseR9yiSmGbuBykler9XLAhkbDavXTL5k2oqFqNOxzUZPU5YYZd1XsD72rZpBjbeh52mSNnMSC8lwblKZGwi+0QfIJ8CncnCoCDgoVnBHmKfByGJimPkIwtiAeBkH6ZHJaKmCeVnKKTHIihg5KNq4uoqmEtcRUtEREMBggtEr4QDrjCuRC8h7/BwxENeicSF8DKy82pyNLMOxzWygzFmdvD2L3P0dze4+Xh1Arkyepi7dfFvvTtLQkZBC0T/FX3CRgCMOBHsJ+EHYQY7OinAGECgQsB+Lu3AOK+CewcWjwxQeJBihtNGHSoQOE+iQ3//4XkwBBhRZMcUS6YSXOAwIL8PGqEaSJCiYt9SNoCmnJPAgUVLChdaoFBURN8MAzl2PQphwQLfDFd6lTowglHve6rKpbjhK7/pG5VinZP1qkiz1rl4+tr2LRwWU64cFEihwEtZgbgR1UiHaMVvxpOSwBA37kzGz9e8G+B5MIEKLutOGEsAH2ATQwYfTmuX8aETWdGPZmiZcccNSzeTCA1Sw0bdiitC7LBWgu8jQr8HRzqgpK6gX88QbrB14z/kF+ELpwB8eVQj/JkqdylAudji/+ts3039vEEfK8Vz2dlvxZKG0CmbkKDBvllRd6fCzDvBLKBDSCeffhRJEFebFk1k/Mv9jVIoIJZSeBggwUaNeB+Qk34IE0cXlihcfRxkOAJFFhwGmKlmWDiakZhUJtnLBpnWWcnKaAZcxI0piFGGLBm1mc90kajSCveeBVWKeYEoU2wqeaQi0PetoE+rr14EpVC7oAbAUHqhYExbn2XHHsVqbcVew9tx8+XJKk5AZsqqdlddGpqAKdbAYBn1pcczmSTdWvdmZ17c1b3FZ99vnTdCRFM8OEcAhLwm1NdXnWcBBSMRWmfkWZqVlsmLIiAp/o1gGV2vpS4lalGYsUOqXrddcKCmK61aZ8SjEpUpVFVoCpTj4r661Km7kBHjrDyc1RAIQAAIfkEBQoAGwAsBwAEAM4ACwAABf/gtmUCd4goQQgFKj6PYKi0yrrbc8i4ohQt12EHcal+MNSQiCP8gigdz7iCioaCIvUmZLp8QBzW0EN2vSlCuDtFKaq4RyHzQLEKZNdiQDhRDVooCwkbfm59EAmKi4SGIm+AjIsKjhsqB4mSjT2IOIOUnICeCaB/mZKFNTSRmqVpmJqklSqskq6PfYYCDwYHDC4REQwGCBLGxxIQDsHMwhAIX8bKzcENgSLGF9PU1j3Sy9zX2NrgzQziChLk1BHWxcjf7N046tvN82715czn9Pryz6Ilc4ACj4EBOCZM8KEnAYYADBRKnACAYUMFv1wotIhCEcaJCisqwJFgAUSQGyX/kCSVUUTIdKMwJlyo0oXHlhskwrTJciZHEXsgaqS4s6PJiCAr1uzYU8kBBSgnWFqpoMJMUjGtDmUwkmfVmVypakWhEKvXsS4nhLW5wNjVroJIoc05wSzTr0PtiigpYe4EC2vj4iWrFu5euWIMRBhacaVJhYQBEFjA9jHjyQ0xEABwGceGAZYjY0YBOrRLCxUp29QM+bRkx5s7ZyYgVbTqwwti2ybJ+vLtDYpycyZbYOlptxdx0kV+V7lC5iJAyyRrwYKxAdiz82ng0/jnAdMJFz0cPi104Ec1Vj9/M6F173vKL/feXv156dw11tlqeMMnv4V5Ap53GmjQQH97nFfg+IFiucfgRX5Z8KAgbUlQ4IULIlghhhdOSB6AgX0IVn8eReghen3NRIBsRgnH4l4LuEidZBjwRpt6NM5WGwoW0KSjCwX6yJSMab2GwwAPDXfaBCtWpluRTQqC5JM5oUZAjUNS+VeOLWpJEQ7VYQANW0INJSZVDFSnZphjSikfmzE5N4EEbQI1QJmnWXCmHulRp2edwDXF43txukenJwvI9xyg9Q26Z3MzGUcBYFEChZh6DVTq34AU8Iflh51Sd+CnKFYQ6mmZkhqfBKfSxZWqA9DZanWjxmhrWwi0qtCrt/43K6WqVjjpmhIqgEGvculaGKklKstAACEAACH5BAUKABwALAcABADOAAsAAAX/ICdyQmaMYyAUqPgIBiHPxNpy79kqRXH8wAPsRmDdXpAWgWdEIYm2llCHqjVHU+jjJkwqBTecwItShMXkEfNWSh8e1NGAcLgpDGlRgk7EJ/6Ae3VKfoF/fDuFhohVeDeCfXkcCQqDVQcQhn+VNDOYmpSWaoqBlUSfmowjEA+iEAEGDRGztAwGCDcXEA60tXEiCrq8vREMEBLIyRLCxMWSHMzExnbRvQ2Sy7vN0zvVtNfU2tLY3rPgLdnDvca4VQS/Cpk3ABwSLQkYAQwT/P309vcI7OvXr94jBQMJ/nskkGA/BQBRLNDncAIAiDcG6LsxAWOLiQzmeURBKWSLCQbv/1F0eDGinJUKR47YY1IEgQASKk7Yc7ACRwZm7mHweRJoz59BJUogisKCUaFMR0x4SlJBVBFTk8pZivTR0K73rN5wqlXEAq5Fy3IYgHbEzQ0nLy4QSoCjXLoom96VOJEeCosK5n4kkFfqXjl94wa+l1gvAcGICbewAOAxY8l/Ky/QhAGz4cUkGxu2HNozhwMGBnCUqUdBg9UuW9eUynqSwLHIBujePef1ZGQZXcM+OFuEBeBhi3OYgLyqcuaxbT9vLkf4SeqyWxSQpKGB2gQpm1KdWbu72rPRzR9Ne2Nu9Kzr/1Jqj0yD/fvqP4aXOt5sW/5qsXXVcv1Nsp8IBUAmgswGF3llGgeU1YVXXKTN1FlhWFXW3gIE+DVChApysACHHo7Q4A35lLichh+ROBmLKAzgYmYEYDAhCgxKGOOMn4WR4kkDaoBBOxJtdNKQxFmg5JIWIBnQc07GaORfUY4AEkdV6jHlCEISSZ5yTXpp1pbGZbkWmcuZmQCaE6iJ0FhjMaDjTMsgZaNEHFRAQVp3bqXnZED1qYcECOz5V6BhSWCoVJQIKuKQi2KFKEkEFAqoAo7uYSmO3jk61wUUMKmknJ4SGimBmAa0qVQBhAAAIfkEBQoAGwAsBwAEAM4ACwAABf/gJm5FmRlEqhJC+bywgK5pO4rHI0D3pii22+Mg6/0Ej96weCMAk7cDkXf7lZTTnrMl7eaYoy10JN0ZFdco0XAuvKI6qkgVFJXYNwjkIBcNBgR8TQoGfRsJCRuCYYQQiI+ICosiCoGOkIiKfSl8mJkHZ4U9kZMbKaI3pKGXmJKrngmug4WwkhA0lrCBWgYFCCMQFwoQDRHGxwwGCBLMzRLEx8iGzMMO0cYNeCMKzBDW19lnF9DXDIY/48Xg093f0Q3s1dcR8OLe8+Y91OTv5wrj7o7B+7VNQqABIoRVCMBggsOHE36kSoCBIcSH3EbFangxogJYFi8CkJhqQciLJEf/LDDJEeJIBT0GsOwYUYJGBS0fjpQAMidGmyVP6sx4Y6VQhzs9VUwkwqaCCh0tmKoFtSMDmBOf9phg4SrVrROuasRQAaxXpVUhdsU6IsECZlvX3kwLUWzRt0BHOLTbNlbZG3vZinArge5Dvn7wbqtQkSYAAgtKmnSsYKVKo2AfW048uaPmG386i4Q8EQMBAIAnfB7xBxBqvapJ9zX9WgRS2YMpnvYMGdPK3aMjt/3dUcNI4blpj7iwkMFWDXDvSmgAlijrt9RTR78+PS6z1uAJZIe93Q8g5zcsWCi/4Y+C8bah5zUv3vv89uft30QP23punGCx5954oBBwnwYaNCDY/wYrsYeggnM9B2Fpf8GG2CEUVWhbWAtGouEGDy7Y4IEJVrbSiXghqGKIo7z1IVcXIkKWWR361QOLWWnIhwERpLaaCCee5iMBGJQmJGyPFTnbkfHVZGRtIGrg5HALEJAZbu39BuUEUmq1JJQIPtZilY5hGeSWsSk52G9XqsmgljdIcABytq13HyIM6RcUA+r1qZ4EBF3WHWB29tBgAzRhEGhig8KmqKFv8SeCeo+mgsF7YFXa1qWSbkDpom/mqR1PmHCqJ3fwNRVXjC7S6CZhFVCQ2lWvZiirhQq42SACt25IK2hv8TprriUV1usGgeka7LFcNmCldMLi6qZMgFLgpw16Cipb7bC1knXsBiEAACH5BAUKABsALAcABADOAAsAAAX/4FZsJPkUmUGsLCEUTywXglFuSg7fW1xAvNWLF6sFFcPb42C8EZCj24EJdCp2yoegWsolS0Uu6fmamg8n8YYcLU2bXSiRaXMGvqV6/KAeJAh8VgZqCX+BexCFioWAYgqNi4qAR4ORhRuHY408jAeUhAmYYiuVlpiflqGZa5CWkzc5fKmbbhIpsAoQDRG8vQwQCBLCwxK6vb5qwhfGxxENahvCEA7NzskSy7vNzzzK09W/PNHF1NvX2dXcN8K55cfh69Luveol3vO8zwi4Yhj+AQwmCBw4IYclDAAJDlQggVOChAoLKkgFkSCAHDwWLKhIEOONARsDKryogFPIiAUb/95gJNIiw4wnI778GFPhzBKFOAq8qLJEhQpiNArjMcHCmlTCUDIouTKBhApELSxFWiGiVKY4E2CAekPgUphDu0742nRrVLJZnyrFSqKQ2ohoSYAMW6IoDpNJ4bLdILTnAj8KUF7UeENjAKuDyxIgOuGiOI0EBBMgLNew5AUrDTMGsFixwBIaNCQuAXJB57qNJ2OWm2Aj4skwCQCIyNkhhtMkdsIuodE0AN4LJDRgfLPtn5YDLdBlraAByuUbBgxQwICxMOnYpVOPej074OFdlfc0TqC62OIbcppHjV4o+LrieWhfT8JC/I/T6W8oCl29vQ0XjLdBaA3s1RcPBO7lFvpX8BVoG4O5jTXRQRDuJ6FDTzEWF1/BCZhgbyAKE9qICYLloQYOFtahVRsWYlZ4KQJHlwHS/IYaZ6sZd9tmu5HQm2xi1UaTbzxYwJk/wBF5g5EEYOBZeEfGZmNdFyFZmZIR4jikbLThlh5kUUVJGmRT7sekkziRWUIACABk3T4qCsedgO4xhgGcY7q5pHJ4klBBTQRJ0CeHcoYHHUh6wgfdn9uJdSdMiebGJ0zUPTcoS286FCkrZxnYoYYKWLkBowhQoBeaOlZAgVhLidrXqg2GiqpQpZ4apwSwRtjqrB3muoF9BboaXKmshlqWqsWiGt2wphJkQbAU5hoCACH5BAUKABsALAcABADOAAsAAAX/oGFw2WZuT5oZROsSQnGaKjRvilI893MItlNOJ5v5gDcFrHhKIWcEYu/xFEqNv6B1N62aclysF7fsZYe5aOx2yL5aAUGSaT1oTYMBwQ5VGCAJgYIJCnx1gIOBhXdwiIl7d0p2iYGQUAQBjoOFSQR/lIQHnZ+Ue6OagqYzSqSJi5eTpTxGcjcSChANEbu8DBAIEsHBChe5vL13G7fFuscRDcnKuM3H0La3EA7Oz8kKEsXazr7Cw9/Gztar5uHHvte47MjktznZ2w0G1+D3BgirAqJmJMAQgMGEgwgn5Ei0gKDBhBMALGRYEOJBb5QcWlQo4cbAihZz3GgIMqFEBSM1/4ZEOWPAgpIIJXYU+PIhRG8ja1qU6VHlzZknJNQ6UanCjQkWCIGSUGEjAwVLjc44+DTqUQtPPS5gejUrTa5TJ3g9sWCr1BNUWZI161StiQUDmLYdGfesibQ3XMq1OPYthrwuA2yU2LBs2cBHIypYQPPlYAKFD5cVvNPtW8eVGbdcQADATsiNO4cFAPkvHpedPzc8kUcPgNGgZ5RNDZG05reoE9s2vSEP79MEGiQGy1qP8LA4ZcdtsJE48ONoLTBtTV0B9LsTnPceoIDBDQvS7W7vfjVY3q3eZ4A339J4eaAmKqU/sV58HvJh2RcnIBsDUw0ABqhBA5aV5V9XUFGiHfVeAiWwoFgJJrIXRH1tEMiDFV4oHoAEGlaWhgIGSGBO2nFomYY3mKjVglidaNYJGJDkWW2xxTfbjCbVaOGNqoX2GloR8ZeTaECS9pthRGJH2g0b3Agbk6hNANtteHD2GJUucfajCQBy5OOTQ25ZgUPvaVVQmbKh9510/qQpwXx3SQdfk8tZJOd5b6JJFplT3ZnmmX3qd5l1eg5q00HrtUkUn0AKaiGjClSAgKLYZcgWXwocGRcCFGCKwSB6ceqphwmYRUFYT/1WKlOdUpipmxW0mlCqHjYkAaeoZlqrqZ4qd+upQKaapn/AmgAegZ8KUtYtFAQQAgAh+QQFCgAbACwHAAQAzgALAAAF/+C2PUcmiCiZGUTrEkKBis8jQEquKwU5HyXIbEPgyX7BYa5wTNmEMwWsSXsqFbEh8DYs9mrgGjdK6GkPY5GOeU6ryz7UFopSQEzygOGhJBjoIgMDBAcBM0V/CYqLCQqFOwobiYyKjn2TlI6GKC2YjJZknouaZAcQlJUHl6eooJwKooobqoewrJSEmyKdt59NhRKFMxLEEA4RyMkMEAjDEhfGycqAG8TQx9IRDRDE3d3R2ctD1RLg0ttKEnbY5wZD3+zJ6M7X2RHi9Oby7u/r9g38UFjTh2xZJBEBMDAboogAgwkQI07IMUORwocSJwCgWDFBAIwZOaJIsOBjRogKJP8wTODw5ESVHVtm3AhzpEeQElOuNDlTZ0ycEUWKWFASqEahGwYUPbnxoAgEdlYSqDBkgoUNClAlIHbSAoOsqCRQnQHxq1axVb06FWFxLIqyaze0Tft1JVqyE+pWXMD1pF6bYl3+HTqAWNW8cRUFzmih0ZAAB2oGKukSAAGGRHWJgLiR6AylBLpuHKKUMlMCngMpDSAa9QIUggZVVvDaJobLeC3XZpvgNgCmtPcuwP3WgmXSq4do0DC6o2/guzcseECtUoO0hmcsGKDgOt7ssBd07wqesAIGZC1YIBa7PQHvb1+SFo+++HrJSQfB33xfav3i5eX3Hnb4CTJgegEq8tH/YQEOcIJzbm2G2EoYRLgBXFpVmFYDcREV4HIcnmUhiGBRouEMJGJGzHIspqgdXxK0yCKHRNXoIX4uorCdTyjkyNtdPWrA4Up82EbAbzMRxxZRR54WXVLDIRmRcag5d2R6ugl3ZXzNhTecchpMhIGVAKAYpgJjjsSklBEd99maZoo535ZvdamjBEpusJyctg3h4X8XqodBMx0tiNeg/oGJaKGABpogS40KSqiaEgBqlQWLUtqoVQnytekEjzo0hHqhRorppOZt2p923M2AAV+oBtpAnnPNoB6HaU6mAAIU+IXmi3j2mtFXuUoHKwXpzVrsjcgGOauKEjQrwq157hitGq2NoWmjh7z6Wmxb0m5w66+2VRAuXN/yFUAIACH5BAUKABsALAcABADOAAsAAAX/4CZuRiaM45MZqBgIRbs9AqTcuFLE7VHLOh7KB5ERdjJaEaU4ClO/lgKWjKKcMiJQ8KgumcieVdQMD8cbBeuAkkC6LYLhOxoQ2PF5Ys9PKPBMen17f0CCg4VSh32JV4t8jSNqEIOEgJKPlkYBlJWRInKdiJdkmQlvKAsLBxdABA4RsbIMBggtEhcQsLKxDBC2TAS6vLENdJLDxMZAubu8vjIbzcQRtMzJz79S08oQEt/guNiyy7fcvMbh4OezdAvGrakLAQwyABsELQkY9BP+//ckyPDD4J9BfAMh1GsBoImMeQUN+lMgUJ9CiRMa5msxoB9Gh/o8GmxYMZXIgxtR/yQ46S/gQAURR0pDwYDfywoyLPip5AdnCwsMFPBU4BPFhKBDi444quCmDKZOfwZ9KEGpCKgcN1jdALSpPqIYsabS+nSqvqplvYqQYAeDPgwKwjaMtiDl0oaqUAyo+3TuWwUAMPpVCfee0cEjVBGQq2ABx7oTWmQk4FglZMGN9fGVDMCuiH2AOVOu/PmyxM630gwM0CCn6q8LjVJ8GXvpa5Uwn95OTC/nNxkda1/dLSK475IjCD6dHbK1ZOa4hXP9DXs5chJ00UpVm5xo2qRpoxptwF2E4/IbJpB/SDz9+q9b1aNfQH08+p4a8uvX8B53fLP+ycAfemjsRUBgp1H20K+BghHgVgt1GXZXZpZ5lt4ECjxYR4ScUWiShEtZqBiIInRGWnERNnjiBglw+JyGnxUmGowsyiiZg189lNtPGACjV2+S9UjbU0JWF6SPvEk3QZEqsZYTk3UAaRSUnznJI5LmESCdBVSyaOWUWLK4I5gDUYVeV1T9l+FZClCAUVA09uSmRHBCKAECFEhW51ht6rnmWBXkaR+NjuHpJ40D3DmnQXt2F+ihZxlqVKOfQRACACH5BAUKABwALAcABADOAAsAAAX/ICdyUCkUo/g8mUG8MCGkKgspeC6j6XEIEBpBUeCNfECaglBcOVfJFK7YQwZHQ6JRZBUqTrSuVEuD3nI45pYjFuWKvjjSkCoRaBUMWxkwBGgJCXspQ36Bh4EEB0oKhoiBgyNLjo8Ki4QElIiWfJqHnISNEI+Ql5J9o6SgkqKkgqYihamPkW6oNBgSfiMMDQkGCBLCwxIQDhHIyQwQCGMKxsnKVyPCF9DREQ3MxMPX0cu4wt7J2uHWx9jlKd3o39MiuefYEcvNkuLt5O8c1ePI2tyELXGQwoGDAQf+iEC2xByDCRAjTlAgIUWCBRgCPJQ4AQBFXAs0coT40WLIjRxL/47AcHLkxIomRXL0CHPERZkpa4q4iVKiyp0tR/7kwHMkTUBBJR5dOCEBAVcKKtCAyOHpowXCpk7goABqBZdcvWploACpBKkpIJI1q5OD2rIWE0R1uTZu1LFwbWL9OlKuWb4c6+o9i3dEgw0RCGDUG9KlRw56gDY2qmCByZBaASi+TACA0TucAaTteCcy0ZuOK3N2vJlx58+LRQyY3Xm0ZsgjZg+oPQLi7dUcNXi0LOJw1pgNtB7XG6CBy+U75SYfPTSQAgZTNUDnQHt67wnbZyvwLgKiMN3oCZB3C76tdewpLFgIP2C88rbi4Y+QT3+8S5USMICZXWj1pkEDeUU3lOYGB3alSoEiMIjgX4WlgNF2EibIwQIXauWXSRg2SAOHIU5IIIMoZkhhWiJaiFVbKo6AQEgQXrTAazO1JhkBrBG3Y2Y6EsUhaGn95hprSN0oWpFE7rhkeaQBchGOEWnwEmc0uKWZj0LeuNV3W4Y2lZHFlQCSRjTIl8uZ+kG5HU/3sRlnTG2ytyadytnD3HrmuRcSn+0h1dycexIK1KCjYaCnjCCVqOFFJTZ5GkUUjESWaUIKU2lgCmAKKQIUjHapXRKE+t2og1VgankNYnohqKJ2CmKplso6GKz7WYCgqxeuyoF8u9IQAgA7",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:c},state:{isDuringAjax:!1,isInvalidPage:!1,isDestroyed:!1,isDone:!1,isPaused:!1,currPage:1},debug:!1,behavior:c,binder:b(a),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:!1,pathParse:c,dataType:"html",appendCallback:!0,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:c,path:c,prefill:!1,maxPage:c},b.infinitescroll.prototype={_binding:function(a){var b=this,d=b.options;return d.v="2.0b2.120520",d.behavior&&this["_binding_"+d.behavior]!==c?void this["_binding_"+d.behavior].call(this):"bind"!==a&&"unbind"!==a?(this._debug("Binding value  "+a+" not valid"),!1):("unbind"===a?this.options.binder.unbind("smartscroll.infscr."+b.options.infid):this.options.binder[a]("smartscroll.infscr."+b.options.infid,function(){b.scroll()}),void this._debug("Binding",a))},_create:function(d,e){var f=b.extend(!0,{},b.infinitescroll.defaults,d);this.options=f;var g=b(a),h=this;if(!h._validate(d))return!1;var i=b(f.nextSelector).attr("href");if(!i)return this._debug("Navigation selector not found"),!1;f.path=f.path||this._determinepath(i),f.contentSelector=f.contentSelector||this.element,f.loading.selector=f.loading.selector||f.contentSelector,f.loading.msg=f.loading.msg||b('<div id="infscr-loading"><img alt="Loading..." src="'+f.loading.img+'" /><div>'+f.loading.msgText+"</div></div>"),(new Image).src=f.loading.img,f.pixelsFromNavToBottom===c&&(f.pixelsFromNavToBottom=b(document).height()-b(f.navSelector).offset().top);
var j=this;return f.loading.start=f.loading.start||function(){b(f.navSelector).hide(),f.loading.msg.appendTo(f.loading.selector).show(f.loading.speed,b.proxy(function(){this.beginAjax(f)},j))},f.loading.finished=f.loading.finished||function(){f.loading.msg.fadeOut(f.loading.speed)},f.callback=function(a,d,h){f.behavior&&a["_callback_"+f.behavior]!==c&&a["_callback_"+f.behavior].call(b(f.contentSelector)[0],d,h),e&&e.call(b(f.contentSelector)[0],d,f,h),f.prefill&&g.bind("resize.infinite-scroll",a._prefill)},d.debug&&(!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log||["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(a){console[a]=this.call(console[a],console)},Function.prototype.bind)),this._setup(),f.prefill&&this._prefill(),!0},_prefill:function(){function c(){return e.height()<=f.height()}var d=this,e=b(document),f=b(a);this._prefill=function(){c()&&d.scroll(),f.bind("resize.infinite-scroll",function(){c()&&(f.unbind("resize.infinite-scroll"),d.scroll())})},this._prefill()},_debug:function(){!0===this.options.debug&&("undefined"!=typeof console&&"function"==typeof console.log?1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments)):Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments)))},_determinepath:function(a){var b=this.options;if(b.behavior&&this["_determinepath_"+b.behavior]!==c)return this["_determinepath_"+b.behavior].call(this,a);if(b.pathParse)return this._debug("pathParse manual"),b.pathParse(a,this.options.state.currPage+1);if(a.match(/^(.*?)\b2\b(.*?$)/))a=a.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(a.match(/^(.*?)2(.*?$)/)){if(a.match(/^(.*?page=)2(\/.*|$)/))return a=a.match(/^(.*?page=)2(\/.*|$)/).slice(1);a=a.match(/^(.*?)2(.*?$)/).slice(1)}else{if(a.match(/^(.*?page=)1(\/.*|$)/))return a=a.match(/^(.*?page=)1(\/.*|$)/).slice(1);this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com."),b.state.isInvalidPage=!0}return this._debug("determinePath",a),a},_error:function(a){var b=this.options;return b.behavior&&this["_error_"+b.behavior]!==c?void this["_error_"+b.behavior].call(this,a):("destroy"!==a&&"end"!==a&&(a="unknown"),this._debug("Error",a),"end"===a&&this._showdonemsg(),b.state.isDone=!0,b.state.currPage=1,void(b.state.isPaused=!1))},_loadcallback:function(d,e,f){var g,h=this.options,i=this.options.callback,j=h.state.isDone?"done":h.appendCallback?"append":"no-append";if(h.behavior&&this["_loadcallback_"+h.behavior]!==c)return void this["_loadcallback_"+h.behavior].call(this,d,e);switch(j){case"done":return this._showdonemsg(),!1;case"no-append":"html"===h.dataType&&(e="<div>"+e+"</div>",e=b(e).find(h.itemSelector));break;case"append":var k=d.children();if(0===k.length)return this._error("end");for(g=document.createDocumentFragment();d[0].firstChild;)g.appendChild(d[0].firstChild);this._debug("contentSelector",b(h.contentSelector)[0]),b(h.contentSelector)[0].appendChild(g),e=k.get()}if(h.loading.finished.call(b(h.contentSelector)[0],h),h.animate){var l=b(a).scrollTop()+b("#infscr-loading").height()+h.extraScrollPx+"px";b("html,body").animate({scrollTop:l},800,function(){h.state.isDuringAjax=!1})}h.animate||(h.state.isDuringAjax=!1),i(this,e,f),h.prefill&&this._prefill()},_nearbottom:function(){var d=this.options,e=0+b(document).height()-d.binder.scrollTop()-b(a).height();return d.behavior&&this["_nearbottom_"+d.behavior]!==c?this["_nearbottom_"+d.behavior].call(this):(this._debug("math:",e,d.pixelsFromNavToBottom),e-d.bufferPx<d.pixelsFromNavToBottom)},_pausing:function(a){var b=this.options;if(b.behavior&&this["_pausing_"+b.behavior]!==c)return void this["_pausing_"+b.behavior].call(this,a);switch("pause"!==a&&"resume"!==a&&null!==a&&this._debug("Invalid argument. Toggling pause value instead"),a=!a||"pause"!==a&&"resume"!==a?"toggle":a){case"pause":b.state.isPaused=!0;break;case"resume":b.state.isPaused=!1;break;case"toggle":b.state.isPaused=!b.state.isPaused}return this._debug("Paused",b.state.isPaused),!1},_setup:function(){var a=this.options;return a.behavior&&this["_setup_"+a.behavior]!==c?void this["_setup_"+a.behavior].call(this):(this._binding("bind"),!1)},_showdonemsg:function(){var a=this.options;return a.behavior&&this["_showdonemsg_"+a.behavior]!==c?void this["_showdonemsg_"+a.behavior].call(this):(a.loading.msg.find("img").hide().parent().find("div").html(a.loading.finishedMsg).animate({opacity:1},2e3,function(){b(this).parent().fadeOut(a.loading.speed)}),void a.errorCallback.call(b(a.contentSelector)[0],"done"))},_validate:function(a){for(var c in a)if(c.indexOf&&c.indexOf("Selector")>-1&&0===b(a[c]).length)return this._debug("Your "+c+" found no elements."),!1;return!0},bind:function(){this._binding("bind")},destroy:function(){return this.options.state.isDestroyed=!0,this.options.loading.finished(),this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},beginAjax:function(a){var d,e,f,g,h=this,i=a.path;if(a.state.currPage++,a.maxPage!=c&&a.state.currPage>a.maxPage)return void this.destroy();switch(d=b(b(a.contentSelector).is("table")?"<tbody/>":"<div/>"),e="function"==typeof i?i(a.state.currPage):i.join(a.state.currPage),h._debug("heading into ajax",e),f="html"===a.dataType||"json"===a.dataType?a.dataType:"html+callback",a.appendCallback&&"html"===a.dataType&&(f+="+callback"),f){case"html+callback":h._debug("Using HTML via .load() method"),d.load(e+" "+a.itemSelector,c,function(a){h._loadcallback(d,a,e)});break;case"html":h._debug("Using "+f.toUpperCase()+" via $.ajax() method"),b.ajax({url:e,dataType:a.dataType,complete:function(a,b){g="undefined"!=typeof a.isResolved?a.isResolved():"success"===b||"notmodified"===b,g?h._loadcallback(d,a.responseText,e):h._error("end")}});break;case"json":h._debug("Using "+f.toUpperCase()+" via $.ajax() method"),b.ajax({dataType:"json",type:"GET",url:e,success:function(b,f,i){if(g="undefined"!=typeof i.isResolved?i.isResolved():"success"===f||"notmodified"===f,a.appendCallback)if(a.template!==c){var j=a.template(b);d.append(j),g?h._loadcallback(d,j):h._error("end")}else h._debug("template must be defined."),h._error("end");else g?h._loadcallback(d,b,e):h._error("end")},error:function(){h._debug("JSON ajax request failed."),h._error("end")}})}},retrieve:function(a){a=a||null;var d=this,e=d.options;return e.behavior&&this["retrieve_"+e.behavior]!==c?void this["retrieve_"+e.behavior].call(this,a):e.state.isDestroyed?(this._debug("Instance is destroyed"),!1):(e.state.isDuringAjax=!0,void e.loading.start.call(b(e.contentSelector)[0],e))},scroll:function(){var a=this.options,b=a.state;return a.behavior&&this["scroll_"+a.behavior]!==c?void this["scroll_"+a.behavior].call(this):void(b.isDuringAjax||b.isInvalidPage||b.isDone||b.isDestroyed||b.isPaused||this._nearbottom()&&this.retrieve())},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(a){b.isPlainObject(a)&&(this.options=b.extend(!0,this.options,a))}},b.fn.infinitescroll=function(a,c){var d=typeof a;switch(d){case"string":var e=Array.prototype.slice.call(arguments,1);this.each(function(){var c=b.data(this,"infinitescroll");return c&&b.isFunction(c[a])&&"_"!==a.charAt(0)?void c[a].apply(c,e):!1});break;case"object":this.each(function(){var d=b.data(this,"infinitescroll");d?d.update(a):(d=new b.infinitescroll(a,c,this),d.failed||b.data(this,"infinitescroll",d))})}return this};var d,e=b.event;e.special.smartscroll={setup:function(){b(this).bind("scroll",e.special.smartscroll.handler)},teardown:function(){b(this).unbind("scroll",e.special.smartscroll.handler)},handler:function(a,c){var e=this,f=arguments;a.type="smartscroll",d&&clearTimeout(d),d=setTimeout(function(){b(e).trigger("smartscroll",f)},"execAsap"===c?0:100)}},b.fn.smartscroll=function(a){return a?this.bind("smartscroll",a):this.trigger("smartscroll",["execAsap"])}}(window,jQuery),!function(a,b){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(c){return b(a,c)}):"object"==typeof module&&module.exports?module.exports=b(a,require("jquery")):a.jQueryBridget=b(a,a.jQuery)}(window,function(a,b){"use strict";function c(c,f,h){function i(a,b,d){var e,f="$()."+c+'("'+b+'")';return a.each(function(a,i){var j=h.data(i,c);if(!j)return void g(c+" not initialized. Cannot call methods, i.e. "+f);var k=j[b];if(!k||"_"==b.charAt(0))return void g(f+" is not a valid method");var l=k.apply(j,d);e=void 0===e?l:e}),void 0!==e?e:a}function j(a,b){a.each(function(a,d){var e=h.data(d,c);e?(e.option(b),e._init()):(e=new f(d,b),h.data(d,c,e))})}h=h||b||a.jQuery,h&&(f.prototype.option||(f.prototype.option=function(a){h.isPlainObject(a)&&(this.options=h.extend(!0,this.options,a))}),h.fn[c]=function(a){if("string"==typeof a){var b=e.call(arguments,1);return i(this,a,b)}return j(this,a),this},d(h))}function d(a){!a||a&&a.bridget||(a.bridget=c)}var e=Array.prototype.slice,f=a.console,g="undefined"==typeof f?function(){}:function(a){f.error(a)};return d(b||a.jQuery),c}),function(a,b){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",b):"object"==typeof module&&module.exports?module.exports=b():a.EvEmitter=b()}("undefined"!=typeof window?window:this,function(){function a(){}var b=a.prototype;return b.on=function(a,b){if(a&&b){var c=this._events=this._events||{},d=c[a]=c[a]||[];return-1==d.indexOf(b)&&d.push(b),this}},b.once=function(a,b){if(a&&b){this.on(a,b);var c=this._onceEvents=this._onceEvents||{},d=c[a]=c[a]||{};return d[b]=!0,this}},b.off=function(a,b){var c=this._events&&this._events[a];if(c&&c.length){var d=c.indexOf(b);return-1!=d&&c.splice(d,1),this}},b.emitEvent=function(a,b){var c=this._events&&this._events[a];if(c&&c.length){c=c.slice(0),b=b||[];for(var d=this._onceEvents&&this._onceEvents[a],e=0;e<c.length;e++){var f=c[e],g=d&&d[f];g&&(this.off(a,f),delete d[f]),f.apply(this,b)}return this}},b.allOff=function(){delete this._events,delete this._onceEvents},a}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",b):"object"==typeof module&&module.exports?module.exports=b():a.matchesSelector=b()}(window,function(){"use strict";var a=function(){var a=window.Element.prototype;if(a.matches)return"matches";if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0;c<b.length;c++){var d=b[c],e=d+"MatchesSelector";if(a[e])return e}}();return function(b,c){return b[a](c)}}),function(a,b){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(c){return b(a,c)}):"object"==typeof module&&module.exports?module.exports=b(a,require("desandro-matches-selector")):a.fizzyUIUtils=b(a,a.matchesSelector)}(window,function(a,b){var c={};c.extend=function(a,b){for(var c in b)a[c]=b[c];return a},c.modulo=function(a,b){return(a%b+b)%b};var d=Array.prototype.slice;c.makeArray=function(a){if(Array.isArray(a))return a;if(null===a||void 0===a)return[];var b="object"==typeof a&&"number"==typeof a.length;return b?d.call(a):[a]},c.removeFrom=function(a,b){var c=a.indexOf(b);-1!=c&&a.splice(c,1)},c.getParent=function(a,c){for(;a.parentNode&&a!=document.body;)if(a=a.parentNode,b(a,c))return a},c.getQueryElement=function(a){return"string"==typeof a?document.querySelector(a):a},c.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},c.filterFindElements=function(a,d){a=c.makeArray(a);var e=[];return a.forEach(function(a){if(a instanceof HTMLElement){if(!d)return void e.push(a);b(a,d)&&e.push(a);for(var c=a.querySelectorAll(d),f=0;f<c.length;f++)e.push(c[f])}}),e},c.debounceMethod=function(a,b,c){c=c||100;var d=a.prototype[b],e=b+"Timeout";a.prototype[b]=function(){var a=this[e];clearTimeout(a);var b=arguments,f=this;this[e]=setTimeout(function(){d.apply(f,b),delete f[e]},c)}},c.docReady=function(a){var b=document.readyState;"complete"==b||"interactive"==b?setTimeout(a):document.addEventListener("DOMContentLoaded",a)},c.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()};var e=a.console;return c.htmlInit=function(b,d){c.docReady(function(){var f=c.toDashed(d),g="data-"+f,h=document.querySelectorAll("["+g+"]"),i=document.querySelectorAll(".js-"+f),j=c.makeArray(h).concat(c.makeArray(i)),k=g+"-options",l=a.jQuery;j.forEach(function(a){var c,f=a.getAttribute(g)||a.getAttribute(k);try{c=f&&JSON.parse(f)}catch(h){return void(e&&e.error("Error parsing "+g+" on "+a.className+": "+h))}var i=new b(a,c);l&&l.data(a,d,i)})})},c}),function(a,b){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(c,d){return b(a,c,d)}):"object"==typeof module&&module.exports?module.exports=b(a,require("ev-emitter"),require("fizzy-ui-utils")):a.InfiniteScroll=b(a,a.EvEmitter,a.fizzyUIUtils)}(window,function(a,b,c){function d(a,b){var g=c.getQueryElement(a);if(!g)return void console.error("Bad element for InfiniteScroll: "+(g||a));if(a=g,a.infiniteScrollGUID){var h=f[a.infiniteScrollGUID];return h.option(b),h}this.element=a,this.options=c.extend({},d.defaults),this.option(b),e&&(this.$element=e(this.element)),this.create()}var e=a.jQuery,f={};d.defaults={},d.create={},d.destroy={};var g=d.prototype;c.extend(g,b.prototype);var h=0;g.create=function(){var a=this.guid=++h;this.element.infiniteScrollGUID=a,f[a]=this,this.pageIndex=1,this.loadCount=0,this.updateGetPath();var b=this.getPath&&this.getPath();if(!b)return void console.error("Disabling InfiniteScroll");this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit();for(var c in d.create)d.create[c].call(this)},g.option=function(a){c.extend(this.options,a)},g.callOnInit=function(){var a=this.options.onInit;a&&a.call(this,this)},g.dispatchEvent=function(a,b,c){this.log(a,c);var d=b?[b].concat(c):c;if(this.emitEvent(a,d),e&&this.$element){a+=".infiniteScroll";var f=a;if(b){var g=e.Event(b);g.type=a,f=g}this.$element.trigger(f,c)}};var i={initialized:function(a){return"on "+a},request:function(a){return"URL: "+a},load:function(a,b){return(a.title||"")+". URL: "+b},error:function(a,b){return a+". URL: "+b},append:function(a,b,c){return c.length+" items. URL: "+b},last:function(a,b){return"URL: "+b},history:function(a,b){return"URL: "+b},pageIndex:function(a,b){return"current page determined to be: "+a+" from "+b}};g.log=function(a,b){if(this.options.debug){var c="[InfiniteScroll] "+a,d=i[a];d&&(c+=". "+d.apply(this,b)),console.log(c)}},g.updateMeasurements=function(){this.windowHeight=a.innerHeight;var b=this.element.getBoundingClientRect();this.top=b.top+a.pageYOffset},g.updateScroller=function(){var b=this.options.elementScroll;if(!b)return void(this.scroller=a);if(this.scroller=b===!0?this.element:c.getQueryElement(b),!this.scroller)throw"Unable to find elementScroll: "+b},g.updateGetPath=function(){var a=this.options.path;if(!a)return void console.error("InfiniteScroll path option required. Set as: "+a);var b=typeof a;if("function"==b)return void(this.getPath=a);var c="string"==b&&a.match("{{#}}");return c?void this.updateGetPathTemplate(a):void this.updateGetPathSelector(a)},g.updateGetPathTemplate=function(a){this.getPath=function(){var b=this.pageIndex+1;return a.replace("{{#}}",b)}.bind(this);var b=a.replace("{{#}}","(\\d\\d?\\d?)"),c=new RegExp(b),d=location.href.match(c);d&&(this.pageIndex=parseInt(d[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))};var j=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/];return g.updateGetPathSelector=function(a){var b=document.querySelector(a);if(!b)return void console.error("Bad InfiniteScroll path option. Next link not found: "+a);for(var c,d,e=b.getAttribute("href"),f=0;e&&f<j.length;f++){d=j[f];var g=e.match(d);if(g){c=g.slice(1);break}}return c?(this.isPathSelector=!0,this.getPath=function(){var a=this.pageIndex+1;return c[0]+a+c[2]}.bind(this),this.pageIndex=parseInt(c[1],10)-1,void this.log("pageIndex",[this.pageIndex,"next link"])):void console.error("InfiniteScroll unable to parse next link href: "+e)},g.updateGetAbsolutePath=function(){var a=this.getPath(),b=a.match(/^http/)||a.match(/^\//);if(b)return void(this.getAbsolutePath=this.getPath);var c=location.pathname,d=c.substring(0,c.lastIndexOf("/"));this.getAbsolutePath=function(){return d+"/"+this.getPath()}},d.create.hideNav=function(){var a=c.getQueryElement(this.options.hideNav);a&&(a.style.display="none",this.nav=a)},d.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},g.destroy=function(){this.allOff();for(var a in d.destroy)d.destroy[a].call(this);delete this.element.infiniteScrollGUID,delete f[this.guid],e&&this.$element&&e.removeData(this.element,"infiniteScroll")},d.throttle=function(a,b){b=b||200;var c,d;return function(){var e=+new Date,f=arguments,g=function(){c=e,a.apply(this,f)}.bind(this);c&&c+b>e?(clearTimeout(d),d=setTimeout(g,b)):g()}},d.data=function(a){a=c.getQueryElement(a);var b=a&&a.infiniteScrollGUID;return b&&f[b]},d.setJQuery=function(a){e=a},c.htmlInit(d,"infinite-scroll"),g._init=function(){},e&&e.bridget&&e.bridget("infiniteScroll",d),d}),function(a,b){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(c){return b(a,c)}):"object"==typeof module&&module.exports?module.exports=b(a,require("./core")):b(a,a.InfiniteScroll)}(window,function(a,b){function c(a){for(var b=document.createDocumentFragment(),c=0;a&&c<a.length;c++)b.appendChild(a[c]);return b}function d(a){for(var b=a.querySelectorAll("script"),c=0;c<b.length;c++){var d=b[c],f=document.createElement("script");e(d,f),f.innerHTML=d.innerHTML,d.parentNode.replaceChild(f,d)}}function e(a,b){for(var c=a.attributes,d=0;d<c.length;d++){var e=c[d];b.setAttribute(e.name,e.value)}}function f(a,b,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0),e.responseType=b||"",e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.onload=function(){if(200==e.status)c(e.response);else{var a=new Error(e.statusText);d(a)}},e.onerror=function(){var b=new Error("Network error requesting "+a);d(b)},e.send()}var g=b.prototype;return b.defaults.loadOnScroll=!0,b.defaults.checkLastPage=!0,b.defaults.responseType="document",b.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("load",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},g.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},g.loadNextPage=function(){if(!this.isLoading&&this.canLoad){var a=this.getAbsolutePath();this.isLoading=!0;var b=function(b){this.onPageLoad(b,a)}.bind(this),c=function(b){this.onPageError(b,a)}.bind(this);f(a,this.options.responseType,b,c),this.dispatchEvent("request",null,[a])}},g.onPageLoad=function(a,b){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[a,b]),this.appendNextPage(a,b),a},g.appendNextPage=function(a,b){var d=this.options.append,e="document"==this.options.responseType;if(e&&d){var f=a.querySelectorAll(d),g=c(f),h=function(){this.appendItems(f,g),this.isLoading=!1,this.dispatchEvent("append",null,[a,b,f])}.bind(this);this.options.outlayer?this.appendOutlayerItems(g,h):h()}},g.appendItems=function(a,b){a&&a.length&&(b=b||c(a),d(b),this.element.appendChild(b))},g.appendOutlayerItems=function(c,d){var e=b.imagesLoaded||a.imagesLoaded;return e?void e(c,d):(console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1))},g.onAppendOutlayer=function(a,b,c){this.options.outlayer.appended(c)},g.checkLastPage=function(a,b){var c=this.options.checkLastPage;if(c){var d=this.options.path;if("function"==typeof d){var e=this.getPath();if(!e)return void this.lastPageReached(a,b)}var f;if("string"==typeof c?f=c:this.isPathSelector&&(f=d),f&&a.querySelector){var g=a.querySelector(f);g||this.lastPageReached(a,b)}}},g.lastPageReached=function(a,b){this.canLoad=!1,this.dispatchEvent("last",null,[a,b])},g.onPageError=function(a,b){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[a,b]),a},b.create.prefill=function(){if(this.options.prefill){var a=this.options.append;if(!a)return void console.error("append option required for prefill. Set as :"+a);this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()}},g.prefill=function(){var a=this.getPrefillDistance();this.isPrefilling=a>=0,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},g.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},g.stopPrefill=function(){this.log("stopPrefill"),this.off("append",this.prefill)},b}),function(a,b){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(c,d){return b(a,c,d)}):"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){var d=b.prototype;return b.defaults.scrollThreshold=400,b.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);var a=this.options.scrollThreshold,b=a||0===a;b&&this.enableScrollWatch()},b.destroy.scrollWatch=function(){this.disableScrollWatch()},d.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},d.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},d.bindScrollWatchEvents=function(b){var c=b?"addEventListener":"removeEventListener";this.scroller[c]("scroll",this.pageScrollHandler),a[c]("resize",this.resizeHandler)},d.onPageScroll=b.throttle(function(){var a=this.getBottomDistance();a<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),d.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},d.getWindowBottomDistance=function(){var b=this.top+this.element.clientHeight,c=a.pageYOffset+this.windowHeight;return b-c},d.getElementBottomDistance=function(){var a=this.scroller.scrollHeight,b=this.scroller.scrollTop+this.scroller.clientHeight;return a-b},d.onResize=function(){this.updateMeasurements()},c.debounceMethod(b,"onResize",150),b}),function(a,b){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(c,d){return b(a,c,d)}):"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){var d=b.prototype;b.defaults.history="replace";var e=document.createElement("a");return b.create.history=function(){if(this.options.history){e.href=this.getAbsolutePath();var a=e.origin||e.protocol+"//"+e.host,b=a==location.origin;return b?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void console.error("[InfiniteScroll] cannot set history with different origin: "+e.origin+" on "+location.origin+" . History behavior disabled.")}},d.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPageIndex=0,this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},d.bindHistoryAppendEvents=function(b){var c=b?"addEventListener":"removeEventListener";this.scroller[c]("scroll",this.scrollHistoryHandler),a[c]("unload",this.unloadHandler)},d.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},b.destroy.history=d.destroyHistory=function(){var a=this.options.history&&this.options.append;a&&this.bindHistoryAppendEvents(!1)},d.onAppendHistory=function(a,b,c){if(c&&c.length){var d=c[0],f=this.getElementScrollY(d);e.href=b,this.scrollPages.push({top:f,path:e.href,title:a.title})}},d.getElementScrollY=function(a){return this.options.elementScroll?this.getElementElementScrollY(a):this.getElementWindowScrollY(a)},d.getElementWindowScrollY=function(b){var c=b.getBoundingClientRect();return c.top+a.pageYOffset},d.getElementElementScrollY=function(a){return a.offsetTop-this.top},d.onScrollHistory=function(){for(var a,b,c=this.getScrollViewY(),d=0;d<this.scrollPages.length;d++){var e=this.scrollPages[d];if(e.top>=c)break;a=d,b=e}a!=this.scrollPageIndex&&(this.scrollPageIndex=a,this.setHistory(b.title,b.path))},c.debounceMethod(b,"onScrollHistory",150),d.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:a.pageYOffset+this.windowHeight/2},d.setHistory=function(a,b){var c=this.options.history,d=c&&history[c+"State"];d&&(history[c+"State"](null,a,b),this.options.historyTitle&&(document.title=a),this.dispatchEvent("history",null,[a,b]))},d.onUnload=function(){var b=this.scrollPageIndex;if(0!==b){var c=this.scrollPages[b],d=a.pageYOffset-c.top+this.top;this.destroyHistory(),scrollTo(0,d)}},d.onPageLoadHistory=function(a,b){this.setHistory(a.title,b)},b}),function(a,b){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(c,d){return b(a,c,d)}):"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){function d(a,b){this.element=a,this.infScroll=b,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),b.on("request",this.disable.bind(this)),b.on("load",this.enable.bind(this)),b.on("error",this.hide.bind(this)),b.on("last",this.hide.bind(this))}return b.create.button=function(){var a=c.getQueryElement(this.options.button);return a?void(this.button=new d(a,this)):void 0},b.destroy.button=function(){this.button&&this.button.destroy()},d.prototype.onClick=function(a){a.preventDefault(),this.infScroll.loadNextPage()},d.prototype.enable=function(){this.element.removeAttribute("disabled")},d.prototype.disable=function(){this.element.disabled="disabled"},d.prototype.hide=function(){this.element.style.display="none"},d.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},b.Button=d,b}),function(a,b){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(c,d){return b(a,c,d)}):"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){function d(a){f(a,"none")}function e(a){f(a,"block")}function f(a,b){a&&(a.style.display=b)}var g=b.prototype;return b.create.status=function(){var a=c.getQueryElement(this.options.status);a&&(this.statusElement=a,this.statusEventElements={request:a.querySelector(".infinite-scroll-request"),error:a.querySelector(".infinite-scroll-error"),last:a.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},g.bindHideStatus=function(a){var b=this.options.append?"append":"load";this[a](b,this.hideAllStatus)},g.showRequestStatus=function(){this.showStatus("request")},g.showErrorStatus=function(){this.showStatus("error")},g.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},g.showStatus=function(a){e(this.statusElement),this.hideStatusEventElements();var b=this.statusEventElements[a];e(b)},g.hideAllStatus=function(){d(this.statusElement),this.hideStatusEventElements()},g.hideStatusEventElements=function(){for(var a in this.statusEventElements){var b=this.statusEventElements[a];d(b)}},b}),function(a,b){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],b):"object"==typeof module&&module.exports&&(module.exports=b(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}(window,function(a){return a}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(c){return b(a,c)}):"object"==typeof module&&module.exports?module.exports=b(a,require("ev-emitter")):a.imagesLoaded=b(a,a.EvEmitter)}("undefined"!=typeof window?window:this,function(a,b){function c(a,b){for(var c in b)a[c]=b[c];return a}function d(a){if(Array.isArray(a))return a;var b="object"==typeof a&&"number"==typeof a.length;return b?j.call(a):[a]}function e(a,b,f){if(!(this instanceof e))return new e(a,b,f);var g=a;return"string"==typeof a&&(g=document.querySelectorAll(a)),g?(this.elements=d(g),this.options=c({},this.options),"function"==typeof b?f=b:c(this.options,b),f&&this.on("always",f),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void i.error("Bad element for imagesLoaded "+(g||a))}function f(a){this.img=a}function g(a,b){this.url=a,this.element=b,this.img=new Image}var h=a.jQuery,i=a.console,j=Array.prototype.slice;e.prototype=Object.create(b.prototype),e.prototype.options={},e.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},e.prototype.addElementImages=function(a){"IMG"==a.nodeName&&this.addImage(a),this.options.background===!0&&this.addElementBackgroundImages(a);var b=a.nodeType;if(b&&k[b]){for(var c=a.querySelectorAll("img"),d=0;d<c.length;d++){var e=c[d];this.addImage(e)}if("string"==typeof this.options.background){var f=a.querySelectorAll(this.options.background);for(d=0;d<f.length;d++){var g=f[d];this.addElementBackgroundImages(g)}}}};var k={1:!0,9:!0,11:!0};return e.prototype.addElementBackgroundImages=function(a){var b=getComputedStyle(a);if(b)for(var c=/url\((['"])?(.*?)\1\)/gi,d=c.exec(b.backgroundImage);null!==d;){var e=d&&d[2];e&&this.addBackground(e,a),d=c.exec(b.backgroundImage)}},e.prototype.addImage=function(a){var b=new f(a);this.images.push(b)},e.prototype.addBackground=function(a,b){var c=new g(a,b);this.images.push(c)},e.prototype.check=function(){function a(a,c,d){setTimeout(function(){b.progress(a,c,d)})}var b=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(b){b.once("progress",a),b.check()}):void this.complete()},e.prototype.progress=function(a,b,c){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded,this.emitEvent("progress",[this,a,b]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,a),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+c,a,b)},e.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(a,[this]),this.emitEvent("always",[this]),this.jqDeferred){var b=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[b](this)}},f.prototype=Object.create(b.prototype),
f.prototype.check=function(){var a=this.getIsImageComplete();return a?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},f.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},f.prototype.confirm=function(a,b){this.isLoaded=a,this.emitEvent("progress",[this,this.img,b])},f.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},f.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},f.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},f.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},g.prototype=Object.create(f.prototype),g.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var a=this.getIsImageComplete();a&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},g.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},g.prototype.confirm=function(a,b){this.isLoaded=a,this.emitEvent("progress",[this,this.element,b])},e.makeJQueryPlugin=function(b){b=b||a.jQuery,b&&(h=b,h.fn.imagesLoaded=function(a,b){var c=new e(this,a,b);return c.jqDeferred.promise(h(this))})},e.makeJQueryPlugin(),e}),function(a,b){"use strict";function c(a){this.time=a.time,this.target=a.target,this.rootBounds=a.rootBounds,this.boundingClientRect=a.boundingClientRect,this.intersectionRect=a.intersectionRect||k(),this.isIntersecting=!!a.intersectionRect;var b=this.boundingClientRect,c=b.width*b.height,d=this.intersectionRect,e=d.width*d.height;c?this.intersectionRatio=Number((e/c).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function d(a,b){var c=b||{};if("function"!=typeof a)throw new Error("callback must be a function");if(c.root&&1!=c.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=f(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=a,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(c.rootMargin),this.thresholds=this._initThresholds(c.threshold),this.root=c.root||null,this.rootMargin=this._rootMarginValues.map(function(a){return a.value+a.unit}).join(" ")}function e(){return a.performance&&performance.now&&performance.now()}function f(a,b){var c=null;return function(){c||(c=setTimeout(function(){a(),c=null},b))}}function g(a,b,c,d){"function"==typeof a.addEventListener?a.addEventListener(b,c,d||!1):"function"==typeof a.attachEvent&&a.attachEvent("on"+b,c)}function h(a,b,c,d){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,d||!1):"function"==typeof a.detatchEvent&&a.detatchEvent("on"+b,c)}function i(a,b){var c=Math.max(a.top,b.top),d=Math.min(a.bottom,b.bottom),e=Math.max(a.left,b.left),f=Math.min(a.right,b.right),g=f-e,h=d-c;return g>=0&&h>=0&&{top:c,bottom:d,left:e,right:f,width:g,height:h}}function j(a){var b;try{b=a.getBoundingClientRect()}catch(c){}return b?(b.width&&b.height||(b={top:b.top,right:b.right,bottom:b.bottom,left:b.left,width:b.right-b.left,height:b.bottom-b.top}),b):k()}function k(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(a,b){for(var c=b;c;){if(c==a)return!0;c=m(c)}return!1}function m(a){var b=a.parentNode;return b&&11==b.nodeType&&b.host?b.host:b&&b.assignedSlot?b.assignedSlot.parentNode:b}if("IntersectionObserver"in a&&"IntersectionObserverEntry"in a&&"intersectionRatio"in a.IntersectionObserverEntry.prototype)return void("isIntersecting"in a.IntersectionObserverEntry.prototype||Object.defineProperty(a.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var n=[];d.prototype.THROTTLE_TIMEOUT=100,d.prototype.POLL_INTERVAL=null,d.prototype.USE_MUTATION_OBSERVER=!0,d.prototype.observe=function(a){var b=this._observationTargets.some(function(b){return b.element==a});if(!b){if(!a||1!=a.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:a,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},d.prototype.unobserve=function(a){this._observationTargets=this._observationTargets.filter(function(b){return b.element!=a}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},d.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},d.prototype.takeRecords=function(){var a=this._queuedEntries.slice();return this._queuedEntries=[],a},d.prototype._initThresholds=function(a){var b=a||[0];return Array.isArray(b)||(b=[b]),b.sort().filter(function(a,b,c){if("number"!=typeof a||isNaN(a)||0>a||a>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return a!==c[b-1]})},d.prototype._parseRootMargin=function(a){var b=a||"0px",c=b.split(/\s+/).map(function(a){var b=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!b)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(b[1]),unit:b[2]}});return c[1]=c[1]||c[0],c[2]=c[2]||c[0],c[3]=c[3]||c[1],c},d.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(g(a,"resize",this._checkForIntersections,!0),g(b,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in a&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(b,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},d.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,h(a,"resize",this._checkForIntersections,!0),h(b,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},d.prototype._checkForIntersections=function(){var a=this._rootIsInDom(),b=a?this._getRootRect():k();this._observationTargets.forEach(function(d){var f=d.element,g=j(f),h=this._rootContainsTarget(f),i=d.entry,k=a&&h&&this._computeTargetAndRootIntersection(f,b),l=d.entry=new c({time:e(),target:f,boundingClientRect:g,rootBounds:b,intersectionRect:k});i?a&&h?this._hasCrossedThreshold(i,l)&&this._queuedEntries.push(l):i&&i.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},d.prototype._computeTargetAndRootIntersection=function(c,d){if("none"!=a.getComputedStyle(c).display){for(var e=j(c),f=e,g=m(c),h=!1;!h;){var k=null,l=1==g.nodeType?a.getComputedStyle(g):{};if("none"==l.display)return;if(g==this.root||g==b?(h=!0,k=d):g!=b.body&&g!=b.documentElement&&"visible"!=l.overflow&&(k=j(g)),k&&(f=i(k,f),!f))break;g=m(g)}return f}},d.prototype._getRootRect=function(){var a;if(this.root)a=j(this.root);else{var c=b.documentElement,d=b.body;a={top:0,left:0,right:c.clientWidth||d.clientWidth,width:c.clientWidth||d.clientWidth,bottom:c.clientHeight||d.clientHeight,height:c.clientHeight||d.clientHeight}}return this._expandRectByRootMargin(a)},d.prototype._expandRectByRootMargin=function(a){var b=this._rootMarginValues.map(function(b,c){return"px"==b.unit?b.value:b.value*(c%2?a.width:a.height)/100}),c={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3]};return c.width=c.right-c.left,c.height=c.bottom-c.top,c},d.prototype._hasCrossedThreshold=function(a,b){var c=a&&a.isIntersecting?a.intersectionRatio||0:-1,d=b.isIntersecting?b.intersectionRatio||0:-1;if(c!==d)for(var e=0;e<this.thresholds.length;e++){var f=this.thresholds[e];if(f==c||f==d||c>f!=d>f)return!0}},d.prototype._rootIsInDom=function(){return!this.root||l(b,this.root)},d.prototype._rootContainsTarget=function(a){return l(this.root||b,a)},d.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},d.prototype._unregisterInstance=function(){var a=n.indexOf(this);-1!=a&&n.splice(a,1)},a.IntersectionObserver=d,a.IntersectionObserverEntry=c}(window,document),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.lozad=b()}(this,function(){"use strict";function a(a){a.setAttribute("data-loaded",!0)}var b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},c="undefined"!=typeof document&&document.documentMode,d={rootMargin:"0px",threshold:0,load:function(a){if("picture"===a.nodeName.toLowerCase()){var b=document.createElement("img");c&&a.getAttribute("data-iesrc")&&(b.src=a.getAttribute("data-iesrc")),a.getAttribute("data-alt")&&(b.alt=a.getAttribute("data-alt")),a.appendChild(b)}a.getAttribute("data-src")&&(a.src=a.getAttribute("data-src")),a.getAttribute("data-srcset")&&a.setAttribute("srcset",a.getAttribute("data-srcset")),a.getAttribute("data-background-image")&&(a.style.backgroundImage="url('"+a.getAttribute("data-background-image")+"')"),a.getAttribute("data-toggle-class")&&a.classList.toggle(a.getAttribute("data-toggle-class"))},loaded:function(){}},e=function(a){return"true"===a.getAttribute("data-loaded")};return function(){var c,f,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=b({},d,h),j=i.root,k=i.rootMargin,l=i.threshold,m=i.load,n=i.loaded,o=void 0;return window.IntersectionObserver&&(o=new IntersectionObserver((c=m,f=n,function(b,d){b.forEach(function(b){(0<b.intersectionRatio||b.isIntersecting)&&(d.unobserve(b.target),e(b.target)||(c(b.target),a(b.target),f(b.target)))})}),{root:j,rootMargin:k,threshold:l})),{observe:function(){for(var b=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return a instanceof Element?[a]:a instanceof NodeList?a:b.querySelectorAll(a)}(g,j),c=0;c<b.length;c++)e(b[c])||(o?o.observe(b[c]):(m(b[c]),a(b[c]),n(b[c])))},triggerLoad:function(b){e(b)||(m(b),a(b),n(b))},observer:o}}}),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Utils={generateRandomString:function(a){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");a||(a=Math.floor(Math.random()*b.length));for(var c="",d=0;a>d;d++)c+=b[Math.floor(Math.random()*b.length)];return c},getParameterByName:function(a,b){void 0===b&&(b=location.search),-1!==b.indexOf("?")&&(b=b.slice(b.indexOf("?")));var c=null;a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+a+"=([^&#]*)");return c=d.exec(b),null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},generateLink:function(a){var b=document.createElement("a");b.href=a;var c=b.hostname;return("undefined"===c||""===c||c===location.hostname)&&(c=a),c=c.replace("www.",""),c=c.replace("http://",""),c=c.replace("https://","")},annotatePath:function(a,b){if(null===a||void 0===a)return a;var c=a.substr(a.lastIndexOf(".")+1);return a.replace("."+c,b+"."+c)},wpAjax:function(a,b){return b=b||"json",$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:b})},nAjax:function(a,b,c){var d=BoredPanda.Config.notificationServiceUrl;return c=c||{},$.ajax({type:a,url:d+b,crossDomain:!0,xhrFields:{withCredentials:!0},data:c,dataType:"json",contentType:"application/json"})},gatewayAjax:function(a,b,c){var d=BoredPanda.Config.gatewayUrl;return c=c||{},$.ajax({type:a,url:d+b,crossDomain:!0,data:c,dataType:"json",contentType:"application/json"})},prettyDate:function(a){var b=new Date(a||""),c=((new Date).getTime()-b.getTime())/1e3,d=Math.floor(c/86400),e=Math.ceil(d/7);if(!(isNaN(d)||0>d))return 0===d&&(60>c&&"now"||3600>c&&Math.floor(c/60)+" min"||86400>c&&Math.floor(c/3600)+" h")||7>d&&d+" d"||e+" w"},isPasswordSecure:function(a){var b=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})");return b.test(a)},reloadAds:function(a){for(var b=0;b<a.length;b++)if($(a[b]).find(".dfp-ad").length>0)if("undefined"!=typeof googletag.pubads){var c=$(a[b]).find("div div")[0].id;if(c)for(var d in googletag.pubads().getSlots()){var e=googletag.pubads().getSlots()[d].getSlotElementId();e===c&&googletag.pubads().refresh([googletag.pubads().getSlots()[d]])}}else if("undefined"!=typeof window.adnet){var c=$(a[b]).find("div div")[1].id;window.adnet.push(["_requestHeaderBidderBanners",c])}},loadAnchor:function(){for(var a=$(".mobile-anchor .dfp-ad div"),b=0;b<a.length;b++){var c=$(a[b]).attr("data-id");if($(a[b]).attr("id",c),"undefined"!=typeof googletag.pubads&&c.includes("div-gpt")){if(c)for(var d in googletag.pubads().getSlots()){var e=googletag.pubads().getSlots()[d].getSlotElementId();e===c&&(googletag.cmd.push(function(){googletag.display(c)}),googletag.pubads().refresh([googletag.pubads().getSlots()[d]]))}$(".fixed-bottom-overlay.socialbar").hide(),$(".mobile-anchor").show()}}}},BoredPanda.generateShareablePermalink=function(a){void 0===a&&(a=location.href);var b=BoredPanda.Utils.getParameterByName("image_id",a);return-1!==a.indexOf("?")&&b.length>0?a.slice(0,a.indexOf("?"))+"?image_id="+b:a}}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Cropper=function(a){var b=this;b.visible=ko.observable(!1),b.columns=ko.observable(1),b.height=a.height,b.separator=a.separator,b.saveText=ko.observable("Save"),b.error=ko.observable(""),b.thumb=a.thumb,b.images=a.images,b.width=a.width||490,b.ratio=a.ratio||1.42857143,b.cropOneColumn={api:null,originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},b.cropTwoColumnLeft={api:null,originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},b.cropTwoColumnRight={api:null,originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},b.show=function(){c(),b.visible(!0),d(),b.changed(),$("body").css("overflow","hidden")},b.setColumns=function(a){b.setApi("cropOneColumn"),b.setApi("cropTwoColumnLeft"),b.setApi("cropTwoColumnRight"),b.columns(a),d()},b.changed=function(){b.cropOneColumn.api.cropit("previewSize",{width:b.width,height:b.height()/b.ratio}),b.cropTwoColumnLeft.api.cropit("previewSize",{width:e("left"),height:b.height()/b.ratio}),b.cropTwoColumnRight.api.cropit("previewSize",{width:e("right"),height:b.height()/b.ratio}),$(a.selector+" .left-column").css("width",e("left")+"px"),$(a.selector+" .right-column").css("width",e("right")+"px")},b.hide=function(){b.visible(!1),$("body").css("overflow","")},b.save=function(){var c={};if(b.error(""),b.saveText("Save"),1===b.columns()){if(""===b.cropOneColumn.originalImg())return b.error("Please select image to edit.");c={action:a.action,type:"one_column",filename:a.filename,height:b.height(),image:{originalImg:b.cropOneColumn.originalImg(),offset:b.cropOneColumn.api.cropit("offset"),zoom:b.cropOneColumn.api.cropit("zoom")}}}else if(2===b.columns()){if(""===b.cropTwoColumnLeft.originalImg()||""===b.cropTwoColumnRight.originalImg())return b.error("Please select both sides of the image to edit.");c={action:a.action,type:"two_column",filename:a.filename,height:b.height(),separator:b.separator(),images:[{originalImg:b.cropTwoColumnLeft.originalImg(),offset:b.cropTwoColumnLeft.api.cropit("offset"),zoom:b.cropTwoColumnLeft.api.cropit("zoom")},{originalImg:b.cropTwoColumnRight.originalImg(),offset:b.cropTwoColumnRight.api.cropit("offset"),zoom:b.cropTwoColumnRight.api.cropit("zoom")}]}}b.saveText("Saving..."),$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"}).done(function(c){a.callback(c,b),b.hide(),b.saveText("Save")})},b.chooseColumnImage=function(a,c){var e=c.originalUrl();b[a].originalImg(e),b.setApi("cropOneColumn"),b.setApi("cropTwoColumnLeft"),b.setApi("cropTwoColumnRight"),d()},b.setApi=function(a){var c=b[a].api.cropit("offset");b[a].offset.x(c.x),b[a].offset.y(c.y),b[a].zoom=b[a].api.cropit("zoom")};var c=function(){var c=function(c){a.imgs[c]?(b[c].originalImg(a.imgs[c].originalImg()),b[c].zoom=a.imgs[c].zoom,b[c].offset.x(a.imgs[c].offset.x()),b[c].offset.y(a.imgs[c].offset.y())):(b[c].originalImg(""),b[c].zoom=0,b[c].offset.x(0),b[c].offset.y(0))};c("cropOneColumn"),c("cropTwoColumnLeft"),c("cropTwoColumnRight"),0===b.cropOneColumn.originalImg().length&&0===b.cropTwoColumnLeft.originalImg().length&&0===b.cropTwoColumnRight.originalImg().length&&b.thumb().length>0&&(b.cropOneColumn.originalImg(b.thumb()),b.cropOneColumn.offset.x(0),b.cropOneColumn.offset.x(0))},d=function(){var c=function(a){b[a].api.cropit("imageSrc")!==b[a].originalImg()&&b[a].api.cropit("imageSrc",b[a].originalImg()),b[a].zoom>0&&b[a].api.cropit("zoom",b[a].zoom),b[a].api.cropit("offset",{x:b[a].offset.x(),y:b[a].offset.y()})};null===b.cropOneColumn.api?b.cropOneColumn.api=$(a.selector+" .one-column .thumbnail-crop").cropit({imageState:{src:b.cropOneColumn.originalImg(),offset:{x:b.cropOneColumn.offset.x(),y:b.cropOneColumn.offset.y()},zoom:b.cropOneColumn.zoom},previewSize:{width:b.width,height:b.height()/b.ratio},exportZoom:b.ratio}):c("cropOneColumn"),null===b.cropTwoColumnLeft.api?b.cropTwoColumnLeft.api=$(a.selector+" .two-column .left-column .thumbnail-crop").cropit({imageState:{src:b.cropTwoColumnLeft.originalImg(),offset:{x:b.cropTwoColumnLeft.offset.x(),y:b.cropTwoColumnLeft.offset.y()},zoom:b.cropTwoColumnLeft.zoom},previewSize:{width:b.width/2-2,height:b.height()/b.ratio},exportZoom:b.ratio}):c("cropTwoColumnLeft"),null===b.cropTwoColumnRight.api?b.cropTwoColumnRight.api=$(a.selector+" .two-column .right-column .thumbnail-crop").cropit({imageState:{src:b.cropTwoColumnRight.originalImg(),offset:{x:b.cropTwoColumnRight.offset.x(),y:b.cropTwoColumnRight.offset.y()},zoom:b.cropTwoColumnRight.zoom},previewSize:{width:b.width/2-2,height:b.height()/b.ratio},exportZoom:b.ratio}):c("cropTwoColumnRight")},e=function(a){var c=b.width-6;return"left"===a?c/100*b.separator():c/100*(100-b.separator())},f=function(a){$(a.selector).each(function(){ko.applyBindings(b,this)})};f(a)}}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Scroll={didScroll:!1,init:function(){this.scrollCallback=$.Callbacks("unique");var a=this;$(window).scroll(function(){BoredPanda.Config.isTabletWidth?a.didScroll=!0:a.scrollCallback.fire()}),BoredPanda.Config.isTabletWidth&&setInterval(function(){a.didScroll&&(a.didScroll=!1,a.scrollCallback.fire())},250)}},$(document).ready(function(){BoredPanda.Scroll.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Analytics={STORAGE_KEY:"bp-analytics",available:void 0,init:function(){return this.testStorageAvailability()?(this.isStorageInitialized()||this.setup(),this.available=!0,this.getUserId(),this.migrations(),this.addPageView(),void this.updateHistoryInCookies()):void(this.available=!1)},migrations:function(){var a=this.getStorageContents();void 0!==a.finished_reading&&0!==a.finished_reading.length||void 0===a.pageviews||(a.finished_reading=a.pageviews),this.saveStorageConents(a)},updateHistoryInCookies:function(){$.cookie("bp_hist",JSON.stringify([]),{expires:365,path:"/"}),$.cookie("bp_skipped_posts",JSON.stringify([]),{expires:365,path:"/"}),$.cookie("bp_unfinished",JSON.stringify([]),{expires:365,path:"/"})},setup:function(){var a={pageviews:[],finished_reading:[],events:[],showed_recommendations:[],guest_user_id:null,skipped_posts:[]},b=JSON.stringify(a);localStorage.setItem(this.STORAGE_KEY,b)},getUserId:function(){if(void 0!==BoredPanda.Config.userId&&BoredPanda.Config.userId>0)return"r"+parseInt(BoredPanda.Config.userId).toString();var a=this.getStorageContents();if(void 0!==a.guest_user_id&&null!==a.guest_user_id)return a.guest_user_id;var b=this.generateGuestUserId();return a.guest_user_id=b,this.saveStorageConents(a),b},generateGuestUserId:function(){var a=Math.ceil(Math.random()*(void 0!==Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:99999999)),b=new Date;b=b.getTime();var c="g"+a.toString()+b.toString();return c},isStorageInitialized:function(){return null!==localStorage.getItem(this.STORAGE_KEY)},finishedReading:function(){var a=this.getStorageContents();void 0===a.finished_reading&&(a.finished_reading=[]);var b=this.createCurrentPageView();return a.finished_reading.push(b),this.saveStorageConents(a),b},addPageView:function(){var a=this.getStorageContents();void 0===a.pageviews&&(a.pageviews=[]);var b=this.createCurrentPageView();return a.pageviews.push(b),this.saveStorageConents(a),b},addSkippedPosts:function(a){if(a&&0!==a.length){var b=this.getStorageContents();void 0!==b.skipped_posts&&Array.isArray(b.skipped_posts)||(b.skipped_posts=[]);var c=this._unixTimestamp(),d=this.getUniquePostIds();for(var e in a){var f=parseInt(a[e]);-1===d.indexOf(f)&&b.skipped_posts.push({id:f,timestamp:c})}this.saveStorageConents(b)}},getSkippedPosts:function(){var a=this.getStorageContents();if(void 0===a.skipped_posts||!Array.isArray(a.skipped_posts))return[];var b=[];for(var c in a.skipped_posts){var d=a.skipped_posts[c];void 0!==d.id&&b.push(d.id)}return b},setRecommendationsAsSeen:function(a){var b=this.getStorageContents();void 0===b.showed_recommendations&&(b.showed_recommendations=[]);for(var c in a){var d=a[c];-1===b.showed_recommendations.indexOf(d)&&b.showed_recommendations.push(d)}b.showed_recommendations.length>100&&(b.showed_recommendations=b.showed_recommendations.slice(-100)),this.saveStorageConents(b)},setVisibleRecommendationsAsSeen:function(){var a=[];BoredPanda.Config.isMobileWidth?$(".post-recommendations-main-block section.recommended-posts article").slice(0,3).each(function(){a.push($(this).attr("data-post-id"))}):$(".post-recommendations-main-block section.recommended-posts article").each(function(){a.push(parseInt($(this).attr("data-post-id")))}),this.setRecommendationsAsSeen(a)},getSeenRecommendations:function(){var a=this.getStorageContents();if(void 0===a.showed_recommendations)return[];var b=a.showed_recommendations,c=[];return $.each(b,function(a,b){c.push(parseInt(b))}),c},getUniquePostIds:function(a){a||(a="finished_reading");var b=[];"pageviews"===a&&(b=this.getPageViews()),"finished_reading"===a&&(b=this.getFinishedReading());var c={};for(var d in b){var e=b[d],f=parseInt(e.postId);c[f]=1}var g=Object.keys(c),h=[];return $.each(g,function(a,b){h.push(parseInt(b))}),h},getPageViews:function(){if(!this.available)return[];var a=this.getStorageContents();return a.pageviews},getFinishedReading:function(){var a=this.getStorageContents();return void 0===a.finished_reading?[]:a.finished_reading},getUnfinishedPosts:function(){var a=this.getUniquePostIds(),b=this.getUniquePostIds("pageviews"),c=$(b).not(a).get();return c},getStorageContents:function(){if(!this.available)return{};var a=JSON.parse(localStorage.getItem(this.STORAGE_KEY));return a=this.afterGettingStorageContents(a)},afterGettingStorageContents:function(a){var b=this._unixTimestamp(),c=[];if(void 0!==a.skipped_posts)for(var d in a.skipped_posts){var e=a.skipped_posts[d];void 0!==e.timestamp&&e.timestamp+43200>b&&c.push(e)}return a.skipped_posts=c,a},saveStorageConents:function(a){this.available&&(localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a)),BoredPanda.Analytics.updateHistoryInCookies())},createCurrentPageView:function(){var a=(new Date).getTime()/1e3,b={timestamp:a,url:location.pathname+location.search,postId:parseInt(BoredPanda.Config.postId)};return b},testStorageAvailability:function(){var a="foobar";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}},_unixTimestamp:function(){return Math.floor((new Date).getTime()/1e3)}},$(document).ready(function(){})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Tracking={PAGE_REGION_TOP:"page-top",PAGE_REGION_CONTENT:"in-content",PAGE_REGION_CONTENT_BOTTOM:"content-bottom",PAGE_REGION_BOTTOM:"page-bottom",init:function(){var a=this;a.postsWithStickyFooterTracked=[],a.postsProgressTracked=[],a.postsMiddlePorgressTracked=[],a.postContentBottomThreshold=void 0,BoredPanda.Config.isStaffMember||"undefined"!=typeof BoredPanda.Config.postJson||a.trackAddPostInputs();var b="Ads";a.trackElem(".presented-turkish-airlines .turkish-airlines-logo",b,"Turkish Airlines"),b="Newsletter Form",a.trackElem(".sidebar .sidebar-top .newsletter-form .btn",b,"Sidebar Top"),a.trackElem(".sidebar .sticky .newsletter-form .btn",b,"Sidebar Bottom Sticky"),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),location.origin.length>=location.href.length-1?$(".bottom-bar-share-button").each(function(){a.trackElem(this,"Facebook","Home Page Share")}):($(".bottom-bar-share-button.fb-custom-share, .bottom-bar-share-button.fb-custom-share-mobile").each(function(){a.trackElem(this,"Facebook","Post Footer Share")}),$(".bottom-bar-share-button.pinterest-custom-share").each(function(){a.trackElem(this,"Pinterest","Desktop Post Bottom Bar")})),b="Facebook",a.trackClick(".facebook-page-promotion .share-button",b,"In Content Fan Banner Mobile"),a.trackClick(".facebook-page-promotion .fb-page-title a",b,"In Content Fb Page Link"),a.trackClick(".facebook-page-promotion .fb-page-image",b,"In Content Fb Page Link"),a.trackClick(".facebook-page-promotion-text h3 a",b,"In Content Fb Page Link"),b="Sidebar Social Buttons",a.trackClick(".sidebar .social-buttons .facebook .link",b,"Facebook"),a.trackClick(".sidebar .social-buttons .gplus .link",b,"Pinterest"),a.trackClick(".sidebar .social-buttons .gplus .social-widget",b,"Pinterest"),a.trackClick(".sidebar .social-buttons .twitter .link",b,"Twitter"),b="Recommendations",a.trackClick(".mid-post-recommendations a",b,"Mid Post"),b="Add Post Button",a.trackClick(".post .post-submission-line.post-footer .add-post-link",b,"Submission In Content"),a.trackClick(".header .add-post-top-button",b,"Submission Top Bar"),a.trackClick(".header .add-post-menu-button",b,"Submission User Menu"),a.trackClick(".header .mobile .add-post-tablet",b,"Submission Tablet Portrait"),a.trackClick(".single-post-author .author-communication-line .learn-more",b,"Success Stories Below Post"),b="iOS app",a.trackClick(".app-promotion .updated .ios-app .install-block .install-button",b,"custom widget"),a.trackClickDelegated(".top-message",".ios-download-desktop-top-link",b,"top desktop message"),a.trackClick(".sticky-bottom .get-app .get-ios-app",b,"Desktop Sidebar"),a.trackClick(".get-app.sidebar-top .get-ios-app",b,"Desktop Sidebar Top"),b="Android app",a.trackClick(".app-promotion .updated .android-app .install-block .install-button",b,"custom widget"),a.trackClick(".sticky-bottom .get-app .get-android-app",b,"Desktop Sidebar"),a.trackClick(".get-app.sidebar-top .get-android-app",b,"Desktop Sidebar Top"),b="Navigation",a.trackElem(".top-categories a",b,"Top Bar Categories",!1,!0),a.trackElem(".mobile-category-list ul li a",b,"Top Bar Categories",!1,!0),a.trackElem(".top-level-navigation a.popular",b,"Top Bar Popular",!1,!0),a.trackElem(".top-level-navigation a.trending",b,"Top Bar Trending",!1,!0),a.trackElem(".top-level-navigation a.latest",b,"Top Bar Latest",!1,!0),a.trackElem(".responsive-sub-menu span.popular",b,"Top Bar Popular",!1,!0),a.trackElem(".responsive-sub-menu span.trending",b,"Top Bar Trending",!1,!0),a.trackElem(".responsive-sub-menu span.latest",b,"Top Bar Latest",!1,!0),a.trackElem(".post .post-header .post-cover-container a",b,"Feed Cover Image"),a.trackElem(".posts .post h2 a",b,"Feed Title"),BoredPanda.Config.isHome&&(a.trackElem(".post .post-header .post-cover-container a",b,"Homepage Cover Image"),a.trackElem(".posts .post h2 a",b,"Homepage Title")),b="Mobile Newsletter",a.trackElem(".subscribe-form .input-group .subscribe-button",b,"Newsletter Submit"),b="Contact Author",a.trackClick(".author-info-contact-author a",b,"Contact"),b="Post",a.trackClick(".post-content .read-more-block .read-more-button",b,"Read More"),a.trackClick(".sharebar .vote-panel.vote-post .btn-up","Votes","Sharebar","up",!0,!0),a.trackClick(".sharebar .vote-panel.vote-post .btn-down","Votes","Sharebar","down",!0,!0),a.trackClick(".post-info-block.mobile .vote-panel.vote-post .btn-up","Votes","Mobile Post Bottom","up",!0),a.trackClick(".post-info-block.mobile .vote-panel.vote-post .btn-down","Votes","Mobile Post Bottom","down",!0),a.trackClickDelegated("main.bp-container","footer.footer .vote-panel.vote-post .btn-up","Votes","Post Footer","up",!0),a.trackClickDelegated("main.bp-container","footer.footer .vote-panel.vote-post .btn-down","Votes","Post Footer","down",!0),a.trackClickDelegated("main.bp-container",".fixed-bottom-overlay.socialbar .vote .btn-up","Votes","Mobile Footer","up",!0,!1,!0),a.trackClickDelegated("main.bp-container",".fixed-bottom-overlay.socialbar .vote .btn-down","Votes","Mobile Footer","down",!0,!1,!0),a.trackClickDelegated("main.bp-container",".comment-container .comment .vote .btn-up","Votes","Comment","up",!0),a.trackClickDelegated("main.bp-container",".comment-container .comment .vote .btn-down","Votes","Comment","down",!0),a.trackClickDelegated("main.bp-container",".open-list-footer .vote .btn-up","Votes","Open List Submission","up",!0),a.trackClickDelegated("main.bp-container",".open-list-footer .vote .btn-down","Votes","Open List Submission","down",!0),a.trackClickDelegated("main.bp-container",".comment-add-block .post-comment","Comment","Post Comment","Top Level",!0),a.trackClickDelegated("main.bp-container",".comment-container .comment-add-block .post-comment","Comment","Post Comment","Reply",!0),a.trackClickDelegated("main.bp-container",".entry .open-list-item h2.open-list-header a","Open List","Submission Heading","click",!0),a.trackClickDelegated("main.bp-container",".append-open-list .publish-button","Open List","Add Submission Desktop","submit",!0),a.trackClickDelegated("main.bp-container",".append-open-list.mobile .post-button","Open List","Add Submission Mobile","submit",!0),a.trackClickDelegated("main.bp-container",".open-list-pagination-block .open-list-pagination-new a.pagination","Open List","Show More","click"),a.trackClickDelegated("main.bp-container",".open-list-pagination-block .open-list-pagination-new a.open-list-pagination-previous","Open List","Show Previous","click"),a.trackClickDelegated("main.bp-container",".open-list-pagination-block .open-list-pagination-new a.open-list-pagination-first","Open List","Show First","click"),a.trackClickDelegated("main.bp-container",".single-post-pagination-block .single-post-pagination-new a.pagination","Post","Show More","click"),a.trackClickDelegated("main.bp-container",".single-post-pagination-block .single-post-pagination-new a.single-post-pagination-previouss","Post","Show Previous","click"),a.trackClickDelegated("main.bp-container",".single-post-pagination-block .single-post-pagination-new a.single-post-pagination-first","Post","Show First","click"),a.trackClickDelegated("main.bp-container","section.recommended-posts article.popular-post-rec:not([data-rec-type])","Recommendations","Recommended","click",!1,!1),a.trackClickDelegated("main.bp-container",'section.recommended-posts article.popular-post-rec[data-rec-type="personal"]',"Recommendations","Recommended On History","click",!1,!1),a.trackClickDelegated("main.bp-container",'section.recommended-posts article.popular-post-rec[data-rec-type="popular"]',"Recommendations","Recommended Personal Popular","click",!1,!1),a.trackClickDelegated("main.bp-container","section.recommended-posts article.trending-post-rec","Recommendations","Recommended Trending","click",!1,!0),a.trackClickDelegated("main.bp-container","section.related-posts article.popular-post-rec","Recommendations","Most Popular","click",!1,!0),
a.trackClickDelegated("main.bp-container","section.trending-posts article.trending-post-rec","Recommendations","Trending","click",!1,!0),a.trackClickDelegated("main.bp-container","section.recent-challenges article","Recommendations","Recent Challenges","click",!1,!0),a.trackClickDelegated("main.bp-container","section.trending-posts article.recent-challenge","Recommendations","Recent Challenges","click",!1,!0),a.trackClickDelegated("main.bp-container","section.related-posts article.success-story-rec","Recommendations","Success Story","click",!1,!0),a.trackClickDelegated("main.bp-container","section.post-complete-bottom-recommendations article","Recommendations","Post Bottom","click",!1,!0),a.trackClick(".sidebar .staff-stats-box.users-banner .create-challenge","Challenges","Sidebar Banner","click"),void 0!==BoredPanda.Config&&(void 0===BoredPanda.Config.postId||null===BoredPanda.Config.postId||0===BoredPanda.Config.postId?a.trackClickDelegated("main.bp-container",'.sidebar-top .trending-post:not(".trending-post-ad")',"Recommendations","Homepage Sidebar","click",!1):a.trackClickDelegated("main.bp-container",'.sidebar-top .trending-post:not(".trending-post-ad")',"Recommendations","Post Sidebar","click",!1)),a.trackFooterShares(),a.trackStickyFooter(),a.trackPostProgress(),a.trackAdClicks(),a.trackAuthorInvitationInvitees(),a.trackLoginFormButtons(),a.trackImageSharesByDevice(),a.trackYoutubeSubscribe(),BoredPanda.Config.isTabletWidth?(a.trackClick(".single-image-template .horizontal-fb-share","Facebook","Single Image Share Button Mobile"),a.trackClick(".single-image-template .post-info-block .vote-panel.vote-post .btn-up","Votes","Single Image Vote Mobile","up",!0),a.trackClick(".single-image-template .post-info-block .vote-panel.vote-post .btn-down","Votes","Single Image Vote Mobile","down",!0)):(a.trackClick(".single-image-template .fb-custom-share.bottom-bar-share-button","Facebook","Single Image Share Button Desktop"),a.trackClick(".single-image-template .footer .vote-panel.vote-post .btn-up","Votes","Single Image Vote Desktop","up",!0),a.trackClick(".single-image-template .footer .vote-panel.vote-post .btn-down","Votes","Single Image Vote Desktop","down",!0)),BoredPanda.Utils.getParameterByName("pageid")&&a.trackInviteeClicks(),$(document).on("fbload",function(){a.trackFacebook()})},trackLoginFormButtons:function(){var a="Login form";this.trackClickDelegated("body",".login-form .fb-login",a,"Facebook"),this.trackClickDelegated("body",".login-form .google-login",a,"Google"),this.trackClickDelegated("body",".login-form .links .btn-primary",a,"Login Email"),this.trackClickDelegated("body",".signup-form .links .btn-primary",a,"Sign Up Submit"),this.trackClickDelegated("body",".login-form .links .sign-up-link",a,"Sign Up"),a="Add Post Login Form",this.trackClickDelegated("body",".add-post-login .fb-login",a,"Facebook"),this.trackClickDelegated("body",".add-post-login .google-login",a,"Google"),this.trackClickDelegated("body",".add-post-login .login-form .links .submit-button",a,"Login Email"),this.trackClickDelegated("body",".add-post-login .signup-form .links .submit-button",a,"Sign Up"),this.trackClickDelegated("body",".add-post-login .login-form .sign-up-link a",a,"Sign Up Link in Log In Form"),this.trackClickDelegated("body",".add-post-login .signup-form .login-link a",a,"Log In Link in Sign Up Form")},trackFooterShares:function(){var a="Post footer shares",b="mobile";this.trackClickDelegated("body",".shares.mobile .horizontal-fb-share",a,"Facebook",b),this.trackClickDelegated("body",".small-social-icons a.whatsapp",a,"Whatsapp",b),this.trackClickDelegated("body",".small-social-icons a.email",a,"Email Sharing",b),this.trackClickDelegated("body",".small-social-icons a.pintrest",a,"Pinterest",b),this.trackClickDelegated("body",".small-social-icons a.twitter",a,"Twitter",b),this.trackClickDelegated("body",".small-social-icons a.gplus",a,"G Plus",b),this.trackClickDelegated("body",".post-shares-footer.mobile .fb-footer-share",a,"Facebook",b),this.trackClickDelegated("body",".post-shares-footer.mobile .email-footer-share",a,"Email Sharing",b),this.trackClickDelegated("body",".post-shares-footer.mobile .pinterest-footer-share",a,"Pinterest",b),this.trackClickDelegated("body",".post-shares-footer.mobile .twitter-footer-share",a,"Twitter",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.whatsapp",a,"Whatsapp",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.tumblr",a,"Tumblr",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.twitter",a,"Twitter",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.email",a,"Email Sharing",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.sms",a,"Sms",b),this.trackClickDelegated("body",".post-shares-footer.mobile .shares-newsletter-sign-up .form .sign-up",a,"Newsletter Sign Up",b),b="desktop",this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .fb-footer-share",a,"Facebook",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .email-footer-share",a,"Email Sharing",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .pinterest-footer-share",a,"Pinterest",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .tumblr-footer-share ",a,"Tumblr",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .twitter-footer-share ",a,"Twitter",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .google-footer-share ",a,"Google Plus",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .reddit-footer-share ",a,"Reddit",b)},trackPageview:function(a,b){ga("send","event","Pageviews",a,b)},trackAdClicks:function(){$("main.bp-container").on("click",".outbrain-widget .ob-dynamic-rec-container",function(){ga("send","event","Ads","Post Bottom Outbrain","click")}),$("div.cover-banner").on("click",".bp-container .backup-ad",function(){ga("send","event","Ads","970x250 clickbank","click")})},trackAdImpression:function(a,b){ga("send","event",a,b,"impression",{nonInteraction:!0})},trackFacebook:function(){var a=this;FB.Event.subscribe("comment.create",function(){var a="Comment";ga("send","event",a,"Post Facebook Comment","click")}),FB.Event.subscribe("edge.create",function(a,b){var c="Facebook";$(".post .right .fb-like")[0]===b?ga("send","event",c,"Post Top Right Like","click"):$(".sharebar .fb-like")[0]===b?ga("send","event",c,"Post Sharebar Like","click"):$(".post .footer .fb-like")[0]===b?ga("send","event",c,"Post Footer Like","click"):$(".top-message .fb-like")[0]===b?ga("send","event",c,"Spanish Message Like","click"):$(".bottom-bar-facebook .fb-like")[0]===b?ga("send","event",c,"Fixed Bottom Bar Fan","click"):$(".single-image-template .footer .left .fb-like")[0]===b?ga("send","event",c,"Single Image Share Button Desktop","click"):$(".single-image-template .post-info-block .right .fb-like")[0]===b?ga("send","event",c,"Single Image Share Button Mobile","click"):$(".facebook-block .like-block .fb-like")[0]===b?ga("send","event",c,"Mobile Fan Bottom","click"):b.classList.contains("post-bottom-fb-like-bpanimals")?ga("send","event",c,"In Content Fan Banner","click"):$(".facebook-page-promotion-text .native-fb-like .fb-like")[0]===b?ga("send","event",c,"In Content Fan Banner","click"):$(".fb-mobile-page-like-widget .install-block .fb-like")[0]===b?(ga("send","event",c,"Mobile Fixed Top Widget","click"),$.cookie("disablefbmobilewidget","1",{expires:60,path:"/"}),$(".app-promotion").remove()):$(".fixed-bottom-facebook-widget .fb-like")[0]===b?(ga("send","event",c,"Desktop Fixed Bottom Widget","click"),$.cookie("disablefbdesktopwidget","1",{expires:60,path:"/"}),$(".fixed-bottom-facebook-widget").remove()):$(".sidebar .social-buttons .social-widget .fb-like")[0]===b&&ga("send","event","Sidebar Social Buttons","Facebook","click")}),"undefined"!=typeof twttr&&twttr.ready(function(a){a.events.bind("follow",function(a){$(a.target.parentElement).hasClass("install-block")?ga("send","event","Twitter","Mobile Fixed Top Widget","click"):$(a.target.parentElement).hasClass("sidebar-twitter-follow")&&ga("send","event","Sidebar Social Buttons","Twitter","click")})}),a.trackClick(".fb-mobile-page-like-widget .close-icon","Facebook","Mobile Fixed Top Widget","close"),a.trackClick(".twitter-mobile-page-like-widget .close-icon","Twitter","Mobile Fixed Top Widget","close"),a.trackClick(".fixed-bottom-facebook-widget .widget-block .modal-close","Facebook","Desktop Fixed Bottom Widget","close"),a.trackClick(".fixed-bottom-facebook-widget .widget-block .close-text","Facebook","Desktop Fixed Bottom Widget","no")},trackClick:function(a,b,c,d,e,f){void 0===d&&(d="click");var g=this;$(a).on("mousedown",function(){if(!e||BoredPanda.Config.isLoggedIn){f=f||!1;var a=new Object(d);if(f){var h=g.getCurrentPageRegion();""!==h&&(a=a+"-"+h)}ga("send","event",b,c,a.toString())}})},trackClickDelegated:function(a,b,c,d,e,f,g,h){void 0===e&&(e="click"),g=g||!1,h=h||!1;var i=this;$(a).on("mousedown",b,function(){if(!f||BoredPanda.Config.isLoggedIn){var a=new Object(e);if(a=!g||$(window).width()>979?a:a+"-mobile",h){var b=i.getCurrentPageRegion();""!==b&&(a=a+"-"+b)}a+="",ga("send","event",c,d,a)}})},trackImpression:function(a,b,c){$(a).each(function(){ga("send","event",b,c,"impression",{nonInteraction:!0})})},trackElem:function(a,b,c,d,e){var f=this;$(a).each(function(){f.trackClick(this,b,c,"click",d,e)})},trackPostProgress:function(){var a=this.getCurrentPostFromUrl();if(void 0!==a&&""!==a){var b=$('article.post div.post-content img,video,iframe[src*="youtube"],iframe[src*="vimeo"]').length,c=this;if(b>1&&$(".post-footer-reached").length>0){var d=Math.ceil(b/2);$("article.post div.post-content img,video").eq(d).bind("inview",function(a,d){if(d){var e=c.getCurrentPostFromUrl();if(c.postsMiddlePorgressTracked.indexOf(e)>-1)return;c.postsMiddlePorgressTracked.push(e),ga("send","event","Navigation","Post-"+b,"Middle Reached",{nonInteraction:!0})}})}$(".post-footer-reached").bind("inview",function(a,d){if(d){var e=c.getCurrentPostFromUrl();if(c.postsProgressTracked.indexOf(e)>-1)return;c.postContentBottomThreshold=$(window).scrollTop(),c.postsProgressTracked.push(e),ga("send","event","Navigation","Post-"+b,"Bottom Reached",{nonInteraction:!0}),void 0!==BoredPanda.Analytics&&void 0!==BoredPanda.Analytics.finishedReading&&BoredPanda.Analytics.finishedReading()}}),$(".post-recommendations-main-block").bind("inview",function(a,b){if(b&&"true"!==$(".post-recommendations-main-block").attr("data-viewed")&&void 0!==BoredPanda.Analytics&&(BoredPanda.Analytics.setVisibleRecommendationsAsSeen(),$(".post-recommendations-main-block").attr("data-viewed",!0),$(".post-recommendations-main-block section.recommended-posts article.popular-post-rec[data-rec-type]").length>0)){var c=BoredPanda.Analytics.getUniquePostIds().length;ga("send","event","Navigation","Personal Recommendations","seen-"+c,{nonInteraction:!0})}})}},getCurrentPageRegion:function(){if(0===BoredPanda.Config.postId)return"";var a=$(window).scrollTop();if(350>=a)return this.PAGE_REGION_TOP;var b=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return void 0!==this.postContentBottomThreshold&&a>=this.postContentBottomThreshold-.8*b&&a<=this.postContentBottomThreshold+.25*b?this.PAGE_REGION_CONTENT_BOTTOM:void 0!==this.postContentBottomThreshold&&a>=this.postContentBottomThreshold+.25*b?this.PAGE_REGION_BOTTOM:this.PAGE_REGION_CONTENT},trackStickyFooter:function(a){var b=979,c=$(document).width()<=b;return c?(void 0===a&&(a=window.location.pathname,a=a.substr(1,a.length-2)),void(this.postsWithStickyFooterTracked.indexOf(a)>-1||(this.postsWithStickyFooterTracked.push(a),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay.bottom-bar-newsletter a',"Newsletter Form","Mobile Fixed Bottom Bar"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .facebook',"Mobile Fixed Bottom Bar Share","Facebook"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .twitter',"Mobile Fixed Bottom Bar Share","Twitter"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .whatsapp',"Mobile Fixed Bottom Bar Share","Whatsapp"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .pinterest',"Mobile Fixed Bottom Bar Share","Pinterest"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .email',"Mobile Fixed Bottom Bar Share","Email"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .instagram-follow-button .instagram',"Mobile Fixed Bottom Bar Follow","Instagram")))):!1},getCurrentPostFromUrl:function(){var a=window.location.pathname;return a=a.substr(1,a.length-2)},trackEvent:function(a,b,c){ga("send","event",a,b,c)},trackAddPostInputs:function(){var a=!1,b=!1,c=!1,d=!1,e=!1,f=!1;$(".post-title .add-post-form-input").on("change",function(){!a&&$(".post-title .add-post-form-input").val().length>=10&&BoredPanda.Config.trackAddPost&&(a=!0,ga("send","event","Add Post Form","Title","True"))}),$(".post-description .add-post-form-input").on("change",function(){!b&&$(".post-description .add-post-form-input").val().length>=50&&BoredPanda.Config.trackAddPost&&(b=!0,ga("send","event","Add Post Form","Description","True"))}),$(".contribution-facebook-image-overlay").on("click",function(){!c&&BoredPanda.Config.trackAddPost&&(c=!0,ga("send","event","Add Post Form","Facebook Image Generator","click"))}),$(".button.fb-image-save").on("click",function(){!d&&BoredPanda.Config.trackAddPost&&(d=!0,ga("send","event","Add Post Form","Facebook Image Save Btn","click"))}),$(".contribution-thumbnail-images-overlay").on("click",function(){!e&&BoredPanda.Config.trackAddPost&&(e=!0,ga("send","event","Add Post Form","Thumb Image Generator","click"))}),$(".button.save-thumbnails").on("click",function(){!f&&BoredPanda.Config.trackAddPost&&(f=!0,ga("send","event","Add Post Form","Thumb Image Save Btn","click"))})},publishSent:!1,trackAddPostPublish:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.publishSent||(BoredPanda.Tracking.publishSent=!0,ga("send","event","Add Post Form","Publish","click")))},trackAddPostPublishError:function(){BoredPanda.Config.trackAddPost&&ga("send","event","Add Post Form","Missing Mandatory Fields","True")},categorySent:!1,trackAddPostCategories:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.categorySent||(BoredPanda.Tracking.categorySent=!0,ga("send","event","Add Post Form","Category","True")))},imageSent:!1,trackAddPostImage:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.imageSent||(BoredPanda.Tracking.imageSent=!0,ga("send","event","Add Post Form","Images","True")))},imageTooSamllSent:!1,trackImageTooSmallError:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.imageTooSamllSent||(BoredPanda.Tracking.imageTooSamllSent=!0,ga("send","event","Add Post Form","Small Image","True")))},trackAuthorInvitationInvitees:function(){BoredPanda.Config.authorInvitationId&&!BoredPanda.Config.isStaffMember&&$.cookie("invitation",BoredPanda.Config.authorInvitationId,{expires:90,path:"/"})},trackInviteeAddPost:function(a){BoredPanda.Utils.wpAjax({action:"track_invitation_conversion",post_id:a})},trackInviteeAction:function(a){BoredPanda.Utils.wpAjax({action:"track_invitation_action",invitation_action:a})},trackInviteeClicks:function(a){var b="",c="";if(BoredPanda.Utils.getParameterByName("pageid")){var d=BoredPanda.Utils.getParameterByName("pageid");b=d.substring(0,d.length-2),c=d.substring(d.length-2,d.length)}else $.cookie("invitation")&&(b=$.cookie("invitation"));if(""!==b){var e="desktop";BoredPanda.Config.isMobileWidth?(e="mobile",BoredPanda.Config.isiPhone()&&(e="iphone")):BoredPanda.Config.isMobileWidth&&(e="tablet");var f="other-page-visit";window.location.href.indexOf("info-for-invited-author")>-1?f="landing-visit":"undefined"!=typeof a&&"login"===a?f="logged-in":"undefined"!=typeof a&&"download"===a?f="download-app":window.location.href.indexOf("add-new-post")>-1&&(f="add-post-visit");var g="event:"+f+"|link_nr:"+c+"|device:"+e;BoredPanda.Utils.wpAjax({action:"track_invitation_click",value:g,id:b})}},trackFeedSkippedArticles:function(){$("section.posts article.post[data-post-id] header a, section.posts article.post[data-post-id] h2 a").on("mousedown",function(){var a=[];$(this).closest("article").prevAll("article[data-post-id]").each(function(){a.push($(this).attr("data-post-id"))}),void 0!==BoredPanda.Analytics.addSkippedPosts&&a.length<10&&BoredPanda.Analytics.addSkippedPosts(a)})},trackOpenListCommentSubmit:function(){ga("send","event","Open List","First Level Comment","submit")},trackAddPostFormLoggedIn:function(){var a={action:"add_meta_current_user",meta:"logged-in-via-add-post",value:"true"};BoredPanda.Utils.wpAjax(a)},trackImageShares:function(a,b,c,d){var e=[{name:"post_id",value:b},{name:"parent_list_id",value:d},{name:"image",value:c},{name:"social_network",value:a}],f=BoredPanda.ContentTracking.generateEvent("image_share",e);BoredPanda.ContentTracking.sendEvent(f)},trackImageSharesByDevice:function(){var a="desktop";BoredPanda.Config.isTabletWidth&&(a="mobile");var b="Shares on images";this.trackClick(".image-share-box .whatsapp-share",b,"Whatsapp",a),this.trackClick(".image-share-box .email-share-mobile",b,"Email share",a),this.trackClick(".image-share-box .fb-share",b,"Facebook",a),this.trackClick(".image-share-box .pinterest-share",b,"Pinterest",a),this.trackClick(".image-share-box .tumblr-share",b,"Tumblr",a),this.trackClick(".image-share-box .twitter-share",b,"Twitter",a),this.trackClick(".image-share-box .email-share",b,"Email",a),$(".link-share-modal .link").bind("copy",function(){ga("send","event",b,"Link",a)}),this.trackClick(".email-share-modal .form .submit-button",b,"Email send",a),this.trackClick(".email-share-modal .success .sign-up",b,"Email newsletter sign-up",a)},trackYoutubeSubscribe:function(){$(".youtube-subscribe-button").click(function(){var a=$(this).data("track-label");a||(a="not set"),ga("send","event","Youtube","Subscribe",a)})}},$(document).ready(function(){BoredPanda.Tracking.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.AppPromotion={cookie:"disablepromotion",cookieTakeOver:"disabletakeover",campaignReferrer:document.referrer.indexOf("utm_campaign=")>-1,campaign:BoredPanda.Utils.getParameterByName("utm_campaign"),androidAppHomeDeeplink:"intent://deeplink/home/?referrer=utm_source%3Dwebsite%26utm_medium%3Dtakeover#Intent;scheme=boredpanda;package=com.boredpanda.android;end",androidAppPostDeeplink:"intent://deeplink/post?post_id="+BoredPanda.Config.postId+"&referrer=utm_source%3Dwebsite%26utm_medium%3Dtakeover#Intent;scheme=boredpanda;package=com.boredpanda.android;end",takeovers:{iOS:{"default":{3:{text:"Bored Panda works better on our iPhone app",imageClass:"icon-3"}}},Android:{"default":{1:{text:"Bored Panda works best if you switch to our Android app",imageClass:"icon-android-1"}}}},banners:{iOS:{1:{text:"Get the latest inspiring stories via our awesome iOS app!","class":"banner-with-logo"}},Android:{1:{text:"Get the latest inspiring stories via our awesome Android app!","class":"banner-with-logo"}}},isPromotionVisible:function(){return void 0===$.cookie(this.cookie)&&(BoredPanda.Config.isiPad()||BoredPanda.Config.isiPhone()||BoredPanda.Config.isAndroid())&&!BoredPanda.Config.isWindowsPhone()&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},isTakeOverVisible:function(){return(BoredPanda.Config.isiPhone()||BoredPanda.Config.isAndroid())&&($("body").hasClass("home")&&!document.referrer||this.campaignReferrer)&&$("body").width()<=480&&-1===BoredPanda.Config.pandaBaseUrl.indexOf("boredpanda.es")&&!BoredPanda.Config.isWindowsPhone()},isBannerVisible:function(){return(BoredPanda.Config.isiPhone()||BoredPanda.Config.isAndroid())&&this.campaign&&$("body").width()<=480},initUpdated:function(){this.isPromotionVisible()&&(this.initLinks(),BoredPanda.Config.isAndroid()?$(".app-promotion .updated .android-app").show():$(".app-promotion .updated .ios-app").show(),$(".app-promotion .updated-app").show(),$(".header").addClass("promotion-updated"),$(".main.bp-container").addClass("promotion-updated"),$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").attr("style","top: 49px;"),$(".main.promotion-updated").attr("style","margin-top: 6.5em !important;")))},initLinks:function(){$(".app-promotion .close-block a.close-icon").on("click",function(){$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").removeAttr("style"),$(".main.promotion-updated").removeAttr("style")),$(".header").hasClass("promotion-updated")&&($(".header").removeClass("promotion-updated"),$(window).scroll()),$(".main.bp-container").hasClass("promotion-updated")&&$(".main.bp-container").removeClass("promotion-updated"),$.cookie("disablepromotion","1",{expires:60,path:"/"}),$(".app-promotion").remove()})},getCampaign:function(a){var b="default";return(this.campaignReferrer||this.campaign)&&(b=BoredPanda.Utils.getParameterByName("utm_campaign",a).toLowerCase()),b},initPostBottomMessage:function(){BoredPanda.Config.isTabletWidth&&((BoredPanda.Config.isiPhone()||BoredPanda.Config.isiPad())&&($(".post-submission-line.post-footer.post-footer-ios-promotion").show(),BoredPanda.Tracking.trackClick(".post-submission-line.post-footer.post-footer-ios-promotion","iOS app","post bottom")),BoredPanda.Config.isAndroid()&&($(".post-submission-line.post-footer.post-footer-android-promotion").show(),BoredPanda.Tracking.trackClick(".post-submission-line.post-footer.post-footer-android-promotion","Android app","post bottom")))},initPostFixedPromotion:function(){!BoredPanda.Config.isTabletWidth||$(".fixed-bottom-overlay.newsletterbar").length<=0||((BoredPanda.Config.isiPhone()||BoredPanda.Config.isiPad())&&"es"!==BoredPanda.Config.bpVersion?($(".fixed-bottom-overlay.app-promotion .ios").show(),$(".fixed-bottom-overlay.app-promotion").show(),$(".fixed-bottom-overlay.app-promotion").css("visibility","hidden"),BoredPanda.Tracking.trackClick(".fixed-bottom-overlay.app-promotion .ios","iOS app","fixed bottom")):BoredPanda.Config.isAndroid()&&"es"!==BoredPanda.Config.bpVersion?($(".fixed-bottom-overlay.app-promotion .android").show(),$(".fixed-bottom-overlay.app-promotion").show(),$(".fixed-bottom-overlay.app-promotion").css("visibility","hidden"),BoredPanda.Tracking.trackClick(".fixed-bottom-overlay.app-promotion .android","Android app","fixed bottom")):($(".fixed-bottom-overlay.bottom-bar-newsletter").show(),$(".fixed-bottom-overlay.bottom-bar-newsletter").css("visibility","hidden")))},initTakeOver:function(){var a=this;if(this.isTakeOverVisible()){var b=$(".app-takeover"),c=this.getCampaign(document.referrer),d=BoredPanda.Config.isiPhone()?"iOS":"";if(BoredPanda.Config.isAndroid()){d="Android",b.find(".takeover-icon").addClass("android");var e=this.androidAppHomeDeeplink;!BoredPanda.Config.isHome&&BoredPanda.Config.postId&&(e=this.androidAppPostDeeplink+BoredPanda.Config.postId),b.find(".takeover-button").attr("href",e)}if(this.takeovers[d][c]&&void 0===$.cookie(this.cookieTakeOver)&&void 0===$.cookie(this.cookieTakeOver+"_"+c)){var f=Math.floor(Math.random()*(1+Object.keys(this.takeovers[d][c]).length-1))+1;"iOS"===d&&(f=3),b.find(".takeover-icon").addClass(this.takeovers[d][c][f].imageClass),b.find(".takeover-description").text(this.takeovers[d][c][f].text),$("body").addClass("takeover-open"),b.show(),$.cookie(this.cookieTakeOver+"_"+c,"1",{expires:60,path:"/"}),BoredPanda.Tracking.trackEvent(d+" app","Takeover App Store "+c,"impression"+f),$(".takeover-button").on("click",function(){BoredPanda.Tracking.trackEvent(d+" app","Takeover App Store "+c,"click"+f),$(".app-takeover").hide(),$("body").removeClass("takeover-open")}),$(".takeover-link").on("click",function(){BoredPanda.Tracking.trackEvent(d+" app","Takeover Website "+c,"click"+f),$(".app-takeover").hide(),$("body").removeClass("takeover-open")}),$(window).resize(function(){a.isTakeOverVisible()&&$(".app-takeover").is(":visible")?$("body").addClass("takeover-open"):$("body").removeClass("takeover-open")})}}},initAddPostDownloadApp:function(){(BoredPanda.Config.isiPad()||BoredPanda.Config.isiPhone())&&$(".download-app").show()},initBpEsYoutubePromotion:function(){var a=$(".post-recommendations.youtube-promotion");if(!BoredPanda.Config.isMobileWidth&&a.length>0){for(var b=["sGJ9WVZ5Xa8","UFPMbxyro0U","2CMCH8Kf474","2-ky7yrOlKE","GhUBr4kuqJc"],c="",d=0;d<b.length;d++)if(!$.cookie("youtube_"+b[d])){c=b[d];break}c||(c=b.pop()),c&&(a.show(),a.find(".youtube-wrapper").append('<iframe width="880" height="495" src="https://www.youtube.com/embed/'+c+'" frameborder="0" allowfullscreen></iframe>'),a.bind("inview",function(a,e,f,g){e&&($.cookie("youtube_"+b[d])||$.cookie("youtube_"+c,"1",{expires:60,path:"/"}))}))}}},$(document).ready(function(){BoredPanda.AppPromotion.initAddPostDownloadApp(),BoredPanda.AppPromotion.initPostBottomMessage(),BoredPanda.AppPromotion.initPostFixedPromotion(),"es"===BoredPanda.Config.bpVersion&&BoredPanda.AppPromotion.initBpEsYoutubePromotion()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Notice=function(){var a=this;a.noticeVisible=ko.observable(!1),a.notice=ko.observable(""),a.showNotice=function(b){void 0===b&&(b=$.cookie("notice"),$.removeCookie("notice",{path:"/"})),void 0!==b&&(a.notice(b),a.noticeVisible(!0),setTimeout(function(){a.noticeVisible(!1)},5e3))},a.setNotice=function(a){$.cookie("notice",a,{expires:1,path:"/"})},a.showNotice()},$(document).ready(function(){$("#notice").length>0&&(BoredPanda.notice=new BoredPanda.Notice,ko.applyBindings(BoredPanda.notice,$("#notice")[0]))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.Notifications||{};a=function(){var a=this,b="/notifications/",c=10,d=1;a.open=!1,a.exists=ko.observable(!1),a.visible=ko.observable(!1),a.noMoreLeft=ko.observable(!1),a.loading=ko.observable(!1),a.initiating=ko.observable(!0),a.unseen=ko.observable(0),a.notifications=ko.observableArray();var e=function(a){return BoredPanda.Utils.prettyDate(new Date(1e3*a).toISOString())},f=function(a){var b=document.createElement("div");return b.innerHTML=a,$(b).find("a").each(function(){$(this).contents().unwrap().wrap("<strong/>")}),$(b).find("p").each(function(){$(this).contents().unwrap()}),$(b).html()},g=BoredPanda.Utils.nAjax;a.markSeen=function(){var c=g("POST",b);c.done(function(){a.unseen(0)})},a.getOlder=function(){i(a.notifications().length)};var h=function(b,c){c=c||!1,b.time=e(b.created_at),b.text=f(b.text),b.thumb||(b.thumb=BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/notifications-default-image.png"),c?a.notifications.push(b):a.notifications.unshift(b)},i=function(e){a.loading(!0);var f=g("GET",b+c+"/"+e);f.always(function(){a.loading(!1)}),f.done(function(b){var c=b.data;a.unseen(c.unseenCount);for(var d=0;d<c.notifications.length;d++)h(c.notifications[d],!0);a.noMoreLeft(0===c.notifications.length),a.exists(a.notifications().length>0),a.initiating(!1)}),f.fail(function(a){if(401===a.status&&d>0){d--;var b=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:{action:"renew_boredpanda_auth_cookie"}});b.done(function(){i(e)})}})},j=function(){return"undefined"==typeof io?void setTimeout(j,1e3):(a.socket=io(BoredPanda.Config.notificationServiceUrl,{path:"/socket",secure:!0}),void a.socket.on("new notification",function(b){h(b),a.unseen(a.unseen()+1)}))};BoredPanda.Config.isLoggedIn&&-1===window.location.hostname.indexOf("ci.boredpanda")&&-1===window.location.hostname.indexOf("boredpanda.es")&&-1===window.location.hostname.indexOf("boredpanda.de")&&(i(0),j())},$(document).ready(function(b){BoredPanda.Config.isLoggedIn&&(BoredPanda.notifications=new a,b(".notifications").each(function(){ko.applyBindings(BoredPanda.notifications,this)}))})}(),function(){"use strict";function a(){$("img.image-size-full-overlay").each(function(){var a=$(this).next("img.image-size-full");$(this).height(a.height()),$(this).width(a.width())})}window.BoredPanda=window.BoredPanda||{},BoredPanda.GeoIP={},BoredPanda.GeoIP.spanishLangs=["MX","PH","ES","CO","AR","PE","VE","CL","EC","GT","CU","BO","DO","HN","PY","SV","NI","CR","PR","PA","UY","GQ","EH"],BoredPanda.GeoIP.messageLangs=["LT"],BoredPanda.GeoIP.europeLangs=["EU","AD","AL","AT","BA","BE","BG","BY","CH","CS","CZ","DE","DK","EE","ES","FI","FO","FR","FX","GB","GI","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MC","MD","MK","MT","NL","NO","PL","PT","RO","SE","SI","SJ","SK","SM","UA","VA"],BoredPanda.init=function(){this.FacebookLoader.init(),this.Header.init(),this.Layout.init(),this.SocialIcons.init(),this.Header.mobileHeader(),this.Sidebar.init(),this.Post.init(),this.ICheck.init(),this.AuthorTabs.init(),this.SubscribtionValidation.init(),this.ShowMatureContent.init(),this.ContactForm.changeSubject(),this.ShareBox.init(),this.ScrollToImage.init(),this.BookPayPalLanding.init(),this.Shares.init(),this.Advertise.init(),this.Quiz.init(),this.InitCloseButton.init()},BoredPanda.InitCloseButton={init:function(){setInterval(function(){$(".closeable-div").height()>0&&$(".closeable-div .modal-close").show()},1e3),$(".closeable-div .modal-close").on("click",function(){$(this).parent().remove()})}},BoredPanda.ContactForm={changeSubject:function(){location.search.split("report-post=")[1]&&$('select[name="your-recipient"]').val("Report Post"),$("input[name=subject-timestamp]").val(Math.round((new Date).getTime()/1e3))}},BoredPanda.ScrollToImage={init:function(){var a=BoredPanda.Utils.getParameterByName("media_id",window.location.href);a&&$('[id="'+a+'"]').get(0).scrollIntoView()}},BoredPanda.BookPayPalLanding={init:function(){if($(".page-template-book-landing").length>0){var a=function(){var a=$(".book-image");a.height(a.width())};BoredPanda.Config.windowWidth<=940&&($(window).on("resize",a),a())}}},BoredPanda.ShareBox={init:function(){$("body").on("click",".shareable-image-block",function(a){if(BoredPanda.Config.isTabletWidth&&-1===$.inArray("social-button",a.target.classList)&&0===$(this).find(".image-slider-info").length&&0===$(this).find(".mature-content-image").length){var b=$(this).find(".image-share-box");$(".shareable-image-block .image-share-box").each(function(){$(this).get(0)!==b.get(0)&&$(this).hide()}),b.toggle()}}),this.linkShare(),this.sharesCount()},sharesCount:function(){if(BoredPanda.Config.isStaffMember&&BoredPanda.Config.postId&&!BoredPanda.Config.isTabletWidth){var a={action:"image_share_stats",property_type:BoredPanda.Config.inOpenList?"parent_list_id":"post_id",property_value:BoredPanda.Config.postId},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"});b.done(function(a){a.success===!0&&$.each(a.data,function(a,b){var c=$('.shareable-post-image img[src*="'+a+'"]').closest(".shareable-image-block").find(".image-share-box");c.find(".fb-share .statistics").text(b.facebook?b.facebook:0),c.find(".pinterest-share .statistics").text(b.pinterest?b.pinterest:0),c.find(".twitter-share .statistics").text(b.twitter?b.twitter:0),c.find(".tumblr-share .statistics").text(b.tumblr?b.tumblr:0),c.find(".email-share .statistics").text(b.email?b.email:0),c.find(".link-share .statistics").text(b.link?b.link:0)})})}},emailShare:function(){$("body").on("click",".email-share",function(){var a=$(this).closest(".shareable-post-image"),b=a.find(".email-share-modal:first");b.css("top",$(this).offset().top-a.offset().top-b.height()/2+$(this).outerHeight()/2),$(this).parent().attr("style","display:block;"),b.show()}),$("body").on("click",".email-share-modal .modal-close",function(){a($(this).closest(".email-share-modal"))}),$("body").on("click",".email-share-modal .sign-up",function(){
var c=$(this).closest(".email-share-modal"),d=c.find('input[name="email"]').val();if(!d)return b("Please fill your email address",c),!1;var e={action:"email_share_subscribe_newsletter",email:c.find('input[name="email"]').val()},f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"});f.done(function(){var b=c.closest(".shareable-post-image"),d=b.find(".email-share");c.find(".success").hide(),c.removeClass("subscribe-form"),c.addClass("subscribed"),c.find(".success-subscribe").show(),b.length>0&&d.length>0&&c.css("top",d.offset().top-b.offset().top-c.height()/2+d.outerHeight()/2),setTimeout(function(){a(c)},2e3)})}),$("body").on("click",function(a){!$(a.target).closest("a").hasClass("email-share")&&!$(a.target).closest("a").hasClass("email-footer-share")&&$(a.target).closest(".email-share-modal").length<1&&$(".email-share-modal:visible").each(function(){$(this).hide(),$(this).parent().find(".image-share-box").removeAttr("style")})});var a=function(a){a.hide(),a.parent().find(".image-share-box").removeAttr("style"),a.removeClass("subscribed"),a.addClass("subscribe-form"),a.find(".success").show(),a.find(".success-subscribe").hide(),a.find("input").val(""),c(a)},b=function(a,b){b.find(".error .error-text").text(a),b.find(".error").show()},c=function(a){a.find(".error").hide()}},linkShare:function(){$("body").on("click",".link-share",function(){var a=$(this).closest(".shareable-post-image"),b=a.find(".link-share-modal:first");b.css("top",$(this).offset().top-a.offset().top-b.height()/2+$(this).outerHeight()/2),b.find(".link").val($(this).data("link")),$(this).parent().attr("style","display:block;"),b.show(),b.find(".link").focus().select()}),$("body").on("click",function(a){!$(a.target).closest("a").hasClass("link-share")&&!$(a.target).closest("a").hasClass("email-footer-share")&&$(a.target).closest(".email-share-modal").length<1&&$(".email-share-modal:visible").each(function(){$(this).hide(),$(this).parent().find(".image-share-box").removeAttr("style")})})}},BoredPanda.Quiz={init:function(){var a=$(".post-content.quiz-post");a.length>0&&$(".post-content.quiz-post .quiz-submit").click(function(){a.find(".quiz-block").length===a.find(".quiz-block input:checked").length?(a.find(".quiz-error").hide(),a.find(".quiz-result").show(),$("html, body").animate({scrollTop:a.find(".quiz-result").offset().top-$("header.header").height()},600)):a.find(".quiz-error").show()})}},BoredPanda.ShowMatureContent={init:function(){$(".mature-content-image").each(function(){$(this).append('<div class="mature-content"><div class="mature-title">'+BoredPanda.Translate.Post.mature_content+'</div><div class="mature-explanation">'+BoredPanda.Translate.Post.mature_content_confirm+"</div></div>")}),$(document).on("click",".mature-content-image",function(a){a.preventDefault(),$(this).removeClass("mature-content-image")})}},BoredPanda.SubscribtionValidation={init:function(){$(".newsletter-subscribe").on("submit",function(){var a=$(this),b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,c=a.find(".email-field");a.find(".subscribe-block"),a.find(".response-block");if(""===c.val()||!b.test(c.val()))return c.addClass("invalid-email"),a.find(".error").show(),!1;a.find(".newsletter-spinner").show();var d=a.attr("data-form-name"),e="Newsletter Form",f="click";a.parent(".newsletter-variation").length>0&&(f+=a.parent(".newsletter-variation").data("variation")),ga("send","event",e,d,f)})}},BoredPanda.FacebookLoader={init:function(){var a=function(){var b=function(){FB.XFBML.parse()};"undefined"!=typeof FB?setTimeout(b,500):setTimeout(a,500)};if(BoredPanda.Config.isMobileWidth)a();else{$(".post-info-block .right:not(.spanish-panda)").append('<div class="fb-like" data-href="https://www.facebook.com/boredpanda" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-page-like-position="home_page" data-page-like-category="post_like"></div>'),$(".post-info-block .right.spanish-panda").append('<div class="fb-like" data-href="https://www.facebook.com/pandacurioso" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-page-like-position="home_page" data-page-like-category="post_like"></div>');var b=$("#sharebar .fb-sharebar-box").attr("data-post");$("#sharebar .fb-sharebar-box").append('<div class="fb-like" data-href="'+b+'" data-layout="box_count" data-action="like" data-show-faces="false" data-share="true"></div>'),a()}}},BoredPanda.Sticky=function(a){function b(){return d.$sticky.topOffset=d.$sticky.offset().top-parseInt(d.$sticky.css("margin-top")),d.$sticky.topOffset?void(d.$sticky.length>0&&BoredPanda.Scroll.scrollCallback.add(function(){d.$sticky.is(":visible")&&((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)+c>d.$sticky.topOffset?d.$sticky.addClass("fixed"):(d.$sticky.removeClass("fixed"),d.$sticky.topOffset=d.$sticky.offset().top-parseInt(d.$sticky.css("margin-top"))+(parseInt(d.$sticky.css("top"))||0)))})):void setTimeout(b,500)}var c,d=this;c=$("header").length?12:0,d.$sticky=$(a),b()},BoredPanda.Header={init:function(){(!BoredPanda.Config.isTabletWidth||BoredPanda.Config.isTabletWidth&&90===Math.abs(window.orientation))&&(this.categoriesHover(),this.search(),this.checkCategoriesWidth()),this.searchMobile(),this.userMenuHover(),this.cookieMessage()},cookieMessage:function(){"com"===BoredPanda.Config.bpVersion?(window.top.VM_API=window.top.VM_API||[],window.top.VM_API.push({call:"is-country",args:{"in":["GB"]},onResult:function(a){a||BoredPanda.Header.topMessage()},onError:function(){BoredPanda.Header.topMessage()}})):this.topMessage()},checkCategoriesWidth:function(){$("div.logotype").width()>210&&($(".more-categories .last-visible-category").show(),$(".nav.left.top-level-navigation ul:first > li:not(.more):last").hide())},sticky:function(){var a;a=$("body").hasClass("page-template-add-post-template-php")?0:$(".cover").height(),BoredPanda.Scroll.scrollCallback.add(function(){$(document).scrollTop()>a?$(".header").addClass("fixed"):$(".header").removeClass("fixed")})},stickySidebarAd:function(){$(".sidebar .sticky-bottom").addClass("fixed-bottom"),BoredPanda.Scroll.scrollCallback.add(function(){$(".sidebar .sticky-bottom").hasClass("fixed")?($(".sidebar .sticky-bottom").css("top","271px"),$(".sidebar .sticky-top").addClass("fixed-bottom")):($(".sidebar .sticky-top").removeClass("fixed-bottom"),$(".sidebar .sticky-bottom").css("top","0"))})},mobileHeader:function(){$("#mobile-categories-show").on("click",function(){$(".mobile-more-categories-list").is(":visible")?$(".mobile-more-categories-list").hide():($(document).scrollTop(0),$(".mobile-more-categories-list").show())}),$(".my-menu").on("click",function(){$("nav.submenu").is(":visible")?($("nav.submenu").hide(),$(".my-menu").removeClass("active")):($("nav.submenu").show(),$(".my-menu").addClass("active"))}),window.location.href.indexOf("#upvotes")>-1&&($(".submenu li.admin").removeClass("active"),$(".upvotes").addClass("active")),$(".upvotes").on("click",function(){window.location.href!==$(this).find("a").attr("href")&&(window.location.href=$(this).find("a").attr("href")),window.location.reload(!0)}),$("header.static-pages-header .top-menu-mobile").change(function(){window.location.href=$(this).val()})},topMessage:function(){var a="disabletopmessage1",b="disablecookiemessage",c=this;(void 0===$.cookie(a)||void 0===$.cookie(b))&&$.ajax({type:"GET",url:"https://geoip.boredpanda.com/",dataType:"json"}).done(function(d){var e=BoredPanda.GeoIP.spanishLangs.indexOf(d.countrycode),f=BoredPanda.GeoIP.europeLangs.indexOf(d.countrycode),g=(BoredPanda.GeoIP.messageLangs.indexOf(d.countrycode),"");void 0===$.cookie(a)&&e>-1&&(g='<span>Te gusta Bored Panda? Ahora puedes leernos en espaol! </span><div class="fb-like" data-href="https://www.facebook.com/pandacurioso" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-page-like-position="home_page" data-page-like-category="post_like"></div>'),!BoredPanda.Config.isTabletWidth||window.innerWidth>979&&window.innerWidth>window.innerHeight?(void 0===$.cookie(b)&&f>-1&&(BoredPanda.Config.isCookiePolicyVisible=!0,c.initDesktopCookieMessage()),$("body").hasClass("home")&&g.length>0&&($(".top-message").addClass("top-message-visible"),$(".top-message").html(g+'<a title="" href="javascript:void(0);" class="close-box"></a>'),$(".main").css("margin-top","50px"),$(".top-message .close-box").on("click",function(b){b.preventDefault(),$.cookie(a,"1",{expires:60,path:"/"}),c.hideTopMessage()}))):void 0===$.cookie(b)&&f>-1&&(BoredPanda.Config.isCookiePolicyVisible=!0,c.initMobileCookiePolicy(b))})},initDesktopCookieMessage:function(){$(".cookie-message").show(),$(".cookie-message .cookie-policy .got-it, .cookie-message .cookie-policy .close-box").on("click",function(){$(".cookie-message").remove(),$.cookie("disablecookiemessage","1",{expires:60,path:"/"})})},initMobileCookiePolicy:function(a){$(".cookie-policy-mobile").show(),$(".main.bp-container").addClass("show-cookie-message"),$(".cookie-policy-mobile .got-it").on("click",function(){$.cookie(a,"1",{expires:60,path:"/"}),$(".cookie-policy-mobile").remove(),$(".main.bp-container").removeClass("show-cookie-message")})},hideCookiePolicy:function(a){BoredPanda.Config.isCookiePolicyVisible=!1,$.cookie("disablecookiemessage","1",{expires:60,path:"/"}),void 0===$.cookie(a)?$(".cookie-policy").animate({"margin-top":"-28px"},1e3):this.hideTopMessage()},hideTopMessage:function(){$(".top-message").hide(),$(".main").css("margin-top","25px")},categoriesHover:function(){var a=$(".more-categories");$(".header").on("click",".more",function(){a.toggle()}),$(".header").on("mouseleave",".more-categories",function(){a.hide()})},userMenuHover:function(){var a=$(".nav.right .user-menu .submenu");$(".header").on("click",".user-menu .button",function(){a.toggle()}),$(".header").on("mouseleave",".nav.right .user-menu .submenu",function(){a.hide()})},search:function(){var a=$(".header .search"),b=a.find(".search-icon"),c=a.find(".search-box"),d=a.find(".text"),e=a.find(".search-close");b.on("click",function(a){a.preventDefault(),c.toggle(),b.toggleClass("hover"),d.focus()}),d.on("focusout",function(a){a.relatedTarget&&"submit"===a.relatedTarget.className||(c.toggle(),b.toggleClass("hover"))}),e.on("click",function(a){c.hide(),b.removeClass("hover")})},searchMobile:function(){var a=$(".header .mobile .search"),b=a.parent().find(".search-form"),c=a.parent().find(".text"),d=a.parent().find(".modal-close");a.on("click",function(a){a.preventDefault(),b.toggle(),c.focus()}),d.on("click",function(a){a.preventDefault(),b.hide()})}},BoredPanda.Sidebar={init:function(){var a=function(){$(".sidebar .sticky").each(function(){new BoredPanda.Sticky(this)})};a(),$(window).resize(function(){$(window).width()>=768&&$(window).scrollTop($(window).scrollTop()+1).trigger("scroll"),a()});var b=$("aside.sidebar");b.length>0&&(BoredPanda.sidebar=new BoredPanda.SidebarController,ko.applyBindings(BoredPanda.sidebar,b.get(0)));var c=function(){if("undefined"!=typeof BoredPanda.Config.countryCode)if("LT"!==BoredPanda.Config.countryCode||"com"!==BoredPanda.Config.bpVersion){if(window.adsbygoogle=window.adsbygoogle||[],"undefined"!=typeof adsbygoogle)try{adsbygoogle.push({})}catch(a){console.log(a)}}else document.getElementById("native-sidebar-ad")&&document.getElementById("native-sidebar-ad").remove();else setTimeout(c,50)};c();var d=!1;$("#trending-seo-article").bind("inview",function(a,b,c,e){if(!d&&b){d=!0;var f={action:"increase_seo_article_stats",post_id:a.currentTarget.getAttribute("data-post-id"),field:"impressions"};$.ajax({url:ajax_object.ajax_url,data:f,type:"POST"})}})}},BoredPanda.SocialIcons={init:function(){this.genericSocialIcons()},genericSocialIcons:function(){$("a.social.twitter.share").each(function(){$(this).click(function(){window.open("https://www.twitter.com/share?url="+encodeURIComponent(BoredPanda.generateShareablePermalink())+"&via=boredpanda&text="+encodeURIComponent(document.title),"twitter-share-dialog","width=626,height=273")})}),$("a.social.pintrest.share").each(function(){$(this).click(function(){window.open("https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(BoredPanda.generateShareablePermalink())+"&media="+encodeURIComponent($('meta[property="og:image"]').attr("content"))+"&description="+encodeURIComponent(document.title),"pintrest-pin-dialog","width=750,height=328")})})},widgets:{facebook:function(a){return'<div class="fb-like" data-href="'+a+'" data-send="false" data-layout="button_count" data-show-faces="false"></div>'},pinterest:function(a,b,c){return'<a href="//www.pinterest.com/pin/create/button/?url='+encodeURIComponent(a)+"&media="+encodeURIComponent(b)+"&description="+encodeURIComponent(c)+'" class="pin-it" data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a>'}}},BoredPanda.Post={init:function(){BoredPanda.Post.Votes.init(),$(".gallery-nav").length>0&&this.gallery(),this.checkSidebarClick()},getUrlParameter:function(a){var b,c,d=window.location.search.substring(1),e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]?!0:decodeURIComponent(b[1])},checkSidebarClick:function(){var a=(window.location.href,this.getUrlParameter("utm_source")),b=this.getUrlParameter("utm_campaign");if("trending"==a&&"sidebar"==b){var c={action:"increase_seo_article_stats",post_id:BoredPanda.Config.postId,field:"clicks"};$.ajax({url:ajax_object.ajax_url,data:c,type:"POST"})}},sharebar:function(a){BoredPanda.Sticky(a),BoredPanda.Scroll.scrollCallback.add(function(){var b=$("#post-comments-area").offset().top+$("#post-comments-area").height();$(document).scrollTop()>b?a.hide():a.show()})},gallery:function(){var a=function(a,b){$("a.mobile-gallery-nav."+b).addClass("gallery-spinner");var c=$.ajax({url:a,data:{only_post:1},type:"POST"});c.done(function(b){var c=$(".left-content-column"),d=c.parent();c.remove(),d.append(b),window.history.replaceState({html:b,pageTitle:document.title},"",a),BoredPanda.Slider.bindDrag(),BoredPanda.Flipper.bind(),$(document).scrollTop(0),ga("send","pageview",a),BoredPanda.SocialIcons.init(),BoredPanda.FooterControl.init(),void 0!==FB&&FB.XFBML.parse(),$("#div-gpt-ad-1426006150012-0").length>0?$("#div-gpt-ad-1426006150012-0").html("<script type=\"text/javascript\">if (BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display('div-gpt-ad-1426006150012-0'); }); }</script>"):$("#div-gpt-ad-1426085663937-0").html("<script type=\"text/javascript\">if (BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display('div-gpt-ad-1426085663937-0'); }); }</script>"),googletag.pubads().refresh()}),c.fail(function(){})};$(document).keydown(function(b){if(!$("input, textarea").is(":focus")){var c,d={left:37,right:39};b.keyCode===d.left?(c=$(".gallery-nav.prev").attr("href"),c&&a(c,"prev")):b.keyCode===d.right&&(c=$(".gallery-nav.next").attr("href"),c&&a(c,"next"))}}),$(document).on("click",".mobile-gallery-nav.prev",function(b){b.preventDefault(),a($(this).attr("href"),"prev")}),$(document).on("click",".mobile-gallery-nav.next",function(b){b.preventDefault(),a($(this).attr("href"),"next")})}},BoredPanda.Post.Votes={init:function(){this.registerVotes()},registerVotes:function(){var a=this;$(document).on("click",".vote-panel.vote-post .btn",function(){var b=$(this),c=$(this).parent().parent().parent(),d=$(this).hasClass("btn-up"),e=c.find(".vote-panel.vote-post .btn."+(d?"btn-up":"btn-down")),f=c.find(".vote-panel.vote-post .btn."+(d?"btn-down":"btn-up")),g=$(".voting-panda"),h=$(this).hasClass("btn-up")?1:-1,i=$(this).data("postId"),j=h,k=h;if(!BoredPanda.Config.isLoggedIn){var l=window.location.pathname+"?afterlogin=savevote&post="+i+"&score="+h;return window.history.pushState("Vote","Vote",l),void BoredPanda.Login.form.show(l,void 0,BoredPanda.Translate.Signup.please_login_vote)}BoredPanda.Config.isSuperVoter||(e.hasClass("active")?(k=-h,j=0):f.hasClass("active")&&(k*=2,f.removeClass("active")),e.toggleClass("active"),g.removeClass("panda-happy").removeClass("panda-sad"),g.addClass(j>0?"panda-happy":0>j?"panda-sad":"")),a.updatePoints(k,c),a.updateSharebarPanda(b.closest(".vote-panel"),j);var m=a.sendRequest(h,i);"1"!==BoredPanda.Utils.getParameterByName("offline_voting")&&m.error(function(b){void 0===b.responseJSON&&BoredPanda.Config.isSuperVoter?alert("Error! Vote was not saved."):b.responseJSON.success===!1&&"undefined"!=typeof b.responseJSON.error&&BoredPanda.Config.isSuperVoter&&alert(b.responseJSON.error),a.updatePoints(-1*k,c)})})},updateSharebarPanda:function(a,b){var c=$(a),d=c.find(".mood .panda");d.length>0&&(0>b?d.removeClass("happy neutral").addClass("sad"):b>0?d.removeClass("sad neutral").addClass("happy"):0===b&&d.removeClass("happy sad").addClass("neutral"))},updatePoints:function(a,b){function c(a,b){var c=Math.pow(10,b||0);return Math.round(a*c)/c}b.find(".vote-panel .points").each(function(){var b=$(this).data("points")+a;$(this).data("points",b),1===b||-1===b?$(this).html(b+"<span>point</span>"):(b/1e3>=1&&1e6>b?b=c(b/1e3,1)+"K":b/1e6>=1&&(b=c(b/1e6,1)+"M"),$(this).html(b+"<span>points</span>"))})},sendRequest:function(a,b){var c={action:"vote_for_post",score:a,post_id:b};return BoredPanda.Utils.wpAjax(c)}},BoredPanda.ICheck={init:function(){var a=$(".radio.iwhite, .checkbox.iwhite");a.length>0&&a.iCheck({increaseArea:"20%",checkboxClass:"checkbox-white",radioClass:"radio-white"});var b=$(".radio.iblack, .checkbox.iblack");b.length>0&&b.iCheck({increaseArea:"20%",checkboxClass:"checkbox-black",radioClass:"radio-black"})}},BoredPanda.Newsletter=function(){var a=this;a.visible=ko.observable(!1),a.group=ko.observable("Daily"),a.email=ko.observable(""),a.submit=function(){var b={action:"newsletter_subscribe",group:a.group(),email:a.email,user_id:BoredPanda.Login.form.accountActivation.userId()};BoredPanda.Login.form.buffering(!0);var c=$.ajax({url:ajax_object.ajax_url,data:b,type:"POST"});c.done(function(){BoredPanda.Login.afterNewsletter()}),c.fail(function(){BoredPanda.Login.afterNewsletter()})}},BoredPanda.Layout={init:function(){this.hiddenLoggedIn(),this.hiddenCookie(),this.newsletterCookie(),this.showFullText()},hiddenLoggedIn:function(){var a=this;$(".hidden-logged-in").each(function(){BoredPanda.Config.isLoggedIn?a.hide(this):$(this).show()})},hiddenCookie:function(){var a=this;$(".hidden-cookie").each(function(){$(this).data("cookie")&&$.cookie($(this).data("cookie"))?a.hide(this):$(this).show()})},hide:function(a){$(a).hide(),$(a).removeClass("hidden-cookie hidden-logged-in")},newsletterCookie:function(){var a="newsletter_subscribed";$(".newsletter-form form, .post-subscribe-form form, .ml-subscribe-form form").each(function(){$(this).submit(function(){$.cookie(a,"1",{expires:365,path:"/"})})})},showFullText:function(){$(".post-content .read-more-block .read-more-button").click(function(){$(this).closest(".post-content").find(".read-more-block").hide(),$(this).closest(".post-content").find(".hidden-mobile-paragraphs").show()})}},BoredPanda.AuthorTabs={init:function(){$(".author-tabs").length>0&&(BoredPanda.AuthorTabs.model=new BoredPanda.AuthorTabs.Model,$(".author-tabs").each(function(){ko.applyBindings(BoredPanda.AuthorTabs.model,this)}))},Model:function(){var a=this;a.activeTab=ko.observable("posts"),a.feeds={posts:ko.observableArray(),submissions:ko.observableArray(),upvotes:ko.observableArray()},a.feedFinished={posts:ko.observable(!1),submissions:ko.observable(!1),upvotes:ko.observable(!1)},a.activateTab=function(b){return function(){a.activeTab(b),$(".posts").each(function(){$(this).infinitescroll("pause")}),b="posts"===b?"blog":b,$(".posts."+b).infinitescroll("resume")}},$(".posts.blog").infinitescroll({navSelector:".posts.blog .pagination",nextSelector:".posts.blog .pagination a:first",itemSelector:".posts.blog .post",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"}}),$(".posts.submissions").infinitescroll({navSelector:".posts.submissions .pagination",nextSelector:".posts.submissions .pagination a:first",itemSelector:".post",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"}}),$(".posts.upvotes").infinitescroll({navSelector:".posts.upvotes .pagination",nextSelector:".posts.upvotes .pagination a:first",itemSelector:".post",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"}}),$(".posts.drafts").infinitescroll({navSelector:".posts.drafts .pagination",nextSelector:".posts.drafts .pagination a:first",itemSelector:".post",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"}}),"#upvotes"===window.location.hash?a.activateTab("upvotes")():$(".author-tabs .posts.blog .no-posts").length>0&&0===$(".author-tabs .posts.submissions .no-posts").length?a.activateTab("submissions")():"#bonuses"===window.location.hash?a.activateTab("bonuses")():"#drafts"===window.location.hash?a.activateTab("drafts")():a.activateTab("posts")()}},BoredPanda.ResponsiveImagePlaceholders={init:function(){$(document).ajaxComplete(function(){clearTimeout(this.timeout),this.timeout=setTimeout(placeholderImages,100)})}},BoredPanda.SidebarController=function(){var a=this;a.tooltips={subs:{showTooltip:ko.observable(!1)},challenges:{showTooltip:ko.observable(!1)}},a.hoverSubsOn=function(){a.tooltips.subs.showTooltip(!0)},a.hoverSubsOff=function(){a.tooltips.subs.showTooltip(!1)},a.hoverChallengesOn=function(){a.tooltips.challenges.showTooltip(!0)},a.hoverChallengesOff=function(){a.tooltips.challenges.showTooltip(!1)}},BoredPanda.AdvertiseController=function(){var a=this;a.name=ko.observable(""),a.surname=ko.observable(""),a.position=ko.observable(""),a.email=ko.observable(""),a.phone=ko.observable(""),a.company=ko.observable(""),a.industry=ko.observable(""),a.budget=ko.observable(""),a.country=ko.observable(""),a.description=ko.observable(""),a.loading=ko.observable(!1),a.successMessage=ko.observable(!1),a.errorMessage=ko.observable(""),a.error=ko.observable(!1),a.errorSend=ko.observable(!1),a.submit=function(){a.successMessage(!1),a.errorSend(!1),a.error(!1);var b=$.extend({},this);delete b.loading,delete b.successMessage,delete b.errorSend,delete b.error,delete b.errorMessage,delete b.submit;for(var c in b)if(""===b[c]())return a.error(!0),void a.errorMessage("Please fill all fields!");if(b.description().length<50)return a.error(!0),void a.errorMessage("Description must be at least 50 characters length");var d={action:"advertise_send_data",data:ko.toJSON(b)};a.loading(!0);var e=$.ajax({type:"POST",url:ajax_object.ajax_url,data:d,dataType:"json"});e.done(function(b){a.loading(!1),b.success===!0?a.successMessage(!0):(a.error(!0),a.errorMessage("Error sending email. Please try again."))})}},BoredPanda.Advertise={init:function(){var a=$("body.page-template-advertise section.contact");a.length>0&&(BoredPanda.advertise=new BoredPanda.AdvertiseController,ko.applyBindings(BoredPanda.advertise,a.get(0)))}},BoredPanda.Shares={init:function(){this.initShares(),this.mobileAdditionalShares(),this.mobileEmailShare(),this.youtubeSubscribe()},initShares:function(){$(".twitter-post-share").each(function(){$(this).click(function(){var a=$(this).data("share-url");window.open("https://www.twitter.com/share?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&via=boredpanda&text="+encodeURIComponent(document.title),"twitter-share-dialog","width=626,height=273")})}),$(".pinterest-post-share").each(function(){$(this).click(function(){var a=$(this).data("share-url");window.open("https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&media="+encodeURIComponent($('meta[property="og:image"]').attr("content"))+"&description="+encodeURIComponent(document.title),"pintrest-pin-dialog","width=750,height=328")})}),$(".tumblr-post-share").each(function(){var a=$(this).data("share-url");$(this).click(function(){window.open("http://tumblr.com/widgets/share/tool?posttype=photo&canonicalUrl="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&content="+encodeURIComponent($('meta[property="og:image"]').attr("content"))+"&title="+encodeURIComponent(document.title),"tumblr-share-dialog","width=540,height=600")})}),$(".reddit-post-share").each(function(){var a=$(this).data("share-url");$(this).click(function(){window.open("http://reddit.com/submit?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&title="+encodeURIComponent(document.title),"reddit-share-dialog","width=540,height=600")})}),$(".google-post-share").each(function(){var a=$(this).data("share-url");$(this).click(function(){window.open("https://plus.google.com/share?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&title="+encodeURIComponent(document.title),"google-share-dialog","width=540,height=600")})}),$(".post-shares-footer .email-footer-share").click(function(){var a=$(this).parent().find(".email-share-modal");a.show()})},mobileAdditionalShares:function(){$(".post-shares-footer.mobile .more-shares").click(function(){var a=$(".post-shares-footer.mobile .additional-shares");$("body").addClass("additional-shares-open"),a.show()}),$(".post-shares-footer.mobile .additional-shares .close").click(function(){$("body").removeClass("additional-shares-open"),$(".post-shares-footer.mobile .additional-shares").hide()}),$(".post-shares-footer.mobile .additional-shares").click(function(a){a.target===this&&($("body").removeClass("additional-shares-open"),$(".post-shares-footer.mobile .additional-shares").hide())})},mobileEmailShare:function(){$(".post-shares-footer.mobile .email-footer-share").click(function(){$(".post-shares-footer.mobile .shares-newsletter-sign-up").show()}),$(".post-shares-footer.mobile .shares-newsletter-sign-up .sign-up").click(function(){var a=$(this).parent().find("input.email").val();if(a){var b={action:"email_share_subscribe_newsletter",email:a},c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(){var a=$(".post-shares-footer.mobile .shares-newsletter-sign-up");a.html('<span class="title">Subscribed!</span>'),setTimeout(function(){a.remove()},2e3)})}})},youtubeSubscribe:function(){$(".youtube-subscribe-button").click(function(){var a=$(this).data("channelid");window.open("https://www.youtube.com/channel/"+a+"?sub_confirmation=1","youtube-subscribe-dialog","width=540,height=600")})}},$(document).ready(function(b){b("#read-more-inside-post").on("click",function(a){a.preventDefault(),b(this).hide(),b(".hiddenPostText").removeClass("hiddenPostText"),b("#content img").each(function(){var a=b(this).offset(),c=b.trim(b(this).attr("src")),d=document.getElementById(c),e=b(d);e.offset({top:a.top,left:a.left})})}),b(".facebook-shareable-url-for-staff").on("click",function(){b(this).select()}),b(window).on("beforeunload",function(){if(-1!==document.URL.indexOf("scrolltop")){var a=BoredPanda.Utils.getParameterByName("scrolltop");b(window).scrollTop(a)}}),b(".ml-subscribe-form-2341867 .ml-block-success").click(function(){b(this).parent().find(".newsletter-subscribe-post-bottom").show(),b(this).parent().find(".newsletter-spinner").hide(),b(this).parent().find(".error").hide(),b(this).parent().find(".email").removeClass("invalid-email")}),b(".ml-subscribe-form-2341867.newsletter-form .show-form").click(function(){b(this).closest("form").find(".input-group").show()}),a(),b(window).resize(function(){a()}),BoredPanda.init()}),BoredPanda.ResponsiveImagePlaceholders.init()}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.FooterControl={init:function(){$(document).width()>979||1===$(".single-image-template").length||(this.state={currentPost:null,activeFooter:null},this.isDebugMode=!1,this.update())},update:function(){this.bindInView(),BoredPanda.SocialIcons.genericSocialIcons()},bindInView:function(){var a=this;$("article.post .post-header, article.post .entry, article.post .shareable-image-block:last").bind("inview",function(b,c,d,e){if(a.debug("article inView: "+c+" "+d+" "+e),c){var f=$(this).closest("article.post").attr("data-post-name");void 0!==f&&(a.onPostChange(f,a.state.currentPost),a.onSectionChange("content"))}}),$(".related-posts").bind("inview",function(b,c,d,e){a.debug("related inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")}),$(".post-recommendations").bind("inview",function(b,c,d,e){a.debug("recommendations inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")}),$(".post-comments").bind("inview",function(b,c,d,e){a.debug("post comments inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")}),$(".trending-posts").bind("inview",function(b,c,d,e){a.debug("trending inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")})},showSelectedFooter:function(a,b){if(!("share"!==b&&"newsletter"!==b||$.cookie("utm_campaign"))){var c=".socialbar";"newsletter"===b&&(c=".newsletterbar"),this.debug("Changing footer: "+a+" "+b),this.state.activeFooter=b,"newsletter"===b&&(this.debug('article[data-post-name="'+a+'"] .fixed-bottom-overlay'+c),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay'+c).addClass("headroom--pinned"),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay').css("visibility","hidden"),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay'+c).css("visibility","visible")),"share"===b&&($(".fixed-bottom-overlay.headroom--pinned").removeClass("headroom--pinned"),$(".fixed-bottom-overlay").css("visibility","hidden"),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay.socialbar').css("visibility","visible"))}},onPostChange:function(a,b){a!==b&&(this.debug("Post change: "+b+" => "+a),this.state.currentPost=a,this.showSelectedFooter(a,"share"),BoredPanda.Tracking.trackStickyFooter(a))},onSectionChange:function(a){if("content"===a||"other"===a){var b=this.state.currentPost,c=this.state.activeFooter;"content"===a&&"share"!==c&&this.showSelectedFooter(b,"share")}},debug:function(a){this.isDebugMode&&console.log(a)}},$(document).ready(function(){BoredPanda.FooterControl.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Login={init:function(){BoredPanda.Login.form=new BoredPanda.Login.Form,$("#auth-modal").length>0?ko.applyBindings(BoredPanda.Login.form,$("#auth-modal")[0]):$(".auth").length>0&&ko.applyBindings(BoredPanda.Login.form,$(".auth")[0]),$(".login-url").on("click",function(a){a.preventDefault(),a.stopPropagation(),BoredPanda.Login.form.show()})},afterLoginCallback:void 0,afterLoginCallFunction:void 0,afterLogin:function(){function a(){var a=BoredPanda.Utils.wpAjax({action:"newsletter_prompt_show",user_id:BoredPanda.Login.form.accountActivation.userId()||0});a.done(function(a){a.data&&a.data.show===!0&&BoredPanda.Login.form.prompNewsletter()?(BoredPanda.Login.form.signupForm.visible()||$("#newsletter-prompt .newsletter-choice").addClass("signin"),BoredPanda.Login.form.loginForm.visible(!1),BoredPanda.Login.form.signupForm.visible(!1),BoredPanda.Login.form.forgotForm.visible(!1),BoredPanda.Login.form.newsletterPrompt.visible(!0),BoredPanda.Login.form.buffering(!1),BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.closeToHomepage(!1)):b.afterNewsletter()}),a.fail(function(){b.afterNewsletter()})}var b=this;BoredPanda.Tracking.trackInviteeClicks("login"),BoredPanda.Login.form.buffering(!0),ga("send","event","auth","login"),-1!==document.URL.indexOf("add-new-post")?BoredPanda.Tracking.trackEvent("Add Post Login Form","Logged In","success"):BoredPanda.Tracking.trackEvent("Login form","Logged In","success"),
BoredPanda.Config.isLoggedIn=!0,BoredPanda.Config.showSubmissionPopup=!1,"undefined"!=typeof BoredPanda.Config.loginFromAddPost&&BoredPanda.Config.loginFromAddPost===!0&&BoredPanda.Tracking.trackEvent("Add Post Form","Login Popup","click"),void 0!==b.afterLoginCallback?b.afterLoginCallback().always(a):a()},afterNewsletter:function(){var a,b;return BoredPanda.Login.form.accountActivation.userActive()===!1?void BoredPanda.Login.form.showAccountActivation():(a=""!==BoredPanda.Config.returnUrl?BoredPanda.Config.returnUrl:document.URL,b=-1!==document.URL.indexOf("auth")?a.slice(0,a.indexOf("?")):document.location.pathname,a.indexOf("add-new-post")>-1&&BoredPanda.Tracking.trackAddPostFormLoggedIn(),void 0!==BoredPanda.Login.afterLoginCallFunction?BoredPanda.Login.afterLoginCallFunction():void(a.indexOf("cid=")>-1?this.afterComment(a,b):a.indexOf("savevote")>-1?this.afterVote(b):a.indexOf("savecommentvote")>-1?this.afterCommentVote(b):a.indexOf("textsub")>-1?this.afterTextSubmission():a===document.URL||-1!==document.URL.indexOf("auth")?location.reload():window.location.replace(a)))},afterVote:function(a){var b=BoredPanda.Utils.getParameterByName("score",document.URL),c=BoredPanda.Utils.getParameterByName("post",document.URL);b=b||BoredPanda.Utils.getParameterByName("score",decodeURIComponent(document.URL)),c=c||BoredPanda.Utils.getParameterByName("post",decodeURIComponent(document.URL)),BoredPanda.Post.Votes.sendRequest(b,c).done(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your vote has been saved!</p>"),window.history.pushState("object or string","Title",a),location.reload()})},afterCommentVote:function(a){var b=BoredPanda.Utils.getParameterByName("score",document.URL),c=BoredPanda.Utils.getParameterByName("comment",document.URL);b=b||BoredPanda.Utils.getParameterByName("score",decodeURIComponent(document.URL)),c=c||BoredPanda.Utils.getParameterByName("comment",decodeURIComponent(document.URL)),BoredPanda.Comment.Votes.sendRequest(b,c).done(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your comment vote has been saved! </p>"),window.history.pushState("object or string","Title",a+"?voteSaved"),location.reload()})},afterTextSubmission:function(){var a=new BoredPanda.OpenList.AppendForm;a.publishTextSubmissionMobile(1).done(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your submission has been published! </p>"),location.reload()})},afterComment:function(a,b){var c=BoredPanda.Utils.getParameterByName("cid",a),d={action:"change_comment_author",comment_id:c},e=BoredPanda.Utils.wpAjax(d);e.always(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your comment has been saved! </p>"),window.history.pushState("object or string","Title",b+"?commentUpdated"),location.reload()})}},BoredPanda.Login.Form=function(){var a=this;a.buffering=ko.observable(!1),a.closeable=ko.observable(!0),a.closeToHomepage=ko.observable(!1),a.fieldErrors=ko.observable(!1),a.invalidEmail=ko.observable(!1),a.prompNewsletter=ko.observable(!0),a.showSocialLogin=ko.observable(!0),a.loginForm={title:ko.observable(BoredPanda.Translate.Signup.title),visible:ko.observable(!0),remember:ko.observable(!0),error:ko.observable(""),email:ko.observable(""),password:ko.observable("")},a.signupForm={visible:ko.observable(!1),error:ko.observable(""),fieldErrors:ko.observable(!1),email:ko.observable(""),fullName:ko.observable(""),password:ko.observable("")},a.forgotForm={visible:ko.observable(!1),error:ko.observable(""),errorCssClass:ko.observable(""),fieldErrors:ko.observable(!1),email:ko.observable("")},a.registerEmail={visible:ko.observable(!1),error:ko.observable(""),errorCssClass:ko.observable(""),fieldErrors:ko.observable(!1),email:ko.observable(""),userId:ko.observable(0)},a.accountActivation={visible:ko.observable(!1),error:ko.observable(""),errorCssClass:ko.observable(""),userId:ko.observable(0),userActive:ko.observable(!0)},a.newsletterPrompt=new BoredPanda.Newsletter,a.showLogin=function(){a.loginForm.visible(!0),a.signupForm.visible(!1),a.forgotForm.visible(!1),a.registerEmail.visible(!1),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.fieldErrors(!1)},a.showSignup=function(){a.loginForm.visible(!1),a.signupForm.visible(!0),a.forgotForm.visible(!1),a.registerEmail.visible(!1),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.fieldErrors(!1)},a.showForgot=function(){a.loginForm.visible(!1),a.signupForm.visible(!1),a.forgotForm.visible(!0),a.registerEmail.visible(!1),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.fieldErrors(!1)},a.showRegisterEmail=function(){a.loginForm.visible(!1),a.signupForm.visible(!1),a.forgotForm.visible(!1),a.registerEmail.visible(!0),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.closeable(!1),a.closeToHomepage(!0),a.fieldErrors(!1)},a.showAccountActivation=function(){a.loginForm.visible(!1),a.signupForm.visible(!1),a.forgotForm.visible(!1),a.registerEmail.visible(!1),a.newsletterPrompt.visible(!1),a.accountActivation.visible(!0),a.showSocialLogin(!1),a.buffering(!1),a.closeable(!0),a.closeToHomepage(!1),a.fieldErrors(!1)},a.accountActivated=function(){a.buffering(!0);var b={action:"contribution_is_account_active",user_id:a.accountActivation.userId()},c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"0"===b.success?(a.accountActivation.error(BoredPanda.Translate.Signup.account_not_active),a.accountActivation.errorCssClass("text-danger"),a.accountActivation.userActive(!1)):a.accountActivation.userActive(!0),BoredPanda.Login.afterNewsletter()})},a.resendActivationMail=function(){a.buffering(!0);var b={action:"contribution_resend_mail",user_id:a.accountActivation.userId(),redirect:document.URL},c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"1"===b.success?(a.accountActivation.error(BoredPanda.Translate.Signup.message_resent),a.accountActivation.errorCssClass("text-success text-success-new")):(a.accountActivation.error(BoredPanda.Translate.Signup.error_occurred),a.accountActivation.errorCssClass("text-danger"))})},a.show=function(b,c,d,e){if(BoredPanda.Tracking.trackEvent("Login form","open","impression"),$(document).width()<768){var f=location.protocol+"//"+location.hostname+"/auth";return f+=void 0!==b?"?returnurl="+encodeURIComponent(b):""!==BoredPanda.Config.returnUrl?"?returnurl="+encodeURIComponent(BoredPanda.Config.returnUrl):"?returnurl="+encodeURIComponent(document.URL),d&&(f+="&title="+encodeURIComponent(d)),void(window.location.href=f)}BoredPanda.Login.afterLoginCallback=c,d&&a.loginForm.title(d),e&&(BoredPanda.Login.afterLoginCallFunction=e),$("#auth-modal").modal()},$("#auth-modal").on("hide.bs.modal",function(){return a.closeable()}),a.isEmailValid=function(a){var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return b.test(a)},a.login=function(){if(a.loginForm.email().length<1||a.loginForm.password().length<1)return void a.fieldErrors(!0);a.fieldErrors(!1);var b={action:"contribution_login",user_login:a.loginForm.email(),user_password:a.loginForm.password(),remember_me:a.loginForm.remember()};a.buffering(!0);var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"0"===b.success?a.loginForm.error("Incorrect email or password"):"-1"===b.success?(BoredPanda.Login.form.accountActivation.userActive(!1),BoredPanda.Login.form.accountActivation.userId(b.user_id),BoredPanda.Login.afterLogin()):"-2"===b.success?a.loginForm.error("Your user is blocked because of too many invalid attempts to sign in."):BoredPanda.Login.afterLogin()}),c.fail(function(b,c,d){a.buffering(!1);var e={action:"log_login_fails",message:"Simple login error line 414: user email: "+a.loginForm.email()+". Error: "+d};$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"}),alert("Something wrong. Try again")})},a.fbLogin=function(){a.buffering(!0);try{FB.login(function(b){b.authResponse&&FB.api("/me","get",{fields:"email, first_name, last_name"},function(c){var d={action:"social_signup_callback",ID:c.id,AccessToken:b.authResponse.accessToken,Email:c.email,Username:c.username,FirstName:c.first_name,LastName:c.last_name,PictureURL:"http://graph.facebook.com/"+c.id+"/picture?type=large",ServiceName:"facebook"};if("undefined"==typeof c.id){var e={action:"log_social_login",loginResponse:b,response:c};$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"})}var f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:d,dataType:"json"});f.done(function(b){a.buffering(!1);var c=b.enter_email||0;c?(a.registerEmail.userId(b.user_id),a.showRegisterEmail()):BoredPanda.Login.afterLogin()}),f.fail(function(b,d,e){a.buffering(!1);var f={action:"log_login_fails",message:"Fb login error line 481: user email: "+c.email+". Error: "+e};$.ajax({type:"POST",url:ajax_object.ajax_url,data:f,dataType:"json"}),alert("Something wrong. Try again")})})},{scope:"public_profile,email"})}catch(b){a.buffering(!1);var c={action:"log_login_fails",message:"Facebook login error line 500. Error: "+b.message};$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"}),alert("Something wrong. Try again")}},a.googleLogin=function(){a.buffering(!0)},a.signup=function(){if(a.invalidEmail(!1),a.fieldErrors(!1),a.signupForm.error(""),!a.isEmailValid(a.signupForm.email())||a.signupForm.fullName().length<1||!BoredPanda.Utils.isPasswordSecure(a.signupForm.password()))return a.isEmailValid(a.signupForm.email())||a.invalidEmail(!0),BoredPanda.Utils.isPasswordSecure(a.signupForm.password())||a.signupForm.error(BoredPanda.Translate.Settings.password_strength_error),void a.fieldErrors(!0);var b={action:"contribution_signup",user_email:a.signupForm.email(),user_full_name:a.signupForm.fullName(),user_pass:a.signupForm.password(),redirect:document.URL};a.buffering(!0);var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"-2"===b.success?a.signupForm.error("Ooops! This email address has already been taken."):"0"===b.success?a.signupForm.error("Ooops! Something went wrong on our side. Please try again."):"1"===b.success?BoredPanda.Login.afterLogin():"-1"===b.success&&(BoredPanda.Login.form.accountActivation.userActive(!1),BoredPanda.Login.form.accountActivation.userId(b.user_id),BoredPanda.Login.afterLogin())}),c.fail(function(b,c,d){BoredPanda.Login.form.buffering(!1);var e={action:"log_login_fails",message:"Sign up error line 572. user email: "+a.signupForm.email()+". Error: "+d};$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"}),alert("Something wrong. Try again")})},a.forgot=function(){if(a.forgotForm.email().length<1)return void a.fieldErrors(!0);var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!b.test(a.forgotForm.email()))return a.invalidEmail(!0),void a.fieldErrors(!0);a.invalidEmail(!1),a.fieldErrors(!1);var c={action:"contribution_forgot_password",loginname:a.forgotForm.email()};a.buffering(!0);var d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});d.done(function(b){a.buffering(!1),"1"===b.success?(a.forgotForm.error("A password recovery link has been sent to your inbox."),a.forgotForm.errorCssClass("text-success text-success-new")):"-1"===b.success?(a.forgotForm.error("Ooops! It looks like you entered an invalid email address."),a.forgotForm.errorCssClass("text-danger")):(a.forgotForm.error("Ooops! Something went wrong on our side. Please try again."),a.forgotForm.errorCssClass("text-danger"))})},a.registerEmailSubmit=function(){if(a.registerEmail.email().length<1)return void a.fieldErrors(!0);var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!b.test(a.registerEmail.email()))return a.invalidEmail(!0),void a.fieldErrors(!0);a.invalidEmail(!1),a.fieldErrors(!1);var c={action:"contribution_update_email",email:a.registerEmail.email(),user_id:a.registerEmail.userId()};a.buffering(!0);var d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});d.done(function(){BoredPanda.Login.afterNewsletter()})},-1===document.URL.indexOf("add-new-post")||BoredPanda.Config.isLoggedIn||(a.closeable(!1),a.closeToHomepage(!1),a.prompNewsletter(!1))},window.googleInitCallback=function(){gapi.load("client:auth2",{callback:function(){gapi.client.init({clientId:BoredPanda.Config.googleClientId,scope:"https://www.googleapis.com/auth/plus.login"}).then(function(a){},function(a){BoredPanda.Login.form.buffering(!1)})},onerror:function(){BoredPanda.Login.form.buffering(!1)}}),$(".auth .google-login").click(function(){try{gapi.auth2.getAuthInstance().signIn().then(function(a){var b=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();BoredPanda.Login.Google.loadProfileCallback(b)},function(a){console.log(a),BoredPanda.Login.form.buffering(!1)})}catch(a){BoredPanda.Login.form.buffering(!1);var b={action:"log_login_fails",message:"Google login error line 710. Error: "+a.message};$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"}),alert("Something wrong. Try again")}})},window.checkGAPI=function(){"undefined"!=typeof gapi?window.googleInitCallback():setTimeout(function(){window.checkGAPI()},500)},BoredPanda.Login.Google={loadProfileCallback:function(a){var b=a.getImageUrl();b=b.replace("/s96-","/s200-");var c={action:"social_signup_callback",AccessToken:gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token,ID:a.getId(),Email:a.getEmail(),DisplayName:a.getName(),PictureURL:b,ServiceName:"google"},d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});d.done(function(){BoredPanda.Login.afterLogin(),BoredPanda.Login.form.buffering(!1)}),d.fail(function(b,c,d){BoredPanda.Login.form.buffering(!1);var e={action:"log_login_fails",message:"Google login error line 770: user email: "+a.getEmail()+". Error: "+d};$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"}),alert("Something wrong. Try again")})}},$(document).ready(function(){BoredPanda.Config.isLoggedIn||(BoredPanda.Login.init(),window.checkGAPI())})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.NotificationSettings||{};a=function(a){var b=this;b.showMessage=ko.observable(!1),b.options=ko.observableArray(),b._lines={n_post_comment:"Email me when somebody comments on my post for the first time",n_comment_reply:"Email me when somebody replies to my comment for the first time",n_open_list_author:"Email me when somebody contributes to an open list I created",n_open_list_contributor:"Email me about my open list contribution success",n_post_author:"Email me about my story success"},b.contactAuthor=ko.observable(a.find("#contact-author").data("checked")===!0);var c=BoredPanda.Utils.nAjax("GET","/user_settings?client=email");c.done(function(a){var c=a.data;for(var d in c.email)b.options.push({val:c.email[d],text:b._lines[d],key:d})}),b.save=function(){for(var a={},c=0;c<b.options().length;c++)a[b.options()[c].key]=b.options()[c].val;var d=BoredPanda.Utils.nAjax("POST","/user_settings",JSON.stringify({email:a})),e=BoredPanda.Utils.wpAjax({action:"save_notification_settings",settings:{allow_contact_author:b.contactAuthor()}});d.done(function(){e.done(function(){b.showMessage(!0),setTimeout(function(){b.showMessage(!1)},5e3)})})}},$(document).ready(function(b){b("#notification-settings").length>0&&(BoredPanda.Config.isLoggedIn?(BoredPanda.notificationSettings=new a(b("#notification-settings")),ko.applyBindings(BoredPanda.notificationSettings,b("#notification-settings")[0])):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,void 0,"Please log in to continue")))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Comment={uploader:[],init:function(){this.ui(),BoredPanda.Comment.Votes.init(),this.bindCommentRepliesShowing(),this.bindHiddenCommentsShowing(),this.bindCommentInputFocus(),this.bindMoreCommentsRemove(),this.initCommentImages(),this.initCommentActions(),BoredPanda.Config.isStaffMember&&this.bindCommentMarkSpam()},bindCommentMarkSpam:function(){BoredPanda.Config.isStaffMember&&$(document).on("click",".mark-comment-spam",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"mark_comment_spam",comment_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.parent().parent().parent().remove()})}})},bindCommentInputFocus:function(){$(".comment-text").focus(function(){$(this).parent().parent().find(".post-comment").addClass("active")}),$(".comment-text").focusout(function(){0===$(this).val().length&&$(this).parent().parent().find(".post-comment").removeClass("active")})},bindMoreCommentsRemove:function(){$(".load-more-replies").each(function(){$(this).parent().parent().parent().find(".comment").length<2&&$(this).remove()})},bindCommentRepliesShowing:function(){$(document).on("click",".load-more-replies",function(){var a=$(this).attr("data-comment-id");$(".comment[data-comment-id="+a+"] .comment").each(function(){$(this).show()}),$(this).remove()})},bindHiddenCommentsShowing:function(){$(document).on("click",".show-hidden-comment",function(){$(this).parent().parent().find("p").show(),$(this).parent().parent().find(".links").show(),$(this).parent().parent().find(".hidden-comment").remove()})},initCommentActions:function(){$(document).on("click",".comment-action.edit-comment",function(){$(this).closest(".comment-block").find("p").hide(),$(this).closest(".comment-block").find(".comment-edit").show()}),$(document).on("click",".comment-action.delete-comment",function(){if(!confirm("Are you sure want to delete this comment?"))return!1;var a=$(this),b=$(this).data("comment-id"),c="<span class='deleted'>This comment has been deleted.</span>",d={action:"admin_update_comment",comment_id:b,cus_action:"delete",post_id:BoredPanda.Config.postId,comment:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(b){b.success!==!1?a.closest(".comment-block").find("p").html(c):alert(b.message||"Error deleting comment!")})}),$(document).on("click",".comment-edit .save-comment",function(){var a=$(this).closest(".comment-edit"),b=a.find("textarea").val(),c=a.closest(".comment").data("comment-id"),d={action:"admin_update_comment",comment_id:c,post_id:BoredPanda.Config.postId,comment:b},e=BoredPanda.Utils.wpAjax(d);e.done(function(c){c.success!==!1?(a.hide(),a.closest(".comment-block").find("p").text(b),a.closest(".comment-block").find("p").show()):alert(c.message||"Error saving comment!")})})},ui:function(){var a=this,b=$(".post");b.delegate(".comment-text","focus",function(){var a=$(this).closest(".comment-add-block");a.find(".comment-text-block").addClass("expanded"),a.find(".post-comment").show()}),b.delegate(".comment-reply","click",function(b){b.preventDefault(),$(this).parent().parent().find(".load-more-replies").click();var c=$(this).parents(".comment-feature");c.find(".comment-container .comment-add-block").remove();var d=$(this).parents(".comment").first(),e=$(".comment-add-block").first().clone(),f=d.find(".child-comments").first();e.find(".comment-text-block").addClass("expanded"),e.find(".comment-text-block").addClass("reply-comment-block"),e.find(".comment-text").val(""),f.length>0?e.insertBefore(f):e.appendTo(d),a.bindCommentInputFocus(),e.find(".comment-image").remove(),e.find(".comment-upload-pic").attr("id",""),BoredPanda.Config.isTabletWidth||e.find(".comment-upload-pic").show(),e.find(".upload-comment-image").hide(),a.initImageUploader(e.find(".comment-upload-pic").get(0))}),b.delegate(".post-comment","click",function(b){b.preventDefault();var c=$(this).parents(".comment-add-block").first(),d=$(this).closest(".comment-feature"),e=!1,f=c.find(".comment-image"),g="";f.length>0&&(g=f.find(".comment-background-image").attr("data-image"));var h=!1;if(0===c.find(".comment-text").val().length&&0===g.length?(h=!0,c.find(".comment-text").addClass("elementErrorMode")):c.find(".comment-text").removeClass("elementErrorMode"),h!==!0){var i={action:"add_comment",post_id:d.attr("data-post-id"),comment_text:c.find(".comment-text").val(),comment_image:g,depth:c.parent().hasClass("depth-1")?2:c.parent().hasClass("depth-2")?3:1},j=$(this).parents(".comment");j.length>0&&(i.parent_id=j.first().attr("data-comment-id"),e=!0),!e&&$(this).closest(".open-list-comments").length>0&&BoredPanda.Tracking.trackOpenListCommentSubmit(),c.find(".comment-text").val(""),c.find(".post-comment").css({background:"",color:""}),e?a.showLoadingBarAt(c):d.find(".posting-comment-spinner").show();var k=$.ajax({type:"POST",url:ajax_object.ajax_url,data:i,dataType:"json"});k.done(function(b){if(e?(d.removeClass("in-open-list"),a.hideLoadingBarAt(c.parent())):d.find(".posting-comment-spinner").hide(),!BoredPanda.Config.isLoggedIn){var f="";return 1===b.comment_in_cookie&&(f=window.location.pathname+"?cid="+b.comment_in_cookie,window.history.pushState("object or string","Title",f)),void BoredPanda.Login.form.show(f,void 0,"Please log in to comment")}if(e){var g,h=c.parent().find(".child-comments");h.length>0?(g=$(b.comment_html),g.prependTo(h)):(g=$('<section class="child-comments comments-list">'+b.comment_html+"</section>"),g.insertBefore(c)),c.hide()}else d.find(".comment-container").prepend(b.comment_html);$(".remove-comment-image").trigger("click")}),k.fail(function(a){"undefined"!=typeof a.responseText&&(c.append('<div class="comment-error">'+a.responseText+"</div>"),setTimeout(function(){$(".comment-error").remove()},5e3)),d.find(".posting-comment-spinner").hide()})}}),b.delegate(".expand-comments","click",function(b){var c=$(this);c.parent().find(".load-more-spinner").show(),c.hide(),b.preventDefault();var d=$(this).closest(".comment-feature"),e=parseInt(d.attr("data-start"),10),f=parseInt(d.attr("data-comments-to-load"),10);d.attr("data-start",e+f);var g="false";"true"===d.attr("data-open-list")&&(g="true");var h={action:"get_post_comments",post_id:d.attr("data-post-id"),start:e,limit:f,openList:g},i=$.ajax({type:"POST",url:ajax_object.ajax_url,data:h,dataType:"json"});i.done(function(b){d.removeClass("in-open-list"),c.hide();var g=parseInt(b.listed_count,10);f>g?c.hide():(c.find("span").html("View more comments"),c.show()),b.comment_html.length&&b.comment_html.length>0?(0===e&&d.find(".comment-container").html(""),d.find(".comment-container").append(b.comment_html)):c.hide(),$(".load-more-spinner").hide(),d.find(".view-more-replies").hide(),a.bindMoreCommentsRemove(),d.addClass("show-images")})}),b.delegate(".view-more-replies","click",function(b){var c=$(this);c.parent().find(".load-more-spinner").show(),c.hide(),b.preventDefault();var d=$(this).closest(".comment-feature"),e=parseInt(d.attr("data-start"),10),f=parseInt(d.attr("data-comments-to-load"),10);d.attr("data-start",e+f);var g={action:"get_post_comments",post_id:d.attr("data-post-id"),start:e,limit:f},h=$.ajax({type:"POST",url:ajax_object.ajax_url,data:g,dataType:"json"});h.done(function(b){d.removeClass("in-open-list"),c.hide(),b.comment_html.length&&b.comment_html.length>0&&(0===e&&d.find(".comment-container").html(""),d.find(".comment-container").append($(b.comment_html)[0]),d.find(".comment-container .depth-2").show()),$(".load-more-spinner").hide(),a.bindMoreCommentsRemove(),d.addClass("show-images")})}),b.delegate(".comment-text-block","keyup",function(a){var b=$(a.target),c=$(b).closest(".comment-submit-block").find(".post-comment");if(b.val()){var d=b.innerHeight(),e=Math.min(b.prop("scrollHeight"),68);d!==e&&(b.innerHeight(e+"px"),c.height(e+2+"px"),c.css("line-height",e+2+"px"))}else b.removeAttr("style"),c.removeAttr("style")})},showLoadingBarAt:function(a){var b=$(".comment-container-loading").first();b.clone().appendTo($(a)),$(a).find(".comment-container-loading").show()},hideLoadingBarAt:function(a){$(a).find(".comment-container-loading").hide()},initCommentImages:function(){var a=this;a.initCommentImagesPopup(),BoredPanda.Config.isTabletWidth||$(".comment-upload-pic").each(function(b,c){var d=c;a.initImageUploader(d)})},initCommentImagesPopup:function(){$(document).on("click",".comment-image-link, .view-comment-image-link",function(a){if($(window).width()>979){a.preventDefault();var b=$(this).attr("href");BoredPanda.Comment.ImageModal.showImageModal(b)}}),$(document).on("click","#comment-image-modal .close-icon, #comment-image-modal",function(){BoredPanda.Comment.ImageModal.hideImageModal()}),$(document).on("click","#comment-image-modal img",function(a){a.stopPropagation()})},destroyCommentImages:function(){var a,b=this.uploader.length;for(a=0;b>a;a++)this.uploader[a].uploader.destroy()},initImageUploader:function(a){var b=this,c={selector:a};b.uploader.push(new BoredPanda.Comment.ImageUploader(c))}},BoredPanda.Comment.ImageUploader=function(a){var b=this;b.selector=$(a.selector),b.selector.attr("id",BoredPanda.Utils.generateRandomString(10)),b.commentBlock=b.selector.parent(),b.spinner=b.commentBlock.find(".spinner.upload-comment-image"),b.getImageHtml=function(a){var b=BoredPanda.Utils.annotatePath(a.image_url,"__605");return'<div class="comment-image"><div class="remove-comment-image"><i></i></div><div class="comment-background-image" style="background-image: url('+b+');" data-image="'+a.image_url+'"></div></div>'},b.showUploadError=function(){var a=b.selector.parents(".comment-add-block").first();a.append('<div class="comment-error">Something went wrong... Please try again!</div>'),setTimeout(function(){$(".comment-error").remove()},5e3)};var c=function(){b.uploader=new plupload.Uploader({runtimes:"html5,html4",browse_button:b.selector.attr("id"),url:ajax_object.ajax_url,max_file_size:"4mb",multipart_params:{action:"contribution_submit_upload",title:""},unique_names:!1,multi_selection:!1,init:{FilesAdded:function(a){b.selector.hide(),b.spinner.show(),a.start()}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]}),b.uploader.bind("FileUploaded",function(a,c,d){var e=$.parseJSON(d.response);b.spinner.hide(),void 0!==e.error?(b.showUploadError(),b.selector.show()):b.commentBlock.append(b.getImageHtml(e))}),b.uploader.bind("Error",function(){b.showUploadError(),b.selector.show(),b.spinner.hide()}),b.uploader.init(),$(document).on("click",".remove-comment-image",function(){$(this).parent().parent().find(".comment-image").remove(),b.selector.show()})};c()},BoredPanda.Comment.Votes={init:function(){this.registerVotes(),this.votesFromAMPPage()},registerVotes:function(){var a=this;$(document).on("click",".vote-panel.vote-comment .btn",function(){var b=$(this),c=$(b.closest(".vote").siblings(".vote").find(".btn")),d=b.hasClass("btn-up")?1:-1,e=b.parents(".comment").first(),f=e.attr("data-comment-id"),g=d;if(!BoredPanda.Config.isLoggedIn){var h=window.location.pathname+"?afterlogin=savecommentvote&comment="+f+"&score="+d;return window.history.pushState("Vote","Vote",h),void BoredPanda.Login.form.show(h,void 0,"Please log in to vote")}BoredPanda.Config.isSuperVoter||(b.hasClass("active")?g=-d:c.hasClass("active")&&(g*=2,c.removeClass("active")),b.toggleClass("active")),a.updatePoints(b.closest(".vote").siblings(".points"),g),a.sendRequest(d,f)})},updatePoints:function(a,b){var c=$(a).data("points")+b;$(a).data("points",c),1===c||-1===c?$(a).html(c+" <span>point</span>"):$(a).html(c+" <span>points</span>")},sendRequest:function(a,b){var c={action:"vote_for_comment",score:a,comment_id:b,post_id:BoredPanda.Config.postId};return BoredPanda.Utils.wpAjax(c)},votesFromAMPPage:function(){var a=""!==BoredPanda.Config.returnUrl?BoredPanda.Config.returnUrl:document.URL;if(a.indexOf("ampcommentvote")>-1&&a.indexOf("savecommentvote")>-1)if(BoredPanda.Config.isLoggedIn){var b;b=-1!==document.URL.indexOf("auth")?a.slice(0,a.indexOf("?")):document.location.pathname,BoredPanda.Login.afterCommentVote(b)}else BoredPanda.Login.form.show(a,void 0,BoredPanda.Translate.Signup.please_login_vote)}},BoredPanda.Comment.ImageModal={showImageModal:function(a){function b(){var a=$("#comment-image-modal img").width(),c=$("#comment-image-modal img").height();return 0===a||0===c?void setTimeout(b,100):($("#comment-image-modal .comment-image-full-size").css("width",a+"px"),$("#comment-image-modal .comment-image-full-size").css("margin-top",c/-2+"px"),$("#comment-image-modal .comment-image-full-size img").css("visibility","visible"),void $("#comment-image-modal .close-icon").show())}var c=$(window).height()-100;$("body").addClass("no-scroll"),$("#comment-image-modal img").attr("src",a),$("#comment-image-modal img").css("max-height",c+"px"),$("#comment-image-modal").show(),b()},hideImageModal:function(){$("body").removeClass("no-scroll"),$("#comment-image-modal").hide(),$("#comment-image-modal img").attr("src",""),$("#comment-image-modal img").attr("style",""),$("#comment-image-modal .comment-image-full-size").attr("style","")}},$(document).ready(function(){BoredPanda.Config.postId>0&&BoredPanda.Comment.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.AddPost={},BoredPanda.AddPost.Utils={},BoredPanda.AddPost.Utils.closestImageSize=function(a){return a=parseInt(a,10),650>a?605:a>=650&&780>=a?700:880},BoredPanda.AddPost.Utils.editImageModalAutofit=function(){var a,b,c,d=$(window).height(),e=d-100;return $(".edit-image-content .image-heading textarea").change(),$(".edit-image-content .image-description textarea").change(),$(".edit-image-modal").attr("style",""),$(".edit-image-modal .image-content").attr("style",""),$(".edit-image-modal .description-content").attr("style",""),$(".edit-image-content .image-description").attr("style",""),$(".edit-image-modal .image-content img").attr("style",""),$(window).width()<980?void $(".edit-image-modal .image-content").height($(".edit-image-modal .image-content img").height()):($(".edit-image-modal").height(e),$(".edit-image-modal .image-content").height(e),$(".edit-image-modal .description-content").height(e),$(".edit-image-content .image-description").css("min-height",e-($(".edit-image-content .image-heading").height()+40)-($(".edit-image-content .image-source").height()+30)-114+"px"),a=$(".edit-image-modal .image-content img").height(),b=$(".edit-image-modal .image-content img").width(),a>e&&(c=e/a,$(".edit-image-modal .image-content img").width(b*c),$(".edit-image-modal .image-content img").height(e)),$(".edit-image-modal .image-content img").css("margin-top",(e-$(".edit-image-modal .image-content img").height())/2+"px"),void $(".edit-image-content .image-heading textarea, .edit-image-content .image-description textarea").on("input",function(){$(window).width()<980||$(".edit-image-content .image-description").css("min-height",e-($(".edit-image-content .image-heading").height()+40)-($(".edit-image-content .image-source").height()+30)-114+"px")}))},BoredPanda.AddPost.CategoriesDropdown=function(a){var b=this;b.visible=ko.observable(!1),b.termId=BoredPanda.Config.isStaffMember?ko.observableArray([]):ko.observable(""),b.category=ko.observable(""),b.categories=ko.observableArray(a),b.show=function(){b.visible(!0)},b.hide=function(){b.visible(!1)},b.choose=function(a){if(BoredPanda.Config.isStaffMember){b.initCategorySelection(a);var c=[];b.termId([]);for(var d=0;d<b.categories().length;d++)b.categories()[d].term_id===a.term_id&&b.categories()[d].selected(!b.categories()[d].selected()),b.categories()[d].selected()&&(b.termId().push(b.categories()[d].term_id),c.push(b.categories()[d].name));b.category(c.join())}else b.hide(),b.termId(a.term_id),b.category(a.name),BoredPanda.Tracking.trackAddPostCategories()},b.initCategorySelection=function(a){if($.isArray(a.term_id))for(var c=0;c<b.categories().length;c++)$.inArray(b.categories()[c].term_id,a.term_id)>-1&&b.categories()[c].selected(!0)},b.getSelectedCategory=function(){return{termId:b.termId(),name:b.category()}},$(document).on("click",function(){b.hide()})},BoredPanda.AddPost.ImageUploader=function(a){var b=this;b.loading=a.loader,b.errorMessage=a.error,b.runtime=ko.observable(""),b.dropEvent=ko.observable(""),b.photoCount=0,b.photosUploaded=0,
b.errorShown=!0,b.gaLogging="Browse";var c=function(a){if(b.uploader=new plupload.Uploader({runtimes:"html5,html4",browse_button:a.browse_button,drop_element:a.drop_element,url:ajax_object.ajax_url,max_file_size:"20mb",multipart_params:{action:"contribution_submit_upload",title:"none"},unique_names:!1,init:{FilesAdded:function(c){b.errorShown?b.errorMessage(""):b.errorMessage(BoredPanda.Translate.AddPost.some_images_failed_to_upload),b.loading(!0),b.photoCount=c.files.length,b.photosUploaded=0,c.settings.multipart_params.title=a.title(),c.start(),BoredPanda.Config.isStaffMember||(ga("send","event","Add Post Form","Image Upload",b.gaLogging+(b.changeBrowseButton===!0?" First Step":" Second Step")),b.gaLogging="Browse")}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]}),b.uploader.bind("FileUploaded",function(c,d,e){var f=$.parseJSON(e.response);f.original_width<600&&-1===f.image_url.indexOf(".gif")?(1===b.photoCount||a.singleImageUploader?b.errorMessage(BoredPanda.Translate.AddPost.uploader_image_too_small):b.errorMessage(BoredPanda.Translate.AddPost.some_images_failed_to_upload_image_width),BoredPanda.Tracking.trackImageTooSmallError()):void 0!==f.error?(BoredPanda.Config.isStaffMember&&console.log("Upload error: "+f.error),b.errorMessage(BoredPanda.Translate.AddPost.uploader_strange_things_happened)):(a.fileUploaded(f),BoredPanda.AddPost.LeavePopup.change(),b.photosUploaded++)}),b.uploader.bind("UploadComplete",function(){b.loading(!1),BoredPanda.Config.isStaffMember||BoredPanda.Tracking.trackAddPostImage(),b.errorShown=!0}),b.uploader.bind("Error",function(a,c){b.loading(!1);var d="";"File size error."===c.message?d=BoredPanda.Translate.AddPost.uploader_image_too_large:"File extension error."===c.message&&(d=BoredPanda.Translate.AddPost.uploader_not_allowed_image_format),b.errorMessage(d),b.errorShown=!1}),b.uploader.init(),b.runtime(b.uploader.runtime),"html5"===b.runtime()){var c=0;$("#"+a.drop_element).bind({dragenter:function(){c++,b.dropEvent("dragenter"),b.gaLogging="Drag"},dragleave:function(){c--,0===c&&(b.dropEvent("dragleave"),b.gaLogging="Drag")},drop:function(){b.dropEvent("drop")}})}};c(a)},BoredPanda.AddPost.ImageViewModel=function(){var a=this;a.headline=ko.observable(""),a.description=ko.observable(""),a.source={type:ko.observable("nosource"),url:ko.observable(""),author:ko.observable("")},a.source_1={type:ko.observable("nosource"),url:ko.observable(""),author:ko.observable("")},a.image={mediaUrl:ko.observable(""),originalUrl:ko.observable(""),originalWidth:ko.observable(""),closestWidth:ko.observable(""),sized:ko.observable(""),scaled:ko.observable(!1)},a.slider={rightImageUrl:ko.observable(""),flip:ko.observable("")},a.externalPoints=ko.observable(""),a.isHtml=ko.observable(!1),a.html=ko.observable(""),a.videoUrl=ko.observable(""),a.videoType=ko.observable(""),a.imageErrors={headline:ko.observable(!1)},a.hover=ko.observable(!1),a.hoverError=ko.observable(!1),a.init=function(c,d,e){a.image.mediaUrl(c),a.image.originalUrl(d),a.image.sized(b(d)),a.image.originalWidth(e),a.image.closestWidth(BoredPanda.AddPost.Utils.closestImageSize(e))},a.setHtmlBlock=function(){a.isHtml(!0),a.html("")},a.setVideo=function(b,c){a.videoUrl(b),a.videoType(c)},a.initFromJson=function(c){a.headline(c.headline),a.description(c.description),a.source.type(c.source.type),a.source.url(c.source.url),a.source.author(c.source.author),"undefined"!=typeof c.source_1&&(a.source_1.type(c.source_1.type),a.source_1.url(c.source_1.url),a.source_1.author(c.source_1.author)),c.dimensions&&(a.dimensions=c.dimensions),"undefined"!=typeof c.isHtml&&a.isHtml(c.isHtml),"undefined"!=typeof c.externalPoints&&a.externalPoints(c.externalPoints),"undefined"!=typeof c.html&&a.html(c.html),"undefined"!=typeof c.videoUrl&&a.videoUrl(c.videoUrl),"undefined"!=typeof c.videoType&&a.videoType(c.videoType),"undefined"!=typeof c.slider&&(a.slider.rightImageUrl(c.slider.rightImageUrl),a.slider.flip(c.slider.flip));var d=a.image;d.mediaUrl(c.image.mediaUrl),d.originalUrl(c.image.originalUrl),d.sized(c.image.sized||b(c.image.originalUrl)),d.originalWidth(c.image.originalWidth),d.closestWidth(BoredPanda.AddPost.Utils.closestImageSize(c.image.originalWidth))},a.isCover=ko.computed({read:function(){return BoredPanda.AddPost.viewModel.post.coverImage()===a.image.originalUrl()},owner:!1});var b=function(a){return"undefined"!=typeof a&&(a=a.replace(".jpg","__700.jpg")),a}},BoredPanda.AddPost.viewModel=null,BoredPanda.AddPost.ViewModel=function(){var a=this;a.errors={title:ko.observable(!1),description:ko.observable(!1),categories:ko.observable(!1),tags:ko.observable(!1),noImages:ko.observable(!1),preview:ko.observable(!1),imageTitle:ko.observable(!1),videoUrl:ko.observable(!1),embedUrl:ko.observable(!1),slider:ko.observable(!1)},a.slider={left:ko.observable(""),right:ko.observable(""),flip:ko.observable(!1)},a.loadingSpinner=ko.observable(!1),a.uploaderError=ko.observable(""),a.savedDraft=ko.observable(!1),a.topSubmitTabVisible=ko.observable("photo"),a.bottomSubmitTabVisible=ko.observable("photo"),a.videoUrl=ko.observable(""),a.embedUrl=ko.observable(""),a.multipleEmbedsUrl=ko.observable(""),a.tweetConversation=ko.observable(!1),a.tweetInFeed=ko.observable(!1),a.watermark=ko.observable(!0),a.tweetSingleImage=ko.observable(!1),a.singleImage=ko.observable(!1),a.hideCaption=ko.observable(!1),a.imageUploaded=ko.observable(!1),a.challengeImageSrc=ko.observable(""),a.isPostLocked=ko.observable(!1),a.cropperImages=ko.observableArray([]),a.tooltips={title:{focused:ko.observable(!1),type:ko.observable("dafault"),showTooltip:ko.observable(!0)},description:{focused:ko.observable(!1),type:ko.observable("dafault"),showTooltip:ko.observable(!0)}},a.titleTooltipVisible=ko.computed({read:function(){return a.tooltips.title.showTooltip()&&a.tooltips.title.focused()},owner:!1}),a.descriptionTooltipVisible=ko.computed({read:function(){return a.tooltips.description.showTooltip()&&a.tooltips.description.focused()},owner:!1}),a.submitVideo=function(b){b=b||"bottom";var c=function(){a.loadingSpinner(!1),a.videoUrl(""),a.topSubmitTabVisible("photo"),a.bottomSubmitTabVisible("photo")};if(a.errors.videoUrl(!1),""===a.videoUrl())return void a.errors.videoUrl(!0);a.loadingSpinner(!0);var d={action:"parse_video_url",video_url:a.videoUrl()};BoredPanda.Utils.wpAjax(d).done(function(d){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&!BoredPanda.Config.isProMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var e=BoredPanda.Utils.annotatePath(d.image_url,"__200"),f=new BoredPanda.AddPost.ImageViewModel;f.init(e,d.image_url,d.original_width),f.setVideo(d.video_url,d.video_type),f.dimensions=d.dimensions,BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&f.headline(a.post.title()),"top"===b?a.post.images.unshift(f):"bottom"===b&&a.post.images.push(f),a.cropperImages.push(f),a.post.coverImage().length<=0&&(a.post.coverImage(f.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),c()}}).error(function(){a.errors.videoUrl(!0),c()})},a.submitEmbed=function(b,c,d){b=b||"bottom";var e=function(){a.loadingSpinner(!1),a.embedUrl(""),a.tweetConversation(!1),a.tweetInFeed(!1),a.watermark(!0),a.topSubmitTabVisible("photo"),a.bottomSubmitTabVisible("photo")};if(a.errors.embedUrl(!1),""===a.embedUrl())return void a.errors.embedUrl(!0);a.loadingSpinner(!0);var f={action:"parse_embed_url",embed_url:a.embedUrl(),single_image:a.singleImage(),hide_caption:a.hideCaption(),conversation:a.tweetConversation(),watermark:a.watermark(),tweet_single_image:a.tweetSingleImage(),not_embed:a.tweetInFeed()},g=BoredPanda.Utils.wpAjax(f).done(function(c){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&!BoredPanda.Config.isProMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var f=BoredPanda.Utils.annotatePath(c.image_url,"__200"),g=new BoredPanda.AddPost.ImageViewModel;g.init(f,c.image_url,c.original_width),g.dimensions=c.dimensions,g.source.type("url"),g.source.url(a.embedUrl()),g.source.author(c.embed_author),g.headline(c.title),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&g.headline(a.post.title()),"top"===b?a.post.images.unshift(g):"bottom"===b&&a.post.images.push(g),a.cropperImages.push(g),a.post.coverImage().length<=0&&(a.post.coverImage(g.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),d?(a.topSubmitTabVisible("photo"),a.bottomSubmitTabVisible("photo"),a.loadingSpinner(!1)):e()}}).error(function(){c||a.errors.embedUrl(!0),e()});return g},a.submitMultipleEmbeds=function(b){var c=a.multipleEmbedsUrl().split(/\s+/g),d=function(){if(c.length>0)if(a.embedUrl(c.pop()),a.embedUrl()){var e=a.submitEmbed(b,!1,!0);e.done(d)}else d();else a.multipleEmbedsUrl("")};d()},a.parseExternalPhoto=function(b){if(b=b||"bottom",a.resetErrors(),a.post.externalPhoto()){a.loadingSpinner(!0);var c={action:"upload_external_photo",url:a.post.externalPhoto()};$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"}).done(function(c){if(c.success===!1)return void a.loadingSpinner(!1);var d=BoredPanda.Utils.annotatePath(c.data.image.image_url,"__200"),e=new BoredPanda.AddPost.ImageViewModel;e.init(d,c.data.image.image_url,c.data.image.original_width),e.dimensions=c.data.image.dimensions,e.headline(c.data.imageData.title),e.source.type("url"),e.source.url(a.post.externalPhoto()),e.source.author(c.data.imageData.author),e.image.scaled(c.data.image.scaled),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&e.headline(a.post.title()),"undefined"!=typeof c.data.imageData.points&&e.externalPoints(c.data.imageData.points),"top"===b?a.post.images.unshift(e):"bottom"===b&&a.post.images.push(e),a.cropperImages.push(e),a.post.coverImage().length<=0&&(a.post.coverImage(e.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),a.loadingSpinner(!1),a.post.externalPhoto("")}).error(function(){a.loadingSpinner(!1)})}},a.submitSlider=function(b){b=b||"bottom";var c=function(){a.loadingSpinner(!1),a.slider.flip(!1),a.slider.left(""),a.slider.right(""),a.topSubmitTabVisible("photo"),a.bottomSubmitTabVisible("photo")};if(a.errors.slider(!1),""===a.slider.left()||""===a.slider.right())return void a.errors.slider(!0);a.loadingSpinner(!0);var d=a.slider.left(),e=BoredPanda.Utils.annotatePath(d.image_url,"__200"),f=new BoredPanda.AddPost.ImageViewModel;f.init(e,d.image_url,d.original_width),f.dimensions=d.dimensions,f.slider.rightImageUrl(a.slider.right().image_url),f.slider.flip(a.slider.flip()),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&f.headline(a.post.title()),"top"===b?a.post.images.unshift(f):"bottom"===b&&a.post.images.push(f),a.cropperImages.push(f);var g=new BoredPanda.AddPost.ImageViewModel;e=BoredPanda.Utils.annotatePath(a.slider.right().image_url,"__200"),g.init(e,a.slider.right().image_url,a.slider.right().original_width),a.post.sliderImages.push(g),a.cropperImages.push(g),a.post.coverImage().length<=0&&(a.post.coverImage(f.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.post.type("list"),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),c()},a.hideTooltip=function(b){a.tooltips[b].showTooltip(!1)},a.resetErrors=function(){for(var b in a.errors)a.errors[b](!1)},a.validate=function(){a.resetErrors(),0===a.post.title().length&&a.errors.title(!0),0!==a.post.description().length||BoredPanda.Config.isStaffMember||a.errors.description(!0),!BoredPanda.Config.isMobileWidth&&BoredPanda.Config.isStaffMember&&0===a.post.category.name().length&&a.errors.categories(!0),0!==a.post.images().length||a.post.challenge.type()||a.errors.noImages(!0);for(var b=a.post.images().length,c=0;b>c;c++){var d=a.post.images()[c];"list"===a.post.type()&&0===d.headline().length?(a.errors.imageTitle(!0),d.imageErrors.headline(!0)):d.imageErrors.headline(!1)}return!a.anyErrors()},a.anyErrors=function(){for(var b=a.errors.title()||a.errors.description()||a.errors.categories()||a.errors.noImages()||a.errors.preview(),c=!1,d=a.post.images().length,e=0;d>e;e++)c=c||a.post.images()[e].imageErrors.headline();return b||c},a.mobileAddChallenge=function(){if(!BoredPanda.Config.isLoggedIn){var a=$(".mobile-create-challenge").attr("href");return BoredPanda.Login.form.show(a),!1}return!0},a.removeImage=function(){a.imageUploaded(!1),a.challengeImageSrc(""),a.post.coverImage("")},a.checkPermalink=function(b,c){if("url"===$(c.target).prop("name")||a.post.name().length<=0){var d={action:"bp_get_sample_permalink",id:a.post.postId(),title:a.post.title(),name:a.post.name()};BoredPanda.Utils.wpAjax(d).then(function(b){a.post.name(b[1])}).done()}},a.post={postId:ko.observable(0),permalink:ko.observable(""),name:ko.observable(""),status:ko.observable("draft"),isSubmit:ko.observable(!1),type:ko.observable("blog"),postWidthMode:ko.observable(605),title:ko.observable(""),description:ko.observable(""),descriptionChallengeImage:ko.observable(""),externalPhoto:ko.observable(""),challenge:{type:ko.observable(""),descriptionPlaceholder:ko.observable("Description"),imagePlaceholder:ko.observable("Upload Original Image (optional)"),showSource:ko.observable(!1),source:ko.observable(""),removeAdTop:ko.observable(!1),hideSubmissionTitles:ko.observable(!1)},source:ko.observableArray([{url:ko.observable("")}]),contactAuthor:ko.observable($(".contact-author-input").data("checked")===!0),tags:ko.observable(""),admin:BoredPanda.Config.isStaffMember?{removeAdTop:ko.observable(!1),h3Headings:ko.observable(!1),hideSubmissionForm:ko.observable(!1),hideSubmissionTitles:ko.observable(!1),addWatermark:ko.observable(!1),regenerateExcerpt:ko.observable(!1),openListPageSize:ko.observable(0),imagesSource:ko.observable(""),imagesSourceAuthor:ko.observable(""),autoTitles:ko.observable(!1)}:ko.observable(""),category:{termId:BoredPanda.Config.isStaffMember?ko.observableArray([]):ko.observable(""),name:ko.observable("")},images:ko.observableArray([]),sliderImages:ko.observableArray([]),thumbnails:{square:{original:ko.observable(""),cropped:ko.observable(""),hover:ko.observable(!1),separator:ko.observable(50),imageLayout:ko.observable(1),api:{cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}}},landscape:{original:ko.observable(""),cropped:ko.observable(""),hover:ko.observable(!1),separator:ko.observable(50),imageLayout:ko.observable(1),api:{cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}}}},thumbsSaved:ko.observable(!1),coverSeparator:ko.observable(50),coverHeight:ko.observable(700),coverImage:ko.observable(""),coverHover:ko.observable(!1),coverImageLayout:ko.observable(1),coverImg:{cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},fbThumbs:{fbThumb2:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb3:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb4:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb5:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb6:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb7:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb8:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb9:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb10:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}}},editImage:{showModal:ko.observable(!1),index:ko.observable(0),headline:ko.observable(""),description:ko.observable(""),source:{type:ko.observable("nosource"),url:ko.observable(""),author:ko.observable(""),showInput:ko.observable(!1)},image:{mediaUrl:ko.observable(""),originalUrl:ko.observable(""),originalWidth:ko.observable(""),sized:ko.observable(""),closestWidth:ko.observable("")},imageHover:ko.observable(!1),videoUrl:ko.observable(""),videoType:ko.observable("")},copyHandler:ko.observable(-1),copyImage:function(b){a.post.copyHandler(b)},pasteImageAbove:function(b){var c=a.post.images()[a.post.copyHandler()],d=b<=a.post.copyHandler()?a.post.copyHandler()+1:a.post.copyHandler();a.post.images.splice(b,0,c),a.post.images.splice(d,1),a.post.copyHandler(-1)},pasteImageBelow:function(b){b++;var c=a.post.images()[a.post.copyHandler()],d=b<=a.post.copyHandler()?a.post.copyHandler()+1:a.post.copyHandler();a.post.images.splice(b,0,c),a.post.images.splice(d,1),a.post.copyHandler(-1)},editImageInfo:function(b){$(window).width()<1020||BoredPanda.Config.isiPad()||($("body").css("overflow","hidden"),a.post.editImage.index(b),a.post.editImage.headline(a.post.images()[b].headline()),a.post.editImage.description(a.post.images()[b].description()),a.post.editImage.source.type(a.post.images()[b].source.type()),a.post.editImage.source.url(a.post.images()[b].source.url()),a.post.editImage.source.author(a.post.images()[b].source.author()),a.post.editImage.source.showInput(!1),a.post.editImage.image.mediaUrl(a.post.images()[b].image.mediaUrl()),a.post.editImage.image.originalUrl(a.post.images()[b].image.originalUrl()),a.post.editImage.image.sized(a.post.images()[b].image.sized()),a.post.editImage.image.originalWidth(a.post.images()[b].image.originalWidth()),a.post.editImage.image.closestWidth(a.post.images()[b].image.closestWidth()),a.post.editImage.videoUrl(a.post.images()[b].videoUrl()),a.post.editImage.videoType(a.post.images()[b].videoType()),a.post.editImage.showModal(!0),BoredPanda.AddPost.Utils.editImageModalAutofit())},closeEditImg:function(){$("body").css("overflow",""),a.post.saveEditImage(),a.post.editImage.showModal(!1)},previousImage:function(){a.post.saveEditImage();var b=a.post.editImage.index();b--,0>b&&(b=a.post.images().length-1),a.post.editImageInfo(b)},nextImage:function(){a.post.saveEditImage();var b=a.post.editImage.index();b++,b>a.post.images().length-1&&(b=0),a.post.editImageInfo(b)},saveEditImage:function(){var b=a.post.editImage.index();a.post.images()[b].headline(a.post.editImage.headline().replace(/\n/g," ")),a.post.images()[b].description(a.post.editImage.description()),a.post.images()[b].source.type(a.post.editImage.source.url().length>0?"url":"nosource"),a.post.images()[b].source.url(a.post.editImage.source.url()),a.post.images()[b].source.author(a.post.editImage.source.author()),a.post.images()[b].image.mediaUrl(a.post.editImage.image.mediaUrl()),a.post.images()[b].image.originalUrl(a.post.editImage.image.originalUrl()),a.post.images()[b].image.originalWidth(a.post.editImage.image.originalWidth()),a.post.images()[b].image.closestWidth(a.post.editImage.image.closestWidth()),a.post.images()[b].videoUrl(a.post.editImage.videoUrl()),a.post.images()[b].videoType(a.post.editImage.videoType()),$(".image-description .image-description-input").change()},deleteEditImage:function(){var b=confirm("Are you sure?");if(b===!0){var c=a.post.images()[a.post.editImage.index()];"undefined"!=typeof a.post.coverImage()&&c.image.originalUrl()===a.post.coverImage()&&(a.post.images().length<=1?a.post.coverImage(""):a.post.coverImage(a.post.images()[0].image.originalUrl())),a.post.images.remove(c),a.cropperImages.remove(c),0===a.post.images().length&&($("#step-upload").hide(),$("#step-description").show()),$("body").css("overflow",""),a.post.editImage.showModal(!1)}},deleteImageTablet:function(b){var c=confirm("Are you sure?");if(c===!0){var d=a.post.images()[b];"undefined"!=typeof a.post.coverImage()&&d.image.originalUrl()===a.post.coverImage()&&(a.post.images().length<=1?a.post.coverImage(""):a.post.coverImage(a.post.images()[0].image.originalUrl())),a.post.images.remove(d),a.cropperImages.remove(d),0===a.post.images().length&&($("#step-upload").hide(),$("#step-description").show())}},removeImage:function(){a.post.images.remove(this),a.cropperImages.remove(this),!BoredPanda.Config.isStaffMember&&!BoredPanda.Config.isProMember&&a.post.images().length>=BoredPanda.Config.imagesLimit?a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2):a.uploader.errorMessage("")},setAllImagesSourceToMine:function(){for(var b=0;b<a.post.images().length;b++)"nosource"===a.post.images()[b].source.type()&&a.post.images()[b].source.type("mine")},imageUp:function(b){var c=a.post.images.indexOf(b);if(c>=1){var d=a.post.images();a.post.images.splice(c-1,2,d[c],d[c-1]);var e=$(".post-images .post-image:nth-child("+c+")").offset().top-$("header.header").height();$("html, body").animate({scrollTop:e},"slow")}},imageDown:function(b){var c=a.post.images.indexOf(b),d=a.post.images();if(c<d.length-1){a.post.images.splice(c,2,d[c+1],d[c]);var e=$(".post-images .post-image:nth-child("+(c+2)+")").offset().top-$("header.header").height();$("html, body").animate({scrollTop:e},"slow")}},setType:function(b){a.post.type(b)},setImageAsCover:function(){var b=a.post.editImage.index(),c=a.post.images()[b];return c.image.originalUrl()===a.post.coverImage()&&(c=a.post.images()[0]),a.post.coverImage(c.image.originalUrl()),a.post.thumbsSaved()||a.post.setPostThumbnails(),a.post.setPostDefaultFbImage(),!0},setPostThumbnails:function(){var b=a.post.coverImage(),c=BoredPanda.Utils.annotatePath(b,"__300"),d=BoredPanda.Utils.annotatePath(b,"__300_185");a.post.thumbnails.square.original(b),a.post.thumbnails.square.cropped(c),a.post.thumbnails.landscape.original(b),a.post.thumbnails.landscape.cropped(d),a.post.thumbnails.square.api.cropOneColumn.originalImg(b),a.post.thumbnails.landscape.api.cropOneColumn.originalImg(b)},setPostDefaultFbImage:function(){a.post.fbSaved()||a.post.fbImage(a.post.coverImage())},figureOutPostWidthMode:function(){for(var b=a.post.images().length,c={605:0,700:0,880:0},d=0;b>d;d++){var e=a.post.images()[d],f=parseInt(e.image.originalWidth(),10);c[BoredPanda.AddPost.Utils.closestImageSize(f)]++}var g=605;for(var h in c)c[h]>=c[g]&&(g=h);a.post.postWidthMode(parseInt(g,10))},setPostTags:function(){var b=[];$("ul.tagit li .tagit-label").each(function(a,c){(BoredPanda.Config.isStaffMember||"700-page"!==$(c).text()&&"full-page"!==$(c).text())&&b.push($(c).text())}),$.inArray("full-page",b)>-1?a.post.postWidthMode(880):$.inArray("700-page",b)>-1&&a.post.postWidthMode(700),a.post.tags(""),-1===$.inArray("full-page",b)&&-1===$.inArray("700-page",b)&&(880===a.post.postWidthMode()?a.post.tags("full-page"):700===a.post.postWidthMode()&&a.post.tags("700-page")),a.post.tags(a.post.tags()+","+b.join(","))},saveChallenge:function(){if(a.resetErrors(),a.post.challenge.removeAdTop(a.post.description().length<370),("meme"===a.post.challenge.type()||"text"===a.post.challenge.type())&&a.post.challenge.hideSubmissionTitles(!0),0===a.post.title().length)return a.errors.title(!0),!1;if(0===a.post.description().length&&"meme"!==a.post.challenge.type()&&"text"!==a.post.challenge.type())return a.errors.description(!0),!1;if(!a.imageUploaded()&&"meme"===a.post.challenge.type())return a.uploader.errorMessage("Please upload image"),!1;a.loadingSpinner(!0),a.post.status("publish"),a.post.type("list"),a.challengeImageSrc()?(a.post.descriptionChallengeImage(a.challengeImageSrc()),880===a.post.postWidthMode()&&a.post.postWidthMode(700)):a.post.postWidthMode(700),"text"===a.post.challenge.type()?(a.post.category.name("Ask Pandas"),a.post.category.termId=BoredPanda.Config.isStaffMember?ko.observableArray([130420]):ko.observable("130420")):(a.post.category.name("Challenge"),a.post.category.termId=BoredPanda.Config.isStaffMember?ko.observableArray([63294]):ko.observable("63294")),a.post.setPostTags();var b={action:"contribution_submit_form",ko:a.toJSON(a.post)};$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"}).done(function(b){"undefined"!=typeof b.postId&&(a.post.postId(b.postId),a.post.permalink(b.permalink),a.post.name(b.name),a.post.permalink().length>0&&(BoredPanda.AddPost.LeavePopup.publish(),window.location.href=a.post.permalink()))})},updateChallenge:function(){if(a.resetErrors(),0===a.post.title().length)return a.errors.title(!0),!1;if(0===a.post.description().length&&"meme"!==a.post.challenge.type()&&"text"!==a.post.challenge.type())return a.errors.description(!0),!1;if(!a.imageUploaded()&&"meme"===a.post.challenge.type())return a.uploader.errorMessage("Please upload image"),!1;a.loadingSpinner(!0),a.post.descriptionChallengeImage(a.challengeImageSrc());var b={action:"contribution_update_challenge",ko:a.toJSON(a.post)};$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"}).done(function(b){b.success?(BoredPanda.AddPost.LeavePopup.publish(),window.location.href=a.post.permalink()):(a.loadingSpinner(!1),alert("You can't edit this post anymore!"))})},generateDescription:function(){var b="";return a.challengeImageSrc()&&(b+='<img class="alignnone image-size-full" src="'+a.challengeImageSrc()+'" />'),b},submit:function(b){if(a.ui.savingPost()!==!0){var c=a.post.status();a.uploaderError(""),a.ui.errorMessage(""),a.ui.successMessage(""),a.savedDraft(!1),a.ui.expandContributionArea(),$("html, body").animate({scrollTop:0},"slow");var d=a.post.category,e=a.categoriesDropdown.getSelectedCategory();if(d.termId(e.termId),d.name(e.name),!a.validate())return BoredPanda.Tracking.trackAddPostPublishError(),!1;a.post.figureOutPostWidthMode(),a.post.setPostTags(),a.ui.savingPost(!0),"publish"===b?(BoredPanda.Tracking.trackAddPostPublish(),a.ui.updateButtonText(BoredPanda.Translate.AddPost.updating),
a.ui.publishButtonText(BoredPanda.Translate.AddPost.saving),a.post.status("publish")):"draft"===b?(a.ui.draftButtonText(BoredPanda.Translate.AddPost.saving),a.post.status("draft")):"update"===b?a.ui.updateButtonText(BoredPanda.Translate.AddPost.saving):"submit"===b&&(a.post.status("draft"),(void 0===BoredPanda.Config.postJson||"1"!==BoredPanda.Config.postJson.isSubmitted)&&a.post.isSubmit(!0));var f={action:"contribution_submit_form",surname:$("#post-surname").val(),ko:a.toJSON()};$.ajax({type:"POST",url:ajax_object.ajax_url,data:f,dataType:"json"}).done(function(d){if(a.ui.savingPost(!1),1===d.cannot_edit)return j=BoredPanda.Translate.AddPost.cannot_edit,void a.ui.errorMessage(j);if(d.postId>0){var e,f=[],g=[],h="/add-new-post/?pid="+d.postId;if(window.history.pushState("object or string","Title",h),"list"===a.post.type()&&a.isPostLocked(!0),"draft"===b&&(a.savedDraft(!0),setTimeout(function(){a.savedDraft(!1)},15e3)),$.cookie("invitation")&&BoredPanda.Tracking.trackInviteeAddPost(d.postId),BoredPanda.Config.trackAddPost=!1,a.updateFromJson(d),a.ui.successMessage(BoredPanda.Translate.AddPost.success_message_pt1+' <a target="_blank" href="'+a.post.permalink()+'">'+BoredPanda.Translate.AddPost.success_message_pt2+"</a>"),BoredPanda.AddPost.LeavePopup.publish(),a.post.isSubmit()||"publish"===a.post.status()&&"draft"===c)if("blog"===a.post.type()?(f=[BoredPanda.Translate.AddPost.blog_head_title],g=[BoredPanda.Translate.AddPost.blog_head_description],e="add_blog_post",a.ui.modal.viewPostText(BoredPanda.Translate.AddPost.view_post)):"list"===a.post.type()&&(f=[BoredPanda.Translate.AddPost.list_head_title],g=[BoredPanda.Translate.AddPost.list_head_description],e="create_open_list",a.ui.modal.viewPostText(BoredPanda.Translate.AddPost.view_open_list)),a.post.isSubmit()&&(g=["Your post has been submitted and is pending approval by a team of highly trained pandas"]),a.ui.modal.headTitle(f[Math.floor(Math.random()*f.length)]),a.ui.modal.popupDescription(g[Math.floor(Math.random()*g.length)]),a.post.isSubmit())$("#share-modal").modal(),$(".got-it-button").attr("href","/?p="+d.postId),$("#share-modal").find(".share-buttons").css("display","none");else{var i=encodeURIComponent(a.post.permalink()+"?utm_source=author&utm_medium=social&utm_campaign=AuthorShare");$("#share-modal a#facebook-share").attr("onclick","window.open('https://www.facebook.com/dialog/share?app_id="+BoredPanda.Config.fbAppId+"&display=popup&href="+i+"&redirect_uri="+encodeURIComponent(BoredPanda.Config.pandaBaseUrl+"/close.html")+"','facebook-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$("#share-modal a#twitter-share").attr("onclick","window.open('http://twitter.com/share?url="+i+"&via=boredpanda&text="+encodeURIComponent(a.post.title())+"','twitter-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$.ajax({type:"POST",url:"https://graph.facebook.com/?ids="+a.post.permalink()+"&scrape=true",data:null,dataType:"json"}),$(".got-it-button").attr("href",a.post.permalink()),$("#share-modal").modal(),$(".share-buttons a").unbind("click"),BoredPanda.Config.isStaffMember||(BoredPanda.Tracking.trackClick(".share-buttons a","Share Popup",e),BoredPanda.Tracking.trackImpression("#share-modal","Share Popup",e))}}else{var j=BoredPanda.Translate.AddPost.unknown_error;1===d.post_limit_exceeded?j=BoredPanda.Translate.AddPost.post_limit_exceeded:1===d.user_is_blocked&&(j=BoredPanda.Translate.AddPost.account_suspended),a.ui.errorMessage(j)}a.ui.resetButtons()})}},preview:function(){a.post.permalink().length>0?window.open(a.post.permalink(),"_blank").focus():a.errors.preview(!0)},addHtmlBlock:function(){var b=new BoredPanda.AddPost.ImageViewModel;b.setHtmlBlock(),a.post.images.push(b)},addAnotherUrl:function(){(BoredPanda.Config.isStaffMember||BoredPanda.Config.isProMember)&&a.post.source.push({url:ko.observable("")})},generateImageTitles:function(){var b=confirm("Are you sure?");if(b===!0){var c=a.post.title();if(a.isPostLocked()){var d={action:"update_submissions_title",post_id:a.post.postId()};BoredPanda.Utils.wpAjax(d).success(function(){BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles(!0),alert("Image titles successfully generated!")})}else{var e=a.post.images().length;if(""===c)return;BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles(!0);for(var f=0;e>f;f++)a.post.images()[f].headline(c)}}},generateImageSources:function(){var b=confirm("Are you sure?");if(b===!0)for(var c=a.post.admin.imagesSource(),d=a.post.images().length,e=0;d>e;e++)a.post.images()[e].source.url(c),a.post.images()[e].source.type("url")},generateImageSourcesAuthors:function(){var b=confirm("Are you sure?");if(b===!0)for(var c=a.post.admin.imagesSourceAuthor(),d=a.post.images().length,e=0;d>e;e++)a.post.images()[e].source.author(c),a.post.images()[e].source.type("url")}},a.resizeInfoBlock=function(){if($("body").hasClass("page-template-add-post-template-php")){var a=function(){$(document).width()<1020?$("#step-description .info-block-container").height($("#step-description .info-block-container .info-block.additional-info").height()):$("#step-description .info-block-container").height($(document).height())};setTimeout(a,1e3),$(window).resize(a)}},a.uploader=new BoredPanda.AddPost.ImageUploader({drop_element:"add-post-template",browse_button:"browse-files-step1",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&!BoredPanda.Config.isProMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.images.push(d),a.cropperImages.push(d),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&d.headline(a.post.title()),a.post.coverImage().length<=0&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),a.resizeInfoBlock()}}}),a.uploaderTop=new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-step2",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&!BoredPanda.Config.isProMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.images.unshift(d),a.cropperImages.unshift(d),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&d.headline(a.post.title()),a.post.coverImage().length<=0&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600),a.resizeInfoBlock()}}}),a.uploaderBottom=new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-bottom",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&!BoredPanda.Config.isProMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.images.push(d),a.cropperImages.push(d),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&d.headline(a.post.title()),a.post.coverImage().length<=0&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600)}}}),a.uploaderChallenge=new BoredPanda.AddPost.ImageUploader({drop_element:"add-post-template",browse_button:"image-upload-btn-id-modal-challenge",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,singleImageUploader:!0,fileUploaded:function(b){a.resetErrors();var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.coverImage().length<=0&&"text"!==a.post.challenge.type()&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.imageUploaded(!0),a.post.postWidthMode(BoredPanda.AddPost.Utils.closestImageSize(b.original_width)),a.challengeImageSrc(BoredPanda.Utils.annotatePath(b.image_url,"__"+a.post.postWidthMode()))}}),$(".slider-upload-button.left").each(function(){var b=$(this);new BoredPanda.AddPost.ImageUploader({browse_button:b.attr("id"),title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){a.resetErrors(),BoredPanda.Config.isStaffMember&&a.slider.left(b)}})}),$(".slider-upload-button.right").each(function(){var b=$(this);new BoredPanda.AddPost.ImageUploader({browse_button:b.attr("id"),title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){a.resetErrors(),BoredPanda.Config.isStaffMember&&a.slider.right(b)}})});var b=function(b,c){return{action:"contribution_save_double_image_editor",filename:"fb_image",selector:b,height:c.fbHeight,separator:c.fbSeparator,images:a.cropperImages,thumb:c.fbImage,imgs:{cropOneColumn:c.cropOneColumn,cropTwoColumnLeft:c.cropTwoColumnLeft,cropTwoColumnRight:c.cropTwoColumnRight},callback:function(a,b){c.fbImage(a.fb_thumb_url),c.fbSaved(!0),c.fbSeparator=b.separator,c.fbImageSmall=a.fb_thumb_small_url;var d=function(a){c[a].originalImg(b[a].originalImg()),b.setApi(a),c[a].zoom=b[a].api.cropit("zoom"),c[a].offset.x(b[a].offset.x()),c[a].offset.y(b[a].offset.y())};d("cropOneColumn"),d("cropTwoColumnLeft"),d("cropTwoColumnRight"),c.fbImageLayout(b.columns())}}};a.fbImageModal=new BoredPanda.Cropper(b("#fb-image-modal",a.post)),a.fbImageModal2=new BoredPanda.Cropper(b("#fb-image-modal2",a.post.fbThumbs.fbThumb2)),a.fbImageModal3=new BoredPanda.Cropper(b("#fb-image-modal3",a.post.fbThumbs.fbThumb3)),a.fbImageModal4=new BoredPanda.Cropper(b("#fb-image-modal4",a.post.fbThumbs.fbThumb4)),a.fbImageModal5=new BoredPanda.Cropper(b("#fb-image-modal5",a.post.fbThumbs.fbThumb5)),a.fbImageModal6=new BoredPanda.Cropper(b("#fb-image-modal6",a.post.fbThumbs.fbThumb6)),a.fbImageModal7=new BoredPanda.Cropper(b("#fb-image-modal7",a.post.fbThumbs.fbThumb7)),a.fbImageModal8=new BoredPanda.Cropper(b("#fb-image-modal8",a.post.fbThumbs.fbThumb8)),a.fbImageModal9=new BoredPanda.Cropper(b("#fb-image-modal9",a.post.fbThumbs.fbThumb9)),a.fbImageModal10=new BoredPanda.Cropper(b("#fb-image-modal10",a.post.fbThumbs.fbThumb10)),a.coverImageModal=new BoredPanda.Cropper({action:"contribution_save_cover_image_editor",filename:"cover_image",selector:"#cover-image-modal",height:a.post.coverHeight,separator:a.post.coverSeparator,images:a.cropperImages,thumb:a.post.coverImage,imgs:{cropOneColumn:a.post.coverImg.cropOneColumn,cropTwoColumnLeft:a.post.coverImg.cropTwoColumnLeft,cropTwoColumnRight:a.post.coverImg.cropTwoColumnRight},callback:function(b,c){a.post.coverImage(b.cover_image_url),a.post.coverSeparator=c.separator;var d=function(b){a.post.coverImg[b].originalImg(c[b].originalImg()),c.setApi(b),a.post.coverImg[b].zoom=c[b].api.cropit("zoom"),a.post.coverImg[b].offset.x(c[b].offset.x()),a.post.coverImg[b].offset.y(c[b].offset.y())};d("cropOneColumn"),d("cropTwoColumnLeft"),d("cropTwoColumnRight"),a.post.coverImageLayout(c.columns())}}),a.wideThumbModal=new BoredPanda.Cropper({action:"contribution_save_wide_thumbnail_editor",filename:"thumb_latest",selector:"#wide-thumbnail",height:ko.observable(185),width:300,ratio:1,separator:a.post.thumbnails.landscape.separator,images:a.cropperImages,thumb:a.post.thumbnails.landscape.cropped,imgs:{cropOneColumn:a.post.thumbnails.landscape.api.cropOneColumn,cropTwoColumnLeft:a.post.thumbnails.landscape.api.cropTwoColumnLeft,cropTwoColumnRight:a.post.thumbnails.landscape.api.cropTwoColumnRight},callback:function(b,c){a.post.thumbnails.landscape.cropped(b.image_url),a.post.thumbnails.landscape.separator=c.separator;var d=function(b){a.post.thumbnails.landscape.api[b].originalImg(c[b].originalImg()),c.setApi(b),a.post.thumbnails.landscape.api[b].zoom=c[b].api.cropit("zoom"),a.post.thumbnails.landscape.api[b].offset.x(c[b].offset.x()),a.post.thumbnails.landscape.api[b].offset.y(c[b].offset.y())};d("cropOneColumn"),d("cropTwoColumnLeft"),d("cropTwoColumnRight"),a.post.thumbnails.landscape.imageLayout(c.columns()),a.post.thumbsSaved(!0)}}),a.squareThumbModal=new BoredPanda.Cropper({action:"contribution_save_square_thumbnail_editor",filename:"thumb_square",selector:"#square-thumbnail",height:ko.observable(300),width:300,ratio:1,separator:a.post.thumbnails.square.separator,images:a.cropperImages,thumb:a.post.thumbnails.square.cropped,imgs:{cropOneColumn:a.post.thumbnails.square.api.cropOneColumn,cropTwoColumnLeft:a.post.thumbnails.square.api.cropTwoColumnLeft,cropTwoColumnRight:a.post.thumbnails.square.api.cropTwoColumnRight},callback:function(b,c){a.post.thumbnails.square.cropped(b.image_url),a.post.thumbnails.square.separator=c.separator;var d=function(b){a.post.thumbnails.square.api[b].originalImg(c[b].originalImg()),c.setApi(b),a.post.thumbnails.square.api[b].zoom=c[b].api.cropit("zoom"),a.post.thumbnails.square.api[b].offset.x(c[b].offset.x()),a.post.thumbnails.square.api[b].offset.y(c[b].offset.y())};d("cropOneColumn"),a.post.thumbnails.square.imageLayout(c.columns()),a.post.thumbsSaved(!0)}});var c=function(a){for(var b=0;b<a.length;b++)a[b].selected=ko.observable(a[b].selected);return a};a.categoriesDropdown=new BoredPanda.AddPost.CategoriesDropdown(c(BoredPanda.Config.AddPostCategories)),a.ui={successMessage:ko.observable(""),errorMessage:ko.observable(""),draftButtonText:ko.observable(BoredPanda.Translate.AddPost.save_draft),publishButtonText:ko.observable(BoredPanda.Translate.AddPost.publish),updateButtonText:ko.observable(BoredPanda.Translate.AddPost.update),savingPost:ko.observable(!1),resetButtons:function(){a.ui.draftButtonText(BoredPanda.Translate.AddPost.save_draft),a.ui.publishButtonText(BoredPanda.Translate.AddPost.publish),a.ui.updateButtonText(BoredPanda.Translate.AddPost.update)},expanded:ko.observable(!1),expandContributionArea:function(){a.ui.expanded(!0),a.ui.tips.show("title"),$(".contribution-expandable-area").slideDown("medium")},tips:{image:ko.observable(!0),title:ko.observable(!1),description:ko.observable(!1),show:function(b){a.ui.tips.image(!1),a.ui.tips.title(!1),a.ui.tips.description(!1),a.ui.tips[b](!0)}},modal:{headTitle:ko.observable(""),popupDescription:ko.observable(""),viewPostText:ko.observable("")}};var d=function(b){b.length&&b.length>0&&setTimeout(function(){a.ui.successMessage(""),a.ui.errorMessage("")},1e4)};a.ui.successMessage.subscribe(d),a.ui.errorMessage.subscribe(d)},BoredPanda.AddPost.ViewModel.prototype={toJSON:function(){var a=$.extend({},this.post);return delete a.removeImage,delete a.setAllImagesSourceToMine,delete a.imageUp,delete a.imageDown,delete a.setType,delete a.setPostThumbnails,delete a.setPostDefaultFbImage,delete a.figureOutPostWidthMode,delete a.setPostTags,delete a.submit,delete a.saveChallenge,delete a.updateChallenge,delete a.generateDescription,delete a.preview,ko.toJSON(a)},updateFromJson:function(a){this.ui.expandContributionArea();var b,c=this,d=this.post;if(d.postId(a.postId),d.permalink(a.permalink),d.name(a.name),d.status(a.status),d.type(a.type),d.postWidthMode(a.postWidthMode),d.title(a.title),d.description(a.description),d.tags(a.tags),"string"==typeof a.source)d.source([{url:ko.observable(a.source)}]);else{var e=a.source.length;if(0===e)d.source({url:ko.observable("")});else{for(d.source([]),b=0;e>b;b++)a.source[b].url.length>0&&d.source.push({url:ko.observable(a.source[b].url)});0===d.source().length&&d.source.push({url:ko.observable("")})}}"undefined"!=typeof a.challenge&&(d.challenge.type(a.challenge.type),d.challenge.descriptionPlaceholder(a.challenge.descriptionPlaceholder),d.challenge.imagePlaceholder(a.challenge.imagePlaceholder),d.challenge.showSource(a.challenge.showSource),d.challenge.source(a.challenge.source),d.challenge.removeAdTop(a.challenge.removeAdTop),d.challenge.hideSubmissionTitles(a.challenge.hideSubmissionTitles)),BoredPanda.Config.isStaffMember&&(a.admin=a.admin||{},a.admin.removeAdTop=a.admin.removeAdTop||!1,d.admin.removeAdTop(a.admin.removeAdTop),a.admin.h3Headings=a.admin.h3Headings||!1,d.admin.h3Headings(a.admin.h3Headings),a.admin.hideSubmissionForm=a.admin.hideSubmissionForm||!1,d.admin.hideSubmissionForm(a.admin.hideSubmissionForm),a.admin.hideSubmissionTitles=a.admin.hideSubmissionTitles||!1,d.admin.hideSubmissionTitles(a.admin.hideSubmissionTitles),a.admin.addWatermark=a.admin.addWatermark||!1,d.admin.addWatermark(a.admin.addWatermark),a.admin.regenerateExcerpt=a.admin.regenerateExcerpt||!1,d.admin.regenerateExcerpt(a.admin.regenerateExcerpt),a.admin.imagesSource=a.admin.imagesSource||"",d.admin.imagesSource(a.admin.imagesSource),a.admin.imagesSourceAuthor=a.admin.imagesSourceAuthor||"",d.admin.imagesSourceAuthor(a.admin.imagesSourceAuthor),a.admin.openListPageSize=a.admin.openListPageSize||0,d.admin.openListPageSize(a.admin.openListPageSize),a.admin.autoTitles=a.admin.autoTitles||!1,d.admin.autoTitles(a.admin.autoTitles));var f,g=a.tags.split(",");for(b=0;b<g.length;b++){var h=g[b];(BoredPanda.Config.isStaffMember||-1===$.inArray(h,BoredPanda.Config.deniedTags))&&$("#post-tags").tagit("createTag",h)}d.category.termId(a.category.termId),d.category.name(a.category.name),this.categoriesDropdown.choose({term_id:a.category.termId,name:a.category.name}),c.cropperImages.removeAll();var i=[];d.images.removeAll();for(var j=0;j<a.images.length;j++)f=new BoredPanda.AddPost.ImageViewModel,f.initFromJson(a.images[j]),d.images.push(f),i[BoredPanda.Utils.annotatePath(f.image.originalUrl(),"__700")]=f;if(d.sliderImages.removeAll(),"undefined"!=typeof a.sliderImages)for(var j=0;j<a.sliderImages.length;j++)f=new BoredPanda.AddPost.ImageViewModel,f.initFromJson(a.sliderImages[j]),d.sliderImages.push(f),i[f.image.originalUrl()]=f;if("list"===d.type()){var k={action:"get_open_list_images_sorted",postId:d.postId()};BoredPanda.Utils.wpAjax(k).done(function(a){for(var b in a.images){if(a.images[b].cover){var d=i[a.images[b].cover];if("undefined"!=typeof d&&(c.cropperImages.push(d),"undefined"!=typeof d.slider&&d.slider.rightImageUrl())){var e=d.slider.rightImageUrl();c.cropperImages.push(i[e]),delete i[e]}}delete i[a.images[b].cover]}for(var b in i)c.cropperImages.push(i[b])})}else for(var l in i)c.cropperImages.push(i[l]);d.thumbnails.square.original(a.thumbnails.square.original),d.thumbnails.square.cropped(a.thumbnails.square.cropped),d.thumbnails.landscape.original(a.thumbnails.landscape.original),d.thumbnails.landscape.cropped(a.thumbnails.landscape.cropped),a.thumbnails.landscape.separator&&d.thumbnails.landscape.separator(a.thumbnails.landscape.separator),a.thumbnails.landscape.imageLayout&&d.thumbnails.landscape.imageLayout(a.thumbnails.landscape.imageLayout),a.thumbnails.square.separator&&d.thumbnails.square.separator(a.thumbnails.square.separator),a.thumbnails.square.imageLayout&&d.thumbnails.square.imageLayout(a.thumbnails.square.imageLayout);var m=function(b){var c=function(b,c,e){a.thumbnails[c].api&&a.thumbnails[c].api[b]&&(d.thumbnails[c].api[b].originalImg(a.thumbnails[c].api[b].originalImg),d.thumbnails[c].api[b].zoom=a.thumbnails[c].api[b].zoom,d.thumbnails[c].api[b].offset.x(a.thumbnails[c].api[b].offset.x),d.thumbnails[c].api[b].offset.y(a.thumbnails[c].api[b].offset.y))};"undefined"!=typeof a.thumbsApi&&"undefined"!=typeof a.thumbsApi[b]?(d.thumbnails[b].api.cropOneColumn.originalImg(a.thumbsApi[b].originalImg),d.thumbnails[b].api.cropOneColumn.offset.x(a.thumbsApi[b].offset.x),d.thumbnails[b].api.cropOneColumn.offset.y(a.thumbsApi[b].offset.y),d.thumbnails[b].api.cropOneColumn.zoom=a.thumbsApi[b].zoom):"undefined"!=typeof a.thumbnails[b]&&"undefined"!=typeof a.thumbnails[b].api&&(c("cropOneColumn",b,1),c("cropTwoColumnLeft",b,2),c("cropTwoColumnRight",b,2))};m("landscape"),m("square");var n=function(a,b,c,d){a.fbImageLayout&&b.fbImageLayout(a.fbImageLayout),a.fbImage&&(b.fbImage(a.fbImage),b.fbImageSmall=a.fbImageSmall),a.fbSaved&&b.fbSaved(a.fbSaved),a.fbSeparator&&b.fbSeparator(a.fbSeparator),c&&""===b.fbImage()&&b.setPostDefaultFbImage();var e=function(c,e){a[c]&&(b[c].originalImg(a[c].originalImg),b[c].zoom=a[c].zoom,b[c].offset.x(a[c].offset.x),b[c].offset.y(a[c].offset.y),""!==a[c].originalImg&&d.columns(e))};e("cropOneColumn",1),e("cropTwoColumnLeft",2),e("cropTwoColumnRight",2)};n(a,d,!0,c.fbImageModal),a.fbThumbs&&(a.fbThumbs.fbThumb2&&n(a.fbThumbs.fbThumb2,d.fbThumbs.fbThumb2,!1,c.fbImageModal2),a.fbThumbs.fbThumb3&&n(a.fbThumbs.fbThumb3,d.fbThumbs.fbThumb3,!1,c.fbImageModal3),a.fbThumbs.fbThumb4&&n(a.fbThumbs.fbThumb4,d.fbThumbs.fbThumb4,!1,c.fbImageModal4),a.fbThumbs.fbThumb5&&n(a.fbThumbs.fbThumb5,d.fbThumbs.fbThumb5,!1,c.fbImageModal5),a.fbThumbs.fbThumb6&&n(a.fbThumbs.fbThumb6,d.fbThumbs.fbThumb6,!1,c.fbImageModal5),a.fbThumbs.fbThumb7&&n(a.fbThumbs.fbThumb7,d.fbThumbs.fbThumb7,!1,c.fbImageModal5),a.fbThumbs.fbThumb8&&n(a.fbThumbs.fbThumb8,d.fbThumbs.fbThumb8,!1,c.fbImageModal5),a.fbThumbs.fbThumb9&&n(a.fbThumbs.fbThumb9,d.fbThumbs.fbThumb9,!1,c.fbImageModal5),a.fbThumbs.fbThumb10&&n(a.fbThumbs.fbThumb10,d.fbThumbs.fbThumb10,!1,c.fbImageModal5)),a.coverImage&&a.coverImage.image?d.coverImage(a.coverImage.image.originalUrl):a.coverImage&&d.coverImage(a.coverImage),a.coverSeparator&&d.coverSeparator(a.coverSeparator),a.coverHeight&&d.coverHeight(a.coverHeight),a.coverImageLayout&&d.coverImageLayout(a.coverImageLayout);var o=function(b,e){a.coverImg&&a.coverImg[b]&&(d.coverImg[b].originalImg(a.coverImg[b].originalImg),d.coverImg[b].zoom=a.coverImg[b].zoom,d.coverImg[b].offset.x(a.coverImg[b].offset.x),d.coverImg[b].offset.y(a.coverImg[b].offset.y),""!==a[b].originalImg&&c.coverImageModal.columns(e))};o("cropOneColumn",1),o("cropTwoColumnLeft",2),o("cropTwoColumnRight",2)}},BoredPanda.AddPost.LeavePopup={changed:!1,publish:function(){BoredPanda.AddPost.LeavePopup.changed=!1,window.onbeforeunload=function(){}},change:function(){BoredPanda.AddPost.LeavePopup.changed===!1&&(BoredPanda.AddPost.LeavePopup.changed=!0,window.onbeforeunload=function(){return BoredPanda.Translate.AddPost.leave_unsaved_changes})}},BoredPanda.AddPost.EditImageNavigation=function(a){$(document).keyup(function(b){a.post.editImage.showModal()&&(27===b.keyCode?($("textarea, input").blur(),a.post.closeEditImg()):37===b.keyCode?($("textarea, input").blur(),a.post.previousImage()):39===b.keyCode&&($("textarea, input").blur(),a.post.nextImage())),a.titleTooltipVisible()&&27===b.keyCode&&a.hideTooltip("title"),a.descriptionTooltipVisible()&&27===b.keyCode&&a.hideTooltip("description")}),$(document).on("click",function(b){"edit-post-image"===b.target.id&&a.post.editImage.showModal()&&($("textarea, input").blur(),a.post.closeEditImg())})},BoredPanda.AddPost.VideoKeyboardNavigation=function(a){$(document).keyup(function(b){"video"===a.topSubmitTabVisible()&&13===b.keyCode&&a.submitVideo("top"),"video"===a.bottomSubmitTabVisible()&&13===b.keyCode&&a.submitVideo("bottom")})},$(document).ready(function(a){if(a("#post-tags").tagit({tagLimit:BoredPanda.Config.isStaffMember?20:10,allowSpaces:!0,placeholderText:BoredPanda.Translate.AddPost.add_post_tags_placeholder,autocomplete:{delay:300,minLength:2,source:function(b,c){a.getJSON(ajax_object.ajax_url,{action:"bp_tags_search",tax:"post_tag",q:b.term},c)}},onTagLimitExceeded:function(){BoredPanda.AddPost.viewModel.errors.tags(!0),a(".ui-autocomplete-input").hide()},afterTagRemoved:function(){BoredPanda.AddPost.viewModel.errors.tags(!1),a(".ui-autocomplete-input").show()}}),a(window).resize(function(){BoredPanda.AddPost.Utils.editImageModalAutofit()}),a(".add-post-login").length>0&&initAddPost(),a("#add-post-area").length>0){if(initAddPost(),BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,"undefined"!=typeof BoredPanda.Config.isPostLocked&&BoredPanda.AddPost.viewModel.isPostLocked(BoredPanda.Config.isPostLocked),BoredPanda.AddPost.EditImageNavigation(BoredPanda.AddPost.viewModel),BoredPanda.AddPost.VideoKeyboardNavigation(BoredPanda.AddPost.viewModel),BoredPanda.Config.postJson&&BoredPanda.AddPost.viewModel.updateFromJson(BoredPanda.Config.postJson),"undefined"!=typeof tweetsArray&&BoredPanda.Config.isStaffMember){BoredPanda.AddPost.viewModel.loadingSpinner(!0),BoredPanda.AddPost.viewModel.post.type("list"),BoredPanda.AddPost.LeavePopup.change();var b=function(){var a=[],b=[];for(var c in tweetsArray)a.push("https://twitter.com/"+tweetsArray[c]+"/status/"+c);var d=function(){if(a.length>0){var c=a.pop();BoredPanda.AddPost.viewModel.embedUrl(c);var e=BoredPanda.AddPost.viewModel.submitEmbed("top",!0);e.done(d),e.error(function(){b.push(c),d()})}else{if("undefined"!=typeof tweetName)for(var f=0;f<BoredPanda.AddPost.viewModel.post.images().length;f++)BoredPanda.AddPost.viewModel.post.images()[f].headline(tweetName);if(b.length>0){var g="List of failed tweets: \r\n"+b.join("\r\n");alert(g),console.log(g)}}};d()};b()}BoredPanda.Tracking.trackInviteeAction("add_post_form_visit"),BoredPanda.Tracking.trackInviteeClicks(),BoredPanda.Config.isStaffMember||a.getJSON("//freegeoip.net/json/?callback=?",function(b){var c={action:"save_user_ip",ip:b.ip};a.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"})}),ko.applyBindings(BoredPanda.AddPost.viewModel,a("#add-post-area").get(0)),ko.applyBindings(BoredPanda.AddPost.viewModel,a(".add-post-submit-area").get(0)),a(".contribution-modal-wrapper").each(function(){ko.applyBindings(BoredPanda.AddPost.viewModel,this)}),a(document).on("change","#add-post-area input, #add-post-area textarea",function(){BoredPanda.AddPost.LeavePopup.change()}),a(".post-description textarea").autoGrowTextArea(),a(".post-title textarea").autoGrowTextArea(),a(".edit-image-content .image-heading textarea").autoGrowTextArea(),a(".edit-image-content .image-description textarea").autoGrowTextArea(),a(".image-description .image-description-input").autoGrowTextArea(),setInterval(function(){a("body").hasClass("page-template-add-post-template-php")&&(a(document).width()<1020?a("#step-description .info-block-container").height(a("#step-description .info-block-container .info-block.additional-info").height()):a("#step-description .info-block-container").height()<a(".post-content-wrapper").height()&&a("#step-description .info-block-container").height(a(".post-content-wrapper").height()))},500)}})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.OpenList=BoredPanda.OpenList||{};a.AppendForm=function(){var a=this;a.errors={upload:ko.observable(!1),title:ko.observable(!1),description:ko.observable(!1),image:ko.observable(!1),embed:ko.observable(!1)},a.errorMessages={upload:ko.observable("Ooops! Your image is too large, maximum file size is 8 MB.")},a.title=ko.observable(""),a.description=ko.observable(""),a.source=ko.observable(""),a.author=ko.observable(""),a.source1=ko.observable(""),a.author1=ko.observable(""),a.showSource=ko.observable(!1),a.imageUploaded=ko.observable(!1),a.imageSrc=ko.observable(null),a.imageFormat=BoredPanda.Config.openListImageFormat,a.progress=ko.observable(0),a.showWidgetForm=ko.observable(!1),a.uploadStarted=ko.observable(!1),a.dropEvent=ko.observable(""),a.showWaterMark=ko.observable(BoredPanda.Config.showWaterMark),a.showTextOpenListTopMobileForm=ko.observable(!1),a.activeMobileTextButton=ko.observable(!1),a.showExternalUpload=ko.observable(!1),a.externalPhoto=ko.observable(""),a.externalPoints=ko.observable(""),a.autoTitle=ko.observable(!1),a.publishButton=ko.observable(BoredPanda.Translate.AddPost.publish),a.ui={modal:{headTitle:ko.observable("Your submission is live now!"),popupDescription:ko.observable("Share your submission via social networks to gather votes."),viewPostText:ko.observable("View Submission")}},a.slider={left:ko.observable([]),right:ko.observable([]),flip:ko.observable(!1),loading:ko.observable(!1)},a.embed={embedUrl:ko.observable(""),tweetConversation:ko.observable(!1),tweetInFeed:ko.observable(!1),tweetSingleImage:ko.observable(!1),watermark:ko.observable(!0),instagramWatermark:ko.observable(!1),singleImage:ko.observable(!0),hideCaption:ko.observable(!1),generateError:ko.observable(!1),loading:ko.observable(!1),imageUploaded:ko.observable(!1),imageSrc:ko.observable(""),showSource:ko.observable(!1),image:null},a.image=null,a.newItems=ko.observableArray([]),a.newItems.subscribe(function(){setTimeout(function(){var a;$(".reader-submissions ul").length>0?(a=$(".reader-submissions ul").offset().top-100,$(document).scrollTop(a)):$(".open-list-item-newly-appended").length>0&&(a=$(".open-list-item-newly-appended").last().offset().top-100,$(document).scrollTop(a))},100)});var b=function(){for(var b in a.errors)a.errors[b](!1)},c=function(){b(),a.title(""),a.description(""),a.imageUploaded(!1),a.progress(0),a.source(""),a.author(""),a.showSource(!1),a.source1(""),a.author1(""),a.uploadStarted(!1),a.embed.embedUrl(""),a.embed.tweetConversation(!1),a.embed.tweetInFeed(!1),a.embed.tweetSingleImage(!1),a.embed.watermark(!0),a.embed.instagramWatermark(!1),a.embed.singleImage(!0),a.embed.hideCaption(!1),a.embed.generateError(!1),a.embed.loading(!1),a.embed.imageUploaded(!1),a.embed.imageSrc(""),a.embed.showSource(!1),a.embed.image=null};a.votesFromAMPPage=function(){var a=""!==BoredPanda.Config.returnUrl?BoredPanda.Config.returnUrl:document.URL,b=BoredPanda.Utils.getParameterByName("score");if(a.indexOf("ampvote")>-1&&b)if(a.indexOf("savecommentvote")>-1){var c=BoredPanda.Utils.getParameterByName("comment"),d=1==b?"btn-up":"btn-down";$("#bp-comment-id-"+c).find("."+d).trigger("click")}else if(a.indexOf("savevote")>-1){var e=BoredPanda.Utils.getParameterByName("post"),f=1==b?"upvote-submission-id-":"downvote-submission-id-";$("#"+f+e).trigger("click")}},a.votesFromAMPPage(),a.uploader=function(){$(".image-upload-btn:not(#image-upload-btn-id-modal-challenge), .mobile-image-upload-btn").each(function(){var c=$(this),d=c.closest(".image-file-area").attr("id"),e=new plupload.Uploader({runtimes:"html5,html4",browse_button:c.attr("id"),drop_element:d,url:ajax_object.ajax_url,max_file_size:"20mb",max_file_count:1,multipart_params:{action:"contribution_submit_upload",title:""},unique_names:!1,init:{FilesAdded:function(c){b(),c.start(),a.uploadStarted(!0)}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]});if(e.bind("FileUploaded",function(b,d,e){var f=$.parseJSON(e.response);if(f.original_width<a.imageFormat&&-1===f.image_url.indexOf(".gif"))return a.errorMessages.upload("Ooops! Image width has to be at least "+a.imageFormat+"px"),a.errors.upload(!0),void a.uploadStarted(!1);var g=BoredPanda.Utils.annotatePath(f.image_url,"__"+a.imageFormat)+"?preview";"embed-image-upload-btn"===c.attr("id")?(a.embed.image=f,a.embed.imageSrc(g),a.embed.imageUploaded(!0),a.uploadStarted(!1)):(a.image=f,a.imageSrc(g),a.errors.image(!1),a.imageUploaded(!0),a.uploadStarted(!1));
}),e.bind("UploadProgress",function(b,c){a.progress(c.percent)}),e.bind("Error",function(b,c){"File size error."===c.message?a.errorMessages.upload("Ooops! Your image is too large, maximum file size is 20 MB."):"File extension error."===c.message&&a.errors.upload(!0)}),e.init(),"html5"===e.runtime){var f=0;$("#"+d).bind({dragenter:function(){f++,a.dropEvent("dragenter")},dragleave:function(){f--,0===f&&a.dropEvent("dragleave")},drop:function(){a.dropEvent("drop")}})}a.pluploader=e})};new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-slider-left",title:a.title,loader:a.slider.loading,error:a.errors.upload,fileUploaded:function(b){BoredPanda.Config.isStaffMember&&a.slider.left(b)}}),new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-slider-right",title:a.title,loader:a.slider.loading,error:a.errors.upload,fileUploaded:function(b){BoredPanda.Config.isStaffMember&&a.slider.right(b)}});a.removeImage=function(){a.imageUploaded(!1),a.uploadStarted(!1),a.imageSrc(""),a.image=null},a.checkPublish=function(b,c){var d=c.currentTarget.getAttribute("name");if(a.source()||a.source1()){var e=BoredPanda.Config.openListId;0===e&&(e=$.cookie("openListId"),$.removeCookie("openListId"));var f=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:{listId:e,source:a.source(),source1:a.source1(),action:"check_submission_exists"}});f.done(function(b){if(b.success||confirm("Image already exists in post: "+b.data+" , do you really want to publish?"))switch(d){case"publish":a.publish();case"publishEmbed":a.publishEmbed()}})}else switch(d){case"publish":a.publish();case"publishEmbed":a.publishEmbed()}},a.publish=function(){if(!a.imageUploaded())return void a.errors.image(!0);if(a.autoTitle()||a.errors.title(""===a.title()),!a.errors.title()&&!a.errors.image()){if(!BoredPanda.Config.isLoggedIn)return $("#add-post-modal").modal("hide"),BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(void 0,a.publish,BoredPanda.Translate.Signup.please_login_add_image);var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId"));var d={ko:ko.toJSON({headline:a.title(),description:"",source:{type:"url",url:a.source(),author:a.author()},source_1:{type:"url",url:a.source1(),author:a.author1()},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.image.image_url,"__200"),originalUrl:a.image.image_url,originalWidth:a.image.original_width,originalHeight:a.image.original_height,dimensions:a.image.dimensions,scaled:a.image.scaled||!1},externalPoints:a.externalPoints()}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b};a.publishButton(BoredPanda.Translate.AddPost.publishing);var e=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:d});return e.done(function(b){var d="";if("1"===b.post_limit_exceeded)d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>';else if(1===b.unknown_error)d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your image again.</p>';else if(b.postId>0){if(BoredPanda.Config.isTabletWidth)return""!==d&&BoredPanda.notice.setNotice(d),void window.location.replace(b.permalink);if(BoredPanda.Config.showSubmissionPopup===!0){var e=["Your submission has been launched!"],f=["Share and help it reach the moon."];a.ui.modal.headTitle(e[Math.floor(Math.random()*e.length)]),a.ui.modal.popupDescription(f[Math.floor(Math.random()*f.length)]);var g=encodeURIComponent(b.permalink+"?utm_source=author&utm_medium=social&utm_campaign=SubmissionAuthorShare");$("#share-modal a#facebook-share").attr("onclick","window.open('https://www.facebook.com/dialog/share?app_id="+BoredPanda.Config.fbAppId+"&display=popup&href="+g+"&redirect_uri="+encodeURIComponent(BoredPanda.Config.pandaBaseUrl+"/close.html")+"','facebook-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$("#share-modal a#twitter-share").attr("onclick","window.open('http://twitter.com/share?url="+g+"&via=boredpanda&text="+encodeURIComponent(a.title())+"','twitter-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$.ajax({type:"POST",url:"https://graph.facebook.com/?ids="+b.permalink+"&scrape=true",data:null,dataType:"json"}),$(".got-it-button").attr("href",b.permalink),$("#add-post-modal").modal("hide"),$("#share-modal").modal(),$(".share-buttons a").unbind("click"),BoredPanda.Config.isStaffMember||(BoredPanda.Tracking.trackClick(".share-buttons a","Share Popup","add_to_open_list"),BoredPanda.Tracking.trackImpression("#share-modal","Share Popup","add_to_open_list"))}BoredPanda.Config.isStaffMember&&b.error!==!1&&alert(b.error),a.newItems.push({postId:b.postId,title:b.title,permalink:b.permalink,displayName:b.displayName,authorLink:b.authorLink,userThumb:b.userThumb,source:b.source,sourceName:b.sourceName,source1:b.source1,sourceName1:b.sourceName1,position:b.position,coverSrc:BoredPanda.Utils.annotatePath(a.image.image_url,"__880")+"?upd=1",thumbSrc:BoredPanda.Utils.annotatePath(a.image.image_url,"__300"),textOpenList:!1,description:""})}a.publishButton(BoredPanda.Translate.AddPost.publish),BoredPanda.Config.returnUrl=b.permalink,""!==d&&BoredPanda.notice.showNotice(d),c()}),e}},a.publishSlider=function(){if(!a.slider.left()||!a.slider.right())return void a.errors.image(!0);if(BoredPanda.Config.isStaffMember&&(a.autoTitle()||a.errors.title(""===a.title()),!a.errors.title()&&!a.errors.image())){var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId"));var d={ko:ko.toJSON({headline:a.title(),description:"",source:{type:"url",url:a.source(),author:a.author()},source_1:{type:"url",url:a.source1(),author:a.author1()},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.slider.left().image_url,"__200"),originalUrl:a.slider.left().image_url,originalWidth:a.slider.left().original_width,originalHeight:a.slider.left().original_height,dimensions:a.slider.left().dimensions},slider:{rightImageUrl:a.slider.right().image_url,flip:a.slider.flip()},imageSlider:{headline:a.title(),description:"",source:{type:"url",url:"",author:""},source_1:{type:"url",url:"",author:""},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.slider.right().image_url,"__200"),originalUrl:a.slider.right().image_url,originalWidth:a.slider.right().original_width,originalHeight:a.slider.right().original_height,dimensions:a.slider.right().dimensions}}}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b};a.publishButton(BoredPanda.Translate.AddPost.publishing);var e=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:d});return e.done(function(b){var d="";"1"===b.post_limit_exceeded?d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>':1===b.unknown_error?d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your image again.</p>':b.postId>0&&(BoredPanda.AddPost.LeavePopup.publish(),window.location.reload()),a.publishButton(BoredPanda.Translate.AddPost.publish),""!==d&&BoredPanda.notice.showNotice(d),c()}),e}},a.renderEmbed=function(){if(a.errors.title(!1),a.errors.embed(!1),a.embed.generateError(!1),!a.embed.embedUrl())return void a.errors.embed(!0);if(BoredPanda.Config.isStaffMember){var b={action:"parse_embed_url",embed_url:a.embed.embedUrl(),single_image:a.embed.singleImage(),hide_caption:a.embed.hideCaption(),conversation:a.embed.tweetConversation(),watermark:a.embed.watermark(),instagramWatermark:a.embed.instagramWatermark(),not_embed:a.embed.tweetInFeed(),tweet_single_image:a.embed.tweetSingleImage()};a.embed.loading(!0),BoredPanda.Utils.wpAjax(b).done(function(b){a.source()||(a.source(a.embed.embedUrl()),a.author(b.embed_author)),a.title(b.title),a.embed.image=b,a.embed.imageSrc(b.image_url),a.embed.imageUploaded(!0),a.embed.loading(!1),a.source&&a.embed.showSource(!0)}).error(function(){a.embed.generateError(!0),a.embed.loading(!1)})}},a.publishEmbed=function(){if(a.errors.title(!1),a.errors.embed(!1),a.embed.generateError(!1),!a.title()&&!a.autoTitle())return void a.errors.title(!0);if(!a.embed.embedUrl())return void a.errors.embed(!0);if(BoredPanda.Config.isStaffMember){var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId")),a.embed.loading(!0),a.publishButton(BoredPanda.Translate.AddPost.publishing);var d={ko:ko.toJSON({headline:a.title(),description:"",source:{type:"url",url:a.source(),author:a.author()},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.embed.image.image_url,"__200"),originalUrl:a.embed.image.image_url,originalWidth:a.embed.image.original_width,originalHeight:a.embed.image.original_height,dimensions:a.embed.image.dimensions}}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b},e=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:d});return e.done(function(b){var d="";"1"===b.post_limit_exceeded?d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>':1===b.unknown_error?d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your image again.</p>':b.postId>0&&BoredPanda.AddPost.LeavePopup.publish(),a.newItems.push({postId:b.postId,title:b.title,permalink:b.permalink,displayName:b.displayName,authorLink:b.authorLink,userThumb:b.userThumb,source:b.source,sourceName:b.sourceName,source1:b.source1,sourceName1:b.sourceName1,position:b.position,coverSrc:BoredPanda.Utils.annotatePath(a.embed.image.image_url,"__880")+"?upd=1",thumbSrc:BoredPanda.Utils.annotatePath(a.embed.image.image_url,"__300"),textOpenList:!1,description:""}),a.publishButton(BoredPanda.Translate.AddPost.publish),""!==d&&BoredPanda.notice.showNotice(d),c()}),e}},a.publishTextSubmission=function(){if(!BoredPanda.Config.isLoggedIn)return $("#add-post-modal").modal("hide"),BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(void 0,a.publishTextSubmission,BoredPanda.Translate.Signup.please_login_add_submission);if(a.errors.description(""===a.description()),!a.errors.description()){var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId"));var d={headline:a.title(),description:a.description(),source:{type:"url",url:a.source(),author:a.author()}};a.image&&(d.image={mediaUrl:BoredPanda.Utils.annotatePath(a.image.image_url,"__200"),originalUrl:a.image.image_url,originalWidth:a.image.original_width,originalHeight:a.image.original_height,dimensions:a.image.dimensions,scaled:a.image.scaled||!1});var e={ko:ko.toJSON(d),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b,open_list_type:"text"};a.publishButton(BoredPanda.Translate.AddPost.publishing);var f=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:e});return f.done(function(b){var d="";if("1"===b.post_limit_exceeded)d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>';else if(1===b.unknown_error)d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your submission again.</p>';else if(b.postId>0){if(BoredPanda.Config.isTabletWidth)return""!==d&&BoredPanda.notice.setNotice(d),void window.location.replace(BoredPanda.Utils.getParameterByName("returnurl"));a.newItems.push({postId:b.postId,title:a.title(),description:a.description(),permalink:b.permalink,displayName:b.displayName,authorLink:b.authorLink,userThumb:b.userThumb,source:b.source,sourceName:b.sourceName,source1:b.source1,sourceName1:b.sourceName1,position:b.position,coverSrc:a.image?a.image.image_url:"",textOpenList:!0,thumbSrc:""})}$("#add-post-modal").modal("hide"),a.publishButton(BoredPanda.Translate.AddPost.publish),BoredPanda.Config.returnUrl=b.permalink,""!==d&&BoredPanda.notice.showNotice(d),c()}),f}},a.publishTextSubmissionMobile=function(b){if(""===a.description()?1===b?(a.description($.cookie("openListTextSubmission")),$.removeCookie("openListTextSubmission"),a.errors.description(""===a.description())):a.errors.description(!0):a.errors.description(!1),!a.errors.description()){var d=BoredPanda.Config.openListId;if(!BoredPanda.Config.isLoggedIn)return $.cookie("openListTextSubmission",a.description(),{expires:1,path:"/"}),$.cookie("openListId",d,{expires:1,path:"/"}),void BoredPanda.Login.form.show(window.location.pathname+"?textsub=1",void 0,BoredPanda.Translate.Signup.please_login_add_submission);0===d&&(d=$.cookie("openListId"),$.removeCookie("openListId"));var e={ko:ko.toJSON({headline:a.title(),description:a.description(),source:{type:"url",url:a.source(),author:a.author()}}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:d,open_list_type:"text"};a.publishButton(BoredPanda.Translate.AddPost.publishing);var f=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:e});return f.done(function(b){var d="";if("1"===b.post_limit_exceeded)d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>';else if(1===b.unknown_error)d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your submission again.</p>';else if(b.postId>0)return""!==d&&BoredPanda.notice.setNotice(d),void window.location.replace(b.permalink);a.publishButton(BoredPanda.Translate.AddPost.publish),BoredPanda.Config.returnUrl=b.permalink,""!==d&&BoredPanda.notice.showNotice(d),c()}),f}},a.uploadExternal=function(){if(a.externalPhoto()){a.uploadStarted(!0);var b={action:"upload_external_photo",url:a.externalPhoto()};$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"}).done(function(b){if(b.status===!1)return void a.uploadStarted(!1);var c=BoredPanda.Utils.annotatePath(b.data.image.image_url,"__"+a.imageFormat);a.image=b.data.image,a.imageSrc(c),a.title(b.data.imageData.title),a.author(b.data.imageData.author),a.source(a.externalPhoto()),a.showSource(!0),"undefined"!=typeof b.data.imageData.points&&a.externalPoints(b.data.imageData.points),a.errors.image(!1),a.imageUploaded(!0),a.uploadStarted(!1)})}},a.mobileAddImage=function(){if(!BoredPanda.Config.isLoggedIn){var a=$(".mobile-add-image-block a").attr("href");return BoredPanda.Login.form.show(a),$.cookie("openListId",BoredPanda.Config.openListId,{expires:1,path:"/"}),!1}return!0},a.canvas={canvas:ko.observable(""),topFontSize:ko.observable(40),bottomFontSize:ko.observable(40),topText:ko.observable(""),bottomText:ko.observable(""),loading:ko.observable(!0),error:ko.observable(!1),errorText:ko.observable("")},a.topTextFontInc=function(){a.canvas.topFontSize(a.canvas.topFontSize()+2)},a.topTextFontDec=function(){a.canvas.topFontSize(a.canvas.topFontSize()-2)},a.bottomTextFontInc=function(){a.canvas.bottomFontSize(a.canvas.bottomFontSize()+2)},a.bottomTextFontDec=function(){a.canvas.bottomFontSize(a.canvas.bottomFontSize()-2)},a.memeGenerator=function(b){function c(){a.imageUploaded(!1);var c=a.canvas.topFontSize(),g=a.canvas.bottomFontSize();f.clearRect(0,0,e.width,e.height),f.drawImage(h,0,0,h.width,h.height),f.lineWidth=4,f.font=c+"pt Anton",f.strokeStyle="black",f.fillStyle="white",f.textAlign="center",f.textBaseline="top";var i=b.find(".meme-texts .top-text textarea").val(),j=b.find(".meme-texts .bottom-text textarea").val();i||j?(a.canvas.topText(i),a.canvas.bottomText(j)):(i="Top text (optional)",j="Bottom text (optional)"),i=i.toUpperCase();var k=e.width/2,l=10;d(f,i,k,l,e.width-50,c+10,!1),f.textBaseline="bottom",f.font=g+"pt Anton",j=j.toUpperCase(),l=e.height-10,d(f,j,k,l,e.width-50,g+10,!0)}function d(a,b,c,d,e,f,g){var h=g?"unshift":"push";f=g?-f:f;for(var i=[],j=b.split("\n"),k=0;k<j.length;k++){for(var l="",m=j[k].split(" "),n=0;n<m.length;n++){var o=l+" "+m[n],p=a.measureText(o),q=p.width;q>e?(l&&i[h](l),l=m[n]+" "):l=o}i[h](l)}for(var r in i)a.strokeText(i[r],c,d+f*r,e),a.fillText(i[r],c,d+f*r,e)}var e=b.find(".meme-canvas").get(0),f=e.getContext("2d"),g=function(a,b){e.width=a,e.height=b},h=new Image;h.setAttribute("crossOrigin","anonymous"),h.src=memeImage,h.onload=function(){a.canvas.loading(!1),g(this.width,this.height),c()};var i=b.find(".meme-texts .top-text textarea").get(0),j=b.find(".meme-texts .bottom-text textarea").get(0);i.addEventListener("keydown",c),i.addEventListener("keyup",c),i.addEventListener("change",c),j.addEventListener("keydown",c),j.addEventListener("keyup",c),j.addEventListener("change",c),b.find(".text-font-size span").bind("click",c),b.find(".publish-button").click(function(b){return a.canvas.canvas(e),BoredPanda.Config.isLoggedIn?(b.preventDefault(),void a.createMeme()):($("#add-post-modal").modal("hide"),BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(void 0,a.createMeme,BoredPanda.Translate.Signup.please_login_add_image))})},a.createMeme=function(){if(a.canvas.error(!1),a.title(a.canvas.topText()?a.canvas.topText():a.canvas.bottomText()),!a.title()&&!a.autoTitle())return void a.errors.title(!0);if(a.publishButton(BoredPanda.Translate.AddPost.publishing),a.imageUploaded())return void a.publish();var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"));var c={image:a.canvas.canvas().toDataURL(),openListId:b,action:"save_meme_image"},d=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:c});return d.done(function(b){if(b.success!==!0)a.canvas.errorText(b.error?b.error:"Error occurred. Please try again."),a.canvas.error(!0),a.publishButton(BoredPanda.Translate.AddPost.publish);else if(b.image.image_url){var c=BoredPanda.Utils.annotatePath(b.image.image_url,"__"+a.imageFormat);a.image=b.image,a.imageSrc(c),a.errors.image(!1),a.imageUploaded(!0),a.publish()}else a.errors.image(!0),a.publishButton(BoredPanda.Translate.AddPost.publish)}),d},a.uploader()},a.View={init:function(){this.orderDropDown(),BoredPanda.Config.openListId>0&&(this.showMoreButton(),this.initLazyLoading()),this.unhideSubmission(),this.readMoreSubmissionDescription(),BoredPanda.Config.isStaffMember&&this.submitAdminVotes()},pageNumb:1,showMoreButton:function(){var b=$(".open-list-items");b.length>0&&(b.infiniteScroll({append:".open-list-items div.open-list-item, .desktop-in-content-ad, .post-mobile-ad-within-content",status:".page-load-status",hideNav:".open-list-pagination",debug:!1,history:!1,scrollThreshold:5e3,path:".open-list-pagination a"}),b.on("append.infiniteScroll",function(b,c,d,e){BoredPanda.Comment.destroyCommentImages(),BoredPanda.Comment.initCommentImages(),BoredPanda.Slider.bindDrag(),BoredPanda.Flipper.bind(),BoredPanda.ShareBox.sharesCount(),BoredPanda.Utils.reloadAds(e),a.View.initLazyLoading(),a.View.pageNumb++,3===a.View.pageNumb&&BoredPanda.Utils.loadAnchor()}))},initLazyLoading:function(){var a=navigator.userAgent;if("IntersectionObserver"in window&&-1===a.indexOf("MSIE ")&&-1===a.indexOf("Trident/")&&-1===a.indexOf("Edge/")){var b="100000px 0px 1000px 0px",c=!1;-1!=navigator.userAgent.indexOf("Chrome")&&(b="1000px 0px");var d=lozad(".lozad",{rootMargin:b,threshold:.1,loaded:function(a){!c&&a.getAttribute("data-index")>19&&(BoredPanda.Utils.loadAnchor(),c=!0)}});d.observe()}else $(".lozad").each(function(){if(void 0===$(this).attr("src")){var a=$(this).attr("data-src");$(this).attr("src",a)}})},orderDropDown:function(){$(".open-list-sort-dd").on("click",function(a){a.preventDefault(),a.stopPropagation(),$(".open-list-sort-options").is(":hidden")?$(".open-list-sort-options").fadeIn("medium",function(){}):$(".open-list-sort-options").fadeOut("medium",function(){})}),$(".open-list-sort-dd").on("click",function(a){a.stopPropagation()}),$(document).on("click",function(){$(".open-list-sort-options").fadeOut("medium",function(){})})},unhideSubmission:function(){$(document).on("click",".open-list-item.hidden-submission a",function(){var a=$(this).closest(".open-list-item.hidden-submission");a.hide(),$('.open-list-item[data-submission-id="'+a.data("hidden-submission-id")+'"]').show()})},readMoreSubmissionDescription:function(){$(document).on("click",".post-content-description.not-full .read-more",function(){$(this).closest(".post-content-description.not-full").hide(),$(this).closest(".post-content-description.not-full").parent().find(".post-content-description.full").show()})},submitAdminVotes:function(){$(document).on("change",".admin-submission-votes input",function(){window.voteStarted||(window.voteStarted=new Date)}),$(document).on("click",".admin-vote-for-post",function(){if($(".admin-submission-votes input:checked").length<$(".admin-submission-votes").length)return $(".admin-submission-votes").each(function(){return 0===$(this).find("input:checked").length?($("html, body").animate({scrollTop:$(this).closest(".open-list-item").offset().top},1e3),!1):void 0}),void alert("Please vote for all submissions!");var a=$.map($(".admin-submission-votes input:checked"),function(a){return{post_id:a.name,votes:a.value}}),b={action:"admin_save_voting_mode",data:a,open_list_id:BoredPanda.Config.openListId,votes_consumed:Math.floor((new Date-window.voteStarted)/1e3)},c=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:b});c.success(function(a){alert(a.message)}),c.error(function(){alert("Error! Please try again.")})})}},$(document).ready(function(b){BoredPanda.Config.inOpenList&&(a.View.init(),BoredPanda.OpenList.appendForm=new BoredPanda.OpenList.AppendForm,ko.applyBindings(BoredPanda.OpenList.appendForm,b(".left-content-column")[0]),b(".append-open-list.meme-generator").each(function(){BoredPanda.OpenList.appendForm.memeGenerator(b(this))}),BoredPanda.OpenList.appendForm.autoTitle("true"===autoTitles)),b(".desktop-add-image.add-image-button:not(.text-open-list) a").click(function(a){return a.preventDefault(),b("#add-post-modal").modal(),!1}),b(".desktop-add-image.add-image-button.text-open-list a").click(function(a){return a.preventDefault(),b(".text-open-list-append-form").show(),b(this).css("background","#cfcfcf"),!1}),b("#add-post-modal .add-post-dialog").click(function(a){a.target===this&&b("#add-post-modal").modal("hide")}),"1"==BoredPanda.Utils.getParameterByName("offline_voting")&&b("a").click(function(a){return this.classList.contains("btn-up")||this.classList.contains("btn-down")?!0:confirm("Are you sure?")})})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Settings={ui:function(){BoredPanda.Settings.ui={settingsBio:ko.observable(""),settingsDisplay:ko.observable(""),settingsWebsite:ko.observable(""),settingsFacebook:ko.observable(""),settingsTwitter:ko.observable(""),settingsFlickr:ko.observable(""),settingsAdminBox:ko.observable(BoredPanda.Config.adminBox),currentPassword:ko.observable(""),newPassword:ko.observable(""),repeatNewPassword:ko.observable(""),resetEmail:ko.observable(""),resetHash:ko.observable(""),message:ko.observable(""),button:ko.observable(BoredPanda.Translate.Settings.save),removeAccountButton:ko.observable(BoredPanda.Translate.Settings.remove_my_account),showErrors:ko.observable(!1),passwordChanged:ko.observable(!1)}},init:function(){$("#profile-settings").length>0&&(this.profileImage(),BoredPanda.Settings.ui(),$("#profile-settings").each(function(){ko.applyBindings(BoredPanda.Settings,this)}))},saveSettings:function(){if(this.ui.showErrors(!1),0===this.ui.settingsDisplay().length&&this.ui.showErrors(!0),this.ui.showErrors()===!0)return void $("html, body").animate({scrollTop:0},"slow");this.ui.button(BoredPanda.Translate.Settings.saving);var a={action:"save_settings_form",settingsDisplay:this.ui.settingsDisplay(),settingsWebsite:this.ui.settingsWebsite(),settingsFacebook:this.ui.settingsFacebook(),settingsTwitter:this.ui.settingsTwitter(),settingsFlickr:this.ui.settingsFlickr(),settingsBio:this.ui.settingsBio(),settingsAdminBox:this.ui.settingsAdminBox()},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"}),c=this.ui.button,d=this.ui.message;b.done(function(){c(BoredPanda.Translate.Settings.save),d(BoredPanda.Translate.Settings.changes_saved),$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){d("")},5e3)})},savePassword:function(){if(this.ui.showErrors(!1),this.ui.message(""),0===this.ui.currentPassword().length&&this.ui.showErrors(!0),0===this.ui.newPassword().length&&this.ui.showErrors(!0),(0===this.ui.repeatNewPassword().length||this.ui.newPassword()!==this.ui.repeatNewPassword())&&this.ui.showErrors(!0),BoredPanda.Utils.isPasswordSecure(this.ui.newPassword())||(this.ui.message(BoredPanda.Translate.Settings.password_strength_error),this.ui.showErrors(!0)),this.ui.showErrors()===!0)return void $("html, body").animate({scrollTop:0},"slow");this.ui.button(BoredPanda.Translate.Settings.saving);var a={action:"save_change_password_form",currentPassword:this.ui.currentPassword(),newPassword:this.ui.newPassword(),repeatNewPassword:this.ui.repeatNewPassword()},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"}),c=this.ui.button,d=this.ui.message;b.done(function(a){switch(c(BoredPanda.Translate.Settings.save),a.success){case"1":d(BoredPanda.Translate.Settings.changes_saved);break;case"-1":d(BoredPanda.Translate.Settings.passwords_not_match);break;case"-2":d(BoredPanda.Translate.Settings.invalid_password);break;default:d(BoredPanda.Translate.Settings.unknown_error)}$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){d("")},5e3)})},resetPassword:function(){if(this.ui.showErrors(!1),this.ui.message(""),0===this.ui.newPassword().length&&this.ui.showErrors(!0),(0===this.ui.repeatNewPassword().length||this.ui.newPassword()!==this.ui.repeatNewPassword())&&this.ui.showErrors(!0),BoredPanda.Utils.isPasswordSecure(this.ui.newPassword())||(this.ui.message(BoredPanda.Translate.Settings.password_strength_error),this.ui.showErrors(!0)),this.ui.showErrors()===!0)return void $("html, body").animate({scrollTop:0},"slow");this.ui.button(BoredPanda.Translate.Settings.saving);var a={action:"save_reset_password_form",email:this.ui.resetEmail(),hash:this.ui.resetHash(),newPassword:this.ui.newPassword(),repeatNewPassword:this.ui.repeatNewPassword()},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"}),c=this.ui.button,d=this.ui.message,e=this;b.done(function(a){switch(c("Save"),a.success){case"1":d(BoredPanda.Translate.Settings.password_changed),e.ui.passwordChanged(!0);break;case"-1":d(BoredPanda.Translate.Settings.passwords_not_match);break;default:d(BoredPanda.Translate.Settings.unknown_error)}$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){d("")},5e3)})},profileImage:function(){var a=new plupload.Uploader({runtimes:"html5,html4",multi_selection:!1,browse_button:"edit-profile-img-btn",url:ajax_object.ajax_url,max_file_size:"4mb",multipart_params:{action:"upload_profile_picture"},unique_names:!1,init:{FilesAdded:function(a){a.start()}},filters:[{title:"Image files",extensions:"jpg,jpeg,png"}]});a.init(),a.bind("FileUploaded",function(a,b,c){var d=$.parseJSON(c.response);$(".profile-image").attr("src",d.image_url)})},removeAccountModal:function(){$("#delete-modal").modal()},removeAccount:function(){var a={action:"delete_account"},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"});b.done(function(){window.location=BoredPanda.Config.pandaBaseUrl})}},$(document).ready(function(){BoredPanda.Settings.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Recs={init:function(){return this.enableDebug=!1,this.options={similar_post_algo:"simple_post_similarity",similar_post_var:"default"},this.baseUrl=BoredPanda.Config.recommendationServiceUrl,this.postsLoadedInSession=[],this.recommendedPosts=[],this.useRecFromOtherReq=!0,this.debug("Initialized"),!0},debug:function(a){this.enableDebug&&console.log(a)},addLoadedPost:function(a){a=this.normalizeSlug(a),this.postsLoadedInSession.push(a)},removeLoadedPost:function(a){a=this.normalizeSlug(a);var b=this.getCurrentPostName(),c=!1;for(var d in this.postsLoadedInSession)this.postsLoadedInSession[d]===b&&(this.postsLoadedInSession.splice(d,1),c=!0);c&&(void 0===this.recommendedPosts[a]&&(this.recommendedPosts[a]=[]),this.recommendedPosts[a].unshift({post:b}))},hasBeenLoaded:function(a){return a=this.normalizeSlug(a),this.postsLoadedInSession.indexOf(a)>-1},recommendSimilarToCurrent:function(a){var b=this.getCurrentPostName();if(this.debug("Getting recs for "+b),this.debug("Recs history: "+this.postsLoadedInSession),this.debug("Recs queue: "),this.debug(this.recommendedPosts),void 0!==this.recommendedPosts[b]&&this.recommendedPosts[b].length>0)return void this.recommend(a,[]);var c=this.baseUrl+"/post/similar/"+this.options.similar_post_algo+"/"+this.options.similar_post_var+"/u/"+b+"/10";this.debug("Getting recs from "+c);var d=this;$.getJSON(c,function(b){d.debug("Response data: "),d.debug(b),d.recommend(a,b)})},getCurrentPostName:function(){var a=window.location.pathname;return this.normalizeSlug(a)},recommend:function(a,b){var c=b.recommendations||[],d=this.getCurrentPostName();void 0===this.recommendedPosts[d]&&c.length>0&&(this.recommendedPosts[d]=c);for(var e,f,g=this.recommendedPosts[d].length,h=0;g>h;h++)if(e=this.recommendedPosts[d].shift(),f="/"+e.post+"/",!this.hasBeenLoaded(e.post)&&window.location.pathname!==f)return void a(e.post);if(this.useRecFromOtherReq)for(var i in this.recommendedPosts){g=this.recommendedPosts[i].length;for(var j=0;g>j;j++)if(e=this.recommendedPosts[i].shift(),f="/"+e.post+"/",!this.hasBeenLoaded(e.post)&&window.location.pathname!==f)return void a(e.post)}},normalizeSlug:function(a){return"/"===a.slice(-1)&&(a=a.slice(0,-1)),"/"===a.slice(0,1)&&(a=a.slice(1)),a},getRecommendationsBasedOnHistory:function(a){if(void 0===BoredPanda.Analytics)return null;var b=BoredPanda.Analytics.getUniquePostIds(),c=BoredPanda.Analytics.getSeenRecommendations(),d=BoredPanda.Analytics.getUserId();if(b.length<10)return null;var e={popularRecs:3,personalRecs:3,format:"mid_column"};a=$.extend({},e,a);var f=this.getCurrentPostName(),g={action:"get_personal_recommendations",personal_recs:a.personalRecs,popular_recs:a.popularRecs,browsing_history:JSON.stringify(b),exclude:JSON.stringify(c),post_name:f,uid:d};$.ajax({type:"POST",url:ajax_object.ajax_url,data:g,dataType:"json",success:function(b){b.success&&b.data&&BoredPanda.Recs.renderPersonalAndPopularRecommendations(b.data.popular,b.data.personal,a.format)}})},renderPersonalAndPopularRecommendations:function(a,b,c){(null===a||void 0===a)&&(a=[]),(null===b||void 0===b)&&(b=[]);var d=null,e=[],f=null,g=null;if(void 0!==c&&"rows"===c&&a.length>=3&&b.length>=3)for(var h=0;6>h;h++)if(3>h){var i=b[h];i.recommendation_type="personal",d=".post-bottom-list.recommended-posts article:eq("+h+")",BoredPanda.Recs.renderSingleRecommendation(d,i)}else{var j=a[h-3];j.recommendation_type="popular",d=".post-bottom-list.recommended-posts article:eq("+h+")",BoredPanda.Recs.renderSingleRecommendation(d,j)}if("all_popular"===c&&a.length>=4){e=[0,1,3,4];for(var k in e)f=e[k],d=".post-bottom-list.recommended-posts article:eq("+f+")",g=a[k],g.recommendation_type="popular",BoredPanda.Recs.renderSingleRecommendation(d,g)}if((void 0===c||"mid_column"===c)&&a.length>=2&&b.length>=2){e=[0,1,3,4];for(var l in e){switch(f=e[l],d=".post-bottom-list.recommended-posts article:eq("+f+")",g=null,f){case 0:g=b[0],g.recommendation_type="personal";break;case 1:g=a[0],g.recommendation_type="popular";break;case 3:g=b[1],g.recommendation_type="personal";break;case 4:g=a[1],g.recommendation_type="popular"}BoredPanda.Recs.renderSingleRecommendation(d,g)}}var m=a.concat(b),n=[];for(var o in m)g=m[o],n.push(parseInt(g.post_id));BoredPanda.Analytics.setRecommendationsAsSeen(n)},renderSingleRecommendation:function(a,b){$(a+" a").attr("href",BoredPanda.Config.pandaBaseUrl+"/"+b.permalink+"/"),$(a+" a").attr("title",b.post_title),$(a+" img").attr("alt",b.post_title).attr("title",b.post_title),$(a+" a.box-title").html(b.post_title),$(a+" img.landscape").attr("src",b.thumb),$(a+" img.portrait").attr("src",b.square_thumb),void 0!==b.recommendation_type&&$(a).attr("data-rec-type",b.recommendation_type)}},$(document).ready(function(){})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.PostScrollQueue={init:function(a){return 1!==$("section.clearfix > article.post").length||1===$(".single-image-template").length?!1:$(window).width()>979?!1:(this.initialPost=window.location.pathname,
this.initialPost=this.initialPost.substr(1,this.initialPost.length-2),this.initialTitle=document.title,this.isLoading=!1,this.enableDebug=!1,this.eventsSubmitted={},this.options={},this.options.bottomElement=".post-tags",this.options.startLoadingThreshold=200,this.options.loadingImage=BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif",$.extend(this.options,a),this.queue=[],this.debug("Initial post "+this.initialPost),BoredPanda.Recs.postsLoadedInSession.push(this.initialPost),"popular"===this.options.source&&(this.debug("Source: popular"),this.completeInit()),"recs"===this.options.source&&(void 0!==this.options.waitForRecs&&this.options.waitForRecs?this.waitForRecs():this.completeInit()),!0)},waitForRecs:function(){if(this.debug("Waiting for Recs"),void 0===BoredPanda.Recs){var a=this;setTimeout(function(){a.waitForRecs()},100)}else this.debug("Recs ready"),this.completeInit()},completeInit:function(){if("popular"===this.options.source){var a=this;$("section.related-posts a.box-title").each(function(){var b=$(this).attr("href");if(void 0!==b&&-1!==b.indexOf("boredpanda")){"/"===b.slice(-1)&&(b=b.slice(0,-1));var c=b.split("/"),d=c[c.length-1];-1===BoredPanda.Recs.postsLoadedInSession.indexOf(d)&&a.queue.push(d)}}),this.debug("Queue populated with popular posts"),this.debug(this.queue)}this.scroll(),this.debug("Init completed")},addRecommendationsToQueue:function(a){var b=this;b.debug("addRecommendationsToQueue()"),$(".left-content-column").eq(0).append('<section class="scroll-loaded-section"></section>'),$("section.scroll-loaded-section:last").html('<div class="text-centered"><img src="'+this.options.loadingImage+'" alt="Loading"/></div>'),BoredPanda.Recs.recommendSimilarToCurrent(function(c){return b.debug("Got Recommendations"),b.debug(c),void 0===c||null===c?(b.debug("No recommendations in response"),void a()):void a(c)})},loadNext:function(a){if(void 0===a)return void this.debug("Nothing to load. Empty queue");this.debug("Loading "+a);var b=this,c=$.ajax({url:"/"+a+"/",data:{only_post:1},type:"POST"});c.done(function(c){if($("section.scroll-loaded-section:last").html(c),BoredPanda.Experiments.init(),b.isLoading=!1,b.debug("Loaded "+a),$(".sharebar").hide(),$("section.scroll-loaded-section:last article.post").addClass("scroll-loaded"),$("section.scroll-loaded-section:last article.post").attr("data-post-name",a),$("section.scroll-loaded-section:last article.post .fixed-bottom-overlay").hide(),b.updateUrlBar(),BoredPanda.Recs.postsLoadedInSession.push(a),BoredPanda.FooterControl.update(),BoredPanda.Experiments.init(),void 0!==FB){var d;$(".post-comments:not(:last)").each(function(){d=$(this).height(),$(this).css("min-height",d+"px")}),FB.XFBML.parse()}BoredPanda.Comment.ui()})},updateUrlBar:function(){var a=this;$("article.post").unbind("inview"),$("article.post").bind("inview",function(b,c){var d=window.location.pathname,e=window.location.hostname;d=d.substr(1,d.length-2);var f=$(this).find("h1").text().trim();if(c)if($(this).hasClass("scroll-loaded")){var g=$(this).attr("data-post-name");if(a.debug("Visible "+g),g!==d){history.pushState({},g,"http://"+e+"/"+g+"/"),document.title=f+" | Bored Panda",BoredPanda.Recs.addLoadedPost(g);var h=function(){var b=$(document).scrollTop(),c=$("section.scroll-loaded-section:last").offset().top,d=$(window).height(),e=.1*d;if(c-e>b)setTimeout(h,250);else{var f,g=$("section.scroll-loaded-section:last .dfp-ad").length,i=$(".dfp-ad").length,j=0,k=i-g;$(".dfp-ad").each(function(){k>j&&(f=$(this).height(),$(this).wrap('<div style="display: block; height: '+f+'px; width: 100%"></div>'),$(this).remove()),j++}),googletag.pubads().refresh();var l=window.location.pathname;l=l.substr(1,l.length-2),a.submitEventPostTopInView(l);var m="";m=1===$('article[data-post-name="'+l+'"]').length?$('article[data-post-name="'+l+'"]').find("h1").text().trim():a.initialTitle,m+=" | Bored Panda",a.submitEventPageView(l,"/"+l+"/",m)}};return h(),!0}}else if(a.debug("Visible original post"),a.initialPost!==d)return history.pushState({},a.initialPost,"http://"+e+"/"+a.initialPost+"/"),document.title=f+" | Bored Panda",!0}),$("div.post-content").unbind("inview"),$(".post-comments").unbind("inview"),$(".post-comments").bind("inview",function(b,c){var d=window.location.pathname;d=d.substr(1,d.length-2),c&&$(this).closest("article").hasClass("scroll-loaded")&&a.submitEventPostBottomInView(d)})},addToQueue:function(a){this.queue.push(a)},debug:function(a){this.enableDebug&&console.log(a)},scroll:function(){var a=this;BoredPanda.Scroll.scrollCallback.add(function(){if($(window).width()>979)return!1;var b=$(a.options.bottomElement).length;if(b>0){var c=$(a.options.bottomElement).eq(b-1).offset().top-($(window).scrollTop()+$(window).height());c<a.options.startLoadingThreshold&&!a.isLoading&&(a.isLoading=!0,"recs"===a.options.source?a.addRecommendationsToQueue(function(b){a.loadNext(b)}):a.loadNext())}})},submitEventPostTopInView:function(a){return void 0!==this.eventsSubmitted[a]&&this.eventsSubmitted[a].topView===!0?void this.debug(a+": eventPostTop is already submitted"):(ga("send","event","Pageviews","Inf Scroll","Scroll Top"),this.debug(a+" submitted Pageviews -> Inf Scroll -> Scroll Top"),void 0===this.eventsSubmitted[a]&&(this.eventsSubmitted[a]={}),void(this.eventsSubmitted[a].topView=!0))},submitEventPostBottomInView:function(a){return void 0!==this.eventsSubmitted[a]&&this.eventsSubmitted[a].bottomView===!0?void this.debug(a+": eventPostBottom is already submitted"):(ga("send","event","Pageviews","Inf Scroll","Scroll Bottom"),ga("send","event","Navigation","Post","Bottom Reached"),this.debug(a+" submitted Pageviews -> Inf Scroll -> Scroll Bottom"),void 0===this.eventsSubmitted[a]&&(this.eventsSubmitted[a]={}),void(this.eventsSubmitted[a].bottomView=!0))},submitEventPageView:function(a,b,c){return void 0!==this.eventsSubmitted[a]&&this.eventsSubmitted[a].pageview===!0?void this.debug(a+": pageview is already submitted"):(ga("send",{hitType:"pageview",page:b,title:c}),this.debug(a+" submitted pageview, url "+b+", title "+c),void 0===this.eventsSubmitted[a]&&(this.eventsSubmitted[a]={}),void(this.eventsSubmitted[a].pageview=!0))}},$(document).ready(function(){})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.FBWidgets={mobile_cookie:"disablefbmobilewidget",twitter_mobile_cookie:"disabletwittermobilewidget",desktop_cookie:"disablefbdesktopwidget",isMobileWidgetVisible:function(){return void 0===$.cookie(this.mobile_cookie)&&BoredPanda.Config.isTabletWidth&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},isTwitterMobileWidgetVisible:function(){return void 0===$.cookie(this.twitter_mobile_cookie)&&BoredPanda.Config.isTabletWidth&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},isDesktopWidgetVisible:function(){return void 0===$.cookie(this.desktop_cookie)&&!BoredPanda.Config.isTabletWidth&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},initMobile:function(){if("twitter"===BoredPanda.Utils.getParameterByName("utm_source")){if(!this.isTwitterMobileWidgetVisible())return void BoredPanda.AppPromotion.initUpdated()}else if(!this.isMobileWidgetVisible())return void BoredPanda.AppPromotion.initUpdated();$(".app-promotion .updated .mobile-page-like-widget").show(),$(".app-promotion .updated-like-widget").show(),$(".header").addClass("promotion-updated"),$(".main.bp-container").addClass("promotion-updated"),$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").attr("style","top: 49px;"),$(".main.promotion-updated").attr("style","margin-top: 6.5em !important;"))},initDesktop:function(){this.isDesktopWidgetVisible()&&BoredPanda.Scroll.scrollCallback.add(function(){if($("#post-comments-area").length>0){var a=$("#post-comments-area").offset().top+$("#post-comments-area").height();$(document).scrollTop()>a&&$(".fixed-bottom-facebook-widget").is(":hidden")?$(".fixed-bottom-facebook-widget").show():$(document).scrollTop()+window.innerHeight<a&&$(".fixed-bottom-facebook-widget").is(":visible")&&$(".fixed-bottom-facebook-widget").hide()}})},initLinks:function(){$(".app-promotion .mobile-page-like-widget .close-block a.close-icon").on("click",function(){$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").removeAttr("style"),$(".main.promotion-updated").removeAttr("style")),$(".header").hasClass("promotion-updated")&&($(".header").removeClass("promotion-updated"),$(window).scroll()),$(".main.bp-container").hasClass("promotion-updated")&&$(".main.bp-container").removeClass("promotion-updated"),$.cookie(BoredPanda.FBWidgets.mobile_cookie,"1",{expires:60,path:"/"}),$(".app-promotion").remove()}),$(".fixed-bottom-facebook-widget .modal-close").on("click",function(){$.cookie(BoredPanda.FBWidgets.desktop_cookie,"1",{expires:60,path:"/"}),$(".fixed-bottom-facebook-widget").remove()}),$(".fixed-bottom-facebook-widget .close-text").on("click",function(){$.cookie(BoredPanda.FBWidgets.desktop_cookie,"1",{expires:60,path:"/"}),$(".fixed-bottom-facebook-widget").remove()})}},$(document).ready(function(){})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Experiments={init:function(){this.debugging=!1,this.recommendations();var a=BoredPanda.Config.experimentsOptions,b=a.length>1;if(void 0===a||0===a.length)return void this.debug("No experiments found");var c=null,d=$.cookie("experimentId");if(d)for(var e in a)if(1===a[e].enabled&&a[e].id_number===d){if("all"===a[e].screen_size){c=a[e];break}if("big"===a[e].screen_size&&!BoredPanda.Config.isMobileWidth){c=a[e];break}if("small"===a[e].screen_size&&BoredPanda.Config.isMobileWidth){c=a[e];break}}if(!c)for(var e in a)if(1===a[e].enabled){if("all"===a[e].screen_size){c=a[e];break}if("big"===a[e].screen_size&&!BoredPanda.Config.isMobileWidth){c=a[e];break}if("small"===a[e].screen_size&&BoredPanda.Config.isMobileWidth){c=a[e];break}}if(null===c)return void this.debug("No suitable experiment for the device has been found");if("undefined"==typeof cxApi)return void this.debug("Experiments API is not loaded");this.debug("Found an experiment"),this.debug(c);var f=0,g=BoredPanda.Config.experimentsToInit;if(Array.isArray(g)&&g.length>0&&g[0].id===c.id_number&&parseInt(g[0].variation)>=0){var h=BoredPanda.Config.experimentsToInit[0];cxApi.setChosenVariation(h.variation,h.id),f=h.variation,this.debug("Initializing "+f+" "+h.id)}else if(b){var i=cxApi.getChosenVariation(c.id_number);i===cxApi.NO_CHOSEN_VARIATION&&i!==cxApi.NOT_PARTICIPATING?(cxApi.setChosenVariation(c.default_variation,c.id_number),f=c.default_variation,this.debug("Default variation set: "+f)):(f=i,this.debug("GA returned "+f))}else f=cxApi.chooseVariation(c.id_number),this.debug("GA chose "+f);this.storeVariationInClient(c.id_number,f),this.applyBehaviour(f)},debug:function(a){if(this.debugging){var b=typeof a;"string"!==b&&"number"!==b&&"boolean"!==b?console.log(a):console.log("[exp] "+a)}},storeVariationInClient:function(a,b){var c="experiment_"+a,d="experimentId";$.cookie(c,b,{expires:90,path:"/"}),$.cookie(d,a,{expires:90,path:"/"})},applyBehaviour:function(a){this.debug("Chosen variation "+a),this.header(a)},header:function(a){a="#variation1"===window.location.hash?1:a,a="#variation0"===window.location.hash?0:a,1==a&&($(".header").addClass("fixed"),$(".sidebar .sticky").addClass("sticky-header"))},recommendations:function(){var a=this;if(!BoredPanda.Config.isMobileWidth&&BoredPanda.Config.postId&&BoredPanda.Config.recommendationExperimentsInit){var b={action:"pick_recommendation_experiment",post_id:BoredPanda.Config.postId},c=BoredPanda.Utils.wpAjax(b);c.success(function(b){if(b.success===!0){var c=$('.post-recommendations .recommended-posts article.popular-post-rec[data-post-id="'+b.data.post_id+'"]'),d=$(".post-recommendations .recommended-posts article.popular-post-rec");a.debug("Recommendation found"),a.debug("Popular recs: "+d.length),c.length>0?(c.hide(),a.debug("Existing recommendation hidden")):d.length>1&&($(d[1]).hide(),a.debug("Second rec found")),$(b.data.html).insertAfter(d[0]),a.debug("Experiment rec inserted"),BoredPanda.ContentTracking.recommendationExperimentInit()}})}}},$(document).ready(function(){BoredPanda.Experiments.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.ContactAuthor=function(){var a=this,b=$(".contact-author-form"),c=b.children(".modal"),d=function(){return a.model.loading(!0),e(),BoredPanda.Utils.wpAjax({action:"load_contact_author_form"},"html").then(function(b){c.modal("hide"),c.html(b),$(".contact-author-form").each(function(){ko.cleanNode(this),ko.applyBindings(BoredPanda.contactAuthor.model,this)}),c.modal("show"),a.model.formLoaded=!0,a.model.loading(!1)})},e=function(){var b=a.$button;a.model.authorName(b.data("author-name")),a.model.authorSlug(b.data("author-slug")),a.model.senderName(b.data("sender-name")),a.model.senderEmail(b.data("sender-email")),a.model.title("Send Email to "+a.model.authorName()),a.model.text("Dear "+a.model.authorName()+",\n\n\n\nBest wishes,\n"+a.model.senderName())},f=function(b){var c='<a href="/contact-us/">contact us</a>',d={1:"Whoops! Our automated checker thinks your message is spam. If not "+c,2:"It seems that this panda does not want to be contacted. Sorry!",3:"It looks that you've reached your daily message limit. If you want to send more "+c,4:"We have already delivered a message from you to this author today. You can send another in 24 hours or "+c,5:"Whoops! Something went wrong on our end. Try again or "+c+" for help",6:"Whoops! Something went wrong on our end. Try again or "+c+" for help"},e=b.data.status;a.model.errorMessage(d[e]),console.log("Contact Author error: "+b.data.message)};a.openForm=function(b,e){return BoredPanda.Config.isLoggedIn?(a.$button=a.$button||$(e.currentTarget),c.modal("show"),a.model.formLoaded?void 0:d()):void BoredPanda.Login.form.show()},a.sendEmail=function(){a.model.loading(!0),BoredPanda.Tracking.trackEvent("Contact Author","Send","click"),BoredPanda.Utils.wpAjax({action:"contact_author",text:a.model.text(),author_slug:a.model.authorSlug(),sender_name:a.model.senderName(),sender_email:a.model.senderEmail()}).then(function(b){b.success?(a.model.success(!0),BoredPanda.Tracking.trackEvent("Contact Author","Send","success")):f(b),a.model.loading(!1)}).fail(function(){f({data:{status:6,message:"Most likely a 503 error."}}),a.model.loading(!1)}).done(function(){})},a.model={loading:ko.observable(!1),formLoaded:!1,openForm:a.openForm,sendEmail:a.sendEmail,success:ko.observable(!1),errorMessage:ko.observable(""),title:ko.observable(""),authorName:ko.observable(""),authorSlug:ko.observable(""),senderName:ko.observable(""),senderEmail:ko.observable(""),text:ko.observable("")}},b=BoredPanda.EnableContactAuthor=function(){var a=this,b=a.model={allow:ko.observable($(".allow-contact-author input").data("checked")),loading:ko.observable(!1)},c=a.save=function(){b.loading(!0),BoredPanda.Utils.wpAjax({action:"save_notification_settings",settings:{allow_contact_author:b.allow()}}).done(function(){b.loading(!1)})};b.allow.subscribe(c)};$(".allow-contact-author").length>0&&(BoredPanda.enableContactAuthor=new b,$(".allow-contact-author").each(function(){ko.applyBindings(BoredPanda.enableContactAuthor.model,this)})),$(".contact-author").length>0&&(BoredPanda.contactAuthor=new a,$(".contact-author").each(function(){ko.applyBindings(BoredPanda.contactAuthor.model,this)}))}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Admin={init:function(){this.initChangeSource(),this.initChangeAuthor(),this.initChangeDescription(),this.initAddPostText(),this.initChangePageSize(),this.initChangeTitle(),this.initShowPostInFeed(),this.initHidePostFromFeed(),this.initHidePostFromTracker(),this.initChangePostDate(),this.initChangePostCategory(),this.initAddPostCategory(),this.initRemovePostCategory(),this.initAddRepostUrl(),this.initUpdateFacebookImage(),this.initShowActiveVotesOnSubmissions(),this.initStaffTop(),this.initShowCtr(),this.initMarkSpam(),this.initHideUserPosts(),this.initAddBonus(),this.initSendToPartners(),this.initChangeOpenListMaker(),this.initLockOpenList(),this.initMarkNSFWPost(),this.initExcludeFBAd(),this.initMarkViralPost(),this.initLoadAdminBox(),this.initSetInstantArticle(),this.initDeleteInstantArticle(),this.initToggleSeoArticleBtn(),this.initHideIaActions(),this.editSubmissionImage(),this.initFeedPostPositionChange(),this.initSubmissionWatermark(),this.initFilterSubmissions(),this.initSubmissionPointsChange(),this.initExportVotes(),this.initImportVotes(),this.initOrderOfflineVotes(),this.initMarkReshared(),this.initChangeFacebookPage(),this.initVideoStaffBonuses(),this.initAdBidsUpdate(),this.initCommentActions()},initFilterSubmissions:function(){$(".filter-author-submissions").on("click",function(){var a=function(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a},b=$(this).attr("data-id"),c=$(".filter-author-submissions-select[data-id="+b+"]").val(),d=window.location.href;if(-1!==d.indexOf("?")){var e=a();d=window.location.pathname+"?";for(var f in e)"filter_author_id"!==f&&(d+="&"+f+"="+e[f]);window.location=d+"&filter_author_id="+c}else window.location=d+"?filter_author_id="+c})},initVideoStaffBonuses:function(){$(".save-author-id").on("click",function(){var a=$(this),b=$(this).attr("data-object-id"),c=$(".author-id[data-object-id="+b+"]").val();a.html("Saving...");var d={action:"admin_video_staff_id",object_id:b,user_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Save")})})},editSubmissionImage:function(){var a={action:"admin_change_submission_picture",submissionId:null,picture:null};$(document).on("click",".change-submission-image",function(){a.submissionId=$(this).attr("data-id"),$(".edit-submission-image").show()}),$(document).on("click",".close-change-image",function(){a.submissionId=null,a.picture=null,$("#edit-submission-image img").attr("src",null),$(".edit-submission-image").hide(),$("#edit-submission-image .uploaded-image-container").hide(),$("#edit-submission-image .overlay").hide(),$("#edit-submission-image .image-file-area").show()}),$(document).on("click",".update-submission-image",function(){if(null!==a.submissionId&&null!==a.picture){var b=$(this);b.html("Updating...");var c=BoredPanda.Utils.wpAjax(a);c.done(function(){$("#edit-submission-image img").attr("src",null),$(".edit-submission-image").hide(),$("#edit-submission-image .uploaded-image-container").hide(),$("#edit-submission-image .overlay").hide(),$("#edit-submission-image .image-file-area").show(),$(".open-list-item[data-submission-id="+a.submissionId+"] .open-list-media-container img").attr("src",a.picture.image_url),$(".open-list-item[data-submission-id="+a.submissionId+"] .open-list-media-container").closest(".open-list-item").find(".post-admin-menu .scaled-image-notice").hide(),a.submissionId=null,a.picture=null,b.html("Update"),$(".remove-image").click()})}}),function(){var b=new plupload.Uploader({runtimes:"html5,html4",browse_button:"change-image-upload-btn-id",drop_element:"change-image-file-area-id",url:ajax_object.ajax_url,max_file_size:"20mb",max_file_count:1,multipart_params:{action:"contribution_submit_upload",title:""},unique_names:!1,init:{FilesAdded:function(a){a.start(),$("#edit-submission-image .overlay").show()}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]});if(b.bind("FileUploaded",function(b,c,d){var e=$.parseJSON(d.response);a.picture=e,$("#edit-submission-image img").attr("src",e.image_url),$("#edit-submission-image .image-file-area").hide(),$("#edit-submission-image .uploaded-image-container").show()}),b.bind("Error",function(a,b){"File size error."===b.message||"File extension error."===b.message}),b.init(),"html5"===b.runtime){var c=0;$("#change-image-file-area-id").bind({dragenter:function(){c++,self.dropEvent("dragenter")},dragleave:function(){c--,0===c&&self.dropEvent("dragleave")},drop:function(){self.dropEvent("drop")}})}}()},initLoadAdminBox:function(){$(document).on("click",".load-admin-box",function(){var a=$(this);a.parent().find(".post-admin-menu").toggle(),a.removeClass("visible-request")}),$(document).on("click",".hide-admin-box",function(){var a=$(this);a.parent().parent().parent().find(".post-admin-menu").toggle(),a.parent().parent().parent().find(".load-admin-box").addClass("visible-request")}),$(document).on("click",".toggle-category-select",function(){var a=$(this);a.closest(".post-admin-menu").find(".category-select").toggle()})},initChangeAuthor:function(){$(".change-post-author-field").autocomplete({source:function(a,b){$.getJSON(ajax_object.ajax_url,{action:"admin_suggest_author",query:a.term},function(a){b(a.suggestions)})},dataType:"json",minLength:3,select:function(a,b){var c=$(a.target).attr("data-id");$(".change-post-author-id[data-id="+c+"]").val(b.item.data)}}),$(document).on("click",".change-post-author",function(){var a=$(this),b=a.attr("data-id"),c=$(".change-post-author-id[data-id="+b+"]").val(),d={action:"admin_change_author",post_id:b,author_id:c};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})})},initChangeSource:function(){$(document).on("click",".change-source",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-type"),d=a.parent().find(".change-source-field[data-id="+b+"]").val(),e=a.parent().find(".change-source-author-field[data-id="+b+"]").val(),f={action:"admin_change_source",post_id:b,type:c,source:d,source_author:e};a.html("Updating...");var g=BoredPanda.Utils.wpAjax(f);g.done(function(){a.html("Update")})})},initChangeDescription:function(){$(document).on("click",".edit-description",function(){var a=$(this),b=a.attr("data-id"),c=$("#description-"+b);if(a.hasClass("quill-active"))a.hasClass("hidden")?(a.removeClass("hidden"),a.text("Hide")):(a.addClass("hidden"),a.text("Edit")),c.parent().toggle();else{new Quill(c[0],{theme:"snow",formats:["bold","header","italic","link","list","blockquote","image","indent"],modules:{toolbar:[["bold","italic","link"],["blockquote",{list:"ordered"},{list:"bullet"}]],clipboard:{matchVisual:!1}}});a.addClass("quill-active"),a.text("Hide"),c.parent().toggle()}}),$(document).on("click",".save-description",function(){var a=$(this),b=a.attr("data-id"),c=$("#description-"+b),d=c.children().text()?c.children().html():"",e={action:"admin_change_post_description",post_id:b,description:d};a.html("Updating...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(){a.html("Update")})})},initAddPostText:function(){$(document).on("click",".add-open-list-text",function(){var a=$(this),b=a.attr("data-counter"),c="open-list-text-"+b,d=$("#"+c),e=$("#list-text-"+b),f=$("#close-text-editor-"+b);if(e.toggle(),a.toggle(),f.toggle(),a.hasClass("quill-active"))d.parent().toggle();else{new Quill("#"+c,{theme:"snow",formats:["bold","header","italic","link","list","blockquote","image","indent"],modules:{toolbar:[["bold","italic","link"],["blockquote",{list:"ordered"},{list:"bullet"}]],clipboard:{matchVisual:!1}}});a.addClass("quill-active"),d.parent().toggle()}}),$(document).on("click",".close-open-list-text-editor",function(){$(this).toggle();var a=$(this).attr("data-counter");$("#add-text-btn-"+a).toggle(),$("#list-text-"+a).toggle(),$("#open-list-text-"+a).parent().toggle()}),$(document).on("click",".save-open-list-text",function(){var a=$(this),b=BoredPanda.Config.openListId,c=a.attr("data-counter"),d="open-list-text-"+c,e=$("#"+d),f=$("#list-text-"+c),g=e.children().text()?e.children().html():"",h={action:"admin_change_open_list_text",post_id:b,key:d,text:g};a.html("Saving...");var i=BoredPanda.Utils.wpAjax(h);i.done(function(){a.html("Save"),f.html(g)})})},initChangePageSize:function(){$(document).on("click",".change-page-size",function(){var a=$(this),b=a.attr("data-id"),c=a.parent().find(".change-page-size-field[data-id="+b+"]").val(),d={action:"admin_change_page_size",post_id:b,page_size:c};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})})},initSendToPartners:function(){$(document).on("click",".send-to-partners",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-type"),d=confirm("Are you sure you want to send this post?");if(d===!0){var e={action:"admin_send_partners",post_id:b,is_animals:"animals"===c};a.html("Sending...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(b){alert(b.data),a.parent().html("This post has already been sent to partners")})}})},initSetInstantArticle:function(){$(document).on("click",".set-instant-article",function(){var a=$(this),b=a.parent(),c=a.attr("data-id"),d=b.find(".instant-article-length[data-id="+c+"]").val(),e={action:"admin_set_instant_article",post_id:c,size:d};b.find("input").remove(),b.find("a:last-child").remove(),b.append('<span style="float: right;">Please wait...</span>');var f=BoredPanda.Utils.wpAjax(e);f.success(function(){b.find("span").html('<span style="float: right;">Instant Article</span>')}),f.error(function(){b.find("span").html('<span style="float: right; color: red;">Failed</span>')})})},initDeleteInstantArticle:function(){$(document).on("click",".delete-instant-article",function(){if(confirm("Are you sure?")){var a=$(this),b=a.parent(),c=a.attr("data-id"),d={action:"admin_delete_instant_article",post_id:c};b.find("input").remove(),b.find("a:last-child").remove(),b.append('<span style="float: right;">Please wait...</span>');var e=BoredPanda.Utils.wpAjax(d);e.success(function(){b.find("span").html('<span style="float: right;">Success</span>')}),e.error(function(){b.find("span").html('<span style="float: right; color: red;">Failed</span>')})}})},initHideIaActions:function(){$(document).on("click",".hide-ia-actions",function(){if(confirm("Are you sure?")){var a=$(this),b=a.parent(),c=a.attr("data-id"),d=a.attr("data-value"),e={action:"admin_delete_instant_article_image_actions",post_id:c,value:d};b.find("input").remove(),b.find("a:last-child").remove(),b.append('<span style="float: right;">Please wait...</span>');var f=BoredPanda.Utils.wpAjax(e);f.success(function(){b.find("span").html('<span style="float: right;">Success</span>')}),f.error(function(){b.find("span").html('<span style="float: right; color: red;">Failed</span>')})}})},initChangeTitle:function(){$(document).on("click",".change-post-title",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-redirect"),d=$(".change-post-title-field[data-id="+b+"]").val(),e=$(".change-post-title-option[data-id="+b+"]").is(":checked"),f={action:"admin_change_title",post_id:b,title:d,capitalize:e};a.html("Updating...");var g=BoredPanda.Utils.wpAjax(f);g.done(function(b){if(e&&(d=b.title),"true"===c)window.location.href=b.permalink;else{var f=a.parent().parent().parent().find("h2 > a").html().trim().split(" ");a.parent().parent().parent().find("h2 > a").html(("#"===f[0][0]?f[0]+" ":"")+d),a.parent().parent().parent().find("h2 > a").attr("href",b.permalink),a.html("Update")}})})},initAddRepostUrl:function(){$(document).on("click",".add-repost-url",function(){var a=$(this),b=a.attr("data-id"),c=$(".repost-url[data-id="+b+"]").val(),d={action:"admin_add_repost_url",post_id:b,url:c};a.html("Saving...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(c){a.html("Add"),$(".repost-url[data-id="+b+"]").val(""),c.return_url.length>0&&$(".reposted-on[data-id="+b+"]").append(","+c.return_url)})})},initUpdateFacebookImage:function(){$(document).on("click",".change-facebook-image-url",function(){var a=$(this),b=a.attr("data-id"),c=$(".facebok-image-url[data-id="+b+"]").val(),d={action:"admin_change_facebook_cover",post_id:b,url:c};a.html("Saving...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(b){a.html("Update")}).error(function(b){if(b.responseText){var c=JSON.parse(b.responseText);c.message&&alert(c.message),a.html("Update")}})})},initShowPostInFeed:function(){$(document).on("click",".show-post-admin",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_show_post",post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){location.reload()})}})},initHidePostFromFeed:function(){$(document).on("click",".hide-post-admin",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_hide_post",score:-1,post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.remove()})}})},initHidePostFromTracker:function(){$(document).on("click",".hide-post-tracker",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_hide_post_tracker",post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.parent().parent().remove()})}})},initToggleSeoArticleBtn:function(){$(document).on("click",".seo-article-btn",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d=b.attr("data-value"),e={action:"admin_toggle_seo_article",post_id:c,value:d},f=BoredPanda.Utils.wpAjax(e);f.done(function(){var a=b.attr("data-value");a?(b.attr("data-value",""),b.html("Remove Seo Article")):(b.html("Add Seo Article"),b.attr("data-value","1"))})}})},initChangePostDate:function(){function a(a){var b,c,d=!0,e=1902,f=(new Date).getFullYear(),g="";return b=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,""!==a?(c=a.match(b),c!==!1?c[3]<1||c[3]>31?g="Invalid value for day: "+c[1]:c[2]<1||c[2]>12?g="Invalid value for month: "+c[2]:(c[1]<e||c[1]>f)&&(g="Invalid value for year: "+c[3]+" - must be between "+e+" and "+f):g="Invalid date format: "+a):d||(g="Empty date not allowed!"),""!==g?(alert(g),!1):!0}function b(a){var b,c,d="";return b=/^(\d{1,2}):(\d{2}):(\d{2})?([ap]m)?$/,""!==a&&(c=a.match(b),c!==!1?(c[4]?(c[1]<1||c[1]>12)&&(d="Invalid value for hours: "+c[1]):c[1]>23&&(d="Invalid value for hours: "+c[1]),!d&&c[2]>59&&(d="Invalid value for minutes: "+c[2])):d="Invalid time format: "+a),""!==d?(alert(d),!1):!0}$(document).on("click",".change-post-date",function(){var c=$(this),d=c.attr("data-id"),e=c.parent().find(".edit-post-date").val(),f=e.split(" ");if(a(f[0])&&b(f[1])){var g={action:"admin_change_post_date",date:e,post_id:d};c.html("Updating...");var h=BoredPanda.Utils.wpAjax(g);h.done(function(){c.html("Update")})}})},initChangePostCategory:function(){$(document).on("click",".change-post-category",function(){var a=$(this),b=a.attr("data-id"),c=a.parent().find(".edit-post-category").val(),d={action:"admin_change_post_category",category:c,post_id:b};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})})},initAddPostCategory:function(){$(document).on("click",".add-post-category",function(){var a=$(this),b=a.attr("data-id"),c=a.parent().find(".add-post-category-select").val(),d=a.closest(".post-admin-menu").find(".toggle-category-select"),e={action:"admin_add_post_category",category:c,post_id:b};a.html("Saving...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(e){a.html("Save");var f="",g=e.cat_name;f+='<span class="post-category">, &nbsp;'+g+'<a href="javascript:void(0);" data-id="'+b+'" category-id="'+c+'" class="remove-post-category"></a></span>',d.before(f)})})},initRemovePostCategory:function(){$(document).on("click",".remove-post-category",function(){if(!confirm("Are you sure want to remove category?"))return!1;var a=$(this),b=a.attr("data-id"),c=a.attr("category-id"),d={action:"admin_remove_post_category",category:c,post_id:b},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.parent().hide()})})},initShowActiveVotesOnSubmissions:function(){$(document).on("click",".show-active-votes",function(){var a=$(this),b=a.attr("data-id"),c={action:"get_post_active_votes",postId:b};a.attr("disabled",!0),a.html("Loading...");var d=BoredPanda.Utils.wpAjax(c);d.done(function(b){var c=a.parent().find(".submission-active-votes"),d="Active votes: "+(b.votes&&b.votes.upvotes?b.votes.upvotes:0)+" upvotes, "+(b.votes&&b.votes.downvotes?b.votes.downvotes:0)+" downvotes";
c.html(d),c.show(),a.hide()})})},initStaffTop:function(){$(document).on("click",".staff-stats-box tbody tr td.show-more span",function(){$(this).closest("tr").hide(),$(".staff-stats-box tbody tr.hidden").removeClass("hidden")})},initShowCtr:function(){$(document).on("click",".admin-button.show-ctr-btn",function(){var a=$(this).attr("data-id"),b=$(".ctr-stats-box[data-id="+a+"]").eq(0),c=!b.is(":visible");c&&b.show(),b.html("Loading...");var d={action:"get_post_ctr",post_id:a},e=BoredPanda.Utils.wpAjax(d);e.success(function(a){if(void 0===a.data||0==Object.keys(a.data).length)b.html("There is no data available yet. Wait a few more minutes, please.");else{var c="<table><thead><tr><td>Feed</td><td>Impressions</td><td>Clicks</td><td><b>CTR</b></td></tr></thead><tbody>";for(var d in a.data){var e=a.data[d],f="<tr><td>"+d+"</td><td>"+e.impressions+"</td><td>"+e.clicks+"</td><td><b>"+(100*e.ctr).toFixed(1)+"%</b></td></tr>";c+=f}c+="</tbody></table>",b.html(c)}}),e.error(function(){b.html("Error occured :(")})})},initMarkSpam:function(){$(document).on("click",".mark-post-spam-admin",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d=b.attr("data-value"),e={action:"admin_mark_spam",post_id:c,value:d},f=BoredPanda.Utils.wpAjax(e);f.done(function(){b.remove()})}})},initHideUserPosts:function(){$(document).on("click",".hide-user-from-feed",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_hide_user_posts",user_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.remove()})}})},initMarkReshared:function(){$(document).on("click",".admin-mark-reshared-post",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_mark_reshared_post",post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(a){a.success?(alert("Success!"),b.css("color","black")):alert("Failed, please try again")})}})},initAddBonus:function(){$(document).on("click",".change-post-bonus",function(){var a=$(this),b=a.attr("data-id"),c=$(".change-post-bonus-type[data-id="+b+"]").val(),d="custom"===c?$(".custom-bonus[data-id="+b+"]").val():$(".fixed-bonus[data-id="+b+"]").val(),e={action:"admin_add_bonus",post_id:b,bonus_type:c,fixed_bonus:d};a.html("Updating...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(){a.html("Update")})}),$(document).on("click",".change-interview-bonus",function(){var a=$(this),b=a.attr("data-id"),c=$(".change-inverview-bonus-type[data-id="+b+"]").val(),d={action:"admin_add_interview_bonus",post_id:b,bonus_type:"interview",fixed_bonus:c};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})}),$(document).on("click",".change-testing-bonus",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-type"),d={action:"admin_add_testing_bonus",post_id:b,type:c};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})}),$(document).on("click",".add-admin-bonus",function(){var a=$(this),b=a.attr("data-id"),c={action:"admin_add_admin_bonus",post_id:b,bonus_type:"admin-bonus",checked:$(".admin-bonus-checkbox[data-id="+b+"]").is(":checked")};a.html("Updating...");var d=BoredPanda.Utils.wpAjax(c);d.done(function(){a.html("Update")})}),$(document).on("change",".change-post-bonus-type",function(){var a=$(this),b=a.attr("data-id");"fixed"===a.val()?$(".fixed-bonus[data-id="+b+"]").show():$(".fixed-bonus[data-id="+b+"]").hide(),"custom"===a.val()?$(".custom-bonus[data-id="+b+"]").show():$(".custom-bonus[data-id="+b+"]").hide()})},initChangeOpenListMaker:function(){$(document).on("click",".change-open-list-maker",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-key"),d=$(".open-list-maker-"+c+"[data-id="+b+"]").val(),e={action:"admin_change_open_list_maker",meta_key:"open-list-maker-author-"+c,post_id:b,user_id:d};a.html("Updating...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(){a.html("Update")})})},initLockOpenList:function(){$(document).on("click",".lock-open-list",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_change_open_list_state",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.remove()})})},initMarkNSFWPost:function(){$(document).on("click",".mark-nsfw-post",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_mark_nsfw_post",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.remove()})})},initExcludeFBAd:function(){$(document).on("click",".mark-fb-ignored",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_mark_fb_ignored",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.text("")})})},initMarkViralPost:function(){$(document).on("click",".mark-viral-post",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_mark_viral_post",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.remove()})})},initFeedPostPositionChange:function(){$(document).on("click",".post-feed-position a",function(){var a=$(this),b=a.attr("data-post-id"),c=a.attr("data-value"),d={action:"admin_feed_change_position",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.success(function(){var b=a.closest("article.post");"up"===c?b.prevAll("article.post").first().before(b):b.nextAll("article.post").first().after(b)})})},initSubmissionWatermark:function(){$(document).on("click",".post-submission-add-watermark",function(){if(confirm("Are you sure?")){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_submission_change_watermark",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(b){if(b.success===!0){var c=a.closest(".open-list-item").find(".open-list-media-container img");c.attr("src",c.attr("src")+"?"+(new Date).getTime())}else alert(b.error)})}})},initSubmissionPointsChange:function(){$(document).on("click",".set-submission-points",function(){var a=$(this),b=a.attr("data-id"),c=a.parent().find(".set-submission-points-field").val(),d={action:"admin_submission_change_points",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(b){if(b.success===!0){var d=a.closest(".open-list-item").find(".open-list-footer .vote-panel .points").data("points");d+=parseInt(c),a.closest(".open-list-item").find(".open-list-footer .vote-panel .points").text(d+" points")}else alert(b.error)})})},initExportVotes:function(){$(document).on("click",".admin-export-votes",function(){if(BoredPanda.Config.isStaffMember){var a="";if($(".open-list-item .open-list-footer .vote-panel .points").each(function(b,c){var d=parseInt($(c).data("points")),e=$(c).closest(".open-list-item").data("submission-id");void 0!==d&&(a+=e+","+d+"\n")}),a){var b=document.createElement("a"),c="text/csv",d="BoredPanda_Posts_Votes.csv";if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([content],{type:c}),d);if("download"in b)return b.href="data:"+c+","+encodeURIComponent(a),b.setAttribute("download",d),document.body.appendChild(b),b.click(),document.body.removeChild(b),!0;var e=document.createElement("iframe");return document.body.appendChild(e),e.src="data:"+c+","+encodeURIComponent(a),setTimeout(function(){document.body.removeChild(e)},333),!0}alert("No data to export")}})},initImportVotes:function(){$(document).on("click",".admin-import-offline-votes",function(){if(BoredPanda.Config.isStaffMember){var a=confirm("Are you sure want to import votes?");if(a!==!1){var b=$(this).parent().find(".offline-voting-import")[0].files,c=b[0],d=new FileReader;d.onload=function(a){return function(a){var b={action:"admin_import_offline_votes",data:a.target.result},c=BoredPanda.Utils.wpAjax(b);c.done(function(a){a.success===!0?window.location.reload():alert(a.error)})}}(c),d.readAsText(c)}}})},initOrderOfflineVotes:function(){$(document).on("click",".admin-order-offline-votes",function(){if(BoredPanda.Config.isStaffMember){var a=$(".open-list-item"),b=function(a,b){var c=$(a).find(".open-list-footer .vote-panel .points").data("points"),d=$(b).find(".open-list-footer .vote-panel .points").data("points");return c>d?-1:d>c?1:0};a.sort(b);for(var c=0;c<a.length;c++){var d=$(a[c]).find(".open-list-header a").text().match(/#(\d+) /);$(a[c]).find(".open-list-header a").text($(a[c]).find(".open-list-header a").text().replace(d[1],c+1)),a[c].parentNode.appendChild(a[c])}}})},initChangeFacebookPage:function(){$(document).on("change",".facebook-url-page-select",function(){if(BoredPanda.Config.isStaffMember){var a=$(this),b=a.parent().find(".facebook-shareable-url-for-staff"),c=b.data("post-url"),d="";a.val()&&(d=c+"?utm_source="+a.val()+"&utm_medium=social&utm_campaign=BPFacebook"),"lmaomommy"===a.val()&&(d=c+"?utm_source=facebook&utm_medium=social&utm_campaign=lmaomommy"),b.val(d),b.click()}})},initAdBidsUpdate:function(){$(".update-bids-form").submit(function(){return BoredPanda.Config.isStaffMember?confirm("Are you sure want to change bids?"):!1})},initCommentActions:function(){return BoredPanda.Config.isStaffMember?($(document).on("click",".mark-top-comment",function(){var a=$(this),b=a.data("comment-id"),c={action:"admin_mark_top_comment",comment_id:b,post_id:BoredPanda.Config.postId,value:"mark"},d=BoredPanda.Utils.wpAjax(c);d.done(function(b){b.success&&(a.closest(".open-list-comments").find(".unmark-top-comment").removeClass("top-comment"),a.addClass("top-comment"),a.addClass("unmark-top-comment"),a.removeClass("mark-top-comment"))})}),void $(document).on("click",".unmark-top-comment",function(){var a=$(this),b=a.data("comment-id"),c={action:"admin_mark_top_comment",comment_id:b,post_id:BoredPanda.Config.postId,value:"unmark"},d=BoredPanda.Utils.wpAjax(c);d.done(function(b){b.success&&(a.addClass("mark-top-comment"),a.removeClass("unmark-top-comment"),a.removeClass("top-comment"))})})):!1}},$(document).ready(function(){BoredPanda.Config.isStaffMember&&BoredPanda.Admin.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Slider={bindDrag:function(){$(".cd-boredpanda-image-container").each(function(){var a=$(this);BoredPanda.Slider.drag(a.find(".cd-boredpanda-handle"),a.find(".cd-boredpanda-resize-img"),a)})},drag:function(a,b,c){c.on("mouseover touchstart",function(d){a.hide(),b.addClass("boredpanda-resizable");var e=a.outerWidth(),f=c.offset().left,g=c.outerWidth(),h=f-e/2,i=f+g-e/2;c.on("mousemove mousedown touchmove touchstart",function(a){"mousedown"===a.type&&a.preventDefault();var d=0;d="touchstart"===a.type||"touchmove"===a.type?a.originalEvent.touches[0].pageX-e/2:a.pageX-e/2,h>d?d=h:d>i&&(d=i);var j=100*(d+e/2-f)/g+"%";$(".draggable").css("left",j).on("mouseleave",function(){b.removeClass("boredpanda-resizable")}),c.find(".boredpanda-resizable").css("width",j)}).on("mouseleave touchend",function(){b.removeClass("boredpanda-resizable")}),d.stopPropagation()}).on("mouseleave touchend",function(){b.removeClass("boredpanda-resizable")})}},$(document).ready(function(){BoredPanda.Slider.bindDrag()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Flipper={bind:function(){$(".cd-boredpanda-image-container-flip").flip({trigger:"click",front:".boredpanda-image-front",back:".boredpanda-image-back"})}},$(document).ready(function(){BoredPanda.Flipper.bind()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.SuccessStory={iteration:-1,changeDelayMs:3e3,points:{mobile:[{x:183.9,y:360,text:"Featured on",textBold:"Home Page"},{x:613.9,y:320.4,text:"Shared on BP",textBold:"Facebook page"},{x:1096.5,y:267.7,text:"Worldwide",textBold:"sensation"}],desktop:[{x:157,y:368.3,text:"Submitted to",textBold:"Bored Panda"},{x:404.6,y:346.1,text:"Approved by",textBold:"Moderators"},{x:722.6,y:289.8,text:"Featured on",textBold:"Home Page"},{x:914.4,y:198,text:"Shared on BP",textBold:"Facebook page"},{x:1169,y:102.3,text:"Worldwide",textBold:"sensation"}]},init:function(){var a=this,b=document.getElementById("canvas-bottom"),c=b.getContext("2d");c.scale(2,2),a.drawBottom(c),$(window).resize(function(){a.drawBottom(c)}),this.initRedirects(),this.initTracking(),this.resizeImages(),$(".tell-your-story").click(function(b){return b.preventDefault(),a.tellStory(),!1})},initTracking:function(){this.trackClick(".page-template-success-stories .top-promote a.tell-your-story","Success Story Page","Add Post Top"),this.trackClick(".page-template-success-stories .bottom-promote a.tell-your-story","Success Story Page","Add Post Bottom"),this.trackClick(".page-template-success-stories .story-item .description-block .author a, .page-template-success-stories .story-item .description-block .author-interview-link, .page-template-success-stories .story-item .image-block a","Success Story Page","Author post"),this.trackClick(".page-template-success-stories .story-item .description-block .article-reposts a","Success Story Page","External site")},trackClick:function(a,b,c){$(a).on("click",function(){BoredPanda.Tracking.trackEvent(b,c,"click")})},initRedirects:function(){BoredPanda.Config.isiPad()&&$(".app-store-ipad").attr("href","https://itunes.apple.com/app/apple-store/id1001593357?pt=117833574&ct=Success%20Story&mt=8"),BoredPanda.Config.isiPhone()&&$(".app-store-iphone").attr("href","https://itunes.apple.com/app/apple-store/id1001593357?pt=117833574&ct=Success%20Story&mt=8")},drawMobile:function(a,b){b=b||!1;var c=this,d=$(window).width(),e=1,f=0;1256>d&&(e=d/1256,f=1256-d),a.clearRect(0,0,1260,384),a.save(),a.beginPath(),a.moveTo(1256,384),a.lineTo(f,384),a.lineTo(f+68.2*e,365.7),a.lineTo(f+183.9*e,360),a.lineTo(f+400.2*e,319),a.lineTo(f+496.5*e,323.4),a.lineTo(f+565.5*e,315.7),a.lineTo(f+613.9*e,320.4),a.lineTo(f+766.2*e,268.4),a.lineTo(f+916.5*e,275.4),a.lineTo(f+1021.5*e,264),a.lineTo(f+1096.5*e,267.7),a.lineTo(f+1211.2*e,232),a.lineTo(f+1260*e,225),a.fillStyle="rgb(86, 184, 99)",a.fill(),a.beginPath(),a.moveTo(f,384),a.lineTo(f+68.2*e,365.7),a.lineTo(f+183.9*e,360),a.lineTo(f+400.2*e,319),a.lineTo(f+496.5*e,323.4),a.lineTo(f+565.5*e,315.7),a.lineTo(f+613.9*e,320.4),a.lineTo(f+766.2*e,268.4),a.lineTo(f+916.5*e,275.4),a.lineTo(f+1021.5*e,264),a.lineTo(f+1096.5*e,267.7),a.lineTo(f+1211.2*e,232),a.lineTo(f+1260*e,225),a.lineWidth=4,a.strokeStyle="rgb(253, 206, 49)",a.stroke(),this.drawPoints(a,f,e,!0),a.restore(),b||setTimeout(function(){c.draw(a),c.iteration++},this.changeDelayMs)},drawBottom:function(a){var b=1,c=0;a.clearRect(0,0,840,384),a.save(),a.beginPath(),a.moveTo(840,384),a.lineTo(c,384),a.lineTo(c+137*b,354),a.lineTo(c+206.3*b,300.7),a.lineTo(c+265.9*b,311.6),a.lineTo(c+357.1*b,287.8),a.lineTo(c+404.6*b,295.1),a.lineTo(c+465.4*b,270.7),a.lineTo(c+511*b,287.4),a.lineTo(c+548.3*b,271.5),a.lineTo(c+623.7*b,280.5),a.lineTo(c+679.5*b,243),a.lineTo(c+722.6*b,249.8),a.lineTo(c+799.2*b,181),a.lineTo(c+840*b,170),a.fillStyle="rgb(49, 52, 64)",a.fill(),a.beginPath(),a.moveTo(c,384),a.lineTo(c+137*b,354),a.lineTo(c+206.3*b,300.7),a.lineTo(c+265.9*b,311.6),a.lineTo(c+357.1*b,287.8),a.lineTo(c+404.6*b,295.1),a.lineTo(c+465.4*b,270.7),a.lineTo(c+511*b,287.4),a.lineTo(c+548.3*b,271.5),a.lineTo(c+623.7*b,280.5),a.lineTo(c+679.5*b,243),a.lineTo(c+722.6*b,249.8),a.lineTo(c+799.2*b,181),a.lineTo(c+840*b,170),a.lineWidth=4,a.strokeStyle="rgb(76, 79, 93)",a.stroke(),a.restore()},drawPoints:function(a,b,c,d){d=d||!1;var e,f;d?(this.iteration=this.iteration>2?0:this.iteration,f=this.points.mobile.length):(this.iteration=this.iteration>4?0:this.iteration,f=this.points.desktop.length);for(var g=0;f>g;g++)e=d?this.points.mobile[g]:this.points.desktop[g],a.beginPath(),a.arc(b+e.x*c,e.y,8,0,2*Math.PI),a.fillStyle="rgb(253, 206, 49)",a.fill(),a.lineWidth=2,a.strokeStyle="rgb(255, 255, 255)",a.stroke()},resizeImages:function(){var a=function(){var a=$(".success-story-image");a.height(a.width())};BoredPanda.Config.windowWidth<=980&&($(window).on("resize",a),a())},tellStory:function(){var a=$(".tell-your-story").attr("href");return BoredPanda.Config.isLoggedIn?void(window.location.href=a):(BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(a,void 0,"Please log in to tell your story",this.tellStoryAfterLogin))},tellStoryAfterLogin:function(){BoredPanda.Tracking.trackAddPostFormLoggedIn(),window.location.href=$(".tell-your-story").attr("href")}},$(document).ready(function(){BoredPanda.Config.isSuccessStoriesPage&&BoredPanda.SuccessStory.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Campaigns={isEnabled:!0,queryString:null,campaignCookieName:"bpCampaigns",init:function(){this.isEnabled&&!BoredPanda.Config.isStaffMember&&(this.queryString=this.getQueryString(),this.initCampaignTracking(),BoredPanda.Config.isLoggedIn&&this.saveCampaignsData())},saveCampaignsData:function(){var a=this.getCampaigns();if(a.data.length>0){var b={action:"save_campaigns_data",data:a.data};BoredPanda.Utils.wpAjax(b),a.data=[],this.setCampaigns(a)}},initCampaignTracking:function(){if(void 0!==this.queryString.utm_source&&"bp_"===this.queryString.utm_source.substring(0,3)){var a={utm_source:this.queryString.utm_source,utm_medium:this.queryString.utm_medium,utm_campaign:this.queryString.utm_campaign,utm_content:this.queryString.utm_content,utm_term:this.queryString.utm_term,timestamp:new Date},b=this.getCampaigns();b.data.push(a),this.setCampaigns(b)}},getCampaigns:function(){var a=$.cookie(this.campaignCookieName);return void 0===a?{data:[]}:JSON.parse(a)},setCampaigns:function(a){$.cookie(this.campaignCookieName,JSON.stringify(a),{expires:60,path:"/"})},getQueryString:function(){for(var a,b={},c=window.location.search.substring(1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");"undefined"==typeof b[f[0]]?b[f[0]]=decodeURIComponent(f[1]):"string"==typeof b[f[0]]?(a=[b[f[0]],decodeURIComponent(f[1])],b[f[0]]=a):b[f[0]].push(decodeURIComponent(f[1]))}return b}},BoredPanda.UtmCampaigns={init:function(){BoredPanda.UtmCampaigns.toggleOutbrains(),BoredPanda.UtmCampaigns.toggleMobileFixedFooter(),BoredPanda.UtmCampaigns.toggleAds()},isCampaign:function(){return!1},toggleOutbrains:function(){var a=$(".outbrain-widget");if(a.length>0)if(this.isCampaign())a.append('<div id="div-gpt-ad-1474396493730-0"><script>googletag.cmd.push(function() { googletag.display("div-gpt-ad-1474396493730-0"); });</script></div>');else{var b=Math.floor(10*Math.random())+1;console.log("Random variation: "+b),1===b?a.append('<div id="div-gpt-ad-1476712313729-0"><script>googletag.cmd.push(function() { googletag.display("div-gpt-ad-1476712313729-0"); });</script></div>'):$.ajax({url:"https://widgets.outbrain.com/outbrain.js",dataType:"script",async:!0})}},toggleMobileFixedFooter:function(){this.isCampaign()&&($(".fixed-bottom-overlay.socialbar").attr("style","display:none!important"),$(".fixed-bottom-overlay.newsletterbar").attr("style","display:none!important"))},toggleAds:function(){this.isCampaign()&&BoredPanda.Config.isMobileWidth&&$(".post-mobile-ad-within-content.utm-campaign-ad").show()}},$(document).ready(function(){BoredPanda.Campaigns.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.Challenges=BoredPanda.Challenges||{};a.View={init:function(){var a=this;$(document).on("click",".create-challenge-modal",function(b){var c=$(this).data("challenge-type");if(!BoredPanda.Config.isLoggedIn)return BoredPanda.Login.form.closeable(!0),$.cookie("challenge-create-type",c,{expires:60,path:"/"}),void BoredPanda.Login.form.show(void 0,void 0,"Please log in to create challenge",a.handleLogin);b.preventDefault();var d=$("#add-challenge-modal");return a.customizeForm(c),d.modal(),!1}),$("#add-challenge-modal .add-challenge-dialog").click(function(a){a.target===this&&$("#add-challenge-modal").modal("hide")}),$(".top-menu-mobile").change(function(){window.location.href=$(this).val()}),a.handleLogin=function(){$("#auth-modal").modal("hide");var b=$.cookie("challenge-create-type")?$.cookie("challenge-create-type"):"default";a.customizeForm(b),$.removeCookie("challenge-create-type"),$("#add-challenge-modal").modal()};var b=function(){var a=$(".image-block .challenge-image");$(window).width()<=980?a.height(a.width()):a.height(420)};$(window).on("resize",b),b()},customizeForm:function(a){"text"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("text"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description (optional)"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("text"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!1)):"meme"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("meme"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description (optional)"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image"),BoredPanda.AddPost.viewModel.tooltips.title.type("meme"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!1)):"photoshop"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("photoshop"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("photoshop"),BoredPanda.AddPost.viewModel.tooltips.description.type("photoshop"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!0)):"photography"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("photography"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("photography"),BoredPanda.AddPost.viewModel.tooltips.description.type("photography"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!0)):(BoredPanda.AddPost.viewModel.post.challenge.type("default"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("default"),BoredPanda.AddPost.viewModel.tooltips.description.type("default"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!0))},initEditForm:function(){"undefined"!=typeof BoredPanda.Config.postJson&&(BoredPanda.AddPost.viewModel.post.postId(BoredPanda.Config.postJson.postId),BoredPanda.AddPost.viewModel.post.challenge.type(BoredPanda.Config.postJson.challenge.type),BoredPanda.AddPost.viewModel.post.title(BoredPanda.Config.postJson.title),BoredPanda.AddPost.viewModel.post.description(BoredPanda.Config.postJson.description),BoredPanda.AddPost.viewModel.post.permalink(BoredPanda.Config.postJson.permalink),BoredPanda.Config.postJson.descriptionChallengeImage&&(BoredPanda.AddPost.viewModel.challengeImageSrc(BoredPanda.Config.postJson.descriptionChallengeImage),BoredPanda.AddPost.viewModel.imageUploaded(!0)),BoredPanda.Config.postJson.challenge.source&&(BoredPanda.AddPost.viewModel.post.challenge.source(BoredPanda.Config.postJson.challenge.source),BoredPanda.AddPost.viewModel.post.challenge.showSource(!0)),this.customizeForm(BoredPanda.Config.postJson.challenge.type),$("#add-challenge-modal").find(".create").hide(),$("#add-challenge-modal").find(".edit").show(),$(".create-challenge-modal").data("challenge-type",BoredPanda.Config.postJson.challenge.type))}},$(document).ready(function(){a.View.init(),$("body.page-template-challenge-landing").length>0?(BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,ko.applyBindings(BoredPanda.AddPost.viewModel,$("body.page-template-challenge-landing main")[0])):$("body.single-open-list-post #add-challenge-modal").length>0?(BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,ko.applyBindings(BoredPanda.AddPost.viewModel,$("body.single-open-list-post #add-challenge-modal")[0]),a.View.initEditForm()):$(".challenge-ko").length>0&&(BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,ko.applyBindings(BoredPanda.AddPost.viewModel,$(".challenge-ko")[0]),a.View.customizeForm(BoredPanda.Utils.getParameterByName("type")),"undefined"!=typeof BoredPanda.Config.postJson&&($(".challenge-ko").find(".create").hide(),$(".challenge-ko").find(".edit").show(),a.View.initEditForm()))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Video={init:function(){BoredPanda.Config.isTabletWidth||this.scrollAutoplay(),this.videoClick(),this.unmuteClick(),this.videoPlayClick(),this.loadSubtitles(),this.prerollAd(),this.trackVideo()},scrollAutoplay:function(){var a,b=this,c=$(window).height(),d=$(".video-scrollable.autoplay-muted").height();$(window).scroll(function(){a&&window.clearTimeout(a),a=window.setTimeout(function(){$(".video-scrollable.autoplay-muted").each(function(){this.addEventListener("timeupdate",function(){this.currentTime>=5&&$(this).hasClass("not-tracked")&&(b.trackVideo($(this)),$(this).removeClass("not-tracked"))}),$(window).scrollTop()<$(this).offset().top&&$(window).scrollTop()>$(this).offset().top-c+d?this.paused&&($(this).parent().find(".video-play-icon").hide(),this.play()):this.pause()})},100)}),$(window).scroll()},videoClick:function(){$("body").on("click",".video-scrollable",function(a){a.preventDefault(),$(this).hasClass("autoplay-muted")?($(this).removeClass("autoplay-muted"),$(this).parent().find(".unmute-video").hide(),$(this).parent().find(".video-play-icon").hide(),$(this).prop("muted",!1),$(this).prop("controls",!0),this.paused===!0&&this.play()):this.paused===!1?this.pause():this.play()})},unmuteClick:function(){$("body").on("click",".unmute-video",function(){var a=$(this).parent().find("video");a.click()})},videoPlayClick:function(){$("body").on("click",".video-play-icon",function(){var a=$(this).parent().find("video");a.click(),$(this).hide()})},trackVideo:function(){var a=this;!function(a,b,c,d,e,f,g){a.fbq||(e=a.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},a._fbq||(a._fbq=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[],f=b.createElement(c),f.async=!0,f.src=d,g=b.getElementsByTagName(c)[0],g.parentNode.insertBefore(f,g))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","586850071481240"),$(".bp-video-container .video-block video.track-video:visible").each(function(){var b=this,c=$(b).find("source:first").attr("src"),d=window.location.href!==window.parent.location.href?window.parent.location.href:window.location.href,e=BoredPanda.Utils.getParameterByName("utm_campaign",d);a.sendBatch("video_impression",BoredPanda.Config.postId,c,e),$(b).click(function(){$(b).hasClass("not-tracked")&&(BoredPanda.Tracking.trackEvent("Video Clicks",BoredPanda.Config.postId,c),fbq("track","ClickVideo",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_click",BoredPanda.Config.postId,c,e),$(b).removeClass("not-tracked"))}),b.addEventListener("timeupdate",function(){!this.duration||this.currentTime<=this.duration/2||!$(this).hasClass("mid-not-tracked")||(BoredPanda.Tracking.trackEvent("Video Mid Reached",BoredPanda.Config.postId,c),fbq("track","VideoMidWatched",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_mid_watched",BoredPanda.Config.postId,c,e),$(b).removeClass("mid-not-tracked"))}),b.addEventListener("timeupdate",function(){!this.duration||this.currentTime<=5||!$(this).hasClass("view-not-tracked")||(BoredPanda.Tracking.trackEvent("Video Views",BoredPanda.Config.postId,c),fbq("track","VideoView",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_view",BoredPanda.Config.postId,c,e),$(b).removeClass("view-not-tracked"))}),b.addEventListener("ended",function(){$(this).hasClass("end-not-tracked")&&(BoredPanda.Tracking.trackEvent("Video Ended",BoredPanda.Config.postId,c),fbq("track","VideoEnded",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_ended",BoredPanda.Config.postId,c,e),$(b).removeClass("end-not-tracked"))})})},sendBatch:function(a,b,c,d){var e=[{name:"post_id",value:b},{name:"video_source",value:c},{name:"utm_campaign",value:d}],f=[{type:"bp_user",value:BoredPanda.Config.userId},{type:"bp_web_cookie",value:this.generateGuestUserId()}],g={topic:a,identifiers:f,properties:e};$.ajax({contentType:"application/json",data:JSON.stringify([g]),dataType:"json",type:"POST",url:BoredPanda.Config.gatewayUrl+"/event/submit_batch"})},generateGuestUserId:function(){var a=Math.ceil(Math.random()*(void 0!==Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:99999999)),b=new Date;b=b.getTime();var c=a.toString()+b.toString();return c},parseTimestamp:function(a){var b=a.match(/^(?:([0-9]+):)?([0-5][0-9]):([0-5][0-9](?:[.,][0-9]{0,3})?)/);if(null==b)throw"Invalid timestamp format: "+a;var c=parseInt(b[1]||"0",10),d=parseInt(b[2],10),e=parseFloat(b[3].replace(",","."));return e+60*d+3600*c},parseSubtitles:function(a){for(var b=a.trim().split(/[\n]/).map(function(a){return a.trim()}),c=[],d=null,e=null,f=null,g=0;g<b.length;g++)if(b[g].indexOf("-->")>=0){var h=b[g].split(/[ \t]+-->[ \t]+/);if(2!=h.length)throw'Error when splitting "-->": '+b[g];d=this.parseTimestamp(h[0]),e=this.parseTimestamp(h[1])}else if(""==b[g]){if(d&&e){var i=new VTTCue(d,e,f);c.push(i),d=null,e=null,f=null}}else d&&e&&(null==f?f=b[g]:f+="\n"+b[g]);if(d&&e){var i=new VTTCue(d,e,f);c.push(i)}return c},loadSubtitles:function(){var a=this,b=BoredPanda.Utils.getParameterByName("subtitles");b&&$.get(b,function(b){var c=$(".bp-video-container .video-block video").get(0),d=c.addTextTrack("subtitles","English","en");d.mode="showing",a.parseSubtitles(b).map(function(a){d.addCue(a)})})},prerollAd:function(){$(".bp-video-container .video-block video.preroll-ad:visible").each(function(){function a(a){console.log(a.getError()),"undefined"!=typeof i&&i.destroy()}function b(b){var f=new google.ima.AdsRenderingSettings;f.restoreCustomPlaybackStateOnAdBreakComplete=!0,i=b.getAdsManager(g,f),i.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a),i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,c),i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,d),i.addEventListener(google.ima.AdEvent.Type.LOADED,e)}function c(){$(g).parent().find(".adContainer").show(),g.pause(),$(g).parent().find(".overlay").hide()}function d(){$(g).parent().find(".overlay").show(),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}function e(a){var b=a.getAd();b.isLinear()||($(g).parent().find(".adContainer").css("bottom","30px"),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0),g.play())}function f(){if($(g).hasClass("preroll-ad")){var a=$(g).width(),b=$(g).height();$(g).removeClass("preroll-ad"),$(g).parent().find(".overlay").show(),$(g).parent().find(".video-play-icon").hide(),g.load();try{h.initialize(),i.init(a,b,google.ima.ViewMode.NORMAL),i.start()}catch(c){console.log(c),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}}}var g=this;$(g).on("click",f),$(g).parent().append('<span class="adContainer"></span>');var h=new google.ima.AdDisplayContainer($(g).parent().find(".adContainer").get(0),g);h.initialize();var i,j=new google.ima.AdsLoader(h);j.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,b,!1),j.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a,!1);var k=!1;g.addEventListener("loadedmetadata",function(){if(!k){var a=new google.ima.AdsRequest;"1"===BoredPanda.Utils.getParameterByName("midroll_tag")?BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com_mobile_Long_video_Pre-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com__desktop_Long_video_Pre-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):"1"===BoredPanda.Utils.getParameterByName("adsense_test_tag")||$(g).hasClass("adsense_test_tag")?a.adTagUrl="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video&client=ca-video-pub-4968145218643279&videoad_start_delay=0&description_url=http%3A%2F%2Fwww.google.com&max_ad_duration=40000&adtest=on":"1"===BoredPanda.Utils.getParameterByName("test_tag")?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Video_test_unit&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):"1"===BoredPanda.Utils.getParameterByName("ia_tag")?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_IA_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):"2"===BoredPanda.Utils.getParameterByName("ia_tag")||$(g).hasClass("ia_tag_2")?a.adTagUrl="https://an.facebook.com/v1/instream/vast.xml?placementid=676478139214125_696732913855314&pageurl="+window.location.href:"3"===BoredPanda.Utils.getParameterByName("ia_tag")?a.adTagUrl="https://an.facebook.com/v1/instream/vast.xml?placementid=676478139214125_704699736391965&pageurl="+window.location.href:"4"===BoredPanda.Utils.getParameterByName("ia_tag")?a.adTagUrl="https://an.facebook.com/v1/instream/vast.xml?placementid=676478139214125_720071904854748&pageurl="+window.location.href:BoredPanda.Utils.getParameterByName("ia_tag_id")?a.adTagUrl="https://an.facebook.com/v1/instream/vast.xml?placementid="+BoredPanda.Utils.getParameterByName("ia_tag_id")+"&pageurl="+window.location.href:$(g).hasClass("test_bottom_tag")?BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com_mobile_Long_video_Pre-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com__desktop_Long_video_Pre-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):"es"===BoredPanda.Config.bpVersion?BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.es_mobile_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.es_desktop_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):BoredPanda.Config.bpPartner&&"es"!==BoredPanda.Config.bpVersion?BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/SetB_Bp.com_mobile_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/SetB_Bp.com_desktop_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_mobile_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_desktop_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3),
a.linearAdSlotWidth=$(g).width(),a.linearAdSlotHeight=$(g).height(),a.nonLinearAdSlotWidth=$(g).width(),a.nonLinearAdSlotHeight=$(g).height(),j.requestAds(a),k=!0}})})},midrollAd:function(){$(".bp-video-container .video-block video.midroll-ad:visible").each(function(){function a(a){console.log(a.getError()),"undefined"!=typeof i&&i.destroy()}function b(b){var f=new google.ima.AdsRenderingSettings;f.restoreCustomPlaybackStateOnAdBreakComplete=!0,i=b.getAdsManager(g,f),i.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a),i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,c),i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,d),i.addEventListener(google.ima.AdEvent.Type.LOADED,e)}function c(){$(g).parent().find(".adContainer").show(),g.pause(),$(g).parent().find(".overlay").hide()}function d(){$(g).parent().find(".overlay").show(),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".adContainer").css("bottom","0"),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}function e(a){var b=a.getAd();b.isLinear()||($(g).parent().find(".adContainer").css("bottom","30px"),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0),g.play())}function f(){if($(g).hasClass("midroll-ad")){var a=$(g).width(),b=$(g).height();$(g).removeClass("midroll-ad"),$(g).parent().find(".overlay").show(),$(g).parent().find(".video-play-icon").hide();try{d(),h.initialize(),$(g).parent().find(".adContainer > div").each(function(a,b){"0px"!==$(b).css("width")&&$(b).remove()}),i.init(a,b,google.ima.ViewMode.NORMAL),i.start()}catch(c){console.log(c),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}}}var g=this;0===$(g).parent().find(".adContainer").length&&$(g).parent().append('<span class="adContainer"></span>');var h=new google.ima.AdDisplayContainer($(g).parent().find(".adContainer").get(0),g);h.initialize();var i,j=new google.ima.AdsLoader(h);j.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,b,!1),j.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a,!1);var k=!1,l=BoredPanda.Utils.getParameterByName("midroll_time");l||(l=g.duration/2),g.addEventListener("timeupdate",function(){if(!(!this.duration||this.currentTime<=l||!$(this).hasClass("midroll-ad")||$(this).closest(".adContainer").length>0||k)){var a=new google.ima.AdsRequest;BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_mobile_Long_video_Midroll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com__desktop_Long_video_Mid-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3),a.linearAdSlotWidth=$(g).width(),a.linearAdSlotHeight=$(g).height(),a.nonLinearAdSlotWidth=$(g).width(),a.nonLinearAdSlotHeight=$(g).height(),j.requestAds(a),k=!0,setTimeout(function(){f()},1e3)}})})}},$(document).ready(function(){BoredPanda.Video.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.UsersTop=BoredPanda.UsersTop||{};a.View=function(){var a=this;a.loading=ko.observable(!1),a.page=ko.observable(1),a.totalPages=ko.observable(1),a.limit=ko.observable(50),a.users=ko.observableArray(),a.filter=ko.observable("month"),a.filtername=ko.observable("monthly");var b=function(a){return a?a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):0},c=function(c){a.loading(!0);var d=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:{action:"get_users_top",type:a.filter(),limit:a.limit(),offset:a.limit()*(a.page()-1),findUser:c}}),e=c;d.done(function(d){a.users.removeAll(),$.each(d.data.stats,function(c,d){d.range_points=b(d.range_points),d.total_points=b(d.total_points),d.current=parseInt(e)===parseInt(d.user_id),null===d.rank_change&&(d.rank_change="-"),a.users.push(d)}),a.totalPages(Math.ceil(d.data.total/a.limit())),"all-time"!==a.filter()?a.filtername(a.filter()+"ly"):a.filtername("all time"),a.loading(!1),d.data.page&&a.page(d.data.page),$("tbody:visible .current-user").length>0&&c?$("tbody:visible .current-user")[0].scrollIntoView():$(window).scrollTop(0)})};a.changeFilter=function(b){a.filter(b),a.page(1),c()},a.nextPage=function(){a.page(a.page()+1),c()},a.previousPage=function(){a.page(a.page()-1),c()},a.firstPage=function(){a.page(1),c()},a.lastPage=function(){a.page(a.totalPages()),c()},a.hasPrevious=ko.computed(function(){return 1!==a.page()}),a.hasNext=ko.computed(function(){return a.page()!==a.totalPages()});var d=BoredPanda.Utils.getParameterByName("filter");d&&(a.filter(d),a.filtername(d),"all-time"!==a.filter()?a.filtername(a.filter()+"ly"):a.filtername("all time")),c(BoredPanda.Utils.getParameterByName("user"))},$(document).ready(function(a){window.location.href.indexOf("users-top")>-1&&(BoredPanda.UsersTop.view=BoredPanda.UsersTop.view=new BoredPanda.UsersTop.View,ko.applyBindings(BoredPanda.UsersTop.view,a(".users-top")[0]))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.SellContent={init:function(){if($(".page-template-sell-your-content").length>0){if($(".page-template-sell-your-content .sell-content-block").length>0){var a=new BoredPanda.SellContentController;ko.applyBindings(a,$(".page-template-sell-your-content .sell-content-block").get(0))}BoredPanda.Config.isLoggedIn?this.trackUser("new",!0):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,this.trackUser("new",!0)))}},trackUser:function(a,b){var c=BoredPanda.Utils.getParameterByName("cnt"),d={action:"user_sell_content_track",postId:c?c:0,status:a,unique:b};$.ajax({type:"POST",url:ajax_object.ajax_url,data:d,dataType:"json"})}},BoredPanda.SellContentController=function(){var a=this;a.acceptedTOS=ko.observable(!1),a.signedMessage=ko.observable(!1),a.terminatedMessage=ko.observable(!1),a.error=ko.observable(!1),a.errorMessage=ko.observable(""),a.terminateButtonText=ko.observable("Terminate my contract"),a.signupButtonText=ko.observable("Sell my content"),a.sellContent=function(){if(a.signedMessage(!1),a.error(!1),!a.acceptedTOS())return a.terminatedMessage(!1),a.error(!0),void a.errorMessage("Please confirm you agree with the Terms of Service by ticking the checkbox.");var b={action:"user_sell_content_track",status:"Signed",email:"true"};a.signupButtonText("Processing...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.signupButtonText("Sell my content"),b.success===!0?(BoredPanda.SellContent.trackUser("signed"),a.signedMessage(!0),$(".sell-content-block .signup").hide(),$(".sell-content-block .terminate").show()):(a.error(!0),a.errorMessage("Error processing your request. Please try again."))})},a.terminate=function(){a.terminatedMessage(!1),a.acceptedTOS(!1),a.error(!1);var b={action:"user_sell_content_track",status:"Terminated",email:"true"};a.terminateButtonText("Terminating...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.terminateButtonText("Terminate my contract"),b.success===!0?(BoredPanda.SellContent.trackUser("terminated"),a.terminatedMessage(!0),$(".sell-content-block .signup").show(),$(".sell-content-block .terminate").hide()):(a.error(!0),a.errorMessage("Error processing your request. Please try again."))})}},$(document).ready(function(){BoredPanda.SellContent.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Partners={},BoredPanda.Partners.ViewModel=function(){var a=this;a.email=ko.observable(""),a.accountingEmail=ko.observable(""),a.remark=ko.observable(""),a.profiles=ko.observable(""),a.category=ko.observable(""),a.name=ko.observable(""),a.share=ko.observable(""),a.campaignQuery=ko.observable("?utm_source=twitter&utm_medium=social&utm_campaign=XXX"),a.errorMessage=ko.observable(""),a.successMessage=ko.observable(""),a.createButtonText=ko.observable("Create"),a.info=ko.observable(""),a.emailHtml=ko.observable(""),a.titleLike=ko.observable(""),a.utmCampaign=ko.observable(""),a.weeks=ko.observable(2),a.filterButtonText=ko.observable("Filter"),a.filteredPosts=ko.observable([]),a.createPartner=function(){if(a.errorMessage(""),a.successMessage(""),a.info(""),a.emailHtml(""),!a.email())return void a.errorMessage("Please enter email.");if(!a.name())return void a.errorMessage("Please enter campaign name.");if(!a.share())return void a.errorMessage("Please enter share.");if(!a.campaignQuery())return void a.errorMessage("Please enter campaign query.");var b={action:"partner_create",email:a.email(),accountingEmail:a.accountingEmail(),name:a.name(),share:a.share(),remark:a.remark(),profiles:a.profiles(),campaignQuery:a.campaignQuery()};a.createButtonText("Creating...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.createButtonText("Create"),b.success===!0?(a.successMessage("Partner successfully created!"),a.info(b.result.output.replace(/(\r\n|\n|\r)/gm,"<br>")),a.emailHtml(b.result.html),a.email(""),a.accountingEmail(""),a.name(""),a.remark(""),a.profiles(""),a.share(""),a.campaignQuery("?utm_source=twitter&utm_medium=socialk&utm_campaign=XXX")):(a.errorMessage("Error creating partner!"),a.info(b.data.result.output.replace(/(\r\n|\n|\r)/gm,"<br>")))})},a.addShareBracket=function(a,b){var c=$(b.target);$('<div class="share-bracket"><input type="number" class="share" placeholder="Share %" value=""><input type="number" class="clicks" placeholder="Clicks" value=""> </div>').insertAfter(c.closest("tr").find(".share-bracket:last"))},a.openModal=function(a,b){var c=$(b.target),d=c.data("target");$("#"+d).modal()},a.closeModal=function(a,b){var c=$(b.target);c.closest(".modal").modal("hide")},a.updatePartner=function(a,b){for(var c=$(b.target),d=c.closest("tr").attr("data-id"),e=c.closest("tr").find(".name").val(),f=c.closest("tr").find(".accounting-email").val(),g=c.closest("tr").find(".share").val(),h=c.closest("tr").find(".remark").val(),i=c.closest("tr").find(".profiles").val(),j=c.closest("tr").find(".share-bracket"),k=c.closest("tr").find(".status").val(),l=[],m=!1,n=0;n<j.length;n++){var o=$(j[n]).find("input");o[0].value&&void 0!==o[0].value&&("0"===o[1].value&&(m=!0),l.push({share:o[0].value,clicks:o[1].value}))}if(!m&&l.length>0)return alert("Please enter 0 clicks bracket."),!1;if(m&&1===l.length)return alert("Can't be just 0 clicks bracket "),!1;c.html("Updating...");var p={action:"partner_update",partner_id:d,name:e,accountingEmail:f,remark:h,profiles:i,share:g,brackets:l,status:k},q=BoredPanda.Utils.wpAjax(p);q.done(function(a){a.success?(c.html("Updated"),window.location.reload()):(c.html("Failed"),c.addClass("failed"),void 0!==a.error&&alert(a.error))})},a.getTopLists=function(){var b={action:"partner_open_lists_filter",title:a.titleLike(),category:a.category(),utmCampaign:a.utmCampaign(),weeks:a.weeks()};a.filterButtonText("Fetching...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){b.success&&(a.filteredPosts(b.posts),a.filterButtonText("Fetch"))})}},BoredPanda.Partners.LinkGenerator=function(){var a=this;a.link=ko.observable(""),a.source=ko.observable(""),a.generatedLink=ko.observable(""),a.utmCampaign=ko.observable(""),a.error=ko.observable(!1),a.generateLink=function(){a.error(!1),a.utmCampaign()||a.error(!0);var b=a.link().split("?")[0],c=a.source()||"twitter";a.generatedLink(b+"?utm_source="+c+"&utm_medium=social&utm_campaign="+a.utmCampaign())}},BoredPanda.Partners.Dashboard=function(){var a=this;a.partner=ko.observable(""),a.source=ko.observable(),a.sources=ko.observable([]),a.hideEstablishedPartner=function(a,b){var c=confirm("Are you sure?");if(c===!0){var d=$(b.target).data("id"),e={action:"hide_established_partner",partner_id:d},f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"});f.success(function(){$(b.target).closest("tr").hide()})}},a.initSources=function(){var b=JSON.parse(partnersSources);"undefined"!=typeof b[a.partner()]?a.sources(JSON.parse(partnersSources)[a.partner()]):a.sources([])}},BoredPanda.Partners.PartnershipForm=function(){var a=this;a.captcha=ko.observable(""),a.name=ko.observable(""),a.email=ko.observable(""),a.utm=ko.observable(""),a.source=ko.observable(""),a.comment=ko.observable(""),a.billingCountry=ko.observable(""),a.pages=ko.observableArray([{page:"",type:"main"},{page:"",type:"sub"},{page:"",type:"sub"}]),a.countries=ko.observable([{name:"Afghanistan",code:"AF"},{name:"land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the Congo",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People'S Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People'S Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]),a.successMessage=ko.observable(!1),a.errorMessage=ko.observable(!1),a.loading=ko.observable(!1),a.submit=function(){if(!a.loading()){if(a.successMessage(""),a.errorMessage(""),!a.name())return void a.errorMessage(BoredPanda.Translate.Partners.name_error);if(!a.email())return void a.errorMessage(BoredPanda.Translate.Partners.email_error);if(!a.validateEmail(a.email()))return void a.errorMessage(BoredPanda.Translate.Partners.valid_email_error);if(!a.billingCountry())return void a.errorMessage(BoredPanda.Translate.Partners.country_error);var b=a.pages()[0].page;if(!b)return void a.errorMessage(BoredPanda.Translate.Partners.page_error);for(var c in a.pages())if(a.pages()[c].page&&-1===a.pages()[c].page.indexOf("twitter.com/"))return void a.errorMessage(BoredPanda.Translate.Partners.page_format_error);if(a.utm()||(a.utm(b.split("twitter.com/")[1].split("/")[0].replace(/[^0-9a-z]/gi,"")),a.source("twitter")),!a.utm())return void a.errorMessage(BoredPanda.Translate.Partners.utm_error);if(!a.validateUTM(a.utm()))return void a.errorMessage(BoredPanda.Translate.Partners.valid_utm_error);if(10!==parseInt(a.captcha()))return void a.errorMessage(BoredPanda.Translate.Partners.captcha_error);var d=$.extend({},this);delete d.loading,delete d.successMessage,delete d.errorSend,delete d.errorMessage,delete d.countries;var e={action:"partnership_register",data:ko.toJSON(d)};a.loading(!0);var f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"});f.done(function(b){a.loading(!1),b.success===!0?a.successMessage(BoredPanda.Translate.Partners.success):void 0!==b.data&&b.data.message?a.errorMessage(b.data.message):a.errorMessage(BoredPanda.Translate.Partners.error)})}},a.validateEmail=function(a){var b=/\S+@\S+\.\S+/;return b.test(a)},a.validateUTM=function(a){var b=/^[a-zA-Z0-9_]+$/;return b.test(a)},a.addPage=function(){a.pages().length<15&&a.pages.push({page:"",type:"sub"})},a.parsePage=function(b,c){var d=c.target.value;-1!==d.indexOf("facebook.com/")?(a.utm()||a.utm(d.split("facebook.com/")[1].split("/")[0].replace(/[^0-9a-z]/gi,"")),a.source("facebook")):-1!==d.indexOf("twitter.com/")&&(a.utm()||a.utm(d.split("twitter.com/")[1].split("/")[0].replace(/[^0-9a-z]/gi,"")),a.source("twitter"))}},$(document).ready(function(){$(".page-template-partners-management").length>0&&(BoredPanda.Config.isStaffMember?(BoredPanda.Partners.viewModel=new BoredPanda.Partners.ViewModel,ko.applyBindings(BoredPanda.Partners.viewModel,$(".page-template-partners-management .left-content-column").get(0)),$("body").on("click",function(a){$(a.target).closest(".partner-modal").length<1&&!$(a.target).hasClass("partner-edit")&&$(".partner-modal").modal("hide")})):BoredPanda.Config.isLoggedIn||(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(window.location.href,void 0,BoredPanda.Translate.Signup.please_login))),$(".page-template-partners-dashboard").length>0&&BoredPanda.Config.isStaffMember?(BoredPanda.Partners.dashboard=new BoredPanda.Partners.Dashboard,ko.applyBindings(BoredPanda.Partners.dashboard,$(".page-template-partners-dashboard .left-content-column").get(0)),BoredPanda.Partners.dashboard.initSources(),BoredPanda.Partners.dashboard.source(BoredPanda.Utils.getParameterByName("source"))):!BoredPanda.Config.isLoggedIn&&$(".page-template-partners-dashboard").length>0&&(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(window.location.href,void 0,BoredPanda.Translate.Signup.please_login)),$(".page-template-utm-generator .utm-generator").length>0&&(BoredPanda.Partners.linkGenerator=new BoredPanda.Partners.LinkGenerator,BoredPanda.Partners.linkGenerator.utmCampaign(partnerName),ko.applyBindings(BoredPanda.Partners.linkGenerator,$(".page-template-utm-generator .utm-generator").get(0))),$(".page-template-partnership .contact").length>0&&(BoredPanda.Partners.partnershipForm=new BoredPanda.Partners.PartnershipForm,ko.applyBindings(BoredPanda.Partners.partnershipForm,$(".page-template-partnership .contact").get(0)))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.PostsFilter={},BoredPanda.PostsFilter.ViewModel=function(){var a=this;a.dateType=ko.observable(""),a.dateRange=ko.observable(""),a.dateFrom=ko.observable(""),a.dateTo=ko.observable(""),a.keyword=ko.observable(""),a.category=ko.observable(""),a.posts=ko.observable([]),a.order=ko.observable("trending"),a.showPositions=ko.observable(!1),a.showFacebookClicks=ko.observable(BoredPanda.Config.isStaffMember),a.filterButtonText=ko.observable("Filter"),a.emptyPostsError=ko.observable(!1),a.loadingSpinner=ko.observable(!1),a.exportLimit=ko.observable(""),a.utmLink=ko.observable(""),a.postType=ko.observable(""),a.cpcQuery=ko.observable(!1),a.limit=ko.observable(0),a.initPicker=function(){var b;b=a.cpcQuery()?moment().subtract(2,"years"):moment().subtract(6,"days");var c=moment();$(".rangepicker").daterangepicker({startDate:b,endDate:c,ranges:{Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Last Year":[moment().subtract(1,"year"),moment()]}},a.changeDate),a.changeDate(b,c),a.filter(!0)},a.changeDate=function(b,c){a.dateFrom(b.format("MM/DD/YYYY")),a.dateTo(c.format("MM/DD/YYYY")),a.dateRange(a.dateFrom()+" - "+a.dateTo())},a.resetFilter=function(){a.order("trending"),a.keyword(""),a.category(""),a.postType(""),a.filter(!0)},a.filter=function(b){a.loadingSpinner(!0),a.emptyPostsError(!1),a.posts([]),"recent"!==a.order()&&a.showPositions(!0),b!==!0&&"trending"===a.order()&&a.order("views");var c={action:"filter_posts_for_users",dateFrom:a.dateFrom(),dateTo:a.dateTo(),keyword:a.keyword(),category:a.category(),order:a.order(),limit:a.limit(),cpcQuery:a.cpcQuery(),postType:a.postType()},d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});a.filterButtonText("Filtering..."),d.done(function(b){b.data.length>0?(a.posts(b.data),a.utmLink(b.utm)):a.emptyPostsError(!0),a.filterButtonText("Filter"),a.loadingSpinner(!1)})},a.openModal=function(){$("#exportOptions").modal()},a.closeModal=function(){$("#exportOptions").modal("hide")},a.exportCsv=function(){var b="Post Link;Post Name;Post Views;Post date;Instant Article\n";a.utmLink()&&"?"!==a.utmLink()[0]&&a.utmLink("?"+a.utmLink());var c=a.exportLimit();(c>a.posts().length||!c)&&(c=a.posts().length);for(var d=0;c>d;d++)b+=a.posts()[d].post_url+a.utmLink()+";",b+=a.posts()[d].post_title+";",b+=a.posts()[d].pageviews+";",b+=a.posts()[d].post_date+";",b+="true"===a.posts()[d].instant_article?"Yes\n":"No\n";a.closeModal();var e=document.createElement("a"),f="text/csv",g="BoredPanda_Top_posts.csv";if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([b],{type:f}),g);if("download"in e)return e.href="data:"+f+","+encodeURIComponent(b),e.setAttribute("download",g),document.body.appendChild(e),e.click(),document.body.removeChild(e),!0;var h=document.createElement("iframe");return document.body.appendChild(h),h.src="data:"+f+","+encodeURIComponent(b),setTimeout(function(){document.body.removeChild(h)},333),!0}},$(document).ready(function(){$(".page-template-top-posts").length>0?BoredPanda.Config.isLoggedIn?(BoredPanda.PostsFilter.viewModel=new BoredPanda.PostsFilter.ViewModel,ko.applyBindings(BoredPanda.PostsFilter.viewModel,$(".page-template-top-posts .left-content-column").get(0)),BoredPanda.PostsFilter.viewModel.initPicker()):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,void 0,"Please log in to continue")):$(".page-template-recent-top-posts").length>0&&(BoredPanda.PostsFilter.viewModel=new BoredPanda.PostsFilter.ViewModel,ko.applyBindings(BoredPanda.PostsFilter.viewModel,$(".page-template-recent-top-posts .left-content-column").get(0)),BoredPanda.PostsFilter.viewModel.limit(50),BoredPanda.PostsFilter.viewModel.cpcQuery("true"),BoredPanda.PostsFilter.viewModel.initPicker())})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.PartnerAds={},BoredPanda.PartnerAds.ViewModel=function(){var a=this;a.dateRange=ko.observable(""),a.dateFrom=ko.observable(""),a.dateTo=ko.observable(""),a.keyword=ko.observable(""),a.category=ko.observable(""),a.posts=ko.observable([]),a.order=ko.observable("clicks"),a.filterButtonText=ko.observable("Filter"),a.emptyPostsError=ko.observable(!1),a.loadingSpinner=ko.observable(!1),a.pausedCampaigns=ko.observable(!1),a.status=ko.observable(""),a.errorText=ko.observable("No ads found."),a.limit=ko.observable(20),a.page=ko.observable(1),a.pages=ko.observable([]),a.oldFilterParameters=!1,a.startDate=moment("1970-01-01"),a.ajax=function(a){return $.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"})},a.init=function(){a.initPicker(),a.exitError(),a.setPartnerCampaignsSetting()},a.initPicker=function(){var b="Last Year",c=moment().subtract(1,"year"),d=moment();$(".rangepicker").daterangepicker({startDate:c,endDate:d,ranges:{"All dates":[a.startDate,a.startDate],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Last Year":[moment().subtract(1,"year"),moment()]}},a.changeDate),a.changeDate(c,d,b),a.filter()},a.setPages=function(a,b){for(var c=[],d=0;a>d;d++){var e={page:d+1,active:!1,visible:!0};d+1==b&&(e.active=!0),d>7&&a-6>d&&d+1!=b&&(e.visible=!1),c.push(e)}return c},a.setPosts=function(b,c){var d=[];return a.posts().forEach(function(a){var e={},f=Object.keys(a),g=Object.keys(c);f.forEach(function(d){a.id==b&&g.includes(d)?e[d]=c[d]:e[d]=a[d]}),d.push(e)}),d},a.changeDate=function(b,c,d){a.dateFrom(b.format("MM/DD/YYYY")),a.dateTo(c.format("MM/DD/YYYY")),a.dateRange(d)},a.resetFilter=function(){a.order("views"),a.keyword(""),a.category(""),a.status(""),a.filter(!0)},a.filter=function(){a.loadingSpinner(!0),a.emptyPostsError(!1),a.posts([]);var b={action:"filter_partner_ads",dateFrom:a.dateFrom()!==a.startDate.format("MM/DD/YYYY")?a.dateFrom():null,dateTo:a.dateTo()!==a.startDate.format("MM/DD/YYYY")?a.dateTo():null,keyword:a.keyword(),category:a.category(),limit:a.limit(),order:a.order(),status:a.status()};a.oldFilterParameters=b;var c=a.ajax(b);c.done(function(b){if(b.posts.length>0){a.posts(b.posts),a.page(1);var c=Math.ceil(b.count/a.limit()),d=a.setPages(c,a.page());a.pages(d)}else a.errorText("No ads found."),a.emptyPostsError(!0);a.loadingSpinner(!1)})},a.pauseAds=function(b,c){a.loadingSpinner(!0);var d=c.target,e=d.getAttribute("data-config-status"),f=d.getAttribute("data-post"),g={action:"pause_partner_post_ads",post_id:f,ads_status:e},h=a.ajax(g);h.done(function(b){if(b.success){var c={};c="1"==e?{config_status:2,active_button:"turn on"}:{config_status:1,active_button:"turn off"};var d=a.setPosts(f,c);a.posts(d),a.loadingSpinner(!1)}else a.errorText(b.errors),a.emptyPostsError(!0),a.loadingSpinner(!1)})},a.approvePostAds=function(b,c){a.loadingSpinner(!0);var d=c.target,e=d.getAttribute("data-post"),f={action:"approve_partner_post_ads",post_id:e},g=a.ajax(f);g.done(function(b){if(b.success){var c={config_status:3,status:"creating"},d=a.setPosts(e,c);a.posts(d),a.loadingSpinner(!1)}else a.errorText(b.errors),a.emptyPostsError(!0),a.loadingSpinner(!1)})},a.changePageRequest=function(b){var c=a.setPages(a.pages().length,b),d=a.oldFilterParameters;d.offset=(b-1)*a.limit();
var e=a.ajax(d);e.done(function(d){d.posts.length>0?(a.posts(d.posts),a.page(parseInt(b)),a.pages(c)):(a.errorText("No ads found."),a.emptyPostsError(!0)),a.loadingSpinner(!1)})},a.changePage=function(b,c){a.loadingSpinner(!0);var d=c.target,e=parseInt(d.getAttribute("data-page"));a.changePageRequest(e)},a.nextPage=function(){a.loadingSpinner(!0);var b=parseInt(a.page())+1;b>a.pages().length&&(b=1),a.changePageRequest(b)},a.prevPage=function(){a.loadingSpinner(!0);var b=parseInt(a.page())-1;1>b&&(b=a.pages().length),a.changePageRequest(b)},a.exitError=function(){$(document).on("click",".exit",function(){$(this).parent().hide()})},a.setPartnerCampaignsSetting=function(){var b=a.ajax({action:"get_partner_settings"});b.done(function(b){"undefined"!=typeof b.data&&"1"==b.data.pause_ads_campaigns&&a.pausedCampaigns(!0)})}},$(document).ready(function(){$(".page-template-top-ads").length>0&&(BoredPanda.Config.isLoggedIn?(BoredPanda.PartnerAds.viewModel=new BoredPanda.PartnerAds.ViewModel,ko.applyBindings(BoredPanda.PartnerAds.viewModel,$(".page-template-top-ads .left-content-column").get(0)),BoredPanda.PartnerAds.viewModel.init()):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,void 0,"Please log in to continue")))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.PartnersSettings={},BoredPanda.PartnersSettings.ViewModel=function(){var a=this;a.adsAutomaticCreation=ko.observable(null),a.pauseCampaigns=ko.observable(null),a.sending=!1,a.bool_map={"false":!1,"true":!0,0:!1,1:!0},a.map_config={adsAutomaticCreation:"manual_approve_ads",pauseCampaigns:"pause_ads_campaigns"},a.ajax=function(a){return $.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"})},a.init_partner_settings=function(){a.sending=!0;var b=a.ajax({action:"get_partner_settings"});b.done(function(b){"undefined"!=typeof b.data?Object.keys(a.map_config).forEach(function(c){"undefined"!=typeof b.data[a.map_config[c]]?a[c](a.bool_map[b.data[a.map_config[c]]]):a[c](!1)}):(a.adsAutomaticCreation(!1),a.pauseCampaigns(!1)),a.sending=!1})},a.change_partner_settings=function(b,c){var d=c.target,e=d.getAttribute("data-value"),f=d.getAttribute("data-type");if(!a.sending){a.sending=!0,a[f](a.bool_map[e]);var g={action:"change_partner_settings"};g[a.map_config[f]]=a[f]();var h=a.ajax(g);h.done(function(){a.sending=!1})}}},$(document).ready(function(){$(".partner-settings-template").length>0&&(BoredPanda.Config.isLoggedIn?(BoredPanda.PartnersSettings.viewModel=new BoredPanda.PartnersSettings.ViewModel,ko.applyBindings(BoredPanda.PartnersSettings.viewModel,$(".page-template-partners-settings .left-content-column").get(0)),BoredPanda.PartnersSettings.viewModel.init_partner_settings()):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,void 0,"Please log in to continue")))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.OpenListManagement={},BoredPanda.OpenListManagement.ViewModel=function(){var a=this;a.list_post_name=ko.observable(""),a.list_post_href=ko.observable(""),a.posts=ko.observableArray([]),a.show=ko.observable(!1),a.hideBelowIndex=ko.observable(50),a.success_msg=ko.observable(!1),a.loadingSpinner=ko.observable(!1),a.postUrls=ko.observableArray(),a.ajax=function(a,b){return b=b||"POST",$.ajax({type:b,url:ajax_object.ajax_url,data:a,dataType:"json"})},a.addPostUrl=function(){a.postUrls.push("")},a.savePostUrl=function(b,c){var d=$(".left-content-column").attr("data-list-id"),e=c.currentTarget.value,f=a.postUrls()[e];if(f){a.loadingSpinner(!0);var g={listId:d,postUrl:f,oldValue:b,action:"admin_save_open_list_post_url"};if(b!==f){var h=$.ajax({type:"POST",url:ajax_object.ajax_url,data:g,datatype:"json"});h.done(function(){c.currentTarget.innerHTML="Saved",a.loadingSpinner(!1)})}}},a.deletePostUrl=function(b,c){if(confirm("Are you sure?")){var d=a.postUrls();if(!b)return void a.postUrls(d.filter(function(a){return a}));a.loadingSpinner(!0);var e=$(".left-content-column").attr("data-list-id"),f={listId:e,oldValue:b,action:"admin_delete_open_list_post_url"},g=$.ajax({type:"POST",url:ajax_object.ajax_url,data:f,datatype:"json"});g.done(function(c){var e=d.indexOf(b);-1!==e&&(d.splice(e,1),a.postUrls(d)),a.loadingSpinner(!1)})}},a.getPostUrls=function(){var b=$(".left-content-column").attr("data-list-id"),c={listId:b,action:"admin_get_open_list_posts_url"},d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,datatype:"json"});d.done(function(b){"undefined"!=typeof b.urls&&a.postUrls(b.urls)})},a.filterOpenListImages=function(){a.loadingSpinner(!0),a.show(!1);var b={action:"filter_open_list_post",list_id:$(".left-content-column").attr("data-list-id"),list_type:$(".left-content-column").attr("data-list-type")},c=a.ajax(b,"GET");c.done(function(b){"undefined"!=typeof b.list.post_title&&(a.list_post_name(b.list.post_title),a.list_post_href(b.list.post_name)),b.posts.length>0&&a.posts(b.posts),a.loadingSpinner(!1),a.show(!0)})},a.getPostsValues=function(a){var b="";b=a?"input:checkbox:checked":"input:checkbox:not(:checked)";var c=[];return $(b).each(function(){c.push($(this).val())}),c},a.submitHidePosts=function(){a.loadingSpinner(!0);var b=a.getPostsValues(!0),c=a.getPostsValues(!1),d={action:"admin_hide_show_posts",hide_posts:b,show_posts:c},e=a.ajax(d);e.done(function(){$("html,body").animate({scrollTop:$(".open-list-management-template").offset().top},1e3),a.success_msg(!0),a.filterOpenListImages()})},a.hideBelow=function(){a.loadingSpinner(!0),$("input:checkbox").each(function(b,c){$(c).prop("checked",b>=a.hideBelowIndex())}),a.submitHidePosts()}},$(document).ready(function(){$(".open-list-management-template").length>0&&(BoredPanda.Config.isLoggedIn?(BoredPanda.OpenListManagement.viewModel=new BoredPanda.OpenListManagement.ViewModel,ko.applyBindings(BoredPanda.OpenListManagement.viewModel,$(".open-list-management-template .left-content-column").get(0)),BoredPanda.OpenListManagement.viewModel.filterOpenListImages(),BoredPanda.OpenListManagement.viewModel.getPostUrls()):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,void 0,"Please log in to continue")))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Approve={init:function(){this.approve(),this.disapprove(),this.banPostUser()},requestDone:{approve:function(a){a.find(".success").text("Post successfully approved."),a.find(".success").show()},disapprove:function(a){a.find(".success").text("Post was dissaproved."),a.find(".success").show()},ban:function(a){a.find(".success").text("Post user was banned."),a.find(".success").show()}},clickButton:function(a){var b=this;$(document).on("click","."+a,function(){var c=$(this).parent(),d=$(this).parent().find(".spinner"),e=$(this).parent().attr("data-post-id");c.find("button").prop("disabled",!0),c.find("button").hide().promise().done(function(){d.show()});var f={action:"post_approval",post_id:e,post_action:a},g=BoredPanda.Utils.wpAjax(f);g.done(function(e){e.success&&d.hide().promise().done(function(){b.requestDone[a](c)})})})},approve:function(){this.clickButton("approve")},disapprove:function(){this.clickButton("disapprove")},banPostUser:function(){this.clickButton("ban")}},BoredPanda.PostApproval={},BoredPanda.PostApproval.ViewModel=function(){var a=this;a.dateRange=ko.observable(""),a.dateFrom=ko.observable(""),a.dateTo=ko.observable(""),a.search=ko.observable(""),a.startDate=moment("01/01/1970"),a.endDAte=moment("01/01/4000"),a.label="All dates",a.init=function(){a.initPicker(),BoredPanda.Approve.init()},a.initPicker=function(){var b=$('input[name="date_to"]').attr("data-default"),c=$('input[name="date_from"]').attr("data-default");c||(c=a.startDate),b||(b=a.endDAte),a.dateFrom(c),a.dateTo(b),$(".rangepicker").daterangepicker({startDate:c,endDate:b,autoUpdateInput:!1,ranges:{"All dates":[a.startDate,a.endDAte],Yesterday:[moment().subtract(1,"days"),moment()],"Last 7 Days":[moment().subtract(6,"days"),moment().add(1,"days")],"Last 30 Days":[moment().subtract(29,"days"),moment().add(1,"days")],"This Month":[moment().startOf("month"),moment().endOf("month").add(1,"days")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month").add(1,"days")],"Last Year":[moment().subtract(1,"year"),moment().add(1,"days")]}},a.changeDate),a.changeDate(moment(c),moment(b))},a.changeDate=function(b,c){b=b.format("MM/DD/YYYY"),c=c.format("MM/DD/YYYY"),b!==a.startDate.format("MM/DD/YYYY")&&c!==a.endDAte.format("MM/DD/YYYY")?(a.dateFrom(b),a.dateTo(c),a.dateRange(a.dateFrom()+" - "+a.dateTo())):(a.dateFrom(""),a.dateTo(""),a.dateRange(a.label))}},$(document).ready(function(){$(".approve-posts").length>0&&(BoredPanda.Config.isLoggedIn?(BoredPanda.PostApproval.viewModel=new BoredPanda.PostApproval.ViewModel,ko.applyBindings(BoredPanda.PostApproval.viewModel,$(".approve-posts").get(0)),BoredPanda.PostApproval.viewModel.init()):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,void 0,"Please log in to continue")))})}();